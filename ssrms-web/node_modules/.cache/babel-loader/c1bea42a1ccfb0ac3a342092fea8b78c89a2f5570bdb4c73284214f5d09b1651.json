{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'LoginRegister',\n  data() {\n    return {\n      mode: 'login',\n      loginForm: {\n        account: '',\n        password: '',\n        role: 'student',\n        remember: true\n      },\n      registerForm: {\n        account: '',\n        studentNo: '',\n        name: '',\n        password: '',\n        confirmPassword: '',\n        role: 'student',\n        agree: false\n      },\n      showAgreement: false,\n      registerErrors: {\n        account: '',\n        password: '',\n        confirmPassword: ''\n      },\n      accountTimer: null\n    };\n  },\n  computed: {\n    isLogin() {\n      return this.mode === 'login';\n    }\n  },\n  methods: {\n    toast(type, msg) {\n      ElMessage({\n        type,\n        message: msg\n      });\n    },\n    switchMode(next) {\n      this.mode = next;\n      this.registerErrors.account = '';\n      this.registerErrors.password = '';\n      this.registerErrors.confirmPassword = '';\n      if (this.accountTimer) {\n        clearTimeout(this.accountTimer);\n        this.accountTimer = null;\n      }\n    },\n    handleForgot() {\n      this.toast('info', '忘记密码功能暂未实现，请联系管理员重置密码');\n    },\n    handleShowAgreement() {\n      this.showAgreement = true;\n    },\n    closeAgreement() {\n      this.showAgreement = false;\n    },\n    agreeAndClose() {\n      this.registerForm.agree = true;\n      this.showAgreement = false;\n    },\n    async handleLogin() {\n      if (!this.loginForm.account || !this.loginForm.password) {\n        this.toast('warning', '请填写账号和密码');\n        return;\n      }\n      const roleStr = this.loginForm.role || 'student';\n      try {\n        const resp = await this.$axios.post('/user/login', {\n          accountNo: this.loginForm.account,\n          password: this.loginForm.password,\n          role: roleStr\n        });\n        const r = resp && typeof resp === 'object' && 'status' in resp && 'data' in resp ? resp.data : resp;\n        console.log('raw resp =', resp);\n        console.log('body r =', r);\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`);\n        console.log('login response =', r);\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`);\n        if (!r || r.code !== 200) {\n          this.toast('error', r && (r.message || r.msg) || '登录失败');\n          return;\n        }\n        const token = r.data && r.data.token;\n        const user = r.data && r.data.user ? r.data.user : {};\n        const roleId = user.roleId !== undefined && user.roleId !== null ? user.roleId : user.role === 'admin' || roleStr === 'admin' ? 0 : 1;\n        const storeUser = {\n          ...user,\n          roleId\n        };\n\n        // “记住登录状态”要生效的话，用 storage 分流\n        const storage = this.loginForm.remember ? localStorage : sessionStorage;\n        storage.setItem('ssrmsUser', JSON.stringify(storeUser));\n        if (token) storage.setItem('ssrmsToken', token);\n        this.toast('success', '登录成功');\n        const redirect = this.$route?.query?.redirect;\n        if (redirect) this.$router.replace(redirect);else this.$router.replace(roleId === 0 ? '/admin' : '/user');\n      } catch (e) {\n        // 把真正的错误吐出来，别只说“端口不对”\n        const status = e?.response?.status;\n        const msg = e?.response?.data?.message || e?.message;\n        this.toast('error', status ? `登录失败(${status})：${msg}` : `登录失败：${msg}`);\n      }\n    },\n    async handleRegister() {\n      await this.checkAccountExists();\n      this.checkPasswordRules();\n      this.checkPasswordMatch();\n      if (this.registerErrors.account) return this.toast('error', this.registerErrors.account);\n      if (this.registerErrors.password) return this.toast('error', this.registerErrors.password);\n      if (this.registerErrors.confirmPassword) return this.toast('error', this.registerErrors.confirmPassword);\n\n      // ✅ 建议：跟你后端 User 表对齐 —— 账号就是 accountNo（学号/工号）\n      if (!this.registerForm.account || !this.registerForm.name) {\n        this.toast('warning', '请填写账号(学号/工号)和昵称');\n        return;\n      }\n      if (!this.registerForm.password || !this.registerForm.confirmPassword) {\n        this.toast('warning', '请设置并确认密码');\n        return;\n      }\n      if (!this.registerForm.agree) {\n        this.toast('warning', '请先阅读并同意用户协议');\n        return;\n      }\n      try {\n        // ⚠️ 这里不要再写 resp.data 了：r 就是后端返回的 {code,data,message}\n        const resp = await this.$axios.post('/user/register', {\n          accountNo: (this.registerForm.account || '').trim(),\n          userName: (this.registerForm.name || '').trim(),\n          password: this.registerForm.password,\n          role: this.registerForm.role\n        });\n        const r = resp && typeof resp === 'object' && 'status' in resp && 'data' in resp ? resp.data : resp;\n        console.log('register response =', r);\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`);\n        if (!r || r.code !== 200) {\n          const msg = r && (r.message || r.msg) || '注册失败';\n          if (String(msg).includes('账号') && String(msg).includes('存在')) this.registerErrors.account = '该账号已存在';\n          this.toast('error', msg);\n          return;\n        }\n        this.toast('success', '注册成功，请登录');\n        this.switchMode('login');\n      } catch (e) {\n        const status = e?.response?.status;\n        const msg = e?.response?.data?.message || e?.response?.data?.msg || e?.message;\n        this.toast('error', status ? `注册失败(${status})：${msg}` : `注册失败：${msg}`);\n      }\n    },\n    scheduleCheckAccount() {\n      if (this.mode !== 'register') return;\n      clearTimeout(this.accountTimer);\n      this.accountTimer = setTimeout(() => this.checkAccountExists(), 350);\n    },\n    async checkAccountExists() {\n      if (this.mode !== 'register') return;\n      const acc = (this.registerForm.account || '').trim();\n      if (!acc) {\n        this.registerErrors.account = '';\n        return;\n      }\n      try {\n        const resp = await this.$axios.get('/user/check-account', {\n          params: {\n            account: acc,\n            accountNo: acc\n          }\n        });\n        const res = resp && typeof resp === 'object' && 'status' in resp && 'data' in resp ? resp.data : resp;\n        const exists = res && typeof res === 'object' && 'code' in res ? res.data === true : res === true;\n        this.registerErrors.account = exists ? '该账号已存在' : '';\n      } catch (e) {\n        this.registerErrors.account = '';\n      }\n    },\n    checkPasswordRules() {\n      if (this.mode !== 'register') return;\n      const p = this.registerForm.password || '';\n      if (!p) {\n        this.registerErrors.password = '';\n        return;\n      }\n\n      // 只允许：大小写字母、数字、下划线\n      if (!/^[A-Za-z0-9_]+$/.test(p)) {\n        this.registerErrors.password = '不支持除字母、数字、_以外的字符';\n        return;\n      }\n      if (p.length < 6) {\n        this.registerErrors.password = '密码长度至少6位';\n        return;\n      }\n      this.registerErrors.password = '';\n    },\n    checkPasswordMatch() {\n      const p1 = this.registerForm.password || '';\n      const p2 = this.registerForm.confirmPassword || '';\n      if (!p2) {\n        this.registerErrors.confirmPassword = '';\n        return;\n      }\n      this.registerErrors.confirmPassword = p1 !== p2 ? '密码不同' : '';\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","name","data","mode","loginForm","account","password","role","remember","registerForm","studentNo","confirmPassword","agree","showAgreement","registerErrors","accountTimer","computed","isLogin","methods","toast","type","msg","message","switchMode","next","clearTimeout","handleForgot","handleShowAgreement","closeAgreement","agreeAndClose","handleLogin","roleStr","resp","$axios","post","accountNo","r","console","log","code","token","user","roleId","undefined","storeUser","storage","localStorage","sessionStorage","setItem","JSON","stringify","redirect","$route","query","$router","replace","e","status","response","handleRegister","checkAccountExists","checkPasswordRules","checkPasswordMatch","trim","userName","String","includes","scheduleCheckAccount","setTimeout","acc","get","params","res","exists","p","test","length","p1","p2"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\LoginRegister.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-page\">\r\n    <div class=\"auth-wrapper\">\r\n      <!-- 左侧：登录/注册 -->\r\n      <div class=\"auth-left\">\r\n        <div class=\"auth-logo-row\">\r\n          <div class=\"logo-icon\">\r\n            <span class=\"logo-initial\">自</span>\r\n          </div>\r\n          <div class=\"logo-text\">\r\n            <div class=\"logo-title\">自习室预约系统</div>\r\n            <div class=\"logo-subtitle\">Study Room Reservation</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"auth-card\">\r\n          <div class=\"mode-toggle\">\r\n            <button type=\"button\" class=\"mode-btn\" :class=\"{ active: isLogin }\" @click=\"switchMode('login')\">登录</button>\r\n            <button type=\"button\" class=\"mode-btn\" :class=\"{ active: !isLogin }\" @click=\"switchMode('register')\">注册</button>\r\n          </div>\r\n\r\n          <!-- 登录 -->\r\n          <form v-if=\"isLogin\" class=\"auth-form\" @submit.prevent=\"handleLogin\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">账号</label>\r\n              <input v-model=\"loginForm.account\" class=\"form-input\" type=\"text\" placeholder=\"请输入账号\" />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">密码</label>\r\n              <input v-model=\"loginForm.password\" class=\"form-input\" type=\"password\" placeholder=\"请输入密码\" />\r\n            </div>\r\n\r\n            <div class=\"form-group form-inline\">\r\n              <span class=\"form-label-inline\">登录身份</span>\r\n              <label class=\"radio-label\">\r\n                <input type=\"radio\" value=\"student\" v-model=\"loginForm.role\" />\r\n                学生用户\r\n              </label>\r\n              <label class=\"radio-label\">\r\n                <input type=\"radio\" value=\"admin\" v-model=\"loginForm.role\" />\r\n                管理员\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"form-helper\">\r\n              <label class=\"check-label\">\r\n                <input type=\"checkbox\" v-model=\"loginForm.remember\" />\r\n                记住登录状态\r\n              </label>\r\n              <button type=\"button\" class=\"link-btn\" @click.prevent=\"handleForgot\">忘记密码？</button>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"primary-btn\">登录</button>\r\n\r\n            <div class=\"bottom-tip\">\r\n              还没有账号？\r\n              <button type=\"button\" class=\"link-btn\" @click=\"switchMode('register')\">立即注册</button>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- 注册 -->\r\n          <form v-else class=\"auth-form\" @submit.prevent=\"handleRegister\">\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">账号</label>\r\n              <input\r\n                  v-model=\"registerForm.account\"\r\n                  class=\"form-input\"\r\n                  type=\"text\"\r\n                  placeholder=\"请输入账号\"\r\n                  @input=\"scheduleCheckAccount\"\r\n                  @blur=\"checkAccountExists\"\r\n              />\r\n              <div v-if=\"registerErrors.account\" class=\"field-error\">{{ registerErrors.account }}</div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">学号</label>\r\n              <input v-model=\"registerForm.studentNo\" class=\"form-input\" type=\"text\" placeholder=\"请输入学号\" />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">昵称</label>\r\n              <input v-model=\"registerForm.name\" class=\"form-input\" type=\"text\" placeholder=\"请输入昵称\" />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">设置密码</label>\r\n              <input\r\n                  v-model=\"registerForm.password\"\r\n                  class=\"form-input\"\r\n                  type=\"password\"\r\n                  placeholder=\"至少 6 位，仅支持字母/数字/_\"\r\n                  @input=\"checkPasswordRules(); checkPasswordMatch()\"\r\n                  @blur=\"checkPasswordRules\"\r\n              />\r\n              <div v-if=\"registerErrors.password\" class=\"field-error\">{{ registerErrors.password }}</div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">确认密码</label>\r\n              <input\r\n                  v-model=\"registerForm.confirmPassword\"\r\n                  class=\"form-input\"\r\n                  type=\"password\"\r\n                  placeholder=\"请再次输入密码\"\r\n                  @input=\"checkPasswordMatch\"\r\n              />\r\n              <div v-if=\"registerErrors.confirmPassword\" class=\"field-error\">{{ registerErrors.confirmPassword }}</div>\r\n            </div>\r\n\r\n            <div class=\"form-group form-inline\">\r\n              <span class=\"form-label-inline\">注册身份</span>\r\n              <label class=\"radio-label\">\r\n                <input type=\"radio\" value=\"student\" v-model=\"registerForm.role\" />\r\n                学生用户\r\n              </label>\r\n              <label class=\"radio-label\">\r\n                <input type=\"radio\" value=\"admin\" v-model=\"registerForm.role\" />\r\n                管理员\r\n              </label>\r\n            </div>\r\n\r\n            <div class=\"form-helper\" style=\"justify-content:flex-start;\">\r\n              <label class=\"check-label\">\r\n                <input type=\"checkbox\" v-model=\"registerForm.agree\" />\r\n                已阅读并同意\r\n                <button type=\"button\" class=\"link-btn\" @click.prevent=\"handleShowAgreement\">《用户协议》</button>\r\n              </label>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"primary-btn\">注册</button>\r\n\r\n            <div class=\"bottom-tip\">\r\n              已有账号？\r\n              <button type=\"button\" class=\"link-btn\" @click=\"switchMode('login')\">直接登录</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧文案 -->\r\n      <div class=\"auth-right\">\r\n        <div class=\"slogan-block\">\r\n          <h2 class=\"slogan-title\">预约自习室的最佳通用解决方案</h2>\r\n          <p class=\"slogan-desc\">统一的自习室预约平台，让学生轻松选座，管理员高效管理场地和预约。</p>\r\n          <ul class=\"slogan-list\">\r\n            <li>· 支持多校区、多楼栋、多自习室统一管理</li>\r\n            <li>· 支持预约、签到、违约处理与信用分统计</li>\r\n            <li>· 预留 API 接口，方便与学校现有系统对接</li>\r\n          </ul>\r\n          <div class=\"slogan-sign\">—— SSRMS</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 用户协议弹窗 -->\r\n      <div v-if=\"showAgreement\" class=\"agreement-mask\" @click.self=\"closeAgreement\">\r\n        <div class=\"agreement-dialog\">\r\n          <div class=\"agreement-header\">\r\n            <h3 class=\"agreement-title\">自习室预约系统用户协议</h3>\r\n            <button class=\"agreement-close\" type=\"button\" @click=\"closeAgreement\">×</button>\r\n          </div>\r\n\r\n          <div class=\"agreement-body\">\r\n            <div class=\"agreement-scroll\">\r\n              <p><b>1. 协议说明</b></p>\r\n              <p>本协议适用于自习室预约系统（以下简称“本系统”）提供的账号注册、登录、预约、签到、取消、违约处理、信用分管理等服务。用户注册或使用本系统即视为已阅读并同意本协议。</p>\r\n\r\n              <p><b>2. 账号与信息</b></p>\r\n              <p>用户应提供真实、准确、完整的注册信息，并妥善保管账号与密码。因账号泄露或密码保管不当造成的损失由用户自行承担。</p>\r\n\r\n              <p><b>3. 预约与签到规则</b></p>\r\n              <p>用户应按预约时间到场并完成签到。若系统或管理员设置了签到时限、迟到规则、自动释放规则等，用户应遵守相应要求。自习室资源有限，请合理预约、按需取消。</p>\r\n\r\n              <p><b>4. 违约与信用分</b></p>\r\n              <p>出现以下情形可能被判定为违约：预约后未按规定时间签到、恶意占座、频繁占用资源影响他人等。系统可依据规则对用户进行提醒、扣减信用分、限制预约、加入黑名单等处理。</p>\r\n\r\n              <p><b>5. 禁止行为</b></p>\r\n              <p>用户不得利用本系统从事任何违法违规行为，不得恶意攻击系统、刷接口、伪造签到、干扰座位状态或影响其他用户正常使用。</p>\r\n\r\n              <p><b>6. 数据与隐私</b></p>\r\n              <p>本系统会在提供服务所必需的范围内收集并处理用户信息（如学号、姓名、预约记录、签到记录、违约记录等），用于账号管理与服务改进。未经授权，本系统不会向无关第三方泄露用户信息，但法律法规另有规定或司法/行政机关依法要求的除外。</p>\r\n\r\n              <p><b>7. 免责声明</b></p>\r\n              <p>因不可抗力、网络故障、设备故障、系统维护升级等原因导致服务中断或数据延迟，本系统将尽力修复与恢复，但不对因此造成的间接损失承担责任。</p>\r\n\r\n              <p><b>8. 协议变更</b></p>\r\n              <p>本系统有权根据运营需要更新本协议。更新后的协议将以公告、弹窗或页面提示等方式告知，用户继续使用即视为接受变更。</p>\r\n\r\n              <p><b>9. 联系方式</b></p>\r\n              <p>如对本协议或系统使用有疑问，请联系系统管理员或学校相关管理部门。</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"agreement-footer\">\r\n            <button type=\"button\" class=\"primary-btn primary-btn-small\" @click=\"agreeAndClose\">\r\n              我已阅读并同意\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'LoginRegister',\r\n  data () {\r\n    return {\r\n      mode: 'login',\r\n\r\n      loginForm: { account: '', password: '', role: 'student', remember: true },\r\n\r\n      registerForm: {\r\n        account: '',\r\n        studentNo: '',\r\n        name: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        role: 'student',\r\n        agree: false\r\n      },\r\n\r\n      showAgreement: false,\r\n\r\n      registerErrors: {\r\n        account: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n      },\r\n\r\n      accountTimer: null\r\n    }\r\n  },\r\n  computed: {\r\n    isLogin () {\r\n      return this.mode === 'login'\r\n    }\r\n  },\r\n  methods: {\r\n    toast (type, msg) {\r\n      ElMessage({ type, message: msg })\r\n    },\r\n\r\n    switchMode (next) {\r\n      this.mode = next\r\n      this.registerErrors.account = ''\r\n      this.registerErrors.password = ''\r\n      this.registerErrors.confirmPassword = ''\r\n      if (this.accountTimer) {\r\n        clearTimeout(this.accountTimer)\r\n        this.accountTimer = null\r\n      }\r\n    },\r\n\r\n    handleForgot () {\r\n      this.toast('info', '忘记密码功能暂未实现，请联系管理员重置密码')\r\n    },\r\n\r\n    handleShowAgreement () { this.showAgreement = true },\r\n    closeAgreement () { this.showAgreement = false },\r\n    agreeAndClose () {\r\n      this.registerForm.agree = true\r\n      this.showAgreement = false\r\n    },\r\n\r\n    async handleLogin () {\r\n      if (!this.loginForm.account || !this.loginForm.password) {\r\n        this.toast('warning', '请填写账号和密码')\r\n        return\r\n      }\r\n\r\n      const roleStr = this.loginForm.role || 'student'\r\n\r\n      try {\r\n        const resp = await this.$axios.post('/user/login', {\r\n          accountNo: this.loginForm.account,\r\n          password: this.loginForm.password,\r\n          role: roleStr\r\n        })\r\n\r\n        const r = (resp && typeof resp === 'object' && 'status' in resp && 'data' in resp) ? resp.data : resp\r\n\r\n        console.log('raw resp =', resp)\r\n        console.log('body r =', r)\r\n\r\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`)\r\n\r\n        console.log('login response =', r)\r\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`)\r\n\r\n        if (!r || r.code !== 200) {\r\n          this.toast('error', (r && (r.message || r.msg)) || '登录失败')\r\n          return\r\n        }\r\n\r\n        const token = r.data && r.data.token\r\n        const user = (r.data && r.data.user) ? r.data.user : {}\r\n\r\n        const roleId = (user.roleId !== undefined && user.roleId !== null)\r\n            ? user.roleId\r\n            : ((user.role === 'admin' || roleStr === 'admin') ? 0 : 1)\r\n\r\n        const storeUser = { ...user, roleId }\r\n\r\n        // “记住登录状态”要生效的话，用 storage 分流\r\n        const storage = this.loginForm.remember ? localStorage : sessionStorage\r\n        storage.setItem('ssrmsUser', JSON.stringify(storeUser))\r\n        if (token) storage.setItem('ssrmsToken', token)\r\n\r\n        this.toast('success', '登录成功')\r\n        const redirect = this.$route?.query?.redirect\r\n        if (redirect) this.$router.replace(redirect)\r\n        else this.$router.replace(roleId === 0 ? '/admin' : '/user')\r\n      } catch (e) {\r\n        // 把真正的错误吐出来，别只说“端口不对”\r\n        const status = e?.response?.status\r\n        const msg = e?.response?.data?.message || e?.message\r\n        this.toast('error', status ? `登录失败(${status})：${msg}` : `登录失败：${msg}`)\r\n      }\r\n    },\r\n\r\n    async handleRegister () {\r\n      await this.checkAccountExists()\r\n      this.checkPasswordRules()\r\n      this.checkPasswordMatch()\r\n\r\n      if (this.registerErrors.account) return this.toast('error', this.registerErrors.account)\r\n      if (this.registerErrors.password) return this.toast('error', this.registerErrors.password)\r\n      if (this.registerErrors.confirmPassword) return this.toast('error', this.registerErrors.confirmPassword)\r\n\r\n      // ✅ 建议：跟你后端 User 表对齐 —— 账号就是 accountNo（学号/工号）\r\n      if (!this.registerForm.account || !this.registerForm.name) {\r\n        this.toast('warning', '请填写账号(学号/工号)和昵称')\r\n        return\r\n      }\r\n      if (!this.registerForm.password || !this.registerForm.confirmPassword) {\r\n        this.toast('warning', '请设置并确认密码')\r\n        return\r\n      }\r\n      if (!this.registerForm.agree) {\r\n        this.toast('warning', '请先阅读并同意用户协议')\r\n        return\r\n      }\r\n\r\n      try {\r\n        // ⚠️ 这里不要再写 resp.data 了：r 就是后端返回的 {code,data,message}\r\n        const resp = await this.$axios.post('/user/register', {\r\n          accountNo: (this.registerForm.account || '').trim(),\r\n          userName: (this.registerForm.name || '').trim(),\r\n          password: this.registerForm.password,\r\n          role: this.registerForm.role\r\n        })\r\n        const r = (resp && typeof resp === 'object' && 'status' in resp && 'data' in resp) ? resp.data : resp\r\n\r\n        console.log('register response =', r)\r\n        this.toast('info', `code=${r?.code}, msg=${r?.message || r?.msg}`)\r\n\r\n        if (!r || r.code !== 200) {\r\n          const msg = (r && (r.message || r.msg)) || '注册失败'\r\n          if (String(msg).includes('账号') && String(msg).includes('存在')) this.registerErrors.account = '该账号已存在'\r\n          this.toast('error', msg)\r\n          return\r\n        }\r\n\r\n        this.toast('success', '注册成功，请登录')\r\n        this.switchMode('login')\r\n      } catch (e) {\r\n        const status = e?.response?.status\r\n        const msg = e?.response?.data?.message || e?.response?.data?.msg || e?.message\r\n        this.toast('error', status ? `注册失败(${status})：${msg}` : `注册失败：${msg}`)\r\n      }\r\n    },\r\n\r\n    scheduleCheckAccount () {\r\n      if (this.mode !== 'register') return\r\n      clearTimeout(this.accountTimer)\r\n      this.accountTimer = setTimeout(() => this.checkAccountExists(), 350)\r\n    },\r\n\r\n    async checkAccountExists () {\r\n      if (this.mode !== 'register') return\r\n      const acc = (this.registerForm.account || '').trim()\r\n      if (!acc) {\r\n        this.registerErrors.account = ''\r\n        return\r\n      }\r\n      try {\r\n        const resp = await this.$axios.get('/user/check-account', { params: { account: acc, accountNo: acc } })\r\n        const res = (resp && typeof resp === 'object' && 'status' in resp && 'data' in resp) ? resp.data : resp\r\n        \r\n        const exists = (res && typeof res === 'object' && 'code' in res)\r\n            ? (res.data === true)\r\n            : (res === true)\r\n\r\n        this.registerErrors.account = exists ? '该账号已存在' : ''\r\n      } catch (e) {\r\n        this.registerErrors.account = ''\r\n      }\r\n    },\r\n\r\n    checkPasswordRules () {\r\n      if (this.mode !== 'register') return\r\n      const p = this.registerForm.password || ''\r\n\r\n      if (!p) {\r\n        this.registerErrors.password = ''\r\n        return\r\n      }\r\n\r\n      // 只允许：大小写字母、数字、下划线\r\n      if (!/^[A-Za-z0-9_]+$/.test(p)) {\r\n        this.registerErrors.password = '不支持除字母、数字、_以外的字符'\r\n        return\r\n      }\r\n\r\n      if (p.length < 6) {\r\n        this.registerErrors.password = '密码长度至少6位'\r\n        return\r\n      }\r\n\r\n      this.registerErrors.password = ''\r\n    },\r\n\r\n    checkPasswordMatch () {\r\n      const p1 = this.registerForm.password || ''\r\n      const p2 = this.registerForm.confirmPassword || ''\r\n\r\n      if (!p2) {\r\n        this.registerErrors.confirmPassword = ''\r\n        return\r\n      }\r\n      this.registerErrors.confirmPassword = (p1 !== p2) ? '密码不同' : ''\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-page {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40px 16px;\r\n}\r\n\r\n.auth-wrapper {\r\n  display: flex;\r\n  width: 1040px;\r\n  max-width: 96vw;\r\n  min-height: 540px;\r\n  max-height: calc(100vh - 80px);\r\n  border-radius: 26px;\r\n  overflow: hidden;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 30px 80px rgba(15, 23, 42, 0.35);\r\n}\r\n\r\n.auth-left {\r\n  flex: 1;\r\n  background-color: #f9fafb;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 40px 56px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.auth-logo-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.logo-icon {\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 14px;\r\n  background: #2563eb;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #ffffff;\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n  box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4);\r\n}\r\n\r\n.logo-initial { transform: translateY(1px); }\r\n\r\n.logo-text { margin-left: 12px; }\r\n.logo-title { font-size: 18px; font-weight: 600; color: #111827; }\r\n.logo-subtitle { font-size: 12px; color: #9ca3af; }\r\n\r\n.auth-card { max-width: 420px; }\r\n\r\n.mode-toggle {\r\n  display: inline-flex;\r\n  padding: 4px;\r\n  border-radius: 999px;\r\n  background-color: rgba(15, 23, 42, 0.04);\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.mode-btn {\r\n  border: none;\r\n  background: transparent;\r\n  padding: 6px 22px;\r\n  border-radius: 999px;\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n  cursor: pointer;\r\n  transition: all 0.15s ease;\r\n}\r\n\r\n.mode-btn.active {\r\n  background-color: #ffffff;\r\n  color: #111827;\r\n  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.16);\r\n}\r\n\r\n.auth-title {\r\n  margin: 4px 0 6px;\r\n  font-size: 26px;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.auth-desc {\r\n  margin: 0 0 18px;\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n}\r\n\r\n.auth-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 14px;\r\n}\r\n\r\n.form-group { display: flex; flex-direction: column; }\r\n.form-label { font-size: 13px; color: #4b5563; margin-bottom: 6px; }\r\n.form-label-inline { font-size: 13px; color: #4b5563; margin-right: 8px; }\r\n\r\n.form-input {\r\n  border-radius: 10px;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 10px 14px;\r\n  font-size: 14px;\r\n  outline: none;\r\n  background-color: #ffffff;\r\n  transition: border-color 0.15s ease, box-shadow 0.15s ease;\r\n}\r\n\r\n.form-input:focus {\r\n  border-color: #2563eb;\r\n  box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.2);\r\n}\r\n\r\n.form-inline {\r\n  flex-direction: row;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n}\r\n\r\n.radio-label {\r\n  font-size: 13px;\r\n  color: #4b5563;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.check-label {\r\n  font-size: 12px;\r\n  color: #4b5563;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.form-helper {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.primary-btn {\r\n  margin-top: 4px;\r\n  width: 100%;\r\n  height: 44px;\r\n  border-radius: 999px;\r\n  border: none;\r\n  background: linear-gradient(90deg, #2563eb, #1d4ed8);\r\n  color: #ffffff;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  box-shadow: 0 12px 30px rgba(37, 99, 235, 0.45);\r\n  transition: transform 0.12s ease, box-shadow 0.12s ease;\r\n}\r\n\r\n.primary-btn:hover { transform: translateY(-1px); box-shadow: 0 16px 36px rgba(37, 99, 235, 0.55); }\r\n.primary-btn:active { transform: translateY(0); box-shadow: 0 8px 22px rgba(37, 99, 235, 0.4); }\r\n\r\n.primary-btn-small { width: auto; min-width: 140px; height: 38px; font-size: 14px; }\r\n\r\n.link-btn {\r\n  border: none;\r\n  background: transparent;\r\n  padding: 0;\r\n  font-size: 12px;\r\n  color: #2563eb;\r\n  cursor: pointer;\r\n}\r\n\r\n.bottom-tip { margin-top: 6px; font-size: 12px; color: #6b7280; }\r\n\r\n.auth-right {\r\n  flex: 1;\r\n  background: radial-gradient(circle at 0% 0%, #1f2937, #020617),\r\n  radial-gradient(circle at 100% 10%, #1d4ed8, #020617);\r\n  color: #ffffff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 48px 60px;\r\n}\r\n\r\n.slogan-block { max-width: 420px; }\r\n.slogan-title { font-size: 26px; font-weight: 700; margin: 0 0 12px; }\r\n.slogan-desc { font-size: 14px; opacity: 0.9; margin: 0 0 16px; }\r\n.slogan-list { list-style: none; padding: 0; margin: 0 0 14px; font-size: 13px; opacity: 0.95; }\r\n.slogan-list li { margin-bottom: 4px; }\r\n.slogan-sign { font-size: 13px; opacity: 0.9; margin-top: 2px; }\r\n\r\n.field-error { margin-top: 6px; font-size: 12px; color: #ef4444; }\r\n\r\n/* 协议弹窗 */\r\n.agreement-mask {\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(15, 23, 42, 0.45);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 999;\r\n}\r\n\r\n.agreement-dialog {\r\n  width: 720px;\r\n  max-width: 95vw;\r\n  max-height: 80vh;\r\n  background: #ffffff;\r\n  border-radius: 18px;\r\n  box-shadow: 0 24px 60px rgba(15, 23, 42, 0.45);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.agreement-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 14px 20px;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n\r\n.agreement-title { margin: 0; font-size: 16px; font-weight: 600; color: #111827; }\r\n\r\n.agreement-close {\r\n  border: none;\r\n  background: transparent;\r\n  font-size: 20px;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  color: #6b7280;\r\n}\r\n\r\n.agreement-close:hover { color: #111827; }\r\n\r\n.agreement-body { padding: 12px 20px 4px; flex: 1; }\r\n\r\n.agreement-scroll {\r\n  max-height: 54vh;\r\n  overflow-y: auto;\r\n  font-size: 13px;\r\n  color: #4b5563;\r\n  line-height: 1.7;\r\n}\r\n\r\n.agreement-scroll p { margin: 6px 0; }\r\n\r\n.agreement-footer {\r\n  padding: 10px 20px 16px;\r\n  border-top: 1px solid #e5e7eb;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/* 窄屏适配 */\r\n@media (max-width: 960px) {\r\n  .auth-wrapper { flex-direction: column; height: auto; max-height: none; width: 100%; border-radius: 0; }\r\n  .auth-left { padding: 24px 20px 18px; overflow-y: visible; }\r\n  .auth-card { max-width: 100%; }\r\n  .auth-right { padding: 24px 24px 32px; }\r\n}\r\n</style>"],"mappings":";AA+MA,SAASA,SAAQ,QAAS,cAAa;AAEvC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,IAAI,EAAE,OAAO;MAEbC,SAAS,EAAE;QAAEC,OAAO,EAAE,EAAE;QAAEC,QAAQ,EAAE,EAAE;QAAEC,IAAI,EAAE,SAAS;QAAEC,QAAQ,EAAE;MAAK,CAAC;MAEzEC,YAAY,EAAE;QACZJ,OAAO,EAAE,EAAE;QACXK,SAAS,EAAE,EAAE;QACbT,IAAI,EAAE,EAAE;QACRK,QAAQ,EAAE,EAAE;QACZK,eAAe,EAAE,EAAE;QACnBJ,IAAI,EAAE,SAAS;QACfK,KAAK,EAAE;MACT,CAAC;MAEDC,aAAa,EAAE,KAAK;MAEpBC,cAAc,EAAE;QACdT,OAAO,EAAE,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZK,eAAe,EAAE;MACnB,CAAC;MAEDI,YAAY,EAAE;IAChB;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,OAAMA,CAAA,EAAK;MACT,OAAO,IAAI,CAACd,IAAG,KAAM,OAAM;IAC7B;EACF,CAAC;EACDe,OAAO,EAAE;IACPC,KAAIA,CAAGC,IAAI,EAAEC,GAAG,EAAE;MAChBrB,SAAS,CAAC;QAAEoB,IAAI;QAAEE,OAAO,EAAED;MAAI,CAAC;IAClC,CAAC;IAEDE,UAASA,CAAGC,IAAI,EAAE;MAChB,IAAI,CAACrB,IAAG,GAAIqB,IAAG;MACf,IAAI,CAACV,cAAc,CAACT,OAAM,GAAI,EAAC;MAC/B,IAAI,CAACS,cAAc,CAACR,QAAO,GAAI,EAAC;MAChC,IAAI,CAACQ,cAAc,CAACH,eAAc,GAAI,EAAC;MACvC,IAAI,IAAI,CAACI,YAAY,EAAE;QACrBU,YAAY,CAAC,IAAI,CAACV,YAAY;QAC9B,IAAI,CAACA,YAAW,GAAI,IAAG;MACzB;IACF,CAAC;IAEDW,YAAWA,CAAA,EAAK;MACd,IAAI,CAACP,KAAK,CAAC,MAAM,EAAE,uBAAuB;IAC5C,CAAC;IAEDQ,mBAAkBA,CAAA,EAAK;MAAE,IAAI,CAACd,aAAY,GAAI,IAAG;IAAE,CAAC;IACpDe,cAAaA,CAAA,EAAK;MAAE,IAAI,CAACf,aAAY,GAAI,KAAI;IAAE,CAAC;IAChDgB,aAAYA,CAAA,EAAK;MACf,IAAI,CAACpB,YAAY,CAACG,KAAI,GAAI,IAAG;MAC7B,IAAI,CAACC,aAAY,GAAI,KAAI;IAC3B,CAAC;IAED,MAAMiB,WAAUA,CAAA,EAAK;MACnB,IAAI,CAAC,IAAI,CAAC1B,SAAS,CAACC,OAAM,IAAK,CAAC,IAAI,CAACD,SAAS,CAACE,QAAQ,EAAE;QACvD,IAAI,CAACa,KAAK,CAAC,SAAS,EAAE,UAAU;QAChC;MACF;MAEA,MAAMY,OAAM,GAAI,IAAI,CAAC3B,SAAS,CAACG,IAAG,IAAK,SAAQ;MAE/C,IAAI;QACF,MAAMyB,IAAG,GAAI,MAAM,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,aAAa,EAAE;UACjDC,SAAS,EAAE,IAAI,CAAC/B,SAAS,CAACC,OAAO;UACjCC,QAAQ,EAAE,IAAI,CAACF,SAAS,CAACE,QAAQ;UACjCC,IAAI,EAAEwB;QACR,CAAC;QAED,MAAMK,CAAA,GAAKJ,IAAG,IAAK,OAAOA,IAAG,KAAM,QAAO,IAAK,QAAO,IAAKA,IAAG,IAAK,MAAK,IAAKA,IAAI,GAAIA,IAAI,CAAC9B,IAAG,GAAI8B,IAAG;QAEpGK,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEN,IAAI;QAC9BK,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,CAAC;QAEzB,IAAI,CAACjB,KAAK,CAAC,MAAM,EAAE,QAAQiB,CAAC,EAAEG,IAAI,SAASH,CAAC,EAAEd,OAAM,IAAKc,CAAC,EAAEf,GAAG,EAAE;QAEjEgB,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEF,CAAC;QACjC,IAAI,CAACjB,KAAK,CAAC,MAAM,EAAE,QAAQiB,CAAC,EAAEG,IAAI,SAASH,CAAC,EAAEd,OAAM,IAAKc,CAAC,EAAEf,GAAG,EAAE;QAEjE,IAAI,CAACe,CAAA,IAAKA,CAAC,CAACG,IAAG,KAAM,GAAG,EAAE;UACxB,IAAI,CAACpB,KAAK,CAAC,OAAO,EAAGiB,CAAA,KAAMA,CAAC,CAACd,OAAM,IAAKc,CAAC,CAACf,GAAG,CAAC,IAAK,MAAM;UACzD;QACF;QAEA,MAAMmB,KAAI,GAAIJ,CAAC,CAAClC,IAAG,IAAKkC,CAAC,CAAClC,IAAI,CAACsC,KAAI;QACnC,MAAMC,IAAG,GAAKL,CAAC,CAAClC,IAAG,IAAKkC,CAAC,CAAClC,IAAI,CAACuC,IAAI,GAAIL,CAAC,CAAClC,IAAI,CAACuC,IAAG,GAAI,CAAC;QAEtD,MAAMC,MAAK,GAAKD,IAAI,CAACC,MAAK,KAAMC,SAAQ,IAAKF,IAAI,CAACC,MAAK,KAAM,IAAI,GAC3DD,IAAI,CAACC,MAAK,GACRD,IAAI,CAAClC,IAAG,KAAM,OAAM,IAAKwB,OAAM,KAAM,OAAO,GAAI,IAAI,CAAC;QAE7D,MAAMa,SAAQ,GAAI;UAAE,GAAGH,IAAI;UAAEC;QAAO;;QAEpC;QACA,MAAMG,OAAM,GAAI,IAAI,CAACzC,SAAS,CAACI,QAAO,GAAIsC,YAAW,GAAIC,cAAa;QACtEF,OAAO,CAACG,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACN,SAAS,CAAC;QACtD,IAAIJ,KAAK,EAAEK,OAAO,CAACG,OAAO,CAAC,YAAY,EAAER,KAAK;QAE9C,IAAI,CAACrB,KAAK,CAAC,SAAS,EAAE,MAAM;QAC5B,MAAMgC,QAAO,GAAI,IAAI,CAACC,MAAM,EAAEC,KAAK,EAAEF,QAAO;QAC5C,IAAIA,QAAQ,EAAE,IAAI,CAACG,OAAO,CAACC,OAAO,CAACJ,QAAQ,OACtC,IAAI,CAACG,OAAO,CAACC,OAAO,CAACb,MAAK,KAAM,IAAI,QAAO,GAAI,OAAO;MAC7D,EAAE,OAAOc,CAAC,EAAE;QACV;QACA,MAAMC,MAAK,GAAID,CAAC,EAAEE,QAAQ,EAAED,MAAK;QACjC,MAAMpC,GAAE,GAAImC,CAAC,EAAEE,QAAQ,EAAExD,IAAI,EAAEoB,OAAM,IAAKkC,CAAC,EAAElC,OAAM;QACnD,IAAI,CAACH,KAAK,CAAC,OAAO,EAAEsC,MAAK,GAAI,QAAQA,MAAM,KAAKpC,GAAG,EAAC,GAAI,QAAQA,GAAG,EAAE;MACvE;IACF,CAAC;IAED,MAAMsC,cAAaA,CAAA,EAAK;MACtB,MAAM,IAAI,CAACC,kBAAkB,CAAC;MAC9B,IAAI,CAACC,kBAAkB,CAAC;MACxB,IAAI,CAACC,kBAAkB,CAAC;MAExB,IAAI,IAAI,CAAChD,cAAc,CAACT,OAAO,EAAE,OAAO,IAAI,CAACc,KAAK,CAAC,OAAO,EAAE,IAAI,CAACL,cAAc,CAACT,OAAO;MACvF,IAAI,IAAI,CAACS,cAAc,CAACR,QAAQ,EAAE,OAAO,IAAI,CAACa,KAAK,CAAC,OAAO,EAAE,IAAI,CAACL,cAAc,CAACR,QAAQ;MACzF,IAAI,IAAI,CAACQ,cAAc,CAACH,eAAe,EAAE,OAAO,IAAI,CAACQ,KAAK,CAAC,OAAO,EAAE,IAAI,CAACL,cAAc,CAACH,eAAe;;MAEvG;MACA,IAAI,CAAC,IAAI,CAACF,YAAY,CAACJ,OAAM,IAAK,CAAC,IAAI,CAACI,YAAY,CAACR,IAAI,EAAE;QACzD,IAAI,CAACkB,KAAK,CAAC,SAAS,EAAE,iBAAiB;QACvC;MACF;MACA,IAAI,CAAC,IAAI,CAACV,YAAY,CAACH,QAAO,IAAK,CAAC,IAAI,CAACG,YAAY,CAACE,eAAe,EAAE;QACrE,IAAI,CAACQ,KAAK,CAAC,SAAS,EAAE,UAAU;QAChC;MACF;MACA,IAAI,CAAC,IAAI,CAACV,YAAY,CAACG,KAAK,EAAE;QAC5B,IAAI,CAACO,KAAK,CAAC,SAAS,EAAE,aAAa;QACnC;MACF;MAEA,IAAI;QACF;QACA,MAAMa,IAAG,GAAI,MAAM,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,gBAAgB,EAAE;UACpDC,SAAS,EAAE,CAAC,IAAI,CAAC1B,YAAY,CAACJ,OAAM,IAAK,EAAE,EAAE0D,IAAI,CAAC,CAAC;UACnDC,QAAQ,EAAE,CAAC,IAAI,CAACvD,YAAY,CAACR,IAAG,IAAK,EAAE,EAAE8D,IAAI,CAAC,CAAC;UAC/CzD,QAAQ,EAAE,IAAI,CAACG,YAAY,CAACH,QAAQ;UACpCC,IAAI,EAAE,IAAI,CAACE,YAAY,CAACF;QAC1B,CAAC;QACD,MAAM6B,CAAA,GAAKJ,IAAG,IAAK,OAAOA,IAAG,KAAM,QAAO,IAAK,QAAO,IAAKA,IAAG,IAAK,MAAK,IAAKA,IAAI,GAAIA,IAAI,CAAC9B,IAAG,GAAI8B,IAAG;QAEpGK,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEF,CAAC;QACpC,IAAI,CAACjB,KAAK,CAAC,MAAM,EAAE,QAAQiB,CAAC,EAAEG,IAAI,SAASH,CAAC,EAAEd,OAAM,IAAKc,CAAC,EAAEf,GAAG,EAAE;QAEjE,IAAI,CAACe,CAAA,IAAKA,CAAC,CAACG,IAAG,KAAM,GAAG,EAAE;UACxB,MAAMlB,GAAE,GAAKe,CAAA,KAAMA,CAAC,CAACd,OAAM,IAAKc,CAAC,CAACf,GAAG,CAAC,IAAK,MAAK;UAChD,IAAI4C,MAAM,CAAC5C,GAAG,CAAC,CAAC6C,QAAQ,CAAC,IAAI,KAAKD,MAAM,CAAC5C,GAAG,CAAC,CAAC6C,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,CAACpD,cAAc,CAACT,OAAM,GAAI,QAAO;UACnG,IAAI,CAACc,KAAK,CAAC,OAAO,EAAEE,GAAG;UACvB;QACF;QAEA,IAAI,CAACF,KAAK,CAAC,SAAS,EAAE,UAAU;QAChC,IAAI,CAACI,UAAU,CAAC,OAAO;MACzB,EAAE,OAAOiC,CAAC,EAAE;QACV,MAAMC,MAAK,GAAID,CAAC,EAAEE,QAAQ,EAAED,MAAK;QACjC,MAAMpC,GAAE,GAAImC,CAAC,EAAEE,QAAQ,EAAExD,IAAI,EAAEoB,OAAM,IAAKkC,CAAC,EAAEE,QAAQ,EAAExD,IAAI,EAAEmB,GAAE,IAAKmC,CAAC,EAAElC,OAAM;QAC7E,IAAI,CAACH,KAAK,CAAC,OAAO,EAAEsC,MAAK,GAAI,QAAQA,MAAM,KAAKpC,GAAG,EAAC,GAAI,QAAQA,GAAG,EAAE;MACvE;IACF,CAAC;IAED8C,oBAAmBA,CAAA,EAAK;MACtB,IAAI,IAAI,CAAChE,IAAG,KAAM,UAAU,EAAE;MAC9BsB,YAAY,CAAC,IAAI,CAACV,YAAY;MAC9B,IAAI,CAACA,YAAW,GAAIqD,UAAU,CAAC,MAAM,IAAI,CAACR,kBAAkB,CAAC,CAAC,EAAE,GAAG;IACrE,CAAC;IAED,MAAMA,kBAAiBA,CAAA,EAAK;MAC1B,IAAI,IAAI,CAACzD,IAAG,KAAM,UAAU,EAAE;MAC9B,MAAMkE,GAAE,GAAI,CAAC,IAAI,CAAC5D,YAAY,CAACJ,OAAM,IAAK,EAAE,EAAE0D,IAAI,CAAC;MACnD,IAAI,CAACM,GAAG,EAAE;QACR,IAAI,CAACvD,cAAc,CAACT,OAAM,GAAI,EAAC;QAC/B;MACF;MACA,IAAI;QACF,MAAM2B,IAAG,GAAI,MAAM,IAAI,CAACC,MAAM,CAACqC,GAAG,CAAC,qBAAqB,EAAE;UAAEC,MAAM,EAAE;YAAElE,OAAO,EAAEgE,GAAG;YAAElC,SAAS,EAAEkC;UAAI;QAAE,CAAC;QACtG,MAAMG,GAAE,GAAKxC,IAAG,IAAK,OAAOA,IAAG,KAAM,QAAO,IAAK,QAAO,IAAKA,IAAG,IAAK,MAAK,IAAKA,IAAI,GAAIA,IAAI,CAAC9B,IAAG,GAAI8B,IAAG;QAEtG,MAAMyC,MAAK,GAAKD,GAAE,IAAK,OAAOA,GAAE,KAAM,QAAO,IAAK,MAAK,IAAKA,GAAG,GACxDA,GAAG,CAACtE,IAAG,KAAM,IAAI,GACjBsE,GAAE,KAAM,IAAI;QAEnB,IAAI,CAAC1D,cAAc,CAACT,OAAM,GAAIoE,MAAK,GAAI,QAAO,GAAI,EAAC;MACrD,EAAE,OAAOjB,CAAC,EAAE;QACV,IAAI,CAAC1C,cAAc,CAACT,OAAM,GAAI,EAAC;MACjC;IACF,CAAC;IAEDwD,kBAAiBA,CAAA,EAAK;MACpB,IAAI,IAAI,CAAC1D,IAAG,KAAM,UAAU,EAAE;MAC9B,MAAMuE,CAAA,GAAI,IAAI,CAACjE,YAAY,CAACH,QAAO,IAAK,EAAC;MAEzC,IAAI,CAACoE,CAAC,EAAE;QACN,IAAI,CAAC5D,cAAc,CAACR,QAAO,GAAI,EAAC;QAChC;MACF;;MAEA;MACA,IAAI,CAAC,iBAAiB,CAACqE,IAAI,CAACD,CAAC,CAAC,EAAE;QAC9B,IAAI,CAAC5D,cAAc,CAACR,QAAO,GAAI,kBAAiB;QAChD;MACF;MAEA,IAAIoE,CAAC,CAACE,MAAK,GAAI,CAAC,EAAE;QAChB,IAAI,CAAC9D,cAAc,CAACR,QAAO,GAAI,UAAS;QACxC;MACF;MAEA,IAAI,CAACQ,cAAc,CAACR,QAAO,GAAI,EAAC;IAClC,CAAC;IAEDwD,kBAAiBA,CAAA,EAAK;MACpB,MAAMe,EAAC,GAAI,IAAI,CAACpE,YAAY,CAACH,QAAO,IAAK,EAAC;MAC1C,MAAMwE,EAAC,GAAI,IAAI,CAACrE,YAAY,CAACE,eAAc,IAAK,EAAC;MAEjD,IAAI,CAACmE,EAAE,EAAE;QACP,IAAI,CAAChE,cAAc,CAACH,eAAc,GAAI,EAAC;QACvC;MACF;MACA,IAAI,CAACG,cAAc,CAACH,eAAc,GAAKkE,EAAC,KAAMC,EAAE,GAAI,MAAK,GAAI,EAAC;IAChE;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}