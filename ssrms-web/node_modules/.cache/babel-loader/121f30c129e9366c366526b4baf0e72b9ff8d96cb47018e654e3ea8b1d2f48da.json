{"ast":null,"code":"import { useAttrs, useSlots, ref, computed, reactive } from 'vue';\nimport { useResizeObserver } from '@vueuse/core';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { MINIMUM_INPUT_WIDTH } from '../../../../constants/form.mjs';\nfunction useInputTagDom({\n  props,\n  isFocused,\n  hovering,\n  disabled,\n  inputValue,\n  size,\n  validateState,\n  validateIcon,\n  needStatusIcon\n}) {\n  const attrs = useAttrs();\n  const slots = useSlots();\n  const ns = useNamespace(\"input-tag\");\n  const nsInput = useNamespace(\"input\");\n  const collapseItemRef = ref();\n  const innerRef = ref();\n  const containerKls = computed(() => [ns.b(), ns.is(\"focused\", isFocused.value), ns.is(\"hovering\", hovering.value), ns.is(\"disabled\", disabled.value), ns.m(size.value), ns.e(\"wrapper\"), attrs.class]);\n  const containerStyle = computed(() => [attrs.style]);\n  const innerKls = computed(() => {\n    var _a, _b;\n    return [ns.e(\"inner\"), ns.is(\"draggable\", props.draggable), ns.is(\"left-space\", !((_a = props.modelValue) == null ? void 0 : _a.length) && !slots.prefix), ns.is(\"right-space\", !((_b = props.modelValue) == null ? void 0 : _b.length) && !showSuffix.value)];\n  });\n  const showClear = computed(() => {\n    var _a;\n    return props.clearable && !disabled.value && !props.readonly && (((_a = props.modelValue) == null ? void 0 : _a.length) || inputValue.value) && (isFocused.value || hovering.value);\n  });\n  const showSuffix = computed(() => {\n    return slots.suffix || showClear.value || validateState.value && validateIcon.value && needStatusIcon.value;\n  });\n  const states = reactive({\n    innerWidth: 0,\n    collapseItemWidth: 0\n  });\n  const getGapWidth = () => {\n    if (!innerRef.value) return 0;\n    const style = window.getComputedStyle(innerRef.value);\n    return Number.parseFloat(style.gap || \"6px\");\n  };\n  const resetInnerWidth = () => {\n    states.innerWidth = Number.parseFloat(window.getComputedStyle(innerRef.value).width);\n  };\n  const resetCollapseItemWidth = () => {\n    states.collapseItemWidth = collapseItemRef.value.getBoundingClientRect().width;\n  };\n  const tagStyle = computed(() => {\n    if (!props.collapseTags) return {};\n    const gapWidth = getGapWidth();\n    const inputSlotWidth = gapWidth + MINIMUM_INPUT_WIDTH;\n    const maxWidth = collapseItemRef.value && props.maxCollapseTags === 1 ? states.innerWidth - states.collapseItemWidth - gapWidth - inputSlotWidth : states.innerWidth - inputSlotWidth;\n    return {\n      maxWidth: `${Math.max(maxWidth, 0)}px`\n    };\n  });\n  useResizeObserver(innerRef, resetInnerWidth);\n  useResizeObserver(collapseItemRef, resetCollapseItemWidth);\n  return {\n    ns,\n    nsInput,\n    containerKls,\n    containerStyle,\n    innerKls,\n    showClear,\n    showSuffix,\n    tagStyle,\n    collapseItemRef,\n    innerRef\n  };\n}\nexport { useInputTagDom };","map":{"version":3,"names":["useInputTagDom","props","isFocused","hovering","disabled","inputValue","size","validateState","validateIcon","needStatusIcon","attrs","useAttrs","slots","useSlots","ns","useNamespace","nsInput","collapseItemRef","ref","innerRef","containerKls","computed","b","is","value","m","e","class","containerStyle","style","innerKls","_a","_b","draggable","modelValue","length","prefix","showSuffix","showClear","clearable","readonly","suffix","states","reactive","innerWidth","collapseItemWidth","getGapWidth","window","getComputedStyle","Number","parseFloat","gap","resetInnerWidth","width","resetCollapseItemWidth","getBoundingClientRect","tagStyle","collapseTags","gapWidth","inputSlotWidth","MINIMUM_INPUT_WIDTH","maxWidth","maxCollapseTags","Math","max","useResizeObserver"],"sources":["../../../../../../../packages/components/input-tag/src/composables/use-input-tag-dom.ts"],"sourcesContent":["import { computed, reactive, ref, useAttrs, useSlots } from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { MINIMUM_INPUT_WIDTH } from '@element-plus/constants'\nimport { useResizeObserver } from '@vueuse/core'\n\nimport type { ComputedRef, Ref, StyleValue } from 'vue'\nimport type { ComponentSize } from '@element-plus/constants'\nimport type { InputTagProps } from '../input-tag'\n\ninterface UseInputTagDomOptions {\n  props: InputTagProps\n  isFocused: Ref<boolean>\n  hovering: Ref<boolean>\n  disabled: ComputedRef<boolean>\n  inputValue: Ref<string | undefined>\n  size: ComputedRef<ComponentSize>\n  validateState: ComputedRef<string>\n  validateIcon: ComputedRef<boolean>\n  needStatusIcon: ComputedRef<boolean>\n}\n\nexport function useInputTagDom({\n  props,\n  isFocused,\n  hovering,\n  disabled,\n  inputValue,\n  size,\n  validateState,\n  validateIcon,\n  needStatusIcon,\n}: UseInputTagDomOptions) {\n  const attrs = useAttrs()\n  const slots = useSlots()\n  const ns = useNamespace('input-tag')\n  const nsInput = useNamespace('input')\n\n  const collapseItemRef = ref<HTMLElement>()\n  const innerRef = ref<HTMLElement>()\n\n  const containerKls = computed(() => [\n    ns.b(),\n    ns.is('focused', isFocused.value),\n    ns.is('hovering', hovering.value),\n    ns.is('disabled', disabled.value),\n    ns.m(size.value),\n    ns.e('wrapper'),\n    attrs.class,\n  ])\n  const containerStyle = computed<StyleValue>(() => [attrs.style as StyleValue])\n  const innerKls = computed(() => [\n    ns.e('inner'),\n    ns.is('draggable', props.draggable),\n    ns.is('left-space', !props.modelValue?.length && !slots.prefix),\n    ns.is('right-space', !props.modelValue?.length && !showSuffix.value),\n  ])\n  const showClear = computed(() => {\n    return (\n      props.clearable &&\n      !disabled.value &&\n      !props.readonly &&\n      (props.modelValue?.length || inputValue.value) &&\n      (isFocused.value || hovering.value)\n    )\n  })\n  const showSuffix = computed(() => {\n    return (\n      slots.suffix ||\n      showClear.value ||\n      (validateState.value && validateIcon.value && needStatusIcon.value)\n    )\n  })\n\n  const states = reactive({\n    innerWidth: 0,\n    collapseItemWidth: 0,\n  })\n\n  const getGapWidth = () => {\n    if (!innerRef.value) return 0\n    const style = window.getComputedStyle(innerRef.value)\n    return Number.parseFloat(style.gap || '6px')\n  }\n\n  const resetInnerWidth = () => {\n    states.innerWidth = Number.parseFloat(\n      window.getComputedStyle(innerRef.value!).width\n    )\n  }\n\n  const resetCollapseItemWidth = () => {\n    states.collapseItemWidth =\n      collapseItemRef.value!.getBoundingClientRect().width\n  }\n\n  const tagStyle = computed(() => {\n    if (!props.collapseTags) return {}\n    const gapWidth = getGapWidth()\n\n    const inputSlotWidth = gapWidth + MINIMUM_INPUT_WIDTH\n\n    const maxWidth =\n      collapseItemRef.value && props.maxCollapseTags === 1\n        ? states.innerWidth -\n          states.collapseItemWidth -\n          gapWidth -\n          inputSlotWidth\n        : states.innerWidth - inputSlotWidth\n\n    return { maxWidth: `${Math.max(maxWidth, 0)}px` }\n  })\n\n  useResizeObserver(innerRef, resetInnerWidth)\n  useResizeObserver(collapseItemRef, resetCollapseItemWidth)\n\n  return {\n    ns,\n    nsInput,\n    containerKls,\n    containerStyle,\n    innerKls,\n    showClear,\n    showSuffix,\n    tagStyle,\n    collapseItemRef,\n    innerRef,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}