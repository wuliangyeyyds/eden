{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'AiAssistantLite',\n  props: {\n    userId: {\n      type: [Number, String],\n      default: null\n    }\n  },\n  data() {\n    return {\n      // drawer\n      drawerVisible: false,\n      openingAnim: false,\n      // pulse anim\n      pulseVisible: false,\n      pulseX: 0,\n      pulseY: 0,\n      pulseTimer: null,\n      // chat\n      inputText: '',\n      sending: false,\n      conversationId: '',\n      messages: [],\n      // quick prompts\n      showQuick: true,\n      quickQuestions: ['ÊÄé‰πàÈ¢ÑÁ∫¶Â∫ß‰ΩçÔºü', 'Êàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü', '‰∏∫‰ªÄ‰πàÊàëÂèòÊàêÈ¢ÑË≠¶/ÈªëÂêçÂçïÔºü', 'Â¶Ç‰ΩïÁ≠æÂà∞/Á≠æÈÄÄÔºü'],\n      // floating ball drag\n      floatX: null,\n      floatY: null,\n      dragging: false,\n      longPressTimer: null,\n      longPressMs: 260,\n      startClientX: 0,\n      startClientY: 0,\n      startFloatX: 0,\n      startFloatY: 0,\n      pointerId: null,\n      // Âú®Á™óÂè£‰∏äÁõëÂê¨ÔºåÈò≤Ê≠¢ÁßªÂä®ËøáÂø´‚Äú‰∏¢‰∫ã‰ª∂‚Äù\n      windowListening: false,\n      hasUnreadHint: false\n    };\n  },\n  computed: {\n    resolvedUserId() {\n      const p = this.userId;\n      if (p !== null && p !== undefined && String(p).trim() !== '') return Number(p);\n      try {\n        const raw = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n        if (!raw) return null;\n        const u = JSON.parse(raw);\n        const id = u.userId ?? u.id ?? null;\n        return id === null ? null : Number(id);\n      } catch (e) {\n        return null;\n      }\n    },\n    storageKey() {\n      return `ssrms_ai_lite_${this.resolvedUserId ?? 'guest'}`;\n    },\n    floatPosKey() {\n      return `ssrms_ai_float_pos_${this.resolvedUserId ?? 'guest'}`;\n    },\n    floatStyle() {\n      const size = 56;\n      const pad = 8;\n      const x = this.floatX === null || this.floatX === undefined ? this.getViewportW() - pad - size : this.floatX;\n      const y = this.floatY === null || this.floatY === undefined ? this.getViewportH() - pad - size : this.floatY;\n      return {\n        left: `${x}px`,\n        top: `${y}px`\n      };\n    }\n  },\n  mounted() {\n    this.loadFromStorage();\n    this.restoreFloatPos();\n    window.addEventListener('resize', this.clampFloatToViewport);\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.clampFloatToViewport);\n    this.removeWindowListeners();\n    if (this.pulseTimer) clearTimeout(this.pulseTimer);\n  },\n  watch: {\n    drawerVisible(v) {\n      if (v) {\n        this.hasUnreadHint = false;\n        this.$nextTick(() => this.scrollToBottom());\n      }\n    }\n  },\n  methods: {\n    // ===== ÂÖ≥ÈîÆÔºöÁî® clientWidth/clientHeightÔºåÈÅøÂÖçÂè≥‰æßÊªöÂä®Êù°ÂØºËá¥‚ÄúË¥¥ËæπË¢´Ë£Å‚Äù =====\n    getViewportW() {\n      return document.documentElement?.clientWidth || this.getViewportW() || 0;\n    },\n    getViewportH() {\n      return document.documentElement?.clientHeight || this.getViewportH() || 0;\n    },\n    // =========================\n    // Floating ball: drag + snap\n    // =========================\n    restoreFloatPos() {\n      try {\n        const raw = localStorage.getItem(this.floatPosKey);\n        if (!raw) return;\n        const obj = JSON.parse(raw);\n        if (typeof obj.x === 'number' && typeof obj.y === 'number') {\n          this.floatX = obj.x;\n          this.floatY = obj.y;\n          this.clampFloatToViewport();\n        }\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩ‰∏çÂèØÁî®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    saveFloatPos() {\n      try {\n        localStorage.setItem(this.floatPosKey, JSON.stringify({\n          x: this.floatX,\n          y: this.floatY\n        }));\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩ‰∏çÂèØÁî®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    clampFloatToViewport() {\n      const size = 56;\n      const pad = 8;\n      const maxX = Math.max(pad, this.getViewportW() - size - pad);\n      const maxY = Math.max(pad, this.getViewportH() - size - pad);\n      if (this.floatX === null || this.floatX === undefined) this.floatX = maxX;\n      if (this.floatY === null || this.floatY === undefined) this.floatY = maxY;\n      this.floatX = Math.min(Math.max(this.floatX, pad), maxX);\n      this.floatY = Math.min(Math.max(this.floatY, pad), maxY);\n    },\n    snapToEdge() {\n      const size = 56;\n      const pad = 8;\n      const maxX = Math.max(pad, this.getViewportW() - size - pad);\n      const centerX = (this.floatX ?? 0) + size / 2;\n      const targetX = centerX < this.getViewportW() / 2 ? pad : maxX;\n      this.floatX = targetX;\n      this.clampFloatToViewport();\n      this.saveFloatPos();\n    },\n    addWindowListeners() {\n      if (this.windowListening) return;\n      this.windowListening = true;\n      window.addEventListener('pointermove', this.onWindowPointerMove, {\n        passive: false\n      });\n      window.addEventListener('pointerup', this.onWindowPointerUp, {\n        passive: true\n      });\n      window.addEventListener('pointercancel', this.onWindowPointerUp, {\n        passive: true\n      });\n    },\n    removeWindowListeners() {\n      if (!this.windowListening) return;\n      this.windowListening = false;\n      window.removeEventListener('pointermove', this.onWindowPointerMove);\n      window.removeEventListener('pointerup', this.onWindowPointerUp);\n      window.removeEventListener('pointercancel', this.onWindowPointerUp);\n    },\n    onPointerDown(e) {\n      if (e.button !== undefined && e.button !== 0) return;\n      this.pointerId = e.pointerId;\n      this.startClientX = e.clientX;\n      this.startClientY = e.clientY;\n\n      // Áî®ÂΩìÂâç DOM rect ‰Ωú‰∏∫Ëµ∑ÁÇπÔºåÈÅøÂÖçÊ†∑ÂºèÂàáÊç¢ËØØÂ∑Æ\n      const rect = e.currentTarget.getBoundingClientRect();\n      this.startFloatX = rect.left;\n      this.startFloatY = rect.top;\n\n      // ÂÖ≥ÈîÆÔºöÁ´ãÂàªÂú® window ‰∏äÁõëÂê¨ÔºåÈò≤Ê≠¢Èº†Ê†áËøáÂø´ÁßªÂä®‚ÄúÁ¶ªÂºÄÂÖÉÁ¥†Âêé‰∏¢‰∫ã‰ª∂‚Äù\n      this.addWindowListeners();\n\n      // Â∞ùËØïÁ´ãÂç≥ captureÔºàÊõ¥Á®≥Ôºâ\n      try {\n        e.currentTarget.setPointerCapture(this.pointerId);\n      } catch (err) {\n        // Êüê‰∫õÊµèËßàÂô®‰∏çÊîØÊåÅ captureÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n\n      // ÈïøÊåâËß¶ÂèëÊãñÂä®\n      this.longPressTimer = setTimeout(() => {\n        this.dragging = true;\n        this.hasUnreadHint = false;\n      }, this.longPressMs);\n\n      // ÈòªÊ≠¢ÈÉ®ÂàÜÊµèËßàÂô®ÁöÑÊãñÊãΩ/ÈÄâ‰∏≠ÊñáÊú¨Ë°å‰∏∫\n      try {\n        e.preventDefault();\n      } catch (err) {\n        //\n      }\n    },\n    onWindowPointerMove(e) {\n      if (this.pointerId === null || e.pointerId !== this.pointerId) return;\n      const dx0 = e.clientX - this.startClientX;\n      const dy0 = e.clientY - this.startClientY;\n      const movedFar = Math.hypot(dx0, dy0) > 10;\n\n      // Âø´ÈÄüÊãñÂä®ÔºöÁî®Êà∑ÊòéÊòæÁßªÂä®Êó∂Ôºå‰∏çÂøÖÁ≠âÈïøÊåâÊó∂Èó¥ÔºåÁõ¥Êé•ËøõÂÖ•ÊãñÂä®Ê®°Âºè\n      if (!this.dragging && movedFar) {\n        if (this.longPressTimer) {\n          clearTimeout(this.longPressTimer);\n          this.longPressTimer = null;\n        }\n        this.dragging = true;\n      }\n      if (!this.dragging) return;\n      const dx = e.clientX - this.startClientX;\n      const dy = e.clientY - this.startClientY;\n      this.floatX = this.startFloatX + dx;\n      this.floatY = this.startFloatY + dy;\n      this.clampFloatToViewport();\n\n      // Èò≤Ê≠¢È°µÈù¢Âú®ÁßªÂä®Êó∂ÊªöÂä®ÔºàËß¶Êë∏ËÆæÂ§áÔºâ\n      try {\n        e.preventDefault();\n      } catch (err) {\n        //\n      }\n    },\n    onWindowPointerUp(e) {\n      if (this.pointerId === null || e && e.pointerId !== this.pointerId) return;\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer);\n        this.longPressTimer = null;\n      }\n\n      // ÊãñÂä®ÁªìÊùüÔºöË¥¥ËæπÂê∏ÈôÑ + ‰øùÂ≠ò\n      if (this.dragging) {\n        this.dragging = false;\n        this.pointerId = null;\n        this.snapToEdge();\n        this.removeWindowListeners();\n        return;\n      }\n\n      // ÈùûÊãñÂä®ÔºöËßÜ‰∏∫ÁÇπÂáªÊâìÂºÄ\n      this.pointerId = null;\n      this.removeWindowListeners();\n      this.openDrawer();\n    },\n    // =========================\n    // Drawer open animation\n    // =========================\n    playPulseFromFloat() {\n      const size = 56;\n      const pad = 8;\n      const x = this.floatX === null || this.floatX === undefined ? this.getViewportW() - pad - size : this.floatX;\n      const y = this.floatY === null || this.floatY === undefined ? this.getViewportH() - pad - size : this.floatY;\n      this.pulseX = x + size / 2;\n      this.pulseY = y + size / 2;\n      this.pulseVisible = true;\n      if (this.pulseTimer) clearTimeout(this.pulseTimer);\n      this.pulseTimer = setTimeout(() => {\n        this.pulseVisible = false;\n      }, 420);\n    },\n    openDrawer() {\n      this.playPulseFromFloat();\n      this.drawerVisible = true;\n      this.openingAnim = true;\n      setTimeout(() => {\n        this.openingAnim = false;\n      }, 220);\n      this.loadFromStorage();\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    // =========================\n    // Chat\n    // =========================\n    loadFromStorage() {\n      try {\n        const raw = localStorage.getItem(this.storageKey);\n        if (!raw) {\n          this.messages = [];\n          this.conversationId = '';\n          return;\n        }\n        const obj = JSON.parse(raw);\n        this.messages = Array.isArray(obj.messages) ? obj.messages : [];\n        this.conversationId = obj.conversationId || '';\n      } catch (e) {\n        this.messages = [];\n        this.conversationId = '';\n      }\n    },\n    saveToStorage() {\n      try {\n        localStorage.setItem(this.storageKey, JSON.stringify({\n          conversationId: this.conversationId || '',\n          messages: this.messages || []\n        }));\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩË¢´Á¶ÅÁî®/Á©∫Èó¥‰∏çË∂≥ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    clearChat() {\n      this.messages = [];\n      this.conversationId = '';\n      this.saveToStorage();\n      ElMessage.success('Â∑≤Ê∏ÖÁ©∫ÂØπËØù');\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    useQuick(q) {\n      if (this.sending) return;\n      this.inputText = q;\n    },\n    pushMsg(role, text) {\n      const msg = {\n        id: `${Date.now()}_${Math.random().toString(16).slice(2)}`,\n        role,\n        text: String(text ?? ''),\n        ts: Date.now()\n      };\n      this.messages.push(msg);\n      this.saveToStorage();\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    formatTime(ts) {\n      try {\n        const d = new Date(ts);\n        const hh = String(d.getHours()).padStart(2, '0');\n        const mm = String(d.getMinutes()).padStart(2, '0');\n        return `${hh}:${mm}`;\n      } catch (e) {\n        return '';\n      }\n    },\n    scrollToBottom() {\n      try {\n        const el = this.$el.querySelector('.ai-body .el-scrollbar__wrap');\n        if (el) el.scrollTop = el.scrollHeight;\n      } catch (e) {\n        // DOM ÂÆπÂô®ÂèØËÉΩÊöÇÊú™Ê∏≤ÊüìÊàñ‰∏çÂ≠òÂú®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    async send() {\n      const text = this.inputText.trim();\n      if (!text || this.sending) return;\n      if (!this.resolvedUserId) {\n        ElMessage.warning('Êú™Ëé∑ÂèñÂà∞Áî®Êà∑‰ø°ÊÅØÔºåËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI Âä©Êâã');\n        return;\n      }\n      this.pushMsg('user', text);\n      this.inputText = '';\n      this.sending = true;\n      try {\n        const payload = {\n          userId: this.resolvedUserId,\n          message: text,\n          conversationId: this.conversationId || null\n        };\n\n        // ÂÖºÂÆπÔºö‰Ω†ÁöÑ request.js ÂèØËÉΩÂ∑≤Áªè return response.data\n        const res = await this.$axios.post('/ai/chat', payload);\n        const body = res && typeof res.code !== 'undefined' ? res : res && res.data ? res.data : null;\n        if (!body || Number(body.code) !== 200) {\n          const msg = body && (body.msg || body.message) ? body.msg || body.message : 'AI ËØ∑Ê±ÇÂ§±Ë¥•';\n          throw new Error(msg);\n        }\n        const data = body.data || {};\n        if (data.conversationId) this.conversationId = data.conversationId;\n        this.pushMsg('assistant', data.reply || 'ÔºàAI Êú™ËøîÂõûÂÜÖÂÆπÔºâ');\n      } catch (e) {\n        this.pushMsg('assistant', `ÔºàÂá∫Èîô‰∫ÜÔºâ${e?.message || 'AI ËØ∑Ê±ÇÂ§±Ë¥•'}`);\n      } finally {\n        this.sending = false;\n        this.saveToStorage();\n        this.$nextTick(() => this.scrollToBottom());\n      }\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","name","props","userId","type","Number","String","default","data","drawerVisible","openingAnim","pulseVisible","pulseX","pulseY","pulseTimer","inputText","sending","conversationId","messages","showQuick","quickQuestions","floatX","floatY","dragging","longPressTimer","longPressMs","startClientX","startClientY","startFloatX","startFloatY","pointerId","windowListening","hasUnreadHint","computed","resolvedUserId","p","undefined","trim","raw","localStorage","getItem","sessionStorage","u","JSON","parse","id","e","storageKey","floatPosKey","floatStyle","size","pad","x","getViewportW","y","getViewportH","left","top","mounted","loadFromStorage","restoreFloatPos","window","addEventListener","clampFloatToViewport","beforeUnmount","removeEventListener","removeWindowListeners","clearTimeout","watch","v","$nextTick","scrollToBottom","methods","document","documentElement","clientWidth","clientHeight","obj","saveFloatPos","setItem","stringify","maxX","Math","max","maxY","min","snapToEdge","centerX","targetX","addWindowListeners","onWindowPointerMove","passive","onWindowPointerUp","onPointerDown","button","clientX","clientY","rect","currentTarget","getBoundingClientRect","setPointerCapture","err","setTimeout","preventDefault","dx0","dy0","movedFar","hypot","dx","dy","openDrawer","playPulseFromFloat","Array","isArray","saveToStorage","clearChat","success","useQuick","q","pushMsg","role","text","msg","Date","now","random","toString","slice","ts","push","formatTime","d","hh","getHours","padStart","mm","getMinutes","el","$el","querySelector","scrollTop","scrollHeight","send","warning","payload","message","res","$axios","post","body","code","Error","reply"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\AiAssistantLite.vue"],"sourcesContent":["<template>\n  <div class=\"ai-lite-root\">\n    <!-- ÊâìÂºÄÊó∂ÁöÑ‚ÄúÂºπÂá∫‚ÄùËÑâÂÜ≤Âä®ÁîªÔºà‰ªéÊÇ¨ÊµÆÁêÉ‰ΩçÁΩÆÊâ©Êï£Ôºâ -->\n    <div\n        v-if=\"pulseVisible\"\n        class=\"ai-pulse\"\n        :style=\"{ left: pulseX + 'px', top: pulseY + 'px' }\"\n    ></div>\n\n    <!-- ÊÇ¨ÊµÆÁêÉÔºàÈïøÊåâÂèØÊãñÂä®ÔºõÊùæÊâãË¥¥ËæπÂê∏ÈôÑÔºâ -->\n    <div\n        v-show=\"!drawerVisible\"\n        class=\"ai-float\"\n        :class=\"{ 'is-dragging': dragging }\"\n        :style=\"floatStyle\"\n        @pointerdown=\"onPointerDown\"\n    >\n      <div class=\"ai-float-inner\" :class=\"{ dragging: dragging }\" title=\"AI Ëá™‰π†ÂÆ§Âä©ÊâãÔºàÈïøÊåâÊãñÂä®Ôºâ\">\n        <div class=\"ai-float-emoji\">ü§ñ</div>\n        <div class=\"ai-float-dot\" v-if=\"hasUnreadHint\"></div>\n      </div>\n    </div>\n\n    <!-- ÊäΩÂ±âËÅäÂ§©Á™ó -->\n    <el-drawer\n        v-model=\"drawerVisible\"\n        :with-header=\"false\"\n        size=\"440px\"\n        class=\"ai-drawer\"\n        :append-to-body=\"true\"\n        :modal=\"true\"\n        :lock-scroll=\"true\"\n    >\n      <div class=\"ai-shell\" :class=\"{ 'is-opening': openingAnim }\">\n        <div class=\"ai-header\">\n          <div class=\"ai-brand\">\n            <div class=\"ai-brand-icon\">ü§ñ</div>\n            <div class=\"ai-brand-text\">\n              <div class=\"ai-title\">AI Ëá™‰π†ÂÆ§Âä©Êâã</div>\n              <div class=\"ai-subtitle\">È¢ÑÁ∫¶ / Á≠æÂà∞ / ‰ø°Áî®ËßÑÂàô ¬∑ ËΩªÈáèÁâà</div>\n            </div>\n          </div>\n\n          <div class=\"ai-actions\">\n            <el-button size=\"small\" @click=\"clearChat\" :disabled=\"sending\">Ê∏ÖÁ©∫</el-button>\n            <el-button size=\"small\" @click=\"drawerVisible = false\">ÂÖ≥Èó≠</el-button>\n          </div>\n        </div>\n\n        <div class=\"ai-quick\" v-if=\"showQuick\">\n          <div class=\"ai-quick-row\">\n            <div class=\"ai-quick-label\">Âø´Êç∑ÊèêÈóÆ</div>\n            <div class=\"ai-quick-items\">\n              <el-tag\n                  v-for=\"q in quickQuestions\"\n                  :key=\"q\"\n                  class=\"ai-chip\"\n                  effect=\"plain\"\n                  @click=\"useQuick(q)\"\n              >\n                {{ q }}\n              </el-tag>\n            </div>\n          </div>\n        </div>\n\n        <el-scrollbar class=\"ai-body\">\n          <div class=\"ai-msgs\">\n            <div v-if=\"messages.length === 0\" class=\"ai-empty\">\n              <div class=\"ai-empty-title\">‰ªäÂ§©‰πüË¶ÅÂ•ΩÂ•ΩÂ≠¶‰π†Ôºà‰ΩÜÂà´ÊääËá™Â∑±Â≠¶ÊàêÂºÇÂ∏∏ÂÄºÔºâ</div>\n              <div class=\"ai-empty-desc\">\n                ‰Ω†ÂèØ‰ª•ÈóÆÔºöÊÄé‰πàÈ¢ÑÁ∫¶ÔºüÊàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü‰∏∫‰ªÄ‰πàÂèòÈ¢ÑË≠¶/ÈªëÂêçÂçïÔºü\n              </div>\n            </div>\n\n            <div\n                v-for=\"m in messages\"\n                :key=\"m.id\"\n                :class=\"['ai-msg', m.role === 'user' ? 'is-user' : 'is-ai']\"\n            >\n              <div class=\"ai-avatar\">\n                <span v-if=\"m.role === 'user'\">‰Ω†</span>\n                <span v-else>AI</span>\n              </div>\n\n              <div class=\"ai-bubble\">\n                <div class=\"ai-text\" v-text=\"m.text\"></div>\n                <div class=\"ai-meta\">{{ formatTime(m.ts) }}</div>\n              </div>\n            </div>\n\n            <div v-if=\"sending\" class=\"ai-msg is-ai\">\n              <div class=\"ai-avatar\">AI</div>\n              <div class=\"ai-bubble\">\n                <div class=\"ai-text\">Ê≠£Âú®ÊÄùËÄÉ‚Ä¶</div>\n              </div>\n            </div>\n          </div>\n        </el-scrollbar>\n\n        <div class=\"ai-input\">\n          <el-input\n              v-model=\"inputText\"\n              type=\"textarea\"\n              :autosize=\"{ minRows: 2, maxRows: 5 }\"\n              placeholder=\"ËæìÂÖ•ÈóÆÈ¢òÔºå‰æãÂ¶ÇÔºöÊÄé‰πàÈ¢ÑÁ∫¶ÔºüÊàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü\"\n              @keydown.enter.exact.prevent=\"send\"\n              @keydown.enter.shift.exact.stop\n          />\n          <div class=\"ai-sendbar\">\n            <div class=\"ai-hint\">Enter ÂèëÈÄÅ ¬∑ Shift+Enter Êç¢Ë°å ¬∑ ÈïøÊåâÊÇ¨ÊµÆÁêÉÂèØÊãñÂä®</div>\n            <el-button\n                class=\"ai-send-btn\"\n                type=\"primary\"\n                :loading=\"sending\"\n                :disabled=\"sending || !inputText.trim()\"\n                @click=\"send\"\n            >\n              ÂèëÈÄÅ\n            </el-button>\n          </div>\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'AiAssistantLite',\n  props: {\n    userId: {\n      type: [Number, String],\n      default: null\n    }\n  },\n  data () {\n    return {\n      // drawer\n      drawerVisible: false,\n      openingAnim: false,\n\n      // pulse anim\n      pulseVisible: false,\n      pulseX: 0,\n      pulseY: 0,\n      pulseTimer: null,\n\n      // chat\n      inputText: '',\n      sending: false,\n      conversationId: '',\n      messages: [],\n\n      // quick prompts\n      showQuick: true,\n      quickQuestions: [\n        'ÊÄé‰πàÈ¢ÑÁ∫¶Â∫ß‰ΩçÔºü',\n        'Êàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü',\n        '‰∏∫‰ªÄ‰πàÊàëÂèòÊàêÈ¢ÑË≠¶/ÈªëÂêçÂçïÔºü',\n        'Â¶Ç‰ΩïÁ≠æÂà∞/Á≠æÈÄÄÔºü'\n      ],\n\n      // floating ball drag\n      floatX: null,\n      floatY: null,\n      dragging: false,\n      longPressTimer: null,\n      longPressMs: 260,\n      startClientX: 0,\n      startClientY: 0,\n      startFloatX: 0,\n      startFloatY: 0,\n      pointerId: null,\n\n      // Âú®Á™óÂè£‰∏äÁõëÂê¨ÔºåÈò≤Ê≠¢ÁßªÂä®ËøáÂø´‚Äú‰∏¢‰∫ã‰ª∂‚Äù\n      windowListening: false,\n\n      hasUnreadHint: false\n    }\n  },\n  computed: {\n    resolvedUserId () {\n      const p = this.userId\n      if (p !== null && p !== undefined && String(p).trim() !== '') return Number(p)\n\n      try {\n        const raw = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\n        if (!raw) return null\n        const u = JSON.parse(raw)\n        const id = u.userId ?? u.id ?? null\n        return id === null ? null : Number(id)\n      } catch (e) {\n        return null\n      }\n    },\n    storageKey () {\n      return `ssrms_ai_lite_${this.resolvedUserId ?? 'guest'}`\n    },\n    floatPosKey () {\n      return `ssrms_ai_float_pos_${this.resolvedUserId ?? 'guest'}`\n    },\n    floatStyle () {\n      const size = 56\n      const pad = 8\n      const x = (this.floatX === null || this.floatX === undefined)\n          ? (this.getViewportW() - pad - size)\n          : this.floatX\n      const y = (this.floatY === null || this.floatY === undefined)\n          ? (this.getViewportH() - pad - size)\n          : this.floatY\n\n      return { left: `${x}px`, top: `${y}px` }\n    }\n  },\n  mounted () {\n    this.loadFromStorage()\n    this.restoreFloatPos()\n    window.addEventListener('resize', this.clampFloatToViewport)\n  },\n  beforeUnmount () {\n    window.removeEventListener('resize', this.clampFloatToViewport)\n    this.removeWindowListeners()\n    if (this.pulseTimer) clearTimeout(this.pulseTimer)\n  },\n  watch: {\n    drawerVisible (v) {\n      if (v) {\n        this.hasUnreadHint = false\n        this.$nextTick(() => this.scrollToBottom())\n      }\n    }\n  },\n  methods: {\n    // ===== ÂÖ≥ÈîÆÔºöÁî® clientWidth/clientHeightÔºåÈÅøÂÖçÂè≥‰æßÊªöÂä®Êù°ÂØºËá¥‚ÄúË¥¥ËæπË¢´Ë£Å‚Äù =====\n    getViewportW () {\n      return document.documentElement?.clientWidth || this.getViewportW() || 0\n    },\n    getViewportH () {\n      return document.documentElement?.clientHeight || this.getViewportH() || 0\n    },\n\n    // =========================\n    // Floating ball: drag + snap\n    // =========================\n    restoreFloatPos () {\n      try {\n        const raw = localStorage.getItem(this.floatPosKey)\n        if (!raw) return\n        const obj = JSON.parse(raw)\n        if (typeof obj.x === 'number' && typeof obj.y === 'number') {\n          this.floatX = obj.x\n          this.floatY = obj.y\n          this.clampFloatToViewport()\n        }\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩ‰∏çÂèØÁî®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    saveFloatPos () {\n      try {\n        localStorage.setItem(this.floatPosKey, JSON.stringify({ x: this.floatX, y: this.floatY }))\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩ‰∏çÂèØÁî®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    clampFloatToViewport () {\n      const size = 56\n      const pad = 8\n      const maxX = Math.max(pad, this.getViewportW() - size - pad)\n      const maxY = Math.max(pad, this.getViewportH() - size - pad)\n\n      if (this.floatX === null || this.floatX === undefined) this.floatX = maxX\n      if (this.floatY === null || this.floatY === undefined) this.floatY = maxY\n\n      this.floatX = Math.min(Math.max(this.floatX, pad), maxX)\n      this.floatY = Math.min(Math.max(this.floatY, pad), maxY)\n    },\n    snapToEdge () {\n      const size = 56\n      const pad = 8\n      const maxX = Math.max(pad, this.getViewportW() - size - pad)\n      const centerX = (this.floatX ?? 0) + size / 2\n      const targetX = centerX < this.getViewportW() / 2 ? pad : maxX\n      this.floatX = targetX\n      this.clampFloatToViewport()\n      this.saveFloatPos()\n    },\n    addWindowListeners () {\n      if (this.windowListening) return\n      this.windowListening = true\n      window.addEventListener('pointermove', this.onWindowPointerMove, { passive: false })\n      window.addEventListener('pointerup', this.onWindowPointerUp, { passive: true })\n      window.addEventListener('pointercancel', this.onWindowPointerUp, { passive: true })\n    },\n    removeWindowListeners () {\n      if (!this.windowListening) return\n      this.windowListening = false\n      window.removeEventListener('pointermove', this.onWindowPointerMove)\n      window.removeEventListener('pointerup', this.onWindowPointerUp)\n      window.removeEventListener('pointercancel', this.onWindowPointerUp)\n    },\n\n    onPointerDown (e) {\n      if (e.button !== undefined && e.button !== 0) return\n\n      this.pointerId = e.pointerId\n      this.startClientX = e.clientX\n      this.startClientY = e.clientY\n\n      // Áî®ÂΩìÂâç DOM rect ‰Ωú‰∏∫Ëµ∑ÁÇπÔºåÈÅøÂÖçÊ†∑ÂºèÂàáÊç¢ËØØÂ∑Æ\n      const rect = e.currentTarget.getBoundingClientRect()\n      this.startFloatX = rect.left\n      this.startFloatY = rect.top\n\n      // ÂÖ≥ÈîÆÔºöÁ´ãÂàªÂú® window ‰∏äÁõëÂê¨ÔºåÈò≤Ê≠¢Èº†Ê†áËøáÂø´ÁßªÂä®‚ÄúÁ¶ªÂºÄÂÖÉÁ¥†Âêé‰∏¢‰∫ã‰ª∂‚Äù\n      this.addWindowListeners()\n\n      // Â∞ùËØïÁ´ãÂç≥ captureÔºàÊõ¥Á®≥Ôºâ\n      try {\n        e.currentTarget.setPointerCapture(this.pointerId)\n      } catch (err) {\n        // Êüê‰∫õÊµèËßàÂô®‰∏çÊîØÊåÅ captureÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n\n      // ÈïøÊåâËß¶ÂèëÊãñÂä®\n      this.longPressTimer = setTimeout(() => {\n        this.dragging = true\n        this.hasUnreadHint = false\n      }, this.longPressMs)\n\n      // ÈòªÊ≠¢ÈÉ®ÂàÜÊµèËßàÂô®ÁöÑÊãñÊãΩ/ÈÄâ‰∏≠ÊñáÊú¨Ë°å‰∏∫\n      try { e.preventDefault() } catch (err) {\n        //\n      }\n    },\n\n    onWindowPointerMove (e) {\n      if (this.pointerId === null || e.pointerId !== this.pointerId) return\n\n      const dx0 = e.clientX - this.startClientX\n      const dy0 = e.clientY - this.startClientY\n      const movedFar = Math.hypot(dx0, dy0) > 10\n\n      // Âø´ÈÄüÊãñÂä®ÔºöÁî®Êà∑ÊòéÊòæÁßªÂä®Êó∂Ôºå‰∏çÂøÖÁ≠âÈïøÊåâÊó∂Èó¥ÔºåÁõ¥Êé•ËøõÂÖ•ÊãñÂä®Ê®°Âºè\n      if (!this.dragging && movedFar) {\n        if (this.longPressTimer) {\n          clearTimeout(this.longPressTimer)\n          this.longPressTimer = null\n        }\n        this.dragging = true\n      }\n\n      if (!this.dragging) return\n\n      const dx = e.clientX - this.startClientX\n      const dy = e.clientY - this.startClientY\n      this.floatX = this.startFloatX + dx\n      this.floatY = this.startFloatY + dy\n      this.clampFloatToViewport()\n\n      // Èò≤Ê≠¢È°µÈù¢Âú®ÁßªÂä®Êó∂ÊªöÂä®ÔºàËß¶Êë∏ËÆæÂ§áÔºâ\n      try { e.preventDefault() } catch (err) {\n        //\n      }\n    },\n\n    onWindowPointerUp (e) {\n      if (this.pointerId === null || (e && e.pointerId !== this.pointerId)) return\n\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer)\n        this.longPressTimer = null\n      }\n\n      // ÊãñÂä®ÁªìÊùüÔºöË¥¥ËæπÂê∏ÈôÑ + ‰øùÂ≠ò\n      if (this.dragging) {\n        this.dragging = false\n        this.pointerId = null\n        this.snapToEdge()\n        this.removeWindowListeners()\n        return\n      }\n\n      // ÈùûÊãñÂä®ÔºöËßÜ‰∏∫ÁÇπÂáªÊâìÂºÄ\n      this.pointerId = null\n      this.removeWindowListeners()\n      this.openDrawer()\n    },\n\n    // =========================\n    // Drawer open animation\n    // =========================\n    playPulseFromFloat () {\n      const size = 56\n      const pad = 8\n      const x = (this.floatX === null || this.floatX === undefined)\n          ? (this.getViewportW() - pad - size)\n          : this.floatX\n      const y = (this.floatY === null || this.floatY === undefined)\n          ? (this.getViewportH() - pad - size)\n          : this.floatY\n\n      this.pulseX = x + size / 2\n      this.pulseY = y + size / 2\n      this.pulseVisible = true\n\n      if (this.pulseTimer) clearTimeout(this.pulseTimer)\n      this.pulseTimer = setTimeout(() => {\n        this.pulseVisible = false\n      }, 420)\n    },\n\n    openDrawer () {\n      this.playPulseFromFloat()\n\n      this.drawerVisible = true\n      this.openingAnim = true\n      setTimeout(() => { this.openingAnim = false }, 220)\n\n      this.loadFromStorage()\n      this.$nextTick(() => this.scrollToBottom())\n    },\n\n    // =========================\n    // Chat\n    // =========================\n    loadFromStorage () {\n      try {\n        const raw = localStorage.getItem(this.storageKey)\n        if (!raw) {\n          this.messages = []\n          this.conversationId = ''\n          return\n        }\n        const obj = JSON.parse(raw)\n        this.messages = Array.isArray(obj.messages) ? obj.messages : []\n        this.conversationId = obj.conversationId || ''\n      } catch (e) {\n        this.messages = []\n        this.conversationId = ''\n      }\n    },\n    saveToStorage () {\n      try {\n        localStorage.setItem(this.storageKey, JSON.stringify({\n          conversationId: this.conversationId || '',\n          messages: this.messages || []\n        }))\n      } catch (e) {\n        // Êú¨Âú∞Â≠òÂÇ®ÂèØËÉΩË¢´Á¶ÅÁî®/Á©∫Èó¥‰∏çË∂≥ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    clearChat () {\n      this.messages = []\n      this.conversationId = ''\n      this.saveToStorage()\n      ElMessage.success('Â∑≤Ê∏ÖÁ©∫ÂØπËØù')\n      this.$nextTick(() => this.scrollToBottom())\n    },\n    useQuick (q) {\n      if (this.sending) return\n      this.inputText = q\n    },\n    pushMsg (role, text) {\n      const msg = {\n        id: `${Date.now()}_${Math.random().toString(16).slice(2)}`,\n        role,\n        text: String(text ?? ''),\n        ts: Date.now()\n      }\n      this.messages.push(msg)\n      this.saveToStorage()\n      this.$nextTick(() => this.scrollToBottom())\n    },\n    formatTime (ts) {\n      try {\n        const d = new Date(ts)\n        const hh = String(d.getHours()).padStart(2, '0')\n        const mm = String(d.getMinutes()).padStart(2, '0')\n        return `${hh}:${mm}`\n      } catch (e) {\n        return ''\n      }\n    },\n    scrollToBottom () {\n      try {\n        const el = this.$el.querySelector('.ai-body .el-scrollbar__wrap')\n        if (el) el.scrollTop = el.scrollHeight\n      } catch (e) {\n        // DOM ÂÆπÂô®ÂèØËÉΩÊöÇÊú™Ê∏≤ÊüìÊàñ‰∏çÂ≠òÂú®ÔºåÂøΩÁï•Âç≥ÂèØ\n      }\n    },\n    async send () {\n      const text = this.inputText.trim()\n      if (!text || this.sending) return\n\n      if (!this.resolvedUserId) {\n        ElMessage.warning('Êú™Ëé∑ÂèñÂà∞Áî®Êà∑‰ø°ÊÅØÔºåËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI Âä©Êâã')\n        return\n      }\n\n      this.pushMsg('user', text)\n      this.inputText = ''\n      this.sending = true\n\n      try {\n        const payload = {\n          userId: this.resolvedUserId,\n          message: text,\n          conversationId: this.conversationId || null\n        }\n\n        // ÂÖºÂÆπÔºö‰Ω†ÁöÑ request.js ÂèØËÉΩÂ∑≤Áªè return response.data\n        const res = await this.$axios.post('/ai/chat', payload)\n        const body = (res && typeof res.code !== 'undefined')\n            ? res\n            : (res && res.data ? res.data : null)\n\n        if (!body || Number(body.code) !== 200) {\n          const msg = (body && (body.msg || body.message)) ? (body.msg || body.message) : 'AI ËØ∑Ê±ÇÂ§±Ë¥•'\n          throw new Error(msg)\n        }\n\n        const data = body.data || {}\n        if (data.conversationId) this.conversationId = data.conversationId\n        this.pushMsg('assistant', data.reply || 'ÔºàAI Êú™ËøîÂõûÂÜÖÂÆπÔºâ')\n      } catch (e) {\n        this.pushMsg('assistant', `ÔºàÂá∫Èîô‰∫ÜÔºâ${e?.message || 'AI ËØ∑Ê±ÇÂ§±Ë¥•'}`)\n      } finally {\n        this.sending = false\n        this.saveToStorage()\n        this.$nextTick(() => this.scrollToBottom())\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ai-lite-root {}\n\n/* ===== ÊâìÂºÄÊó∂ËÑâÂÜ≤Âä®ÁîªÔºà‰ªéÊÇ¨ÊµÆÁêÉ‰ΩçÁΩÆÊâ©Êï£Ôºâ ===== */\n.ai-pulse {\n  position: fixed;\n  z-index: 5000;\n  width: 14px;\n  height: 14px;\n  border-radius: 999px;\n  transform: translate(-50%, -50%);\n  background: rgba(64, 158, 255, 0.22);\n  box-shadow: 0 0 0 0 rgba(64, 158, 255, 0.24);\n  pointer-events: none;\n  animation: aiPulse 420ms ease-out forwards;\n}\n\n@keyframes aiPulse {\n  0% {\n    opacity: 0.9;\n    transform: translate(-50%, -50%) scale(0.6);\n    box-shadow: 0 0 0 0 rgba(64, 158, 255, 0.30);\n  }\n  100% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(10);\n    box-shadow: 0 0 0 26px rgba(64, 158, 255, 0);\n  }\n}\n\n/* ===== ÊÇ¨ÊµÆÁêÉÔºàÂ∏¶Ë¥¥ËæπÂê∏ÈôÑËøáÊ∏°Ôºâ ===== */\n.ai-float {\n  position: fixed;\n  z-index: 4000;\n  width: 56px;\n  height: 56px;\n  transition: left 180ms cubic-bezier(0.2, 0.9, 0.2, 1), top 180ms cubic-bezier(0.2, 0.9, 0.2, 1);\n}\n.ai-float.is-dragging {\n  transition: none;\n}\n\n.ai-float-inner {\n  position: relative;\n  width: 56px;\n  height: 56px;\n  border-radius: 999px;\n  background: linear-gradient(180deg, rgba(64,158,255,1) 0%, rgba(64,158,255,0.86) 100%);\n  box-shadow: 0 14px 26px rgba(0,0,0,0.22);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  cursor: pointer;\n  transition: transform 0.15s ease, box-shadow 0.15s ease;\n  /* ÂÖ≥ÈîÆÔºöËß¶Êë∏ËÆæÂ§áÊãñÂä®Êõ¥Á®≥Ôºå‰∏çËß¶ÂèëÊªöÂä®/Áº©ÊîæÊâãÂäø */\n  touch-action: none;\n}\n.ai-float-inner:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 16px 30px rgba(0,0,0,0.24);\n}\n.ai-float-inner.dragging {\n  transform: scale(1.06);\n  box-shadow: 0 18px 34px rgba(0,0,0,0.28);\n  cursor: grabbing;\n}\n.ai-float-emoji {\n  font-size: 22px;\n  line-height: 1;\n}\n.ai-float-dot {\n  position: absolute;\n  right: 6px;\n  top: 6px;\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n  background: #ff4d4f;\n  box-shadow: 0 0 0 2px rgba(255,255,255,0.9);\n}\n\n/* ===== ÊäΩÂ±âÊï¥‰Ωì ===== */\n.ai-shell {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: #f6f7fb;\n}\n\n.ai-shell.is-opening {\n  animation: aiOpen 220ms cubic-bezier(0.22, 1, 0.36, 1) both;\n}\n\n@keyframes aiOpen {\n  0% {\n    opacity: 0;\n    transform: translateX(12px) scale(0.985);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0) scale(1);\n  }\n}\n\n.ai-header {\n  padding: 14px 14px 12px;\n  display: flex;\n  justify-content: space-between;\n  gap: 12px;\n  background: #ffffff;\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n}\n.ai-brand { display: flex; gap: 10px; align-items: center; }\n.ai-brand-icon {\n  width: 36px; height: 36px; border-radius: 12px;\n  background: rgba(64,158,255,0.12);\n  display: flex; align-items: center; justify-content: center;\n  font-size: 18px;\n}\n.ai-title { font-weight: 800; font-size: 16px; line-height: 1.1; }\n.ai-subtitle { margin-top: 4px; font-size: 12px; color: rgba(0,0,0,0.55); }\n.ai-actions { display: flex; gap: 8px; flex-shrink: 0; align-items: flex-start; }\n\n/* ===== Âø´Êç∑ÊèêÈóÆ ===== */\n.ai-quick {\n  padding: 10px 14px;\n  background: #ffffff;\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n}\n.ai-quick-row { display: flex; align-items: flex-start; gap: 10px; }\n.ai-quick-label { font-size: 12px; color: rgba(0,0,0,0.55); padding-top: 3px; flex-shrink: 0; }\n.ai-quick-items { display: flex; flex-wrap: wrap; gap: 8px; }\n.ai-chip { cursor: pointer; user-select: none; border-radius: 999px; }\n\n/* ===== Ê∂àÊÅØÂå∫ ===== */\n.ai-body { flex: 1; padding: 12px 14px; }\n.ai-msgs { display: flex; flex-direction: column; gap: 12px; }\n.ai-empty {\n  padding: 14px 12px;\n  border-radius: 14px;\n  background: rgba(255,255,255,0.8);\n  border: 1px dashed rgba(0,0,0,0.12);\n}\n.ai-empty-title { font-weight: 700; font-size: 14px; color: rgba(0,0,0,0.85); }\n.ai-empty-desc { margin-top: 6px; font-size: 12px; color: rgba(0,0,0,0.55); line-height: 1.55; }\n\n.ai-msg { display: flex; gap: 10px; align-items: flex-end; }\n.ai-msg.is-user { flex-direction: row-reverse; }\n\n.ai-avatar {\n  width: 30px; height: 30px; border-radius: 10px;\n  background: rgba(0,0,0,0.06);\n  color: rgba(0,0,0,0.75);\n  display: flex; align-items: center; justify-content: center;\n  font-size: 12px; flex-shrink: 0;\n}\n.ai-msg.is-user .ai-avatar {\n  background: rgba(64,158,255,0.18);\n  color: rgba(64,158,255,1);\n}\n\n.ai-bubble {\n  max-width: 78%;\n  padding: 10px 12px;\n  border-radius: 14px;\n  box-shadow: 0 8px 20px rgba(0,0,0,0.08);\n  background: #ffffff;\n  border: 1px solid rgba(0,0,0,0.04);\n}\n.ai-msg.is-user .ai-bubble {\n  background: rgba(64,158,255,0.12);\n  border: 1px solid rgba(64,158,255,0.10);\n}\n\n.ai-text {\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-size: 13px;\n  line-height: 1.6;\n  color: rgba(0,0,0,0.88);\n}\n.ai-meta {\n  margin-top: 6px;\n  font-size: 11px;\n  color: rgba(0,0,0,0.45);\n  text-align: right;\n}\n\n/* ===== ËæìÂÖ•Âå∫ ===== */\n.ai-input {\n  padding: 12px 14px 14px;\n  background: #ffffff;\n  border-top: 1px solid rgba(0,0,0,0.06);\n}\n.ai-sendbar {\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n}\n.ai-hint { font-size: 12px; color: rgba(0,0,0,0.5); line-height: 1.4; }\n.ai-send-btn { min-width: 84px; border-radius: 12px; }\n\n/* Drawer body Âéª padding */\n:deep(.el-drawer__body) { padding: 0; }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}