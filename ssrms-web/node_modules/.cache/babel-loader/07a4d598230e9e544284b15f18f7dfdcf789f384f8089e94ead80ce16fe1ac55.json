{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'AppHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n  beforeUnmount() {\n    this.stopQuoteTimer();\n  },\n  data() {\n    return {\n      /* ---------------------------\n       * é¢„çº¦é¡µï¼šæ ¡åŒº/å»ºç­‘/æ•™å®¤ + å¼€å§‹/ç»“æŸæ—¶é—´ + åº§ä½å·\n       * --------------------------- */\n      // æˆ¿é—´å…¨é‡ï¼ˆä¼˜å…ˆä»åç«¯æ‹‰ï¼›æ‹‰ä¸åˆ°å°±ç”¨å‰ç«¯å…œåº•ç”Ÿæˆï¼Œä¾¿äºä½ å…ˆæŠŠé¡µé¢è·‘é€šï¼‰\n      allRooms: [],\n      // ä¸‹æ‹‰é€‰é¡¹\n      campusOptions: [],\n      buildingOptions: [],\n      roomOptions: [],\n      // å½“å‰é€‰ä¸­\n      selectedCampus: '',\n      selectedBuilding: '',\n      selectedRoomId: null,\n      // å¼€å§‹/ç»“æŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰\n      startHour: null,\n      endHour: null,\n      // åº§ä½å·ï¼ˆ01~40ï¼‰\n      selectedSeatNo: '',\n      disabledSeatNos: [],\n      // ä¸´æ—¶é¢„çº¦åˆ—è¡¨ï¼ˆå¯æ·»åŠ å¤šæ¡ï¼Œæœ€åç»Ÿä¸€æäº¤ï¼‰\n      tempReservations: [],\n      submittingReservations: false,\n      // æ—¥æœŸç›¸å…³\n      dateList: [],\n      visibleStart: 0,\n      visibleCount: 7,\n      currentDateIndex: 0,\n      // åç«¯è¿”å›çš„â€œå·²æ»¡æ—¶æ®µâ€ï¼ˆid åˆ—è¡¨ï¼Œä¾‹å¦‚ [8,9,14]ï¼‰\n      disabledSlotIds: [],\n      // å½“å‰ç™»å½•ç”¨æˆ· id\n      currentUserId: null,\n      // æˆ‘çš„é¢„çº¦åˆ—è¡¨\n      myReservations: [],\n      // æˆ‘çš„é¢„çº¦åˆ†é¡µ\n      pageSize: 15,\n      reservationPageIndex: 1,\n      // è¿è§„è®°å½•ç›¸å…³\n      myViolations: [],\n      violationPageIndex: 1,\n      violationPageSize: 15,\n      // ä¸ªäººä¸­å¿ƒè¡¨å•æ•°æ®ï¼ˆæ¨¡æ¿é‡Œç”¨çš„æ˜¯è¿™äº›å­—æ®µåï¼Œæ‰€ä»¥è¿™é‡Œä¸æ”¹å­—æ®µåï¼‰\n      profileForm: {\n        name: '',\n        account: '',\n        studentNo: '',\n        college: '',\n        gradeClass: '',\n        phone: '',\n        email: '',\n        commonCampus: '',\n        profileRemark: ''\n      },\n      profileLoading: false,\n      profileSaving: false,\n      // é¦–é¡µ - å¤©æ°”ã€é‡‘å¥ã€å¿«æ·åé¦ˆ\n      weatherData: null,\n      dailyQuote: '',\n      dailyQuoteId: null,\n      quoteTimer: null,\n      openFeedback: false,\n      // è¯„ä»·ä¸åé¦ˆï¼ˆå†™å…¥ feedback è¡¨ï¼Œç®¡ç†å‘˜åç»­å¯æŸ¥çœ‹å¤„ç†ï¼‰\n      fbActiveTab: 'submit',\n      fbSubmitting: false,\n      fbCategoryOptions: [{\n        label: 'ç¯å¢ƒè¯„ä»·',\n        value: 'env'\n      }, {\n        label: 'æœåŠ¡è¯„ä»·',\n        value: 'service'\n      }, {\n        label: 'å»ºè®® / åŠŸèƒ½ä¼˜åŒ–',\n        value: 'suggestion'\n      }, {\n        label: 'æŠ•è¯‰',\n        value: 'complaint'\n      }, {\n        label: 'ç”³è¯‰ï¼ˆé¢„çº¦/è¿è§„ç­‰ï¼‰',\n        value: 'appeal'\n      }, {\n        label: 'å…¶ä»–',\n        value: 'other'\n      }],\n      feedbackForm: {\n        category: 'env',\n        reservationId: '',\n        rating: 5,\n        content: ''\n      },\n      feedbackRules: {\n        category: [{\n          required: true,\n          message: 'è¯·é€‰æ‹©åé¦ˆç±»å‹',\n          trigger: 'change'\n        }],\n        rating: [{\n          required: true,\n          message: 'è¯·ç»™å‡ºè¯„åˆ†',\n          trigger: 'change'\n        }],\n        content: [{\n          required: true,\n          message: 'è¯·å¡«å†™å†…å®¹',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          message: 'å†…å®¹è‡³å°‘ 5 ä¸ªå­—',\n          trigger: 'blur'\n        }]\n      },\n      fbStatusFilter: '',\n      fbList: [],\n      fbListLoading: false,\n      fbPageNum: 1,\n      fbPageSize: 6,\n      fbTotal: 0,\n      fbDetailVisible: false,\n      fbDetail: {},\n      // é¦–é¡µ - å…¬å‘Šåˆ—è¡¨ï¼ˆä»æ•°æ®åº“åŠ è½½ï¼‰\n      homeNotices: [],\n      homeNoticeAllCache: [],\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\n      noticeTypeOptions: [{\n        label: 'è§„åˆ™',\n        value: 'RULE',\n        icon: 'ğŸ“Œ'\n      }, {\n        label: 'è°ƒæ•´',\n        value: 'ADJUSTMENT',\n        icon: 'ğŸ•’'\n      }, {\n        label: 'çªå‘',\n        value: 'EMERGENCY',\n        icon: 'ğŸš¨'\n      }, {\n        label: 'ç»´æŠ¤',\n        value: 'MAINTENANCE',\n        icon: 'ğŸ› ï¸'\n      }, {\n        label: 'è€ƒè¯•',\n        value: 'EXAM',\n        icon: 'ğŸ“'\n      }, {\n        label: 'å…¶ä»–',\n        value: 'OTHER',\n        icon: 'ğŸ“£'\n      }],\n      noticeDetailVisible: false,\n      noticeDetail: null,\n      noticeAllVisible: false,\n      noticeAllView: 'list',\n      noticePageList: [],\n      noticeAllList: [],\n      noticeTotalCount: 0,\n      noticePageNum: 1,\n      noticePageSize: 6,\n      noticeTypeFilter: '',\n      noticeLoading: false,\n      homeNoticeLimit: 3,\n      noticeReadIds: [],\n      onlyViolation: false,\n      onlyPending: false,\n      currentCreditScore: 100,\n      todayOverview: {\n        totalSeats: 24000,\n        reservedCount: 0,\n        inUseCount: 0,\n        remainingCount: 24000\n      },\n      monthBrief: {\n        monthReserveCount: 0,\n        studyMinutes: 0,\n        lastVisitTime: null\n      }\n    };\n  },\n  computed: {\n    visibleDates() {\n      return this.dateList.slice(this.visibleStart, this.visibleStart + this.visibleCount).map((d, idx) => ({\n        ...d,\n        index: this.visibleStart + idx\n      }));\n    },\n    canMovePrev() {\n      return this.visibleStart > 0;\n    },\n    canMoveNext() {\n      return this.visibleStart + this.visibleCount < this.dateList.length;\n    },\n    currentRoomId() {\n      return this.selectedRoomId;\n    },\n    currentRoomFullName() {\n      const room = this.allRooms.find(r => Number(r.id) === Number(this.selectedRoomId));\n      if (!room) return '';\n      return `${room.campus} Â· ${room.building} ${room.roomName}`;\n    },\n    currentDateLabel() {\n      const cur = this.dateList[this.currentDateIndex];\n      return cur ? cur.fullLabel : '';\n    },\n    currentDateStr() {\n      const cur = this.dateList[this.currentDateIndex];\n      return cur ? cur.fullLabel : null;\n    },\n    // å¼€å§‹æ—¶é—´ï¼š08~22ï¼›ç»“æŸæ—¶é—´ï¼š09~23ï¼ˆä¸”å¿…é¡» > startHourï¼‰\n    startHourOptions() {\n      const arr = [];\n      for (let h = 8; h <= 22; h++) arr.push(h);\n      return arr;\n    },\n    endHourOptions() {\n      if (this.startHour == null) return [];\n      const arr = [];\n      const maxEnd = Math.min(23, this.startHour + 4); // âœ…æœ€å¤š4å°æ—¶\n      for (let h = this.startHour + 1; h <= maxEnd; h++) arr.push(h);\n      return arr;\n    },\n    selectedTimeText() {\n      if (this.startHour == null || this.endHour == null) return '';\n      return `${this.pad2(this.startHour)}:00 - ${this.pad2(this.endHour)}:00`;\n    },\n    selectedSlotIdsFromRange() {\n      if (this.startHour == null || this.endHour == null) return [];\n      const ids = [];\n      for (let h = this.startHour; h < this.endHour; h++) ids.push(h);\n      return ids;\n    },\n    rangeHasConflict() {\n      if (!this.disabledSlotIds.length) return false;\n      const disabled = new Set(this.disabledSlotIds.map(x => Number(x)));\n      return this.selectedSlotIdsFromRange.some(id => disabled.has(Number(id)));\n    },\n    seatList() {\n      const arr = [];\n      for (let i = 1; i <= 80; i++) arr.push(String(i).padStart(2, '0'));\n      return arr;\n    },\n    hasAnySelection() {\n      return this.startHour != null || this.endHour != null || !!this.selectedSeatNo;\n    },\n    selectionTagText() {\n      if (!this.currentDateLabel && !this.selectedTimeText && !this.selectedSeatNo) return '';\n      const parts = [];\n      if (this.currentRoomFullName) parts.push(this.currentRoomFullName);\n      if (this.currentDateLabel) parts.push(this.currentDateLabel);\n      if (this.selectedTimeText) parts.push(this.selectedTimeText);\n      if (this.selectedSeatNo) parts.push(`åº§ä½ ${this.selectedSeatNo}`);\n      return parts.join(' Â· ');\n    },\n    canClearAll() {\n      return this.tempReservations.length > 0 || this.startHour != null || this.endHour != null || !!this.selectedSeatNo;\n    },\n    currentTempKey() {\n      if (!this.currentRoomId || !this.currentDateStr) return '';\n      if (this.startHour == null || this.endHour == null) return '';\n      if (!this.selectedSeatNo) return '';\n      return [this.currentRoomId, this.currentDateStr, this.startHour, this.endHour, this.selectedSeatNo].join('|');\n    },\n    isDuplicateTempReservation() {\n      if (!this.currentTempKey) return false;\n      return this.tempReservations.some(x => x.key === this.currentTempKey);\n    },\n    canAddTempReservation() {\n      return !!this.currentRoomId && !!this.currentDateStr && this.startHour != null && this.endHour != null && !!this.selectedSeatNo && !this.rangeHasConflict && !this.isDuplicateTempReservation && this.tempReservations.length < 4;\n    },\n    canSubmitReservation() {\n      return this.tempReservations.length > 0 && !this.submittingReservations;\n    },\n    totalPages() {\n      if (!this.displayReservations.length) return 0;\n      return Math.ceil(this.displayReservations.length / this.pageSize);\n    },\n    pagedReservations() {\n      if (!this.displayReservations.length) return [];\n      const total = this.totalPages || 1;\n      const page = Math.min(this.reservationPageIndex, total);\n      const start = (page - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.displayReservations.slice(start, end);\n    },\n    violationTotalPages() {\n      if (!this.myViolations.length) return 0;\n      return Math.ceil(this.myViolations.length / this.violationPageSize);\n    },\n    pagedViolations() {\n      if (!this.myViolations.length) return [];\n      const total = this.violationTotalPages || 1;\n      const page = Math.min(this.violationPageIndex, total);\n      const start = (page - 1) * this.violationPageSize;\n      const end = start + this.violationPageSize;\n      return this.myViolations.slice(start, end);\n    },\n    todayStr() {\n      const d = new Date();\n      return `${d.getMonth() + 1} æœˆ ${d.getDate()} æ—¥`;\n    },\n    weekDayStr() {\n      const list = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];\n      return 'æ˜ŸæœŸ' + list[new Date().getDay()];\n    },\n    timeGreeting() {\n      const h = new Date().getHours();\n      if (h < 11) return 'ä¸Šåˆå¥½';\n      if (h < 14) return 'ä¸­åˆå¥½';\n      if (h < 19) return 'ä¸‹åˆå¥½';\n      return 'æ™šä¸Šå¥½';\n    },\n    todayAppointments() {\n      const list = Array.isArray(this.myReservations) ? this.myReservations : [];\n      if (!list.length) return [];\n      const d = new Date();\n      const todayStr = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;\n      return list.filter(item => item.date === todayStr);\n    },\n    displayReservations() {\n      const list = Array.isArray(this.myReservations) ? this.myReservations.slice() : [];\n      const byDateTimeAsc = (a, b) => {\n        const da = a.date || '';\n        const db = b.date || '';\n        if (da !== db) return da.localeCompare(db);\n        const ta = (a.startTime || '').slice(0, 8);\n        const tb = (b.startTime || '').slice(0, 8);\n        if (ta !== tb) return ta.localeCompare(tb);\n        return String(a.reservationNo || '').localeCompare(String(b.reservationNo || ''));\n      };\n      const norm = s => String(s ?? '').trim().toLowerCase();\n      const isPending = x => norm(x.status) === 'reserved';\n      const isViolation = x => ['late', 'no_show'].includes(norm(x.status));\n      if (this.onlyViolation) {\n        return list.filter(isViolation).sort(byDateTimeAsc);\n      }\n      if (this.onlyPending) {\n        return list.filter(isPending).sort(byDateTimeAsc);\n      }\n\n      // âœ… ä¸å‹¾é€‰ï¼šå¾…ç­¾åˆ°(reserved) ä¼˜å…ˆï¼Œå…¶æ¬¡å·²ç­¾åˆ°/è¿Ÿåˆ°ï¼Œå†æœªç­¾åˆ°ï¼Œæœ€åå–æ¶ˆç±»\n      const rank = st => {\n        if (st === 'reserved') return 0;\n        if (st === 'checked_in' || st === 'late') return 1;\n        if (st === 'no_show') return 2;\n        return 3;\n      };\n      return list.sort((a, b) => {\n        const ra = rank(a.status);\n        const rb = rank(b.status);\n        if (ra !== rb) return ra - rb;\n        return byDateTimeAsc(a, b);\n      });\n    },\n    monthStudyHours() {\n      const mins = Number(this.monthBrief.studyMinutes || 0);\n      const hours = mins / 60;\n      return Number.isInteger(hours) ? String(hours) : hours.toFixed(1);\n    },\n    lastVisitText() {\n      return this.formatLastVisit(this.monthBrief.lastVisitTime);\n    },\n    // è¯„ä»·ä¸åé¦ˆï¼šåªæœ‰â€œç¯å¢ƒ/æœåŠ¡â€ç±»éœ€è¦æ‰“åˆ†\n    fbNeedRating() {\n      const c = this.feedbackForm && this.feedbackForm.category ? String(this.feedbackForm.category) : '';\n      return ['env', 'service'].includes(c);\n    },\n    // å…³è”é¢„çº¦ä¸‹æ‹‰ï¼šå–æœ€è¿‘ä¸€äº›è®°å½•ï¼ˆé¿å…ä¸‹æ‹‰å¤ªé•¿ï¼‰\n    feedbackReservationOptions() {\n      const list = Array.isArray(this.myReservations) ? this.myReservations.slice() : [];\n      const key = x => `${x.date || ''} ${String(x.startTime || '')}`;\n      list.sort((a, b) => key(a) < key(b) ? 1 : -1);\n      return list.slice(0, 50);\n    },\n    creditLevel() {\n      const s = Number(this.currentCreditScore || 0);\n      if (s >= 80) return 'good';\n      if (s >= 60) return 'warn';\n      return 'bad';\n    },\n    creditLevelText() {\n      if (this.creditLevel === 'good') return 'è‰¯å¥½';\n      if (this.creditLevel === 'warn') return 'æ³¨æ„';\n      return 'é£é™©';\n    },\n    creditLevelClass() {\n      return `credit-${this.creditLevel}`;\n    },\n    creditBarStyle() {\n      const s = Math.max(0, Math.min(100, Number(this.currentCreditScore || 0)));\n      return {\n        width: `${s}%`\n      };\n    },\n    creditRiskTip() {\n      const s = Number(this.currentCreditScore || 0);\n      if (s < 60) return 'ä¿¡ç”¨åˆ†ä½äº 60 å¯èƒ½ä¼šè¢«åˆ—å…¥é»‘åå•ï¼Œä¸€æ®µæ—¶é—´å†…æ— æ³•é¢„çº¦ã€‚';\n      if (s < 80) return 'ä¿¡ç”¨åˆ†ä½äº 60 ä¼šè¢«åˆ—å…¥é»‘åå•ï¼›å»ºè®®ä¿æŒæŒ‰æ—¶ç­¾åˆ°ï¼Œé¿å…è¿Ÿåˆ°æˆ–æœªç­¾åˆ°ã€‚';\n      return 'ä¿¡ç”¨åˆ†ä½äº 60 ä¼šè¢«åˆ—å…¥é»‘åå•ï¼›ç»§ç»­ä¿æŒæŒ‰æ—¶ç­¾åˆ°ã€‚';\n    }\n  },\n  created() {\n    // åˆå§‹åŒ–æ—¥æœŸï¼ˆé¦–é¡µä¹Ÿè¦ç”¨ï¼‰\n    this.initDates();\n\n    // å…ˆè¯» localStorageï¼ˆå…¼å®¹å¤šç§å­—æ®µåï¼‰\n    const u0 = this.getStoredUser();\n    if (u0) {\n      this.currentUserId = u0.userId ?? u0.id ?? null;\n      this.loadNoticeReadIds();\n      this.profileForm = {\n        name: u0.userName || u0.name || '',\n        account: u0.accountNo || u0.account || '',\n        studentNo: u0.accountNo || u0.studentNo || u0.account || '',\n        college: u0.college || '',\n        gradeClass: u0.gradeClass || '',\n        phone: u0.phone || '',\n        email: u0.email || '',\n        commonCampus: u0.commonCampus || '',\n        profileRemark: u0.profileRemark || ''\n      };\n\n      // å†å»è¯·æ±‚åç«¯æ‹¿æœ€æ–°èµ„æ–™è¦†ç›–ï¼ˆä¸ä¼šå½±å“æ¨¡æ¿å­—æ®µåï¼‰\n      this.loadUserProfile();\n    }\n\n    // âœ… æ—¶æ®µå ç”¨æƒ…å†µåœ¨ initReserveRooms() é‡Œæ ¹æ®é»˜è®¤æˆ¿é—´è‡ªåŠ¨æ‹‰å–\n\n    // é¦–é¡µä¹Ÿæ‹‰ä¸€æ¬¡æˆ‘çš„é¢„çº¦ï¼ˆä¸å¼¹â€œæœªç­¾åˆ°åˆ·æ–°â€çš„æé†’ï¼‰\n    this.loadMyReservations({\n      refreshNoShowNotify: false\n    });\n    this.loadWeather();\n    this.loadQuoteFromDb();\n    this.loadHomeDashboard();\n    this.loadHomeNotices();\n  },\n  methods: {\n    /* ---------------------------\n     * ç»Ÿä¸€å¤„ç† Axios è¿”å›ç»“æ„\n     * --------------------------- */\n    normalizeBody(res) {\n      // âœ… ä½ çš„ request.js å·²ç» return response.data\n      // æ‰€ä»¥è¿™é‡Œæ‹¿åˆ°çš„ res å°±æ˜¯åç«¯ JSONï¼ˆResultï¼‰\n      return res;\n    },\n    normalizeData(res) {\n      const body = this.normalizeBody(res);\n\n      // âœ… æ ‡å‡† Resultï¼š{code,msg,data,total}\n      if (body && typeof body === 'object' && 'code' in body && 'data' in body) {\n        return body.data;\n      }\n\n      // å…œåº•ï¼šå¦‚æœä»¥åæŸäº›æ¥å£çœŸè¿”å›â€œè£¸æ•°æ®â€\n      return body;\n    },\n    isBizOk(resOrBody) {\n      const body = this.normalizeBody(resOrBody);\n\n      // âœ… åªè®¤ Result.code===200 ä¸ºæˆåŠŸ\n      if (!body || typeof body !== 'object' || !('code' in body)) return false;\n      return Number(body.code) === 200;\n    },\n    getMsg(resOrBody, fallback = '') {\n      const body = this.normalizeBody(resOrBody);\n      if (!body || typeof body !== 'object') return fallback;\n      return body.msg || fallback;\n    },\n    getUserStorage() {\n      // ä¼˜å…ˆ localStorageï¼Œå…¶æ¬¡ sessionStorageï¼›éƒ½æ²¡æœ‰å°±é»˜è®¤ localStorage\n      if (localStorage.getItem('ssrmsUser')) return localStorage;\n      if (sessionStorage.getItem('ssrmsUser')) return sessionStorage;\n      return localStorage;\n    },\n    getStoredUser() {\n      const storage = this.getUserStorage();\n      const raw = storage.getItem('ssrmsUser');\n      if (!raw) return null;\n      try {\n        return JSON.parse(raw);\n      } catch (e) {\n        console.error('è§£æ ssrmsUser å¤±è´¥', e);\n        return null;\n      }\n    },\n    setStoredUser(userObj) {\n      const storage = this.getUserStorage();\n      storage.setItem('ssrmsUser', JSON.stringify(userObj));\n    },\n    ensureCurrentUserId() {\n      if (this.currentUserId) return this.currentUserId;\n      const u = this.getStoredUser();\n      if (u) {\n        this.currentUserId = u.userId ?? u.id ?? null;\n      }\n      return this.currentUserId;\n    },\n    emitChange(page) {\n      this.$emit('change-page', page);\n    },\n    /* ---------------------------\n     * é¢„çº¦é¡µï¼šæˆ¿é—´é€‰é¡¹åˆå§‹åŒ–\n     * --------------------------- */\n    async initReserveRooms() {\n      // âœ… é‡æ–°è¿›å…¥ä¹Ÿåˆ·æ–°ä¸€æ¬¡å†²çªæ•°æ®ï¼ˆå¦åˆ™æ¢äº†æ—¥æœŸ/æ•™å®¤å†å›æ¥å¯èƒ½è¿˜æ˜¯æ—§çš„ï¼‰\n      if (this.campusOptions && this.campusOptions.length) {\n        await this.fetchSlotStatus();\n        return;\n      }\n\n      // 1) å…ˆå°è¯•ä»åç«¯æ‹‰æˆ¿é—´åˆ—è¡¨ï¼ˆä½ åç«¯ RoomController å†™å¥½åï¼Œè¿™é‡Œä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼‰\n      const rooms = await this.loadRoomsFromBackend().catch(() => null);\n\n      // 2) æ‹‰ä¸åˆ°å°±ç”¨å‰ç«¯å…œåº•ç”Ÿæˆï¼ˆé¡ºåºä¸æˆ‘ä»¬ä¹‹å‰çš„æ‰¹é‡æ’å…¥ä¿æŒä¸€è‡´ï¼Œid ä» 1 å¼€å§‹ï¼‰\n      this.allRooms = Array.isArray(rooms) && rooms.length ? rooms : this.buildFallbackRooms();\n\n      // 3) æ„å»ºä¸‹æ‹‰é€‰é¡¹ï¼Œå¹¶ç»™ä¸€ä¸ªé»˜è®¤å€¼\n      this.campusOptions = Array.from(new Set(this.allRooms.map(r => r.campus)));\n      this.selectedCampus = this.selectedCampus || this.campusOptions[0] || '';\n      this.onCampusChange();\n\n      // é»˜è®¤æ—¶é—´\n      if (this.startHour == null) this.startHour = 8;\n      if (this.endHour == null) this.endHour = 9;\n\n      // âœ… é»˜è®¤å€¼å°±ç»ªåï¼Œåˆ·æ–°ä¸€æ¬¡å†²çª\n      await this.fetchSlotStatus();\n    },\n    async loadRoomsFromBackend() {\n      // å…¼å®¹ä½ åç«¯æœªæ¥å¯èƒ½çš„ä¸åŒæ¥å£å‘½åï¼Œå°½é‡â€œå…ˆèƒ½è·‘â€\n      const tries = [{\n        url: '/room/list'\n      }, {\n        url: '/room/all'\n      }];\n      for (const t of tries) {\n        try {\n          const res = await this.$axios.get(t.url);\n          const data = this.normalizeData(res);\n          if (Array.isArray(data) && data.length) return data;\n        } catch (e) {\n          // ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ª\n        }\n      }\n      return null;\n    },\n    buildFallbackRooms() {\n      const campuses = ['æœ¬éƒ¨æ ¡åŒº', 'ä¸œæ ¡åŒº', 'æ¢…å±±æ ¡åŒº'];\n      const buildings = ['å›¾ä¹¦é¦†', '1å·æ•™å­¦æ¥¼', '2å·æ•™å­¦æ¥¼', '3å·æ•™å­¦æ¥¼'];\n      const rooms = [];\n\n      // 101~105, 201~205 ... 501~505\n      const roomNames = [];\n      for (let floor = 1; floor <= 5; floor++) {\n        for (let no = 1; no <= 5; no++) {\n          roomNames.push(`${floor}0${no}`);\n        }\n      }\n      let id = 1;\n      for (const c of campuses) {\n        for (const b of buildings) {\n          for (const rn of roomNames) {\n            rooms.push({\n              id,\n              campus: c,\n              building: b,\n              roomName: rn,\n              totalSeats: 80,\n              openSeats: 80,\n              status: 'open'\n            });\n            id++;\n          }\n        }\n      }\n      return rooms;\n    },\n    onCampusChange() {\n      // é‡å»º buildingOptions\n      const bs = this.allRooms.filter(r => r.campus === this.selectedCampus).map(r => r.building);\n      this.buildingOptions = Array.from(new Set(bs));\n      if (!this.buildingOptions.includes(this.selectedBuilding)) {\n        this.selectedBuilding = this.buildingOptions[0] || '';\n      }\n      this.onBuildingChange();\n    },\n    onBuildingChange() {\n      // é‡å»º roomOptions\n      const list = this.allRooms.filter(r => r.campus === this.selectedCampus && r.building === this.selectedBuilding).map(r => ({\n        id: r.id,\n        roomName: r.roomName\n      }));\n      this.roomOptions = list;\n      const ids = list.map(x => Number(x.id));\n      if (!ids.includes(Number(this.selectedRoomId))) {\n        this.selectedRoomId = list.length ? Number(list[0].id) : null;\n      }\n\n      // æˆ¿é—´åˆ‡æ¢ååˆ·æ–°å ç”¨æ—¶æ®µ & æ¸…ç©ºåº§ä½ï¼ˆåº§ä½å ç”¨åç«¯è¿˜æ²¡æ¥ï¼Œè¿™é‡Œå…ˆæ¸…ç©ºï¼‰\n      this.selectedSeatNo = '';\n      this.fetchSlotStatus();\n    },\n    onRoomChange() {\n      this.selectedSeatNo = '';\n      this.fetchSlotStatus();\n    },\n    pad2(n) {\n      return String(n).padStart(2, '0');\n    },\n    handleStartHourChange() {\n      if (this.startHour == null) return;\n      const maxEnd = Math.min(23, this.startHour + 4);\n      if (this.endHour == null || this.endHour <= this.startHour) this.endHour = this.startHour + 1;\n      if (this.endHour > maxEnd) this.endHour = maxEnd;\n      this.fetchSeatConflicts();\n    },\n    handleEndHourChange() {\n      if (this.startHour == null || this.endHour == null) return;\n      const maxEnd = Math.min(23, this.startHour + 4);\n      if (this.endHour <= this.startHour) this.endHour = this.startHour + 1;\n      if (this.endHour > maxEnd) this.endHour = maxEnd;\n      this.fetchSeatConflicts();\n    },\n    initDates() {\n      const today = new Date();\n      const list = [];\n      const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];\n      for (let i = 0; i < 14; i++) {\n        const d = new Date(today);\n        d.setDate(d.getDate() + i + 1);\n        const month = d.getMonth() + 1;\n        const day = d.getDate();\n        const fullLabel = `${d.getFullYear()}-${month.toString().padStart(2, '0')}-` + `${day.toString().padStart(2, '0')}`;\n        list.push({\n          key: i,\n          year: d.getFullYear(),\n          month,\n          day,\n          weekday: weekdays[d.getDay()],\n          monthLabel: `${d.getFullYear()}-${month.toString().padStart(2, '0')}`,\n          isToday: false,\n          isTomorrow: i === 0,\n          fullLabel\n        });\n      }\n      this.dateList = list;\n      this.visibleStart = 0;\n      this.currentDateIndex = 0;\n    },\n    moveDates(direction) {\n      if (direction === 'prev' && this.canMovePrev) this.visibleStart -= 1;else if (direction === 'next' && this.canMoveNext) this.visibleStart += 1;\n    },\n    async selectDate(index) {\n      this.currentDateIndex = index;\n      await this.fetchSlotStatus();\n    },\n    async fetchSlotStatus() {\n      this.disabledSlotIds = [];\n      // åŒæ­¥åˆ·æ–°åº§ä½å†²çªï¼ˆç”¨äºç½®ç°ä¸å¯é¢„çº¦åº§ä½ï¼‰\n      await this.fetchSeatConflicts();\n    },\n    /* ---------------------------\n     * é¢„çº¦é¡µï¼šåº§ä½é€‰æ‹©\n     * --------------------------- */\n    seatState(seat) {\n      if (this.disabledSeatNos.includes(seat)) return 'disabled';\n      if (this.selectedSeatNo === seat) return 'selected';\n      return 'available';\n    },\n    seatClass(seat) {\n      const state = this.seatState(seat);\n      return {\n        'slot-available': state === 'available',\n        'slot-disabled': state === 'disabled',\n        'slot-selected': state === 'selected'\n      };\n    },\n    toggleSeat(seat) {\n      // ç‚¹åˆ°å†²çªåº§ä½ï¼šä¸é€‰æ‹©ï¼Œä½†æç¤ºå†²çªåŒºé—´\n      if (this.disabledSeatNos.includes(seat)) {\n        return;\n      }\n\n      // å¯é€‰åº§ä½ï¼šæ­£å¸¸é€‰ä¸­ï¼Œå¹¶æ¸…ç©ºæç¤º\n      this.selectedSeatNo = this.selectedSeatNo === seat ? '' : seat;\n    },\n    resetSelections() {\n      // åªæ¸…ç©ºå½“å‰â€œè¾“å…¥æ¡†â€é€‰æ‹©ï¼Œä¸å½±å“å·²æ·»åŠ çš„ä¸´æ—¶åˆ—è¡¨\n      this.startHour = null;\n      this.endHour = null;\n      this.selectedSeatNo = '';\n    },\n    clearAllSelections() {\n      // æ¸…ç©ºå½“å‰é€‰æ‹© + ä¸´æ—¶åˆ—è¡¨\n      this.resetSelections();\n      this.tempReservations = [];\n    },\n    addTempReservation() {\n      if (!this.canAddTempReservation) return;\n      const room = this.allRooms.find(r => Number(r.id) == Number(this.currentRoomId));\n      const labelParts = [];\n      if (room) labelParts.push(`${room.campus} Â· ${room.building} ${room.roomName}`);\n      if (this.currentDateStr) labelParts.push(this.currentDateStr);\n      if (this.selectedTimeText) labelParts.push(this.selectedTimeText);\n      labelParts.push(`åº§ä½ ${this.selectedSeatNo}`);\n      const item = {\n        key: this.currentTempKey,\n        roomId: this.currentRoomId,\n        date: this.currentDateStr,\n        startHour: this.startHour,\n        endHour: this.endHour,\n        seatNo: this.selectedSeatNo,\n        label: labelParts.join(' Â· ')\n      };\n      this.tempReservations.push(item);\n      // æ·»åŠ åæŒ‰é’®ä¼šå› â€œé‡å¤â€è€Œè‡ªåŠ¨å˜ç°ï¼ˆisDuplicateTempReservationï¼‰\n    },\n    removeTempReservation(idx) {\n      if (idx == null) return;\n      this.tempReservations.splice(idx, 1);\n    },\n    async submitReservations() {\n      if (!this.canSubmitReservation) return;\n      if (!this.ensureCurrentUserId()) {\n        alert('è¯·å…ˆç™»å½•åå†é¢„çº¦');\n        return;\n      }\n      const first = this.tempReservations[0];\n\n      // åç«¯ä¸€æ¬¡æäº¤åªèƒ½å¤„ç†åŒä¸€ room/date/time çš„å¤šä¸ª seatNos\n      const same = this.tempReservations.every(x => Number(x.roomId) === Number(first.roomId) && x.date === first.date && Number(x.startHour) === Number(first.startHour) && Number(x.endHour) === Number(first.endHour));\n      if (!same) {\n        alert('è¯·ç¡®ä¿ä¸´æ—¶åˆ—è¡¨é‡Œçš„é¢„çº¦å±äºåŒä¸€æ•™å®¤/æ—¥æœŸ/æ—¶é—´æ®µï¼ˆå¯å¤šé€‰åº§ä½ï¼‰ï¼Œå¦åˆ™è¯·åˆ†å¤šæ¬¡æäº¤ã€‚');\n        return;\n      }\n      const payload = {\n        userId: this.currentUserId,\n        roomId: first.roomId,\n        date: first.date,\n        startTime: `${this.pad2(first.startHour)}:00`,\n        endTime: `${this.pad2(first.endHour)}:00`,\n        seatNos: this.tempReservations.map(x => String(x.seatNo))\n      };\n      this.submittingReservations = true;\n      try {\n        const res = await this.$axios.post('/reservation/create', payload);\n        const body = this.normalizeBody(res);\n        if (!this.isBizOk(body)) {\n          const msg = this.getMsg(body, 'é¢„çº¦å¤±è´¥');\n          if (msg && msg.includes('\\n')) {\n            this.conflictLines = msg.split('\\n').slice(0, 4);\n          }\n          alert(msg);\n          return;\n        }\n        alert(this.getMsg(body, 'é¢„çº¦æˆåŠŸ'));\n        this.clearAllSelections();\n        this.emitChange('user-reservations');\n      } catch (e) {\n        console.error(e);\n        alert('é¢„çº¦å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      } finally {\n        this.submittingReservations = false;\n      }\n    },\n    async loadMyReservations(opts = {}) {\n      const {\n        refreshNoShowNotify = true // æ˜¯å¦æç¤ºâ€œè‡ªåŠ¨æ ‡è®°æœªç­¾åˆ°â€\n      } = opts;\n      if (!this.ensureCurrentUserId()) return;\n\n      // è¿›å…¥åˆ—è¡¨å‰ï¼Œè®©åç«¯åˆ·æ–°ä¸€æ¬¡æœªç­¾åˆ°çŠ¶æ€ï¼ˆå¯é€‰æ‹©æ˜¯å¦å¼¹æé†’ï¼‰\n      await this.refreshNoShowStatus({\n        notify: refreshNoShowNotify\n      });\n      try {\n        const res = await this.$axios.get('/reservation/my', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const list = Array.isArray(this.normalizeData(res)) ? this.normalizeData(res).slice() : [];\n\n        // æ—¥æœŸå‡åºï¼ŒåŒä¸€å¤©æŒ‰å¼€å§‹æ—¶é—´å‡åº\n        list.sort((a, b) => {\n          const da = a.date || '';\n          const db = b.date || '';\n          if (da !== db) return da.localeCompare(db);\n          const ta = a.startTime || '';\n          const tb = b.startTime || '';\n          return ta.localeCompare(tb);\n        });\n        this.myReservations = list;\n      } catch (e) {\n        console.error(e);\n        alert('åŠ è½½é¢„çº¦åˆ—è¡¨å¤±è´¥');\n      }\n    },\n    formatTimeRange(item) {\n      const s = (item.startTime || '').slice(0, 5);\n      const e = (item.endTime || '').slice(0, 5);\n      return s && e ? `${s}-${e}` : '';\n    },\n    renderStatusText(status) {\n      switch (status) {\n        case 'reserved':\n          return 'å¾…ç­¾åˆ°';\n        case 'checked_in':\n          return 'å·²ç­¾åˆ°';\n        case 'late':\n          return 'è¿Ÿåˆ°';\n        case 'no_show':\n          return 'æœªç­¾åˆ°';\n        case 'cancelled':\n          return 'å·²å–æ¶ˆ';\n        case 'cancel_overdue':\n          return 'é€¾æœŸå–æ¶ˆ';\n        default:\n          return status || '';\n      }\n    },\n    statusClass(status) {\n      return {\n        'badge-pending': status === 'reserved',\n        'badge-done': status === 'checked_in',\n        'badge-late': status === 'late',\n        'badge-missed': status === 'no_show',\n        'badge-cancelled': status === 'cancelled',\n        'badge-cancel-overdue': status === 'cancel_overdue'\n      };\n    },\n    violationTypeClass(type) {\n      const t = (type || '').toString();\n      if (t.includes('æœªç­¾åˆ°')) return 'vt-no-show';\n      if (t.includes('è¿Ÿåˆ°')) return 'vt-late';\n      return 'vt-other';\n    },\n    gotoPrevPage() {\n      if (this.reservationPageIndex > 1) this.reservationPageIndex--;\n    },\n    gotoNextPage() {\n      if (this.reservationPageIndex < this.totalPages) this.reservationPageIndex++;\n    },\n    async handleCheckIn(item) {\n      try {\n        const res = await this.$axios.post(`/reservation/checkin/${item.id}`);\n        const body = this.normalizeBody(res);\n        const ok = this.isBizOk(body);\n        alert(this.getMsg(body, ok ? 'ç­¾åˆ°æˆåŠŸ' : 'ç­¾åˆ°å¤±è´¥'));\n\n        // âœ… ä¸ç®¡æˆåŠŸå¤±è´¥ï¼Œéƒ½åˆ·æ–°ä¸€æ¬¡åˆ—è¡¨ï¼ˆé¿å…â€œåç«¯å·²æ›´æ–°ä½†é¡µé¢ä¸å˜â€ï¼‰\n        await this.loadMyReservations({\n          refreshNoShowNotify: false\n        });\n      } catch (e) {\n        console.error(e);\n        alert('ç­¾åˆ°å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      }\n    },\n    async handleCancel(item) {\n      if (!this.canCancel(item)) {\n        alert('è·ç¦»å¼€å§‹ä¸è¶³ 10 åˆ†é’Ÿï¼Œæ— æ³•å–æ¶ˆï¼Œè¯·è”ç³»ç®¡ç†å‘˜å¤„ç†');\n        return;\n      }\n      const ok = window.confirm(`ç¡®å®šè¦å–æ¶ˆæœ¬æ¬¡é¢„çº¦ï¼ˆ${item.date} ${this.formatTimeRange(item)}ï¼‰å—ï¼Ÿ`);\n      if (!ok) return;\n      try {\n        const res = await this.$axios.post(`/reservation/cancel/${item.id}`);\n        const body = this.normalizeBody(res);\n        if (!this.isBizOk(body)) {\n          alert(this.getMsg(body, 'å–æ¶ˆå¤±è´¥'));\n          return;\n        }\n        alert(this.getMsg(body, 'å–æ¶ˆæˆåŠŸ'));\n        await this.loadMyReservations({\n          refreshNoShowNotify: false\n        });\n        await this.fetchSlotStatus();\n      } catch (e) {\n        console.error(e);\n        alert('å–æ¶ˆå¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      }\n    },\n    canCancel(item) {\n      if (item.status !== 'reserved') return false;\n      if (!item.date || !item.startTime) return false;\n      try {\n        const startStr = item.date + 'T' + (item.startTime || '').slice(0, 8);\n        const start = new Date(startStr);\n        if (isNaN(start.getTime())) return true;\n        const now = new Date();\n        const diffMs = start.getTime() - now.getTime();\n        const tenMinutes = 10 * 60 * 1000;\n        return diffMs > tenMinutes;\n      } catch (e) {\n        console.error(e);\n        return true;\n      }\n    },\n    async refreshNoShowStatus(opts = {}) {\n      const {\n        notify = true\n      } = opts;\n      if (!this.ensureCurrentUserId()) return;\n      try {\n        const res = await this.$axios.post('/reservation/refreshNoShow', null, {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const data = this.normalizeData(res);\n        const updated = typeof data === 'number' ? data : 0;\n        if (notify && updated > 0) {\n          alert(`æœ‰ ${updated} æ¡å·²è¿‡æœŸä½†æœªç­¾åˆ°çš„é¢„çº¦ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€ï¼Œè¯·ç•™æ„ä¿¡ç”¨åˆ†å˜åŒ–ã€‚`);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    async loadMyViolations() {\n      if (!this.ensureCurrentUserId()) return;\n      try {\n        // è¿™é‡Œé»˜è®¤ä¸å¼¹â€œåˆ·æ–°æœªç­¾åˆ°â€çš„æé†’ï¼Œé¿å…ç”¨æˆ·ä¸€è¿›é¡µé¢å°±è¢«æ‰“æ–­\n        await this.refreshNoShowStatus({\n          notify: false\n        });\n        const res = await this.$axios.get('/reservation/violations', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const list = Array.isArray(this.normalizeData(res)) ? this.normalizeData(res).slice() : [];\n        this.myViolations = list;\n        this.violationPageIndex = 1;\n      } catch (e) {\n        console.error(e);\n        alert('åŠ è½½è¿è§„è®°å½•å¤±è´¥');\n      }\n      await this.loadUserProfile();\n    },\n    gotoPrevViolationPage() {\n      if (this.violationPageIndex > 1) this.violationPageIndex--;\n    },\n    gotoNextViolationPage() {\n      if (this.violationPageIndex < this.violationTotalPages) this.violationPageIndex++;\n    },\n    async loadUserProfile() {\n      if (!this.ensureCurrentUserId()) return;\n      this.profileLoading = true;\n      try {\n        const res = await this.$axios.get('/user/profile', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const u = this.normalizeData(res) || {};\n        this.currentCreditScore = Number.isFinite(Number(u.creditScore)) ? Number(u.creditScore) : 100;\n        this.profileForm = {\n          name: u.userName || u.name || this.profileForm.name || '',\n          account: u.accountNo || u.account || this.profileForm.account || '',\n          studentNo: u.accountNo || u.studentNo || this.profileForm.studentNo || '',\n          college: u.college || '',\n          gradeClass: u.gradeClass || '',\n          phone: u.phone || '',\n          email: u.email || '',\n          commonCampus: u.commonCampus || '',\n          profileRemark: u.profileRemark || ''\n        };\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e);\n      } finally {\n        this.profileLoading = false;\n      }\n    },\n    async handleProfileSave() {\n      if (!this.ensureCurrentUserId()) {\n        alert('å½“å‰ç”¨æˆ·ä¿¡æ¯ç¼ºå¤±ï¼Œè¯·é‡æ–°ç™»å½•åå†è¯•');\n        return;\n      }\n      this.profileSaving = true;\n      try {\n        // åŒæ—¶å¸¦ä¸Š userName/accountNo ç­‰å­—æ®µï¼Œå…¼å®¹åç«¯ä¸åŒå‘½å\n        const payload = {\n          userId: this.currentUserId,\n          id: this.currentUserId,\n          userName: this.profileForm.name,\n          name: this.profileForm.name,\n          accountNo: this.profileForm.studentNo || this.profileForm.account,\n          account: this.profileForm.studentNo || this.profileForm.account,\n          studentNo: this.profileForm.studentNo || this.profileForm.account,\n          college: this.profileForm.college,\n          gradeClass: this.profileForm.gradeClass,\n          phone: this.profileForm.phone,\n          email: this.profileForm.email,\n          commonCampus: this.profileForm.commonCampus,\n          profileRemark: this.profileForm.profileRemark\n        };\n        const res = await this.$axios.post('/user/profile', payload);\n        const body = this.normalizeBody(res);\n        if (!this.isBizOk(body)) {\n          alert(this.getMsg(body, 'ä¿å­˜å¤±è´¥'));\n          return;\n        }\n        alert(this.getMsg(body, 'ä¿å­˜æˆåŠŸ'));\n\n        // æ›´æ–° localStorage\n        const storage = this.getUserStorage();\n        const raw = storage.getItem('ssrmsUser');\n        if (raw) {\n          try {\n            const user = JSON.parse(raw);\n            Object.assign(user, {\n              name: this.profileForm.name,\n              studentNo: this.profileForm.studentNo,\n              college: this.profileForm.college,\n              gradeClass: this.profileForm.gradeClass,\n              phone: this.profileForm.phone,\n              email: this.profileForm.email,\n              age: this.profileForm.age,\n              sex: this.profileForm.sex,\n              commonCampus: this.profileForm.commonCampus,\n              profileRemark: this.profileForm.profileRemark\n            });\n            storage.setItem('ssrmsUser', JSON.stringify(user));\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e);\n        alert('ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\n      } finally {\n        this.profileSaving = false;\n      }\n    },\n    submitFB(score) {\n      console.log('ç”¨æˆ·ç»™äº†ä¸€ä¸ªå¿«æ·è¯„åˆ†ï¼š', score);\n      this.openFeedback = false;\n    },\n    codeToDesc(code) {\n      const map = {\n        0: 'æ™´',\n        1: 'å¤šäº‘',\n        2: 'å¤šäº‘',\n        3: 'é˜´',\n        45: 'æœ‰é›¾',\n        48: 'é›¾ï¼Œåœ°é¢ç»“å†°',\n        51: 'æ¯›æ¯›é›¨',\n        53: 'å°é›¨',\n        55: 'ä¸­é›¨',\n        61: 'å°é›¨',\n        63: 'ä¸­é›¨',\n        65: 'å¤§é›¨',\n        71: 'å°é›ª',\n        73: 'ä¸­é›ª',\n        75: 'å¤§é›ª',\n        95: 'é›·é˜µé›¨',\n        96: 'é›·é˜µé›¨ä¼´æœ‰å†°é›¹'\n      };\n      return map[code] || 'å¤šäº‘';\n    },\n    async loadWeather() {\n      try {\n        const resp = await fetch('https://api.open-meteo.com/v1/forecast' + '?latitude=29.88&longitude=121.55' + '&current_weather=true');\n        const json = await resp.json();\n        const cw = json && json.current_weather || {};\n        const temp = cw.temperature;\n        const windSpeed = cw.windspeed;\n        const code = cw.weathercode;\n        const desc = this.codeToDesc(code);\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: temp != null ? temp : 18,\n          desc: desc || 'å¤šäº‘',\n          wind: windSpeed != null ? `é£é€Ÿ ${windSpeed} km/h` : 'å¾®é£'\n        };\n      } catch (e) {\n        console.warn('è¯·æ±‚å¤©æ°”å¤±è´¥ï¼Œä½¿ç”¨å…œåº•æ–‡æ¡ˆ', e);\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: 18,\n          desc: 'å¤šäº‘',\n          wind: 'å¾®é£'\n        };\n      }\n    },\n    async loadQuoteFromDb() {\n      try {\n        const res = await this.$axios.get('/quote/random', {\n          params: {\n            excludeId: this.dailyQuoteId || undefined\n          }\n        });\n        const body = this.normalizeBody(res);\n        const data = this.normalizeData(res);\n\n        // è¿™é‡Œå³ä½¿åç«¯ä¸åŒ… Rï¼Œä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ\n        if (this.isBizOk(body) && data && data.content) {\n          this.dailyQuote = data.content || '';\n          this.dailyQuoteId = data.id || null;\n          return;\n        }\n\n        // åç«¯è¿”å›æˆåŠŸä½† content ä¸ºç©ºçš„å…œåº•\n        this.dailyQuote = 'ä»Šå¤©ä¹Ÿè¦ç¨³ä½èŠ‚å¥ï¼Œå…ˆåšä¸€å°æ­¥ã€‚';\n        this.dailyQuoteId = null;\n      } catch (e) {\n        // âœ… å…³é”®ï¼šæŠŠçœŸæ­£å¤±è´¥åŸå› æ‰“å‡ºæ¥ï¼ˆ404 / 405 / CORS / 500 ä¸€çœ¼å°±èƒ½çœ‹è§ï¼‰\n        const status = e?.response?.status;\n        const url = e?.config?.url;\n        const msg = e?.message;\n        console.warn('[quote] load failed:', {\n          status,\n          url,\n          msg,\n          resp: e?.response?.data\n        });\n        this.dailyQuote = 'ç½‘ç»œå¼€å°å·®äº†ï¼Œä½†ä½ çš„è‡ªå¾‹åˆ«æ‰çº¿ã€‚';\n        this.dailyQuoteId = null;\n      }\n    },\n    startQuoteTimer() {\n      this.stopQuoteTimer();\n      this.quoteTimer = setInterval(() => {\n        if (this.currentPage === 'home') {\n          this.loadQuoteFromDb();\n        }\n      }, 20000);\n    },\n    stopQuoteTimer() {\n      if (this.quoteTimer) {\n        clearInterval(this.quoteTimer);\n        this.quoteTimer = null;\n      }\n    },\n    async refreshQuote() {\n      // æ‰‹åŠ¨åˆ·æ–°ï¼šå…ˆæ¢ä¸€å¥ï¼Œå†æŠŠ 20s è®¡æ—¶ä»ç°åœ¨é‡æ–°å¼€å§‹\n      await this.loadQuoteFromDb();\n      this.startQuoteTimer();\n    },\n    emojiWeather(desc) {\n      if (!desc) return 'â›…';\n      if (desc.includes('é›¨')) return 'ğŸŒ§ï¸';\n      if (desc.includes('äº‘')) return 'â›…';\n      if (desc.includes('æ™´')) return 'â˜€ï¸';\n      if (desc.includes('é›ª')) return 'â„ï¸';\n      return 'â›…';\n    },\n    async fetchSeatConflicts() {\n      this.disabledSeatNos = [];\n      if (!this.currentRoomId || !this.currentDateStr || this.startHour == null || this.endHour == null) return;\n      const startTime = `${this.pad2(this.startHour)}:00`;\n      const endTime = `${this.pad2(this.endHour)}:00`;\n      try {\n        const res = await this.$axios.get('/reservation/seatConflicts', {\n          params: {\n            roomId: this.currentRoomId,\n            date: this.currentDateStr,\n            startTime,\n            endTime\n          }\n        });\n        const map = this.normalizeData(res) || {};\n        this.disabledSeatNos = Object.keys(map);\n\n        // å¦‚æœå½“å‰å·²é€‰åº§ä½åœ¨æ–°æ—¶é—´æ®µä¸‹å˜æˆå†²çªï¼šç›´æ¥æ¸…æ‰é€‰æ‹©\n        if (this.selectedSeatNo && this.disabledSeatNos.includes(this.selectedSeatNo)) {\n          this.selectedSeatNo = '';\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    async loadHomeDashboard() {\n      try {\n        if (!this.currentUserId) return;\n        const res = await this.$axios.get('/dashboard/home', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const data = this.normalizeData(res) || {};\n        if (data.todayOverview) this.todayOverview = data.todayOverview;\n        if (data.monthBrief) this.monthBrief = data.monthBrief;\n      } catch (e) {\n        console.error('loadHomeDashboard failed:', e);\n      }\n    },\n    async loadHomeNotices() {\n      this.noticeLoading = true;\n      try {\n        // âœ… é¦–é¡µåªå±•ç¤º 3 æ¡ï¼Œä½†ä¸ºäº†å®ç°â€œNEW ä¼˜å…ˆ + æ—¶é—´å€’åºâ€çš„è§„åˆ™\n        // è¿™é‡Œéœ€è¦å…ˆæ‹‰å–æ›´å¤šæ•°æ®ä½œä¸ºå€™é€‰æ± ï¼Œå†åœ¨å‰ç«¯ç»Ÿä¸€æ’åºåæˆªå–å‰ 3 æ¡å±•ç¤º\n        const res = await this.$axios.get('/announcement/home', {\n          params: {\n            roleId: 1,\n            limit: 50\n          }\n        });\n        const list = this.normalizeData(res) || [];\n        const mapped = (list || []).map(x => ({\n          ...x,\n          summary: this.makeNoticeSummary(x.content),\n          roomHint: x.roomHint || ''\n        }));\n        const sorted = this.sortNotices(mapped);\n\n        // âœ… ç¼“å­˜ï¼šè¯»/æœªè¯»å˜åŒ–åï¼Œå¯ä»¥ä»å€™é€‰æ± é‡Œâ€œè¡¥ä½â€ï¼Œä¿è¯é¦–é¡µæ°¸è¿œä¼˜å…ˆå±•ç¤º NEW\n        this.homeNoticeAllCache = sorted;\n        this.homeNotices = sorted.slice(0, this.homeNoticeLimit || 3);\n\n        // âœ… æ•°é‡ï¼šè‡³å°‘ç”¨å½“å‰æ‹‰å–åˆ°çš„æ•°é‡ï¼›æ‰“å¼€â€œå…¬å‘Šä¸­å¿ƒâ€åä¼šå¾—åˆ°æ›´å‡†ç¡®çš„æ€»æ•°\n        this.noticeTotalCount = Math.max(Number(this.noticeTotalCount || 0), sorted.length);\n      } catch (e) {\n        console.error('loadHomeNotices failed:', e);\n        this.homeNotices = [];\n        this.homeNoticeAllCache = [];\n      } finally {\n        this.noticeLoading = false;\n      }\n    },\n    async loadNoticePage() {\n      this.noticeLoading = true;\n      try {\n        // âœ… å…¬å‘Šé‡ä¸å¤§ï¼šä¸€æ¬¡æ€§æ‹‰å–ï¼Œå‰ç«¯åšâ€œNEWä¼˜å…ˆ + æ—¶é—´å€’åºâ€å…¨å±€æ’åºåå†åˆ†é¡µå±•ç¤º\n        const res = await this.$axios.get('/announcement/page', {\n          params: {\n            roleId: 1,\n            pageNum: 1,\n            pageSize: 9999,\n            type: this.noticeTypeFilter || undefined\n          }\n        });\n        const body = this.normalizeBody(res);\n        let list = [];\n        if (body && typeof body === 'object' && 'data' in body) {\n          list = body.data || [];\n        } else {\n          list = this.normalizeData(res) || [];\n        }\n        const mapped = (list || []).map(x => ({\n          ...x,\n          summary: this.makeNoticeSummary(x.content)\n        }));\n        this.noticeAllList = this.sortNotices(mapped);\n        this.noticeTotalCount = (this.noticeAllList || []).length;\n        this.rebuildNoticePageList();\n      } catch (e) {\n        console.error('loadNoticePage failed:', e);\n        this.noticeAllList = [];\n        this.noticePageList = [];\n        this.noticeTotalCount = 0;\n      } finally {\n        this.noticeLoading = false;\n      }\n    },\n    openNoticeDetail(item) {\n      this.noticeDetail = item;\n      this.noticeDetailFrom = 'home';\n      this.noticeDetailVisible = true;\n      this.markNoticeRead(item && item.id);\n      this.afterNoticeRead();\n    },\n    openNoticeAll() {\n      this.noticeAllVisible = true;\n      this.noticePageNum = 1;\n      this.noticeDetail = null;\n      this.loadNoticePage();\n    },\n    openNoticeDetailFromAll(item) {\n      this.noticeDetail = item;\n      this.noticeDetailFrom = 'list';\n      this.noticeDetailVisible = true;\n      this.noticeAllVisible = false;\n      this.markNoticeRead(item && item.id);\n      this.afterNoticeRead();\n    },\n    backToNoticeAllList() {\n      this.noticeDetailVisible = false;\n      this.noticeAllVisible = true;\n      this.rebuildNoticePageList();\n    },\n    onNoticePageChange(page) {\n      this.noticePageNum = page;\n      this.rebuildNoticePageList();\n    },\n    onNoticeTypeChange() {\n      this.noticePageNum = 1;\n      this.loadNoticePage();\n    },\n    noticeTypeText(type) {\n      const map = {\n        RULE: 'è§„åˆ™',\n        ADJUSTMENT: 'è°ƒæ•´',\n        EMERGENCY: 'çªå‘',\n        MAINTENANCE: 'ç»´æŠ¤',\n        EXAM: 'è€ƒè¯•',\n        OTHER: 'å…¶ä»–'\n      };\n      return map[type] || 'å…¶ä»–';\n    },\n    noticeTypeIcon(type) {\n      const map = {\n        RULE: 'ğŸ“Œ',\n        ADJUSTMENT: 'ğŸ•’',\n        EMERGENCY: 'ğŸš¨',\n        MAINTENANCE: 'ğŸ› ï¸',\n        EXAM: 'ğŸ“',\n        OTHER: 'ğŸ“£'\n      };\n      return map[type] || 'ğŸ“£';\n    },\n    noticeLevelText(level) {\n      const map = {\n        IMPORTANT: 'é‡è¦',\n        WARNING: 'æé†’',\n        INFO: 'é€šçŸ¥'\n      };\n      return map[level] || 'é€šçŸ¥';\n    },\n    makeNoticeSummary(content) {\n      if (!content) return '';\n      const s = String(content).replace(/\\s+/g, ' ').trim();\n      if (!s) return '';\n      return s.length > 60 ? s.slice(0, 60) + 'â€¦' : s;\n    },\n    /* ---------------------------\n     * è¯„ä»·ä¸åé¦ˆï¼ˆfeedbackï¼‰\n     * --------------------------- */\n    fbCategoryLabel(cat) {\n      const c = String(cat || '');\n      const hit = (this.fbCategoryOptions || []).find(x => x.value === c);\n      return hit ? hit.label : c || 'å…¶ä»–';\n    },\n    fbStatusLabel(st) {\n      const s = String(st || '');\n      const map = {\n        pending: 'å¾…å¤„ç†',\n        processing: 'å¤„ç†ä¸­',\n        resolved: 'å·²å¤„ç†'\n      };\n      return map[s] || s || 'å¾…å¤„ç†';\n    },\n    fbStatusClass(st) {\n      const s = String(st || '');\n      if (s === 'resolved') return 'fb-tag-ok';\n      if (s === 'processing') return 'fb-tag-warn';\n      return 'fb-tag-pending';\n    },\n    fbPreview(txt, maxLen = 160) {\n      if (!txt) return '';\n      const s = String(txt).replace(/\\s+/g, ' ').trim();\n      if (!s) return '';\n      return s.length > maxLen ? s.slice(0, maxLen) + 'â€¦' : s;\n    },\n    fbReservationLabel(r) {\n      if (!r) return '';\n      const room = r.roomLabel || r.roomName || `${r.campus || ''}${r.building ? 'Â·' + r.building : ''}${r.roomName ? 'Â·' + r.roomName : ''}`;\n      const d = r.date || '';\n      const st = String(r.startTime || '').slice(0, 5);\n      const et = String(r.endTime || '').slice(0, 5);\n      const seat = r.seatNo ? ` Â· åº§ä½ ${r.seatNo}` : '';\n      return `${d} ${st}-${et} Â· ${room}${seat}`;\n    },\n    formatFbTime(dtStr) {\n      return this.formatNoticeTime(dtStr, true);\n    },\n    onFeedbackCategoryChange() {\n      // éè¯„ä»·ç±»ä¸å¼ºåˆ¶è¯„åˆ†\n      if (!this.fbNeedRating) {\n        this.feedbackForm.rating = null;\n        this.$nextTick(() => {\n          try {\n            const ref = this.$refs.feedbackFormRef;\n            if (ref && ref.clearValidate) ref.clearValidate(['rating']);\n          } catch (e) {\n            // å¿½ç•¥æ¸…ç†æ ¡éªŒçš„å¼‚å¸¸\n          }\n        });\n      } else if (!this.feedbackForm.rating) {\n        this.feedbackForm.rating = 5;\n      }\n    },\n    resetFeedbackForm() {\n      this.feedbackForm = {\n        category: 'env',\n        reservationId: '',\n        rating: 5,\n        content: ''\n      };\n      this.$nextTick(() => {\n        try {\n          const ref = this.$refs.feedbackFormRef;\n          if (ref && ref.clearValidate) ref.clearValidate();\n        } catch (e) {\n          // å¿½ç•¥æ¸…ç†æ ¡éªŒçš„å¼‚å¸¸\n        }\n      });\n    },\n    async submitFeedback() {\n      const userId = this.ensureCurrentUserId();\n      if (!userId) {\n        ElMessage.error('æœªè·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œè¯·é‡æ–°ç™»å½•');\n        return;\n      }\n\n      // å…ˆåšè¡¨å•æ ¡éªŒ\n      try {\n        if (this.fbNeedRating) {\n          await this.$refs.feedbackFormRef.validate();\n        } else {\n          await this.$refs.feedbackFormRef.validateField(['category', 'content']);\n        }\n      } catch (e) {\n        // validate ä¼šæŠ›é”™ï¼Œç›´æ¥ç»“æŸ\n        return;\n      }\n      const payload = {\n        userId,\n        category: this.feedbackForm.category,\n        rating: this.fbNeedRating ? this.feedbackForm.rating : null,\n        content: this.feedbackForm.content,\n        reservationId: this.feedbackForm.reservationId ? Number(this.feedbackForm.reservationId) : null\n      };\n      this.fbSubmitting = true;\n      try {\n        const res = await this.$axios.post('/feedback/submit', payload);\n        if (this.isBizOk(res)) {\n          ElMessage.success('æäº¤æˆåŠŸï¼Œæ„Ÿè°¢ä½ çš„åé¦ˆï¼');\n          this.resetFeedbackForm();\n          this.fbActiveTab = 'mine';\n          this.fbPageNum = 1;\n          await this.reloadMyFeedback();\n        } else {\n          ElMessage.error(this.getMsg(res, 'æäº¤å¤±è´¥'));\n        }\n      } catch (err) {\n        console.error(err);\n        ElMessage.error('æäº¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•');\n      } finally {\n        this.fbSubmitting = false;\n      }\n    },\n    onFbTabChange() {\n      if (this.fbActiveTab === 'mine') {\n        this.fbPageNum = 1;\n        this.reloadMyFeedback();\n      }\n    },\n    onFbFilterChange() {\n      this.fbPageNum = 1;\n      this.reloadMyFeedback();\n    },\n    onFbPageChange(p) {\n      this.fbPageNum = Number(p || 1);\n      this.reloadMyFeedback();\n    },\n    async reloadMyFeedback() {\n      const userId = this.ensureCurrentUserId();\n      if (!userId) return;\n      this.fbListLoading = true;\n      try {\n        const params = {\n          userId,\n          pageNum: this.fbPageNum,\n          pageSize: this.fbPageSize\n        };\n        if (this.fbStatusFilter) params.status = this.fbStatusFilter;\n        const res = await this.$axios.get('/feedback/my-page', {\n          params\n        });\n        if (this.isBizOk(res)) {\n          const list = this.normalizeData(res);\n          this.fbList = Array.isArray(list) ? list : [];\n          this.fbTotal = Number(res.total || 0);\n        } else {\n          this.fbList = [];\n          this.fbTotal = 0;\n        }\n      } catch (err) {\n        console.error(err);\n        this.fbList = [];\n        this.fbTotal = 0;\n      } finally {\n        this.fbListLoading = false;\n      }\n    },\n    openFeedbackDetail(item) {\n      this.fbDetail = item ? {\n        ...item\n      } : {};\n      this.fbDetailVisible = true;\n    },\n    formatNoticeTime(dtStr, withTime = false) {\n      if (!dtStr) return '-';\n      const parts = String(dtStr).replace('T', ' ').split(' ');\n      const [d, t] = parts.length >= 2 ? parts : [parts[0], ''];\n      const ds = d.split('-');\n      if (ds.length >= 3) {\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`;\n        if (!withTime) return mmdd;\n        if (!t) return mmdd;\n        const hhmm = t.slice(0, 5);\n        return `${mmdd} ${hhmm}`;\n      }\n      return String(dtStr);\n    },\n    noticeReadStorageKey() {\n      return `ssrms_notice_read_${this.currentUserId || 'guest'}`;\n    },\n    loadNoticeReadIds() {\n      try {\n        const raw = localStorage.getItem(this.noticeReadStorageKey());\n        const arr = raw ? JSON.parse(raw) : [];\n        this.noticeReadIds = Array.isArray(arr) ? arr.map(x => Number(x)).filter(x => !Number.isNaN(x)) : [];\n      } catch (e) {\n        this.noticeReadIds = [];\n      }\n    },\n    saveNoticeReadIds() {\n      try {\n        localStorage.setItem(this.noticeReadStorageKey(), JSON.stringify(this.noticeReadIds || []));\n      } catch (e) {\n        // ignore\n      }\n    },\n    isNoticeRead(id) {\n      if (id === null || id === undefined) return false;\n      const nid = Number(id);\n      if (Number.isNaN(nid)) return false;\n      return (this.noticeReadIds || []).includes(nid);\n    },\n    markNoticeRead(id) {\n      if (id === null || id === undefined) return;\n      const nid = Number(id);\n      if (Number.isNaN(nid)) return;\n      if (!this.isNoticeRead(nid)) {\n        this.noticeReadIds = [...(this.noticeReadIds || []), nid];\n        this.saveNoticeReadIds();\n      }\n    },\n    // NEW è§„åˆ™ï¼šæœªè¯»å³ NEWï¼ˆæ‰“å¼€è¯¦æƒ…å³ä¼šæ ‡è®°ä¸ºå·²è¯»å¹¶æ¶ˆå¤±ï¼‰\n    isNoticeNew(id) {\n      return !this.isNoticeRead(id);\n    },\n    noticeTimeValue(dtStr) {\n      if (!dtStr) return 0;\n      const raw = String(dtStr).trim();\n      if (/^\\d+$/.test(raw)) return Number(raw);\n      let s = raw;\n      if (/^\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}/.test(s)) {\n        const y = new Date().getFullYear();\n        s = `${y}-${s}`;\n      }\n      const normalized = s.replace('T', ' ').replace(/-/g, '/');\n      const ms = Date.parse(normalized);\n      return Number.isNaN(ms) ? 0 : ms;\n    },\n    sortNotices(list) {\n      const arr = Array.isArray(list) ? list.slice() : [];\n      arr.sort((a, b) => {\n        const aTop = Number(a && a.isTop) === 1 ? 1 : 0;\n        const bTop = Number(b && b.isTop) === 1 ? 1 : 0;\n        if (aTop !== bTop) return bTop - aTop;\n        const aNew = this.isNoticeNew(a && a.id) ? 1 : 0;\n        const bNew = this.isNoticeNew(b && b.id) ? 1 : 0;\n        if (aNew !== bNew) return bNew - aNew;\n        const at = this.noticeTimeValue(a && a.publishTime);\n        const bt = this.noticeTimeValue(b && b.publishTime);\n        if (at !== bt) return bt - at;\n        const aid = Number(a && a.id) || 0;\n        const bid = Number(b && b.id) || 0;\n        return bid - aid;\n      });\n      return arr;\n    },\n    rebuildNoticePageList() {\n      const all = Array.isArray(this.noticeAllList) ? this.noticeAllList : [];\n      const size = Number(this.noticePageSize) || 6;\n      const page = Number(this.noticePageNum) || 1;\n      const start = (page - 1) * size;\n      this.noticePageList = all.slice(start, start + size);\n    },\n    afterNoticeRead() {\n      // âœ… é¦–é¡µï¼šä¼˜å…ˆä»â€œå€™é€‰æ± â€é‡æ–°æ’åºå¹¶æˆªå–å‰ 3 æ¡ï¼Œä¿è¯ NEW è¡¥ä½\n      if (Array.isArray(this.homeNoticeAllCache) && this.homeNoticeAllCache.length) {\n        this.homeNoticeAllCache = this.sortNotices(this.homeNoticeAllCache);\n        this.homeNotices = this.homeNoticeAllCache.slice(0, this.homeNoticeLimit || 3);\n      } else {\n        this.homeNotices = this.sortNotices(this.homeNotices).slice(0, this.homeNoticeLimit || 3);\n      }\n\n      // âœ… å…¬å‘Šä¸­å¿ƒï¼šå¦‚æœå·²åŠ è½½è¿‡å…¨éƒ¨åˆ—è¡¨ï¼Œä¹ŸåŒæ­¥é‡æ’\n      if (Array.isArray(this.noticeAllList) && this.noticeAllList.length) {\n        this.noticeAllList = this.sortNotices(this.noticeAllList);\n        this.rebuildNoticePageList();\n      }\n    },\n    openNoticeAllFromDetail() {\n      this.noticeDetailVisible = false;\n      this.openNoticeAll();\n    },\n    formatLastVisit(dtStr) {\n      if (!dtStr) return '-';\n\n      // dtStr: \"yyyy-MM-dd HH:mm\"\n      const parts = dtStr.replace('T', ' ').split(' ');\n      if (parts.length < 2) return dtStr;\n      const [d, t] = parts;\n      const [y, m, day] = d.split('-').map(n => parseInt(n, 10));\n      const [hh, mm] = t.split(':').map(n => parseInt(n, 10));\n      const dt = new Date(y, (m || 1) - 1, day || 1, hh || 0, mm || 0);\n      const now = new Date();\n      const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      const startOfDt = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate());\n      const diffDays = Math.round((startOfToday - startOfDt) / (24 * 3600 * 1000));\n      const timeText = `${String(dt.getHours()).padStart(2, '0')}:${String(dt.getMinutes()).padStart(2, '0')}`;\n      if (diffDays === 0) return `ä»Šå¤© ${timeText}`;\n      if (diffDays === 1) return `æ˜¨å¤© ${timeText}`;\n      return `${String(dt.getMonth() + 1).padStart(2, '0')}-${String(dt.getDate()).padStart(2, '0')} ${timeText}`;\n    }\n  },\n  watch: {\n    currentPage: {\n      immediate: true,\n      handler(newVal) {\n        if (newVal === 'home') {\n          this.startQuoteTimer();\n          this.loadHomeNotices();\n        } else {\n          this.stopQuoteTimer();\n        }\n        if (newVal === 'user-reservations') this.loadMyReservations({\n          refreshNoShowNotify: true\n        });\n        if (newVal === 'user-reserve') this.initReserveRooms();\n        if (newVal === 'user-violations') this.loadMyViolations();\n        if (newVal === 'user-profile') this.loadUserProfile();\n        if (newVal === 'user-feedback') this.reloadMyFeedback();\n      }\n    },\n    myReservations() {\n      this.reservationPageIndex = 1;\n    },\n    onlyViolation(v) {\n      this.reservationPageIndex = 1;\n      if (v) this.onlyPending = false;\n    },\n    onlyPending(v) {\n      this.reservationPageIndex = 1;\n      if (v) this.onlyViolation = false;\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","name","props","currentPage","type","String","required","emits","beforeUnmount","stopQuoteTimer","data","allRooms","campusOptions","buildingOptions","roomOptions","selectedCampus","selectedBuilding","selectedRoomId","startHour","endHour","selectedSeatNo","disabledSeatNos","tempReservations","submittingReservations","dateList","visibleStart","visibleCount","currentDateIndex","disabledSlotIds","currentUserId","myReservations","pageSize","reservationPageIndex","myViolations","violationPageIndex","violationPageSize","profileForm","account","studentNo","college","gradeClass","phone","email","commonCampus","profileRemark","profileLoading","profileSaving","weatherData","dailyQuote","dailyQuoteId","quoteTimer","openFeedback","fbActiveTab","fbSubmitting","fbCategoryOptions","label","value","feedbackForm","category","reservationId","rating","content","feedbackRules","message","trigger","min","fbStatusFilter","fbList","fbListLoading","fbPageNum","fbPageSize","fbTotal","fbDetailVisible","fbDetail","homeNotices","homeNoticeAllCache","noticeTypeOptions","icon","noticeDetailVisible","noticeDetail","noticeAllVisible","noticeAllView","noticePageList","noticeAllList","noticeTotalCount","noticePageNum","noticePageSize","noticeTypeFilter","noticeLoading","homeNoticeLimit","noticeReadIds","onlyViolation","onlyPending","currentCreditScore","todayOverview","totalSeats","reservedCount","inUseCount","remainingCount","monthBrief","monthReserveCount","studyMinutes","lastVisitTime","computed","visibleDates","slice","map","d","idx","index","canMovePrev","canMoveNext","length","currentRoomId","currentRoomFullName","room","find","r","Number","id","campus","building","roomName","currentDateLabel","cur","fullLabel","currentDateStr","startHourOptions","arr","h","push","endHourOptions","maxEnd","Math","selectedTimeText","pad2","selectedSlotIdsFromRange","ids","rangeHasConflict","disabled","Set","x","some","has","seatList","i","padStart","hasAnySelection","selectionTagText","parts","join","canClearAll","currentTempKey","isDuplicateTempReservation","key","canAddTempReservation","canSubmitReservation","totalPages","displayReservations","ceil","pagedReservations","total","page","start","end","violationTotalPages","pagedViolations","todayStr","Date","getMonth","getDate","weekDayStr","list","getDay","timeGreeting","getHours","todayAppointments","Array","isArray","getFullYear","filter","item","date","byDateTimeAsc","a","b","da","db","localeCompare","ta","startTime","tb","reservationNo","norm","s","trim","toLowerCase","isPending","status","isViolation","includes","sort","rank","st","ra","rb","monthStudyHours","mins","hours","isInteger","toFixed","lastVisitText","formatLastVisit","fbNeedRating","c","feedbackReservationOptions","creditLevel","creditLevelText","creditLevelClass","creditBarStyle","max","width","creditRiskTip","created","initDates","u0","getStoredUser","userId","loadNoticeReadIds","userName","accountNo","loadUserProfile","loadMyReservations","refreshNoShowNotify","loadWeather","loadQuoteFromDb","loadHomeDashboard","loadHomeNotices","methods","normalizeBody","res","normalizeData","body","isBizOk","resOrBody","code","getMsg","fallback","msg","getUserStorage","localStorage","getItem","sessionStorage","storage","raw","JSON","parse","e","console","error","setStoredUser","userObj","setItem","stringify","ensureCurrentUserId","u","emitChange","$emit","initReserveRooms","fetchSlotStatus","rooms","loadRoomsFromBackend","catch","buildFallbackRooms","from","onCampusChange","tries","url","t","$axios","get","campuses","buildings","roomNames","floor","no","rn","openSeats","bs","onBuildingChange","onRoomChange","n","handleStartHourChange","fetchSeatConflicts","handleEndHourChange","today","weekdays","setDate","month","day","toString","year","weekday","monthLabel","isToday","isTomorrow","moveDates","direction","selectDate","seatState","seat","seatClass","state","toggleSeat","resetSelections","clearAllSelections","addTempReservation","labelParts","roomId","seatNo","removeTempReservation","splice","submitReservations","alert","first","same","every","payload","endTime","seatNos","post","conflictLines","split","opts","refreshNoShowStatus","notify","params","formatTimeRange","renderStatusText","statusClass","violationTypeClass","gotoPrevPage","gotoNextPage","handleCheckIn","ok","handleCancel","canCancel","window","confirm","startStr","isNaN","getTime","now","diffMs","tenMinutes","updated","loadMyViolations","gotoPrevViolationPage","gotoNextViolationPage","isFinite","creditScore","handleProfileSave","user","Object","assign","age","sex","submitFB","score","log","codeToDesc","resp","fetch","json","cw","current_weather","temp","temperature","windSpeed","windspeed","weathercode","desc","city","wind","warn","excludeId","undefined","response","config","startQuoteTimer","setInterval","clearInterval","refreshQuote","emojiWeather","keys","roleId","limit","mapped","summary","makeNoticeSummary","roomHint","sorted","sortNotices","loadNoticePage","pageNum","rebuildNoticePageList","openNoticeDetail","noticeDetailFrom","markNoticeRead","afterNoticeRead","openNoticeAll","openNoticeDetailFromAll","backToNoticeAllList","onNoticePageChange","onNoticeTypeChange","noticeTypeText","RULE","ADJUSTMENT","EMERGENCY","MAINTENANCE","EXAM","OTHER","noticeTypeIcon","noticeLevelText","level","IMPORTANT","WARNING","INFO","replace","fbCategoryLabel","cat","hit","fbStatusLabel","pending","processing","resolved","fbStatusClass","fbPreview","txt","maxLen","fbReservationLabel","roomLabel","et","formatFbTime","dtStr","formatNoticeTime","onFeedbackCategoryChange","$nextTick","ref","$refs","feedbackFormRef","clearValidate","resetFeedbackForm","submitFeedback","validate","validateField","success","reloadMyFeedback","err","onFbTabChange","onFbFilterChange","onFbPageChange","p","openFeedbackDetail","withTime","ds","mmdd","hhmm","noticeReadStorageKey","saveNoticeReadIds","isNoticeRead","nid","isNoticeNew","noticeTimeValue","test","y","normalized","ms","aTop","isTop","bTop","aNew","bNew","at","publishTime","bt","aid","bid","all","size","openNoticeAllFromDetail","m","parseInt","hh","mm","dt","startOfToday","startOfDt","diffDays","round","timeText","getMinutes","watch","immediate","handler","newVal","v"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\UserHome.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <!-- é¦–é¡µ -->\n    <div v-if=\"currentPage === 'home'\" class=\"home-wrapper\">\n      <div class=\"card home-card\">\n        <!-- é¡¶éƒ¨ï¼šæ¬¢è¿ + å³ä¸Šè§’å¤©æ°”å°å¡ç‰‡ -->\n        <div class=\"home-top home-head\">\n          <div class=\"home-intro\">\n            <h2 class=\"page-title\">{{ timeGreeting }}ï¼Œæ¬¢è¿ä½¿ç”¨è‡ªä¹ å®¤é¢„çº¦ç³»ç»Ÿï¼ˆå­¦ç”Ÿç«¯ï¼‰</h2>\n            <p class=\"page-subtitle\">\n              ä»Šå¤©æ˜¯ {{ todayStr }} Â· {{ weekDayStr }}ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹è‡ªä¹ å®¤å¼€æ”¾æƒ…å†µã€é¢„çº¦åº§ä½ã€æŸ¥çœ‹è‡ªå·±çš„é¢„çº¦è®°å½•ä»¥åŠè¿è§„çŠ¶æ€ç­‰ã€‚\n            </p>\n          </div>\n\n          <!-- å³ä¸Šè§’å¤©æ°”è¿·ä½ å¡ç‰‡ -->\n          <div v-if=\"weatherData\" class=\"weather-mini\">\n            <div class=\"weather-main\">\n              <span class=\"weather-icon\">{{ emojiWeather(weatherData.desc) }}</span>\n              <span class=\"weather-temp\">{{ weatherData.temp }}Â°C</span>\n            </div>\n            <div class=\"weather-desc\">\n              {{ weatherData.city }} Â· {{ weatherData.desc }}\n            </div>\n          </div>\n        </div>\n\n        <!-- ä¸­éƒ¨å¸ƒå±€ï¼šæŒ‰è¡Œæ’åˆ— -->\n        <div class=\"home-main-grid\">\n          <!-- ç¬¬ä¸€è¡Œï¼šä»Šæ—¥æç¤ºï¼ˆæ•´è¡Œï¼Œå±…ä¸­ï¼‰ -->\n          <div class=\"home-row\">\n            <div class=\"quote-card\" v-if=\"dailyQuote\">\n              <!-- å³ä¸Šè§’åˆ·æ–°æŒ‰é’® -->\n              <button\n                  type=\"button\"\n                  class=\"quote-refresh-btn\"\n                  title=\"æ¢ä¸€å¥\"\n                  @click=\"refreshQuote\"\n              >\n                â†»\n              </button>\n\n              <div class=\"quote-header\">\n                <span class=\"quote-icon-inline\">ğŸ’¡</span>\n                <span class=\"quote-label\">ä»Šæ—¥æç¤º</span>\n              </div>\n\n              <div class=\"quote-content\">\n                <div class=\"quote-text\">{{ dailyQuote }}</div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"home-row-two\">\n            <div class=\"home-panel home-overview\">\n              <div class=\"home-panel-header\">\n                <div class=\"home-panel-title\">ä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µ</div>\n              </div>\n              <div class=\"home-panel-body home-overview-body\">\n                <div class=\"home-overview-line\">\n                  <div class=\"home-panel-number\">{{ todayOverview.totalSeats }} ä¸ªåº§ä½</div>\n                  <div class=\"home-panel-desc\">\n                    å·²é¢„çº¦ {{ todayOverview.reservedCount }} Â· æ­£åœ¨ä½¿ç”¨ {{ todayOverview.inUseCount }} Â· å‰©ä½™ {{ todayOverview.remainingCount }}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"month-report\">\n              <div class=\"report-title\">æœ¬æœˆå­¦ä¹ ç®€æŠ¥</div>\n              <div class=\"report-row\">\n                <span>æœ¬æœˆç´¯è®¡é¢„çº¦</span>\n                <span><strong>{{ monthBrief.monthReserveCount }}</strong> æ¬¡</span>\n              </div>\n              <div class=\"report-row\">\n                <span>æœ¬æœˆç´¯è®¡è‡ªä¹ æ—¶é•¿</span>\n                <span><strong>{{ monthStudyHours }}</strong> å°æ—¶</span>\n              </div>\n              <div class=\"report-row\">\n                <span>æœ€è¿‘ä¸€æ¬¡åˆ°é¦†</span>\n                <span>{{ monthBrief.lastVisitTime || '-' }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- ç¬¬ä¸‰è¡Œï¼šå…¬å‘Š / é€šçŸ¥ï¼ˆæ•´è¡Œï¼‰ -->\n          <div class=\"home-row\">\n            <div class=\"home-panel notice-panel\">\n              <div class=\"home-panel-header\">\n                <div class=\"home-panel-title\">\n                  å…¬å‘Š / é€šçŸ¥\n                  <span v-if=\"noticeTotalCount\" class=\"notice-count\">ï¼ˆ{{ noticeTotalCount }}ï¼‰</span>\n                </div>\n                <button type=\"button\" class=\"notice-more-btn\" @click=\"openNoticeAll\">æŸ¥çœ‹å…¨éƒ¨</button>\n              </div>\n\n              <div v-if=\"noticeLoading\" class=\"notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\n\n              <div v-else-if=\"!homeNotices.length\" class=\"notice-empty\">\n                æš‚æ— å…¬å‘Š\n              </div>\n\n              <ul v-else class=\"notice-list\">\n                <li\n                    v-for=\"item in homeNotices\"\n                    :key=\"item.id\"\n                    class=\"notice-item\"\n                    @click=\"openNoticeDetail(item)\"\n                >\n                  <div class=\"notice-badges\">\n                    <div v-if=\"Number(item.isTop) === 1\" class=\"notice-pill notice-top\">\n                      <span class=\"notice-icon\">ğŸ“Œ</span>\n                      <span>ç½®é¡¶</span>\n                    </div>\n\n                    <div class=\"notice-pill notice-type\" :class=\"'type-' + item.type\">\n                      <span class=\"notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\n                      <span>{{ noticeTypeText(item.type) }}</span>\n                    </div>\n\n                    <div class=\"notice-pill notice-level\" :class=\"'level-' + item.level\">\n                      {{ noticeLevelText(item.level) }}\n                    </div>\n                  </div>\n\n                  <div class=\"notice-main\">\n                    <div class=\"notice-title\" :title=\"item.title\">\n                      {{ item.title }}\n                    </div>\n\n                    <div v-if=\"item.summary\" class=\"notice-snippet\" :title=\"item.summary\">\n                      {{ item.summary }}\n                    </div>\n\n                    <div class=\"notice-meta\">\n                      <span>{{ formatNoticeTime(item.publishTime) }}</span>\n                      <span class=\"notice-dot\">Â·</span>\n                      <span>{{ item.targetText || 'å…¨ä½“å­¦ç”Ÿ' }}</span>\n                      <span v-if=\"item.roomHint\" class=\"notice-dot\">Â·</span>\n                      <span v-if=\"item.roomHint\">{{ item.roomHint }}</span>\n                    </div>\n                  </div>\n\n                  <div class=\"notice-right\">\n                    <span v-if=\"isNoticeNew(item.id, item.publishTime)\" class=\"notice-new\">NEW</span>\n                    <span class=\"notice-arrow\">â€º</span>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n\n\n\n          <!-- å…¬å‘Šåˆ—è¡¨å¼¹çª—ï¼šæŸ¥çœ‹å…¨éƒ¨ï¼ˆå¼¹çª—ï¼‰ -->\n          <el-dialog\n              v-model=\"noticeAllVisible\"\n              title=\"å…¬å‘Šä¸­å¿ƒ\"\n              width=\"920px\"\n              align-center\n              append-to-body\n              :z-index=\"4000\"\n              :lock-scroll=\"false\"\n              modal-class=\"notice-all-modal\"\n              class=\"notice-all-dialog\"\n          >\n            <!-- åˆ—è¡¨è§†å›¾ -->\n            <div>\n              <div class=\"notice-all-head\">\n                <div class=\"notice-all-filter\">\n                  <span class=\"filter-label\">ç±»å‹</span>\n\n                  <el-select\n                      v-model=\"noticeTypeFilter\"\n                      size=\"small\"\n                      placeholder=\"å…¨éƒ¨\"\n                      clearable\n                      :teleported=\"false\"\n                      class=\"notice-type-select\"\n                      popper-class=\"notice-type-popper\"\n                      style=\"width: 180px\"\n                      @change=\"onNoticeTypeChange\"\n                  >\n                    <el-option label=\"å…¨éƒ¨\" value=\"\">\n                      <span class=\"opt-row\">\n                        <span class=\"opt-ico\">ğŸ—‚ï¸</span>\n                        <span class=\"opt-text\">å…¨éƒ¨</span>\n                      </span>\n                    </el-option>\n\n                    <el-option\n                        v-for=\"opt in noticeTypeOptions\"\n                        :key=\"opt.value\"\n                        :label=\"opt.label\"\n                        :value=\"opt.value\"\n                    >\n                      <span class=\"opt-row\">\n                        <span class=\"opt-ico\">{{ opt.icon }}</span>\n                        <span class=\"opt-text\">{{ opt.label }}</span>\n                      </span>\n                    </el-option>\n                  </el-select>\n                </div>\n\n                <div class=\"notice-all-tip\">\n                  å…± {{ noticeTotalCount }} æ¡\n                </div>\n              </div>\n\n              <div v-if=\"noticeLoading\" class=\"notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\n\n              <div v-else-if=\"!noticePageList.length\" class=\"notice-empty\">\n                æš‚æ— å…¬å‘Š\n              </div>\n\n              <ul v-else class=\"notice-list notice-list-all\">\n                <li\n                    v-for=\"item in noticePageList\"\n                    :key=\"item.id\"\n                    class=\"notice-item notice-item-click\"\n                    @click=\"openNoticeDetailFromAll(item)\"\n                >\n                  <div class=\"notice-badges\">\n                    <div v-if=\"Number(item.isTop) === 1\" class=\"notice-pill notice-top\">\n                      <span class=\"notice-icon\">ğŸ“Œ</span>\n                      <span>ç½®é¡¶</span>\n                    </div>\n\n                    <div class=\"notice-pill notice-type\" :class=\"'type-' + item.type\">\n                      <span class=\"notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\n                      <span>{{ noticeTypeText(item.type) }}</span>\n                    </div>\n                    <div class=\"notice-pill notice-level\" :class=\"'level-' + item.level\">\n                      {{ noticeLevelText(item.level) }}\n                    </div>\n                  </div>\n\n                  <div class=\"notice-main\">\n                    <div class=\"notice-title\" :title=\"item.title\">\n                      {{ item.title }}\n                    </div>\n\n                    <div v-if=\"item.summary\" class=\"notice-snippet\" :title=\"item.summary\">\n                      {{ item.summary }}\n                    </div>\n\n                    <div class=\"notice-meta\">\n                      <span>{{ formatNoticeTime(item.publishTime, true) }}</span>\n                      <span class=\"notice-dot\">Â·</span>\n                      <span>{{ item.targetText || 'å…¨ä½“å­¦ç”Ÿ' }}</span>\n                    </div>\n                  </div>\n\n                  <div class=\"notice-right\">\n                    <span v-if=\"isNoticeNew(item.id)\" class=\"notice-new\">NEW</span>\n                    <span class=\"notice-arrow\">â€º</span>\n                  </div>\n                </li>\n              </ul>\n\n              <div class=\"notice-pagination\">\n                <el-pagination\n                    background\n                    layout=\"prev, pager, next\"\n                    :page-size=\"noticePageSize\"\n                    :current-page=\"noticePageNum\"\n                    :total=\"noticeTotalCount\"\n                    @current-change=\"onNoticePageChange\"\n                />\n              </div>\n            </div>\n\n\n\n          </el-dialog>\n\n          <!-- å…¬å‘Šè¯¦æƒ…å¼¹çª—ï¼ˆå°å¼¹çª—ï¼‰ -->\n          <el-dialog\n              v-model=\"noticeDetailVisible\"\n              title=\"å…¬å‘Šè¯¦æƒ…\"\n              width=\"820px\"\n              align-center\n              append-to-body\n              :z-index=\"4010\"\n              :lock-scroll=\"false\"\n              modal-class=\"notice-detail-modal\"\n              class=\"notice-detail-dialog\"\n          >\n            <div v-if=\"noticeDetail\" class=\"notice-detail-body\">\n              <div class=\"notice-detail-actions\">\n                <el-button\n                    v-if=\"noticeDetailFrom === 'list'\"\n                    type=\"primary\"\n                    plain\n                    size=\"small\"\n                    @click=\"backToNoticeAllList\"\n                >è¿”å›å…¬å‘Šåˆ—è¡¨</el-button>\n\n                <el-button\n                    v-else\n                    type=\"primary\"\n                    plain\n                    size=\"small\"\n                    @click=\"openNoticeAllFromDetail\"\n                >æŸ¥çœ‹å…¨éƒ¨å…¬å‘Š</el-button>\n              </div>\n\n              <div class=\"notice-detail notice-detail-card\">\n                <div class=\"nd-head\">\n                  <div class=\"nd-title-row\">\n                    <div class=\"nd-title\">{{ noticeDetail.title }}</div>\n                    <span v-if=\"Number(noticeDetail.isTop) === 1\" class=\"nd-top\">ç½®é¡¶</span>\n                  </div>\n\n                  <div class=\"nd-tags\">\n                    <span class=\"nd-tag\" :class=\"'type-' + noticeDetail.type\">\n                      {{ noticeTypeIcon(noticeDetail.type) }} {{ noticeTypeText(noticeDetail.type) }}\n                    </span>\n                    <span class=\"nd-tag\" :class=\"'level-' + noticeDetail.level\">\n                      {{ noticeLevelText(noticeDetail.level) }}\n                    </span>\n                  </div>\n                </div>\n\n                <el-divider></el-divider>\n\n                <div class=\"nd-info\">\n                  <div class=\"nd-info-item\">\n                    <div class=\"k\">å‘å¸ƒæ—¶é—´</div>\n                    <div class=\"v\">{{ formatNoticeTime(noticeDetail.publishTime, true) }}</div>\n                  </div>\n                  <div class=\"nd-info-item\">\n                    <div class=\"k\">å…¬å‘Šç±»å‹</div>\n                    <div class=\"v\">{{ noticeTypeText(noticeDetail.type) }}</div>\n                  </div>\n                  <div class=\"nd-info-item\">\n                    <div class=\"k\">é‡è¦ç¨‹åº¦</div>\n                    <div class=\"v\">{{ noticeLevelText(noticeDetail.level) }}</div>\n                  </div>\n                  <div class=\"nd-info-item\">\n                    <div class=\"k\">é¢å‘å¯¹è±¡</div>\n                    <div class=\"v\">{{ noticeDetail.targetText || 'å…¨ä½“å­¦ç”Ÿ' }}</div>\n                  </div>\n                </div>\n\n                <el-divider></el-divider>\n\n                <div class=\"nd-content\">{{ noticeDetail.content || 'ï¼ˆæ— å†…å®¹ï¼‰' }}</div>\n              </div>\n            </div>\n          </el-dialog>\n          <!-- ç¬¬å››è¡Œï¼šæˆ‘çš„ä»Šæ—¥é¢„çº¦ï¼ˆæ•´è¡Œï¼‰ -->\n          <div class=\"home-row\">\n            <div class=\"home-panel my-today-card\">\n              <div class=\"home-panel-header\">\n                <div class=\"home-panel-title\">æˆ‘çš„ä»Šæ—¥é¢„çº¦</div>\n                <div\n                    class=\"home-panel-subtitle\"\n                    v-if=\"todayAppointments.length\"\n                >\n                  ä»Šæ—¥å…± {{ todayAppointments.length }} åœºè‡ªä¹ å®‰æ’\n                </div>\n                <div\n                    class=\"home-panel-subtitle\"\n                    v-else\n                >\n                  ä»Šæ—¥æš‚æ— é¢„çº¦ï¼Œå¯ä»¥å®‰æ’ä¸€åœºé«˜æ•ˆè‡ªä¹ ï½\n                </div>\n              </div>\n\n              <div class=\"home-panel-body my-today-body\">\n                <!-- æœ‰é¢„çº¦æ—¶ï¼Œå±•ç¤ºå‰ 3 æ¡ -->\n                <template v-if=\"todayAppointments.length\">\n                  <div\n                      v-for=\"(item, idx) in todayAppointments.slice(0, 3)\"\n                      :key=\"idx\"\n                      class=\"today-item\"\n                  >\n                    <div class=\"today-left\">\n                      <div class=\"today-time\">{{ formatTimeRange(item) }}</div>\n                      <div class=\"today-room\">\n                        {{ item.roomFullName || item.roomName || 'è‡ªä¹ å®¤' }}\n                      </div>\n                    </div>\n\n                    <span class=\"badge today-badge\" :class=\"statusClass(item.status)\">\n              {{ renderStatusText(item.status) }}\n            </span>\n                  </div>\n                </template>\n\n                <!-- æ²¡é¢„çº¦æ—¶çš„æ–‡æ¡ˆ -->\n                <div\n                    v-else\n                    class=\"today-empty\"\n                >\n                  å½“å‰è¿˜æ²¡æœ‰é¢„çº¦ï¼Œå·¦ä¾§å¯¼èˆªæ ä¸­çš„â€œåº§ä½é¢„çº¦â€å¯ä»¥å¿«é€Ÿåˆ›å»ºæ–°çš„é¢„çº¦ã€‚\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- å³ä¸‹è§’â€œéšæ‰‹ä¸€è¯„â€æµ®å±‚ -->\n      <transition name=\"fade\">\n        <div v-if=\"openFeedback\" class=\"feedback-float\">\n          <div class=\"feedback-panel\">\n            <div class=\"feedback-title\">ä»Šå¤©çš„è‡ªä¹ æ°›å›´å¦‚ä½•ï¼Ÿ</div>\n            <div class=\"feedback-emojis\">\n              <span @click=\"submitFB(1)\">ğŸ˜£</span>\n              <span @click=\"submitFB(2)\">ğŸ˜•</span>\n              <span @click=\"submitFB(3)\">ğŸ™‚</span>\n              <span @click=\"submitFB(4)\">ğŸ˜Š</span>\n              <span @click=\"submitFB(5)\">ğŸ¤©</span>\n            </div>\n          </div>\n        </div>\n      </transition>\n      <div class=\"feedback-float\" v-if=\"!openFeedback\">\n        <div class=\"feedback-btn\" @click=\"openFeedback = true\">\n          è¯„ä»·\n        </div>\n      </div>\n    </div>\n\n    <!-- æˆ‘è¦é¢„çº¦é¡µé¢ï¼ˆç¾åŒ–ç‰ˆï¼‰ -->\n    <div v-else-if=\"currentPage === 'user-reserve'\">\n      <div class=\"card reserve-card\">\n        <!-- é¡¶éƒ¨ï¼šæ ‡é¢˜ + å½“å‰é€‰æ‹©æ¦‚è§ˆ -->\n        <div class=\"reserve-header-row\">\n          <div class=\"reserve-header-left\">\n            <h2 class=\"page-title\">æˆ‘è¦é¢„çº¦</h2>\n            <p class=\"page-subtitle\">\n              é€‰æ‹©æ ¡åŒºã€å»ºç­‘ã€æ•™å®¤ã€æ—¥æœŸä¸æ—¶é—´æ®µï¼Œå¹¶é€‰æ‹©åº§ä½å·è¿›è¡Œé¢„çº¦ã€‚\n            </p>\n          </div>\n\n          <!-- å³ä¾§ï¼šå½“å‰é€‰æ‹©æ¦‚è¦ -->\n          <div class=\"reserve-summary-box\">\n            <div class=\"summary-title\">å½“å‰é€‰æ‹©</div>\n            <div class=\"summary-main\">\n              <div class=\"summary-row\">\n                <span class=\"summary-label\">åœºåœ°</span>\n                <span class=\"summary-value\">\n              {{ currentRoomFullName || 'è¯·é€‰æ‹©åœºåœ°' }}\n            </span>\n              </div>\n              <div class=\"summary-row\">\n                <span class=\"summary-label\">æ—¥æœŸ</span>\n                <span class=\"summary-value\">\n              {{ currentDateLabel || 'è¯·é€‰æ‹©æ—¥æœŸ' }}\n            </span>\n              </div>\n              <div class=\"summary-row\">\n                <span class=\"summary-label\">æ—¶é—´</span>\n                <span class=\"summary-value\" v-if=\"selectedTimeText\">\n              {{ selectedTimeText }}\n            </span>\n                <span class=\"summary-value summary-empty\" v-else>å°šæœªé€‰æ‹©</span>\n              </div>\n\n              <div class=\"summary-row\">\n                <span class=\"summary-label\">åº§ä½</span>\n                <span class=\"summary-value\" v-if=\"selectedSeatNo\">\n              {{ selectedSeatNo }}\n            </span>\n                <span class=\"summary-value summary-empty\" v-else>å°šæœªé€‰æ‹©</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- åœºåœ°ï¼ˆæ ¡åŒº/å»ºç­‘/æ•™å®¤ï¼‰ + æ—¶é—´ï¼ˆå¼€å§‹/ç»“æŸï¼‰ -->\n        <div class=\"reserve-toolbar\">\n          <div class=\"reserve-control short\">\n            <select class=\"reserve-select\" v-model=\"selectedCampus\" @change=\"onCampusChange\">\n              <option value=\"\" disabled>é€‰æ‹©æ ¡åŒº</option>\n              <option v-for=\"c in campusOptions\" :key=\"c\" :value=\"c\">{{ c }}</option>\n            </select>\n          </div>\n\n          <div class=\"reserve-control short\">\n            <select\n                class=\"reserve-select\"\n                v-model=\"selectedBuilding\"\n                :disabled=\"!selectedCampus\"\n                @change=\"onBuildingChange\"\n            >\n              <option value=\"\" disabled>é€‰æ‹©å»ºç­‘</option>\n              <option v-for=\"b in buildingOptions\" :key=\"b\" :value=\"b\">{{ b }}</option>\n            </select>\n          </div>\n\n          <div class=\"reserve-control short\">\n            <select\n                class=\"reserve-select\"\n                v-model.number=\"selectedRoomId\"\n                :disabled=\"!selectedBuilding\"\n                @change=\"onRoomChange\"\n            >\n              <option :value=\"null\" disabled>é€‰æ‹©æ•™å®¤</option>\n              <option v-for=\"r in roomOptions\" :key=\"r.id\" :value=\"r.id\">{{ r.roomName }}</option>\n            </select>\n          </div>\n\n          <div class=\"reserve-control long\">\n            <select class=\"reserve-select\" v-model.number=\"startHour\" @change=\"handleStartHourChange\">\n              <option :value=\"null\" disabled>å¼€å§‹æ—¶é—´</option>\n              <option v-for=\"h in startHourOptions\" :key=\"h\" :value=\"h\">{{ pad2(h) }}:00</option>\n            </select>\n          </div>\n\n          <div class=\"reserve-control long\">\n            <select\n                class=\"reserve-select\"\n                v-model.number=\"endHour\"\n                :disabled=\"startHour == null\"\n                @change=\"handleEndHourChange\"\n            >\n              <option :value=\"null\" disabled>ç»“æŸæ—¶é—´</option>\n              <option v-for=\"h in endHourOptions\" :key=\"h\" :value=\"h\">{{ pad2(h) }}:00</option>\n            </select>\n          </div>\n\n          <div class=\"reserve-warning\" v-if=\"rangeHasConflict\">\n            æ‰€é€‰æ—¶é—´æ®µåŒ…å«ä¸å¯é¢„çº¦æ—¶æ®µ\n          </div>\n        </div>\n\n        <!-- æ—¥æœŸæ¡ -->\n        <div class=\"date-strip\">\n          <button\n              class=\"date-arrow\"\n              type=\"button\"\n              @click=\"moveDates('prev')\"\n              :disabled=\"!canMovePrev\"\n          >\n            â€¹\n          </button>\n\n          <div class=\"date-list\">\n            <button\n                v-for=\"d in visibleDates\"\n                :key=\"d.key\"\n                type=\"button\"\n                class=\"date-item\"\n                :class=\"{ active: currentDateIndex === d.index }\"\n                @click=\"selectDate(d.index)\"\n            >\n              <div class=\"date-month\">{{ d.monthLabel }}</div>\n              <div class=\"date-day-row\">\n                <span class=\"date-day-number\">{{ d.day }}</span>\n                <span class=\"date-weekday\">{{ d.weekday }}</span>\n              </div>\n              <div class=\"date-extra\" v-if=\"d.isToday\">ä»Šå¤©</div>\n              <div class=\"date-extra\" v-else-if=\"d.isTomorrow\">æ˜å¤©</div>\n            </button>\n          </div>\n\n          <button\n              class=\"date-arrow\"\n              type=\"button\"\n              @click=\"moveDates('next')\"\n              :disabled=\"!canMoveNext\"\n          >\n            â€º\n          </button>\n        </div>\n\n        <!-- åº§ä½å·é€‰æ‹©åŒºåŸŸ -->\n        <div class=\"slot-section\">\n          <div class=\"slot-header\">\n            <div class=\"slot-title\">é€‰æ‹©åº§ä½å·</div>\n            <div class=\"slot-legend\">\n          <span class=\"legend-item\">\n            <span class=\"legend-dot legend-available\"></span>å¯é¢„çº¦\n          </span>\n              <span class=\"legend-item\">\n            <span class=\"legend-dot legend-selected\"></span>å·²é€‰\n          </span>\n              <span class=\"legend-item\">\n            <span class=\"legend-dot legend-disabled\"></span>ä¸å¯é¢„çº¦\n          </span>\n            </div>\n          </div>\n\n          <div class=\"slot-grid\">\n            <button\n                v-for=\"seat in seatList\"\n                :key=\"seat\"\n                type=\"button\"\n                class=\"slot-item\"\n                :class=\"seatClass(seat)\"\n                :disabled=\"seatState(seat) === 'disabled'\"\n                @click=\"toggleSeat(seat)\"\n            >\n              <span class=\"slot-time\">{{ seat }}</span>\n              <span class=\"slot-range\">åº§ä½</span>\n            </button>\n          </div>\n        </div>\n\n        <!-- å·²é€‰æ—¶æ®µ + æäº¤åŒºåŸŸ -->\n        <div class=\"reserve-bottom\">\n          <div class=\"selected-tags\" v-if=\"tempReservations.length\">\n            <div\n                class=\"selected-tag\"\n                v-for=\"(item, idx) in tempReservations\"\n                :key=\"item.key\"\n            >\n              <span class=\"selected-tag-text\">{{ item.label }}</span>\n              <button\n                  type=\"button\"\n                  class=\"selected-tag-close\"\n                  @click=\"removeTempReservation(idx)\"\n              >\n                Ã—\n              </button>\n            </div>\n          </div>\n\n\n          <div class=\"reserve-actions\">\n            <button\n                type=\"button\"\n                class=\"link-btn\"\n                :disabled=\"!canClearAll\"\n                @click=\"clearAllSelections\"\n            >\n              æ¸…ç©ºé€‰æ‹©\n            </button>\n\n            <button\n                type=\"button\"\n                class=\"primary-btn reserve-btn\"\n                :disabled=\"!canAddTempReservation\"\n                @click=\"addTempReservation\"\n            >\n              æ·»åŠ \n            </button>\n\n            <button\n                type=\"button\"\n                class=\"primary-btn reserve-btn\"\n                :disabled=\"!canSubmitReservation\"\n                @click=\"submitReservations\"\n            >\n              ç¡®è®¤é¢„çº¦\n            </button>\n          </div>\n\n          <p class=\"hint-text\">\n            å…ˆç‚¹å‡»â€œæ·»åŠ â€å°†å½“å‰é€‰æ‹©åŠ å…¥ä¸‹æ–¹åˆ—è¡¨ï¼Œæœ€åç‚¹å‡»â€œç¡®è®¤é¢„çº¦â€æäº¤ï¼Œå¹¶è·³è½¬åˆ°â€œæˆ‘çš„é¢„çº¦â€ã€‚\n          </p>\n        </div>\n      </div>\n    </div>\n\n    <!-- æˆ‘çš„é¢„çº¦ -->\n    <div v-else-if=\"currentPage === 'user-reservations'\">\n      <div class=\"card card-reservations\">\n        <h2 class=\"page-title\">é¢„çº¦ä¸ç­¾åˆ°ç­¾é€€</h2>\n        <!-- ç­›é€‰æ¡ï¼ˆåœ¨æ ‡é¢˜å’Œè¡¨æ ¼ä¹‹é—´ï¼‰ -->\n        <div class=\"res-filter-row\">\n          <label class=\"res-filter\">\n            <span class=\"res-filter-text\">ä»…æŸ¥çœ‹è¿çº¦è®°å½•</span>\n            <input class=\"res-filter-checkbox\" type=\"checkbox\" v-model=\"onlyViolation\" />\n          </label>\n          <label class=\"res-filter\">\n            <span class=\"res-filter-text\">ä»…æŸ¥çœ‹å¾…ç­¾åˆ°è®°å½•</span>\n            <input class=\"res-filter-checkbox\" type=\"checkbox\" v-model=\"onlyPending\" />\n          </label>\n        </div>\n        <div class=\"table-wrapper\">\n          <table class=\"table my-res-table\">\n            <thead>\n            <tr>\n              <th class=\"col-no\">é¢„çº¦ç¼–å·</th>\n              <th class=\"col-campus\">æ ¡åŒº</th>\n              <th class=\"col-building\">å»ºç­‘</th>\n              <th class=\"col-room\">è‡ªä¹ å®¤</th>\n              <th class=\"col-date\">æ—¥æœŸ</th>\n              <th class=\"col-time\">æ—¶é—´æ®µ</th>\n              <th class=\"col-seat\">åº§ä½å·</th>\n              <th class=\"col-status\">çŠ¶æ€</th>\n              <th class=\"col-actions\">æ“ä½œ</th>\n            </tr>\n            </thead>\n\n            <tbody>\n            <tr v-for=\"item in pagedReservations\" :key=\"item.id\">\n              <td class=\"col-no\">{{ item.reservationNo }}</td>\n              <td class=\"col-campus\">{{ item.campus || '-' }}</td>\n              <td class=\"col-building\">{{ item.building || '-' }}</td>\n              <td class=\"col-room\">{{ item.roomName || '-' }}</td>\n              <td class=\"col-date\">{{ item.date }}</td>\n              <td class=\"col-time\">{{ formatTimeRange(item) }}</td>\n              <td class=\"col-seat\">{{ item.seatNo || '-' }}</td>\n              <td class=\"col-status\">\n        <span class=\"badge\" :class=\"statusClass(item.status)\">\n          {{ renderStatusText(item.status) }}\n        </span>\n              </td>\n\n              <!-- å…³é”®ï¼šå»æ‰ text-rightï¼Œåˆ«æŠŠæ•´åˆ—æ¨åˆ°æœ€å³ -->\n              <td class=\"col-actions\">\n                <div class=\"actions\">\n                  <template v-if=\"item.status === 'reserved'\">\n                    <button class=\"link-btn\" type=\"button\" @click=\"handleCheckIn(item)\">ç­¾åˆ°</button>\n                    <button class=\"link-btn link-danger\" type=\"button\" :disabled=\"!canCancel(item)\" @click=\"handleCancel(item)\">å–æ¶ˆ</button>\n                  </template>\n\n                  <button\n                      class=\"link-btn\"\n                      v-else-if=\"item.status === 'checked_in' || item.status === 'late'\"\n                      type=\"button\"\n                      disabled\n                  >å·²ç­¾åˆ°</button>\n\n                  <button\n                      class=\"link-btn\"\n                      v-else-if=\"item.status === 'no_show'\"\n                      type=\"button\"\n                      disabled\n                  >å·²è¿‡æœŸ</button>\n\n                  <button\n                      class=\"link-btn\"\n                      v-else-if=\"item.status === 'cancelled' || item.status === 'cancel_overdue'\"\n                      type=\"button\"\n                      disabled\n                  >ä¸å¯æ“ä½œ</button>\n                </div>\n              </td>\n            </tr>\n\n            <tr v-if=\"!displayReservations.length\">\n              <td colspan=\"9\" style=\"text-align: center; color: #9ca3af; padding: 16px 0;\">\n                æš‚æ— é¢„çº¦è®°å½•\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n        <!-- â­ åˆ†é¡µæ¡ï¼šåªæœ‰å½“æ€»æ•° > 15 æ—¶æ‰å‡ºç° -->\n        <div class=\"pager\" v-if=\"totalPages > 1\">\n          <!-- ä¸Šä¸€é¡µ -->\n          <button\n              type=\"button\"\n              class=\"pager-btn\"\n              :class=\"{ 'pager-btn-disabled': reservationPageIndex <= 1 }\"\n              :disabled=\"reservationPageIndex <= 1\"\n              @click=\"gotoPrevPage\"\n          >\n            ä¸Šä¸€é¡µ\n          </button>\n\n          <!-- ä¸­é—´é¡µç  -->\n          <div class=\"pager-center\">\n            ç¬¬ {{ reservationPageIndex }} / {{ totalPages }} é¡µ\n          </div>\n\n          <!-- ä¸‹ä¸€é¡µ -->\n          <button\n              type=\"button\"\n              class=\"pager-btn\"\n              :class=\"{ 'pager-btn-disabled': reservationPageIndex >= totalPages }\"\n              :disabled=\"reservationPageIndex >= totalPages\"\n              @click=\"gotoNextPage\"\n          >\n            ä¸‹ä¸€é¡µ\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- è¿è§„è®°å½• -->\n    <div v-else-if=\"currentPage === 'user-violations'\">\n      <div class=\"card violation-record-card\">\n        <h2 class=\"page-title\">è¿è§„è®°å½•ä¸ä¿¡ç”¨åˆ†</h2>\n        <p class=\"page-subtitle\">\n          ä¿¡ç”¨åˆ†ä» 100 å¼€å§‹ï¼Œæœªç­¾åˆ°ã€è¿Ÿåˆ°ç­‰è¡Œä¸ºä¼šæ‰£åˆ†ã€‚\n        </p>\n\n        <div class=\"credit-panel\" :class=\"creditLevelClass\">\n          <div class=\"credit-panel-left\">\n            <div class=\"credit-ring\" :class=\"creditLevelClass\">\n              <div class=\"credit-ring-num\">{{ currentCreditScore }}</div>\n              <div class=\"credit-ring-label\">ä¿¡ç”¨åˆ†</div>\n            </div>\n          </div>\n\n          <div class=\"credit-panel-right\">\n            <div class=\"credit-head\">\n              <div class=\"credit-head-title\">å½“å‰ä¿¡ç”¨çŠ¶æ€</div>\n              <span class=\"credit-level-pill\" :class=\"creditLevelClass\">{{ creditLevelText }}</span>\n            </div>\n\n            <div class=\"credit-sub\">\n              ä¿¡ç”¨åˆ†ä» 100 å¼€å§‹ï¼Œè¿Ÿåˆ°ã€æœªç­¾åˆ°ç­‰è¡Œä¸ºä¼šæ‰£åˆ†ã€‚\n            </div>\n\n            <div class=\"credit-bar\">\n              <div class=\"credit-bar-inner\" :class=\"creditLevelClass\" :style=\"creditBarStyle\"></div>\n            </div>\n\n            <div class=\"credit-note\" :class=\"creditLevelClass\">\n              <span class=\"credit-note-strong\">æç¤ºï¼š</span>\n              <span>{{ creditRiskTip }}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"table-wrapper\">\n          <table class=\"table violation-table\">\n            <thead>\n            <tr>\n              <th class=\"col-no\">é¢„çº¦ç¼–å·</th>\n              <th class=\"col-campus\">æ ¡åŒº</th>\n              <th class=\"col-building\">å»ºç­‘</th>\n              <th class=\"col-room\">è‡ªä¹ å®¤</th>\n              <th class=\"col-date\">æ—¥æœŸ</th>\n              <th class=\"col-time\">æ—¶é—´æ®µ</th>\n              <th class=\"col-seat\">åº§ä½å·</th>\n              <th class=\"col-vtype\">è¿çº¦ç±»å‹</th>\n              <th class=\"col-penalty\">æ‰£åˆ†</th>\n              <th class=\"col-remark\">å¤‡æ³¨</th>\n            </tr>\n            </thead>\n\n            <tbody>\n            <tr v-if=\"!pagedViolations.length\">\n              <td colspan=\"10\" style=\"text-align: center; color: #999;\">\n                æš‚æ— è¿è§„è®°å½•\n              </td>\n            </tr>\n\n            <tr v-for=\"item in pagedViolations\" :key=\"(item.reservationNo || item.reservationId || item.id) + '-' + (item.violationType || '')\">\n              <td class=\"col-no\">{{ item.reservationNo || item.reservationId }}</td>\n              <td class=\"col-campus\">{{ item.campus || '-' }}</td>\n              <td class=\"col-building\">{{ item.building || '-' }}</td>\n              <td class=\"col-room\">{{ item.roomName || '-' }}</td>\n              <td class=\"col-date\">{{ item.date }}</td>\n              <td class=\"col-time\">{{ formatTimeRange(item) || '-' }}</td>\n              <td class=\"col-seat\">{{ item.seatNo || '-' }}</td>\n              <td class=\"col-vtype\">\n                <span class=\"violation-tag\" :class=\"violationTypeClass(item.violationType)\">\n                  {{ item.violationType }}\n                </span>\n              </td>\n              <td class=\"col-penalty\">\n                <span class=\"penalty-num\">{{ item.penaltyScore }}</span>\n              </td>\n              <td class=\"col-remark\">\n                <span class=\"remark-text\" :title=\"item.remark\">{{ item.remark }}</span>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n\n        <!-- åˆ†é¡µå™¨ -->\n        <div class=\"pager\" v-if=\"violationTotalPages > 1\">\n          <!-- ä¸Šä¸€é¡µ -->\n          <button\n              type=\"button\"\n              class=\"pager-btn\"\n              :class=\"{ 'pager-btn-disabled': violationPageIndex <= 1 }\"\n              :disabled=\"violationPageIndex <= 1\"\n              @click=\"gotoPrevViolationPage\"\n          >\n            ä¸Šä¸€é¡µ\n          </button>\n\n          <div class=\"pager-center\">\n            ç¬¬ {{ violationPageIndex }} / {{ violationTotalPages }} é¡µ\n          </div>\n\n          <!-- ä¸‹ä¸€é¡µ -->\n          <button\n              type=\"button\"\n              class=\"pager-btn\"\n              :class=\"{ 'pager-btn-disabled': violationPageIndex >= violationTotalPages }\"\n              :disabled=\"violationPageIndex >= violationTotalPages\"\n              @click=\"gotoNextViolationPage\"\n          >\n            ä¸‹ä¸€é¡µ\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- è¯„ä»·ä¸æŠ•è¯‰ -->\n    <div v-else-if=\"currentPage === 'user-feedback'\">\n      <div class=\"card\">\n        <div class=\"fb-head\">\n          <div>\n            <h2 class=\"page-title\">è¯„ä»·ä¸åé¦ˆ</h2>\n            <p class=\"page-subtitle\">\n              ä½ å¯ä»¥æäº¤è¯„ä»·ã€å»ºè®®ã€æŠ•è¯‰æˆ–ç”³è¯‰ã€‚æäº¤åä¼šè¿›å…¥å¾…å¤„ç†é˜Ÿåˆ—ï¼Œç®¡ç†å‘˜å¤„ç†åä¼šåœ¨â€œæˆ‘çš„åé¦ˆâ€ä¸­å›å¤ã€‚\n            </p>\n          </div>\n        </div>\n\n        <el-tabs v-model=\"fbActiveTab\" class=\"fb-tabs\" @tab-click=\"onFbTabChange\">\n          <el-tab-pane label=\"æäº¤åé¦ˆ\" name=\"submit\">\n            <div class=\"fb-submit-layout\">\n              <div class=\"fb-form-card\">\n                <el-form\n                    ref=\"feedbackFormRef\"\n                    :model=\"feedbackForm\"\n                    :rules=\"feedbackRules\"\n                    label-width=\"92px\"\n                >\n                  <el-form-item label=\"åé¦ˆç±»å‹\" prop=\"category\">\n                    <el-select\n                        v-model=\"feedbackForm.category\"\n                        placeholder=\"è¯·é€‰æ‹©\"\n                        filterable\n                        style=\"width: 260px\"\n                        @change=\"onFeedbackCategoryChange\"\n                        :teleported=\"true\"\n                    >\n                      <el-option\n                          v-for=\"opt in fbCategoryOptions\"\n                          :key=\"opt.value\"\n                          :label=\"opt.label\"\n                          :value=\"opt.value\"\n                      />\n                    </el-select>\n                  </el-form-item>\n\n                  <el-form-item label=\"å…³è”é¢„çº¦\">\n                    <el-select\n                        v-model=\"feedbackForm.reservationId\"\n                        placeholder=\"å¯é€‰ï¼šé€‰æ‹©ç›¸å…³é¢„çº¦ï¼ˆæ›´æ–¹ä¾¿å®šä½ï¼‰\"\n                        filterable\n                        clearable\n                        style=\"width: 520px\"\n                        :teleported=\"true\"\n                    >\n                      <el-option\n                          v-for=\"r in feedbackReservationOptions\"\n                          :key=\"r.id\"\n                          :label=\"fbReservationLabel(r)\"\n                          :value=\"r.id\"\n                      />\n                    </el-select>\n                  </el-form-item>\n\n                  <el-form-item v-if=\"fbNeedRating\" label=\"æ»¡æ„åº¦\" prop=\"rating\">\n                    <div class=\"fb-rate-row\">\n                      <el-rate\n                          v-model=\"feedbackForm.rating\"\n                          :max=\"5\"\n                          allow-half\n                          show-score\n                      />\n                      <span class=\"fb-rate-hint\">ï¼ˆ1~5 åˆ†ï¼Œå¯åŠæ˜Ÿï¼‰</span>\n                    </div>\n                  </el-form-item>\n\n                  <el-form-item label=\"å†…å®¹æè¿°\" prop=\"content\">\n                    <el-input\n                        v-model=\"feedbackForm.content\"\n                        type=\"textarea\"\n                        :rows=\"6\"\n                        maxlength=\"500\"\n                        show-word-limit\n                        placeholder=\"è¯·å°½é‡æè¿°æ¸…æ¥šï¼šæ—¶é—´ã€åœ°ç‚¹ã€é—®é¢˜ç°è±¡/å»ºè®®ç‚¹ã€ä½ å¸Œæœ›çš„å¤„ç†æ–¹å¼ç­‰ã€‚\"\n                    />\n                  </el-form-item>\n\n                  <div class=\"fb-actions\">\n                    <el-button\n                        type=\"primary\"\n                        :loading=\"fbSubmitting\"\n                        @click=\"submitFeedback\"\n                    >æäº¤</el-button>\n                    <el-button\n                        :disabled=\"fbSubmitting\"\n                        @click=\"resetFeedbackForm\"\n                    >æ¸…ç©º</el-button>\n                  </div>\n                </el-form>\n              </div>\n\n              <div class=\"fb-tip-card\">\n                <div class=\"fb-tip-title\">å¡«å†™å°è´´å£«</div>\n                <div class=\"fb-tip-sub\">å†™å¾—è¶Šå…·ä½“ï¼Œå¤„ç†è¶Šå¿«ï½</div>\n                <ul class=\"fb-tip-list\">\n                  <li>æŠ•è¯‰/ç”³è¯‰ï¼šå»ºè®®åŒ…å«æ—¶é—´ã€åœ°ç‚¹ã€æ¶‰åŠå¯¹è±¡ä¸ç°åœºæƒ…å†µã€‚</li>\n                  <li>å»ºè®®ï¼šè¯´æ˜ä½ å¸Œæœ›å¢åŠ /ä¼˜åŒ–çš„åŠŸèƒ½ç‚¹ï¼Œè¶Šå…·ä½“è¶Šå¥½ã€‚</li>\n                  <li>è¯„ä»·ï¼šå¯ä»¥å¯¹ç¯å¢ƒã€å«ç”Ÿã€ç§©åºç­‰æ‰“åˆ†å¹¶è¡¥å……æè¿°ã€‚</li>\n                  <li>æäº¤åå¯åœ¨â€œæˆ‘çš„åé¦ˆâ€æŸ¥çœ‹å¤„ç†è¿›åº¦ä¸ç®¡ç†å‘˜å›å¤ã€‚</li>\n                </ul>\n              </div>\n            </div>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"æˆ‘çš„åé¦ˆ\" name=\"mine\">\n            <div class=\"fb-mine-toolbar\">\n              <div class=\"fb-mine-left\">\n                <span class=\"fb-filter-label\">çŠ¶æ€</span>\n                <el-select\n                    v-model=\"fbStatusFilter\"\n                    placeholder=\"å…¨éƒ¨\"\n                    size=\"small\"\n                    class=\"fb-filter\"\n                    :teleported=\"true\"\n                    @change=\"onFbFilterChange\"\n                >\n                  <el-option label=\"å…¨éƒ¨\" value=\"\" />\n                  <el-option label=\"å¾…å¤„ç†\" value=\"pending\" />\n                  <el-option label=\"å¤„ç†ä¸­\" value=\"processing\" />\n                  <el-option label=\"å·²å¤„ç†\" value=\"resolved\" />\n                </el-select>\n              </div>\n\n              <div class=\"fb-mine-right\">\n                <el-button size=\"small\" @click=\"reloadMyFeedback\">åˆ·æ–°</el-button>\n              </div>\n            </div>\n\n            <div v-loading=\"fbListLoading\">\n              <div v-if=\"fbList.length\" class=\"fb-list\">\n                <div class=\"fb-item\" v-for=\"item in fbList\" :key=\"item.id\">\n                  <div class=\"fb-item-main\">\n                    <div class=\"fb-item-top\">\n                      <div class=\"fb-item-tags\">\n                        <span class=\"fb-tag fb-tag-type\">{{ fbCategoryLabel(item.category) }}</span>\n                        <span class=\"fb-tag\" :class=\"fbStatusClass(item.status)\">{{ fbStatusLabel(item.status) }}</span>\n                        <span v-if=\"item.rating\" class=\"fb-tag fb-tag-plain\">è¯„åˆ† {{ item.rating }}/5</span>\n                        <span v-if=\"item.reservationId\" class=\"fb-tag fb-tag-plain\">å…³è”é¢„çº¦ {{ item.reservationId }}</span>\n                      </div>\n                      <div class=\"fb-item-time\">{{ formatFbTime(item.createTime) }}</div>\n                    </div>\n\n                    <div class=\"fb-item-preview\">{{ fbPreview(item.content) }}</div>\n\n                    <div v-if=\"item.reply\" class=\"fb-item-reply-preview\">\n                      <span class=\"label\">ç®¡ç†å‘˜å›å¤ï¼š</span>\n                      <span class=\"txt\">{{ fbPreview(item.reply, 120) }}</span>\n                    </div>\n                  </div>\n\n                  <div class=\"fb-item-actions\">\n                    <el-button type=\"primary\" link @click=\"openFeedbackDetail(item)\">è¯¦æƒ…</el-button>\n                  </div>\n                </div>\n              </div>\n\n              <div v-else class=\"empty-state\">\n                æš‚æ— åé¦ˆè®°å½•\n              </div>\n            </div>\n\n            <div class=\"pager\" v-if=\"fbTotal > fbPageSize\">\n              <el-pagination\n                  layout=\"prev, pager, next\"\n                  :current-page=\"fbPageNum\"\n                  :page-size=\"fbPageSize\"\n                  :total=\"fbTotal\"\n                  @current-change=\"onFbPageChange\"\n              />\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n\n        <!-- åé¦ˆè¯¦æƒ… -->\n        <el-dialog\n            title=\"åé¦ˆè¯¦æƒ…\"\n            v-model=\"fbDetailVisible\"\n            width=\"720px\"\n            align-center\n            append-to-body\n            :close-on-click-modal=\"false\"\n        >\n          <div class=\"fb-detail\">\n            <div class=\"fb-detail-title\">\n              <span class=\"fb-tag fb-tag-type\">{{ fbCategoryLabel(fbDetail.category) }}</span>\n              <span class=\"fb-tag\" :class=\"fbStatusClass(fbDetail.status)\">{{ fbStatusLabel(fbDetail.status) }}</span>\n              <span v-if=\"fbDetail.rating\" class=\"fb-tag fb-tag-plain\">è¯„åˆ† {{ fbDetail.rating }}/5</span>\n            </div>\n\n            <div class=\"fb-detail-meta\">\n              <div>æäº¤æ—¶é—´ï¼š{{ formatFbTime(fbDetail.createTime) }}</div>\n              <div v-if=\"fbDetail.reservationId\">å…³è”é¢„çº¦ï¼š{{ fbDetail.reservationId }}</div>\n            </div>\n\n            <div class=\"fb-detail-block\">\n              <div class=\"t\">å†…å®¹</div>\n              <div class=\"c\">{{ fbDetail.content || '-' }}</div>\n            </div>\n\n            <div class=\"fb-detail-block\" v-if=\"fbDetail.reply\">\n              <div class=\"t\">ç®¡ç†å‘˜å›å¤</div>\n              <div class=\"c\">{{ fbDetail.reply }}</div>\n            </div>\n          </div>\n\n          <template #footer>\n            <el-button @click=\"fbDetailVisible=false\">å…³é—­</el-button>\n          </template>\n        </el-dialog>\n      </div>\n    </div>\n\n    <!-- ä¸ªäººä¸­å¿ƒ -->\n    <div v-else-if=\"currentPage === 'user-profile'\">\n      <div class=\"card full-page-card\">\n        <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->\n        <div class=\"user-header-section\">\n          <div class=\"user-info-header\">\n            <div class=\"user-info-left\">\n              <div class=\"user-profile-info\">\n                <!-- è¿™é‡Œæ˜¾ç¤ºåç«¯æ¥çš„å§“åï¼Œæ²¡æœ‰å°±å…ˆå«â€œåŒå­¦â€ -->\n                <h2 class=\"user-name\">\n                  {{ profileForm.name || 'åŒå­¦' }}\n                </h2>\n                <span class=\"user-role\">å­¦ç”Ÿ</span>\n              </div>\n            </div>\n            <div class=\"header-actions\">\n              <!-- é¢„ç•™é€€å‡ºç™»å½•æŒ‰é’® -->\n              <!-- <button class=\"logout-btn\">é€€å‡ºç™»å½•</button> -->\n            </div>\n          </div>\n        </div>\n\n        <!-- ä¸ªäººä¿¡æ¯è¡¨å• -->\n        <div class=\"profile-content\">\n          <!-- ä¸ªäººä¿¡æ¯æ¨¡å— -->\n          <div class=\"form-section\">\n            <h3 class=\"section-title\">ä¸ªäººä¿¡æ¯</h3>\n\n            <div class=\"form-group\">\n              <div class=\"form-grid\">\n                <!-- å·¦è¾¹ï¼šå§“å -->\n                <div class=\"form-item\">\n                  <label>å§“å:</label>\n                  <input\n                      type=\"text\"\n                      v-model=\"profileForm.name\"\n                  />\n                </div>\n                <!-- å³è¾¹ï¼šå­¦å·ï¼ˆstudent_noï¼‰ -->\n                <div class=\"form-item\">\n                  <label>å­¦å·:</label>\n                  <input\n                      type=\"text\"\n                      v-model=\"profileForm.studentNo\"\n                  />\n                </div>\n                <div class=\"form-item\">\n                  <label>å­¦é™¢:</label>\n                  <select v-model=\"profileForm.college\">\n                    <option value=\"\">è¯·é€‰æ‹©å­¦é™¢</option>\n                    <option value=\"è®¡ç®—æœºå­¦é™¢\">è®¡ç®—æœºå­¦é™¢</option>\n                    <option value=\"ä¿¡æ¯å·¥ç¨‹å­¦é™¢\">ä¿¡æ¯å·¥ç¨‹å­¦é™¢</option>\n                    <option value=\"å•†å­¦é™¢\">å•†å­¦é™¢</option>\n                    <option value=\"æ³•å­¦é™¢\">æ³•å­¦é™¢</option>\n                  </select>\n                </div>\n                <div class=\"form-item\">\n                  <label>å¹´çº§ä¸ç­çº§:</label>\n                  <input\n                      type=\"text\"\n                      v-model=\"profileForm.gradeClass\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- è”ç³»æ–¹å¼æ¨¡å— -->\n          <div class=\"form-section\">\n            <h3 class=\"section-title\">è”ç³»æ–¹å¼</h3>\n\n            <div class=\"form-grid\">\n              <div class=\"form-item\">\n                <label>æ‰‹æœºå·:</label>\n                <div class=\"input-with-action\">\n                  <input\n                      type=\"text\"\n                      v-model=\"profileForm.phone\"\n                  />\n                </div>\n              </div>\n              <div class=\"form-item\">\n                <label>é‚®ç®±:</label>\n                <div class=\"input-with-action\">\n                  <input\n                      type=\"email\"\n                      v-model=\"profileForm.email\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- åå¥½è®¾ç½®æ¨¡å— -->\n          <div class=\"form-section\">\n            <h3 class=\"section-title\">åå¥½è®¾ç½®</h3>\n\n            <div class=\"form-grid\">\n              <div class=\"form-item\">\n                <label>å¸¸ç”¨æ ¡åŒº:</label>\n                <div class=\"radio-group\">\n                  <label class=\"radio-option\">\n                    <input\n                        type=\"radio\"\n                        value=\"æœ¬éƒ¨æ ¡åŒº\"\n                        v-model=\"profileForm.commonCampus\"\n                    />\n                    <span class=\"radio-label\">æœ¬éƒ¨æ ¡åŒº</span>\n                  </label>\n                  <label class=\"radio-option\">\n                    <input\n                        type=\"radio\"\n                        value=\"ä¸œæ ¡åŒº\"\n                        v-model=\"profileForm.commonCampus\"\n                    />\n                    <span class=\"radio-label\">ä¸œæ ¡åŒº</span>\n                  </label>\n                  <label class=\"radio-option\">\n                    <input\n                        type=\"radio\"\n                        value=\"æ¢…å±±æ ¡åŒº\"\n                        v-model=\"profileForm.commonCampus\"\n                    />\n                    <span class=\"radio-label\">æ¢…å±±æ ¡åŒº</span>\n                  </label>\n                </div>\n              </div>\n              <div class=\"form-item full-width\">\n                <label>å¤‡æ³¨ä¿¡æ¯:</label>\n                <textarea\n                    placeholder=\"ä¾‹å¦‚ï¼šåå¥½å›¾ä¹¦é¦†ã€æ™šä¸Šæ—¶æ®µè¾ƒå¤šã€ä¸æ“…é•¿é«˜æ•°ç­‰\"\n                    v-model=\"profileForm.profileRemark\"\n                ></textarea>\n              </div>\n            </div>\n          </div>\n\n          <!-- æ“ä½œæŒ‰é’® -->\n          <div class=\"profile-actions\">\n            <button\n                class=\"primary-btn\"\n                type=\"button\"\n                @click=\"handleProfileSave\"\n                :disabled=\"profileSaving\"\n            >\n              {{ profileSaving ? 'ä¿å­˜ä¸­â€¦' : 'ä¿å­˜ä¿¡æ¯' }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'AppHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n\n  beforeUnmount () {\n    this.stopQuoteTimer()\n  },\n\n  data () {\n    return {\n      /* ---------------------------\n       * é¢„çº¦é¡µï¼šæ ¡åŒº/å»ºç­‘/æ•™å®¤ + å¼€å§‹/ç»“æŸæ—¶é—´ + åº§ä½å·\n       * --------------------------- */\n      // æˆ¿é—´å…¨é‡ï¼ˆä¼˜å…ˆä»åç«¯æ‹‰ï¼›æ‹‰ä¸åˆ°å°±ç”¨å‰ç«¯å…œåº•ç”Ÿæˆï¼Œä¾¿äºä½ å…ˆæŠŠé¡µé¢è·‘é€šï¼‰\n      allRooms: [],\n\n      // ä¸‹æ‹‰é€‰é¡¹\n      campusOptions: [],\n      buildingOptions: [],\n      roomOptions: [],\n\n      // å½“å‰é€‰ä¸­\n      selectedCampus: '',\n      selectedBuilding: '',\n      selectedRoomId: null,\n\n      // å¼€å§‹/ç»“æŸæ—¶é—´ï¼ˆå°æ—¶ï¼‰\n      startHour: null,\n      endHour: null,\n\n      // åº§ä½å·ï¼ˆ01~40ï¼‰\n      selectedSeatNo: '',\n      disabledSeatNos: [],\n\n      // ä¸´æ—¶é¢„çº¦åˆ—è¡¨ï¼ˆå¯æ·»åŠ å¤šæ¡ï¼Œæœ€åç»Ÿä¸€æäº¤ï¼‰\n      tempReservations: [],\n      submittingReservations: false,\n\n      // æ—¥æœŸç›¸å…³\n      dateList: [],\n      visibleStart: 0,\n      visibleCount: 7,\n      currentDateIndex: 0,\n\n      // åç«¯è¿”å›çš„â€œå·²æ»¡æ—¶æ®µâ€ï¼ˆid åˆ—è¡¨ï¼Œä¾‹å¦‚ [8,9,14]ï¼‰\n      disabledSlotIds: [],\n\n      // å½“å‰ç™»å½•ç”¨æˆ· id\n      currentUserId: null,\n\n      // æˆ‘çš„é¢„çº¦åˆ—è¡¨\n      myReservations: [],\n\n      // æˆ‘çš„é¢„çº¦åˆ†é¡µ\n      pageSize: 15,\n      reservationPageIndex: 1,\n\n      // è¿è§„è®°å½•ç›¸å…³\n      myViolations: [],\n      violationPageIndex: 1,\n      violationPageSize: 15,\n\n      // ä¸ªäººä¸­å¿ƒè¡¨å•æ•°æ®ï¼ˆæ¨¡æ¿é‡Œç”¨çš„æ˜¯è¿™äº›å­—æ®µåï¼Œæ‰€ä»¥è¿™é‡Œä¸æ”¹å­—æ®µåï¼‰\n      profileForm: {\n        name: '',\n        account: '',\n        studentNo: '',\n        college: '',\n        gradeClass: '',\n        phone: '',\n        email: '',\n        commonCampus: '',\n        profileRemark: ''\n      },\n      profileLoading: false,\n      profileSaving: false,\n\n      // é¦–é¡µ - å¤©æ°”ã€é‡‘å¥ã€å¿«æ·åé¦ˆ\n      weatherData: null,\n      dailyQuote: '',\n      dailyQuoteId: null,\n      quoteTimer: null,\n      openFeedback: false,\n\n      // è¯„ä»·ä¸åé¦ˆï¼ˆå†™å…¥ feedback è¡¨ï¼Œç®¡ç†å‘˜åç»­å¯æŸ¥çœ‹å¤„ç†ï¼‰\n      fbActiveTab: 'submit',\n      fbSubmitting: false,\n      fbCategoryOptions: [\n        { label: 'ç¯å¢ƒè¯„ä»·', value: 'env' },\n        { label: 'æœåŠ¡è¯„ä»·', value: 'service' },\n        { label: 'å»ºè®® / åŠŸèƒ½ä¼˜åŒ–', value: 'suggestion' },\n        { label: 'æŠ•è¯‰', value: 'complaint' },\n        { label: 'ç”³è¯‰ï¼ˆé¢„çº¦/è¿è§„ç­‰ï¼‰', value: 'appeal' },\n        { label: 'å…¶ä»–', value: 'other' }\n      ],\n      feedbackForm: {\n        category: 'env',\n        reservationId: '',\n        rating: 5,\n        content: ''\n      },\n      feedbackRules: {\n        category: [{ required: true, message: 'è¯·é€‰æ‹©åé¦ˆç±»å‹', trigger: 'change' }],\n        rating: [{ required: true, message: 'è¯·ç»™å‡ºè¯„åˆ†', trigger: 'change' }],\n        content: [\n          { required: true, message: 'è¯·å¡«å†™å†…å®¹', trigger: 'blur' },\n          { min: 5, message: 'å†…å®¹è‡³å°‘ 5 ä¸ªå­—', trigger: 'blur' }\n        ]\n      },\n\n      fbStatusFilter: '',\n      fbList: [],\n      fbListLoading: false,\n      fbPageNum: 1,\n      fbPageSize: 6,\n      fbTotal: 0,\n\n      fbDetailVisible: false,\n      fbDetail: {},\n\n      // é¦–é¡µ - å…¬å‘Šåˆ—è¡¨ï¼ˆä»æ•°æ®åº“åŠ è½½ï¼‰\n      homeNotices: [],\n      homeNoticeAllCache: [],\n\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\n      noticeTypeOptions: [\n        { label: 'è§„åˆ™', value: 'RULE', icon: 'ğŸ“Œ' },\n        { label: 'è°ƒæ•´', value: 'ADJUSTMENT', icon: 'ğŸ•’' },\n        { label: 'çªå‘', value: 'EMERGENCY', icon: 'ğŸš¨' },\n        { label: 'ç»´æŠ¤', value: 'MAINTENANCE', icon: 'ğŸ› ï¸' },\n        { label: 'è€ƒè¯•', value: 'EXAM', icon: 'ğŸ“' },\n        { label: 'å…¶ä»–', value: 'OTHER', icon: 'ğŸ“£' }\n      ],\n\n      noticeDetailVisible: false,\n      noticeDetail: null,\n      noticeAllVisible: false,\n      noticeAllView: 'list',\n      noticePageList: [],\n      noticeAllList: [],\n      noticeTotalCount: 0,\n      noticePageNum: 1,\n      noticePageSize: 6,\n      noticeTypeFilter: '',\n      noticeLoading: false,\n\n      homeNoticeLimit: 3,\n      noticeReadIds: [],\n      onlyViolation: false,\n      onlyPending: false,\n      currentCreditScore: 100,\n\n      todayOverview: {\n        totalSeats: 24000,\n        reservedCount: 0,\n        inUseCount: 0,\n        remainingCount: 24000\n      },\n      monthBrief: {\n        monthReserveCount: 0,\n        studyMinutes: 0,\n        lastVisitTime: null\n      },\n\n    }\n  },\n\n  computed: {\n    visibleDates () {\n      return this.dateList\n          .slice(this.visibleStart, this.visibleStart + this.visibleCount)\n          .map((d, idx) => ({\n            ...d,\n            index: this.visibleStart + idx\n          }))\n    },\n    canMovePrev () {\n      return this.visibleStart > 0\n    },\n    canMoveNext () {\n      return this.visibleStart + this.visibleCount < this.dateList.length\n    },\n    currentRoomId () {\n      return this.selectedRoomId\n    },\n    currentRoomFullName () {\n      const room = this.allRooms.find(r => Number(r.id) === Number(this.selectedRoomId))\n      if (!room) return ''\n      return `${room.campus} Â· ${room.building} ${room.roomName}`\n    },\n    currentDateLabel () {\n      const cur = this.dateList[this.currentDateIndex]\n      return cur ? cur.fullLabel : ''\n    },\n    currentDateStr () {\n      const cur = this.dateList[this.currentDateIndex]\n      return cur ? cur.fullLabel : null\n    },\n\n    // å¼€å§‹æ—¶é—´ï¼š08~22ï¼›ç»“æŸæ—¶é—´ï¼š09~23ï¼ˆä¸”å¿…é¡» > startHourï¼‰\n    startHourOptions () {\n      const arr = []\n      for (let h = 8; h <= 22; h++) arr.push(h)\n      return arr\n    },\n    endHourOptions () {\n      if (this.startHour == null) return []\n      const arr = []\n      const maxEnd = Math.min(23, this.startHour + 4)   // âœ…æœ€å¤š4å°æ—¶\n      for (let h = this.startHour + 1; h <= maxEnd; h++) arr.push(h)\n      return arr\n    },\n    selectedTimeText () {\n      if (this.startHour == null || this.endHour == null) return ''\n      return `${this.pad2(this.startHour)}:00 - ${this.pad2(this.endHour)}:00`\n    },\n    selectedSlotIdsFromRange () {\n      if (this.startHour == null || this.endHour == null) return []\n      const ids = []\n      for (let h = this.startHour; h < this.endHour; h++) ids.push(h)\n      return ids\n    },\n    rangeHasConflict () {\n      if (!this.disabledSlotIds.length) return false\n      const disabled = new Set(this.disabledSlotIds.map(x => Number(x)))\n      return this.selectedSlotIdsFromRange.some(id => disabled.has(Number(id)))\n    },\n    seatList () {\n      const arr = []\n      for (let i = 1; i <= 80; i++) arr.push(String(i).padStart(2, '0'))\n      return arr\n    },\n    hasAnySelection () {\n      return this.startHour != null || this.endHour != null || !!this.selectedSeatNo\n    },\n    selectionTagText () {\n      if (!this.currentDateLabel && !this.selectedTimeText && !this.selectedSeatNo) return ''\n      const parts = []\n      if (this.currentRoomFullName) parts.push(this.currentRoomFullName)\n      if (this.currentDateLabel) parts.push(this.currentDateLabel)\n      if (this.selectedTimeText) parts.push(this.selectedTimeText)\n      if (this.selectedSeatNo) parts.push(`åº§ä½ ${this.selectedSeatNo}`)\n      return parts.join(' Â· ')\n    },\n    canClearAll () {\n      return this.tempReservations.length > 0\n          || this.startHour != null\n          || this.endHour != null\n          || !!this.selectedSeatNo\n    },\n\n    currentTempKey () {\n      if (!this.currentRoomId || !this.currentDateStr) return ''\n      if (this.startHour == null || this.endHour == null) return ''\n      if (!this.selectedSeatNo) return ''\n      return [\n        this.currentRoomId,\n        this.currentDateStr,\n        this.startHour,\n        this.endHour,\n        this.selectedSeatNo\n      ].join('|')\n    },\n\n    isDuplicateTempReservation () {\n      if (!this.currentTempKey) return false\n      return this.tempReservations.some(x => x.key === this.currentTempKey)\n    },\n\n    canAddTempReservation () {\n      return !!this.currentRoomId\n          && !!this.currentDateStr\n          && this.startHour != null\n          && this.endHour != null\n          && !!this.selectedSeatNo\n          && !this.rangeHasConflict\n          && !this.isDuplicateTempReservation\n          && this.tempReservations.length < 4\n    },\n\n    canSubmitReservation () {\n      return this.tempReservations.length > 0 && !this.submittingReservations\n    },\n\n    totalPages () {\n      if (!this.displayReservations.length) return 0\n      return Math.ceil(this.displayReservations.length / this.pageSize)\n    },\n    pagedReservations () {\n      if (!this.displayReservations.length) return []\n      const total = this.totalPages || 1\n      const page = Math.min(this.reservationPageIndex, total)\n      const start = (page - 1) * this.pageSize\n      const end = start + this.pageSize\n      return this.displayReservations.slice(start, end)\n    },\n\n    violationTotalPages () {\n      if (!this.myViolations.length) return 0\n      return Math.ceil(this.myViolations.length / this.violationPageSize)\n    },\n    pagedViolations () {\n      if (!this.myViolations.length) return []\n      const total = this.violationTotalPages || 1\n      const page = Math.min(this.violationPageIndex, total)\n      const start = (page - 1) * this.violationPageSize\n      const end = start + this.violationPageSize\n      return this.myViolations.slice(start, end)\n    },\n\n    todayStr () {\n      const d = new Date()\n      return `${d.getMonth() + 1} æœˆ ${d.getDate()} æ—¥`\n    },\n    weekDayStr () {\n      const list = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­']\n      return 'æ˜ŸæœŸ' + list[new Date().getDay()]\n    },\n    timeGreeting () {\n      const h = new Date().getHours()\n      if (h < 11) return 'ä¸Šåˆå¥½'\n      if (h < 14) return 'ä¸­åˆå¥½'\n      if (h < 19) return 'ä¸‹åˆå¥½'\n      return 'æ™šä¸Šå¥½'\n    },\n\n    todayAppointments () {\n      const list = Array.isArray(this.myReservations) ? this.myReservations : []\n      if (!list.length) return []\n\n      const d = new Date()\n      const todayStr = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`\n      return list.filter(item => item.date === todayStr)\n    },\n\n    displayReservations () {\n      const list = Array.isArray(this.myReservations) ? this.myReservations.slice() : []\n\n      const byDateTimeAsc = (a, b) => {\n        const da = a.date || ''\n        const db = b.date || ''\n        if (da !== db) return da.localeCompare(db)\n\n        const ta = (a.startTime || '').slice(0, 8)\n        const tb = (b.startTime || '').slice(0, 8)\n        if (ta !== tb) return ta.localeCompare(tb)\n\n        return String(a.reservationNo || '').localeCompare(String(b.reservationNo || ''))\n      }\n\n      const norm = s => String(s ?? '').trim().toLowerCase()\n      const isPending = (x) => norm(x.status) === 'reserved'\n      const isViolation = (x) => ['late', 'no_show'].includes(norm(x.status))\n\n      if (this.onlyViolation) {\n        return list.filter(isViolation).sort(byDateTimeAsc)\n      }\n      if (this.onlyPending) {\n        return list.filter(isPending).sort(byDateTimeAsc)\n      }\n\n      // âœ… ä¸å‹¾é€‰ï¼šå¾…ç­¾åˆ°(reserved) ä¼˜å…ˆï¼Œå…¶æ¬¡å·²ç­¾åˆ°/è¿Ÿåˆ°ï¼Œå†æœªç­¾åˆ°ï¼Œæœ€åå–æ¶ˆç±»\n      const rank = (st) => {\n        if (st === 'reserved') return 0\n        if (st === 'checked_in' || st === 'late') return 1\n        if (st === 'no_show') return 2\n        return 3\n      }\n\n      return list.sort((a, b) => {\n        const ra = rank(a.status)\n        const rb = rank(b.status)\n        if (ra !== rb) return ra - rb\n        return byDateTimeAsc(a, b)\n      })\n    },\n\n    monthStudyHours () {\n      const mins = Number(this.monthBrief.studyMinutes || 0)\n      const hours = mins / 60\n      return Number.isInteger(hours) ? String(hours) : hours.toFixed(1)\n    },\n\n    lastVisitText () {\n      return this.formatLastVisit(this.monthBrief.lastVisitTime)\n    },\n\n\n    // è¯„ä»·ä¸åé¦ˆï¼šåªæœ‰â€œç¯å¢ƒ/æœåŠ¡â€ç±»éœ€è¦æ‰“åˆ†\n    fbNeedRating () {\n      const c = (this.feedbackForm && this.feedbackForm.category) ? String(this.feedbackForm.category) : ''\n      return ['env', 'service'].includes(c)\n    },\n\n    // å…³è”é¢„çº¦ä¸‹æ‹‰ï¼šå–æœ€è¿‘ä¸€äº›è®°å½•ï¼ˆé¿å…ä¸‹æ‹‰å¤ªé•¿ï¼‰\n    feedbackReservationOptions () {\n      const list = Array.isArray(this.myReservations) ? this.myReservations.slice() : []\n      const key = (x) => `${x.date || ''} ${String(x.startTime || '')}`\n      list.sort((a, b) => (key(a) < key(b) ? 1 : -1))\n      return list.slice(0, 50)\n    },\n    creditLevel () {\n      const s = Number(this.currentCreditScore || 0)\n      if (s >= 80) return 'good'\n      if (s >= 60) return 'warn'\n      return 'bad'\n    },\n    creditLevelText () {\n      if (this.creditLevel === 'good') return 'è‰¯å¥½'\n      if (this.creditLevel === 'warn') return 'æ³¨æ„'\n      return 'é£é™©'\n    },\n    creditLevelClass () {\n      return `credit-${this.creditLevel}`\n    },\n    creditBarStyle () {\n      const s = Math.max(0, Math.min(100, Number(this.currentCreditScore || 0)))\n      return { width: `${s}%` }\n    },\n    creditRiskTip () {\n      const s = Number(this.currentCreditScore || 0)\n      if (s < 60) return 'ä¿¡ç”¨åˆ†ä½äº 60 å¯èƒ½ä¼šè¢«åˆ—å…¥é»‘åå•ï¼Œä¸€æ®µæ—¶é—´å†…æ— æ³•é¢„çº¦ã€‚'\n      if (s < 80) return 'ä¿¡ç”¨åˆ†ä½äº 60 ä¼šè¢«åˆ—å…¥é»‘åå•ï¼›å»ºè®®ä¿æŒæŒ‰æ—¶ç­¾åˆ°ï¼Œé¿å…è¿Ÿåˆ°æˆ–æœªç­¾åˆ°ã€‚'\n      return 'ä¿¡ç”¨åˆ†ä½äº 60 ä¼šè¢«åˆ—å…¥é»‘åå•ï¼›ç»§ç»­ä¿æŒæŒ‰æ—¶ç­¾åˆ°ã€‚'\n    },\n\n  },\n\n  created () {\n    // åˆå§‹åŒ–æ—¥æœŸï¼ˆé¦–é¡µä¹Ÿè¦ç”¨ï¼‰\n    this.initDates()\n\n    // å…ˆè¯» localStorageï¼ˆå…¼å®¹å¤šç§å­—æ®µåï¼‰\n    const u0 = this.getStoredUser()\n    if (u0) {\n      this.currentUserId = u0.userId ?? u0.id ?? null\n      this.loadNoticeReadIds()\n      this.profileForm = {\n        name: u0.userName || u0.name || '',\n        account: u0.accountNo || u0.account || '',\n        studentNo: u0.accountNo || u0.studentNo || u0.account || '',\n        college: u0.college || '',\n        gradeClass: u0.gradeClass || '',\n        phone: u0.phone || '',\n        email: u0.email || '',\n        commonCampus: u0.commonCampus || '',\n        profileRemark: u0.profileRemark || ''\n      }\n\n      // å†å»è¯·æ±‚åç«¯æ‹¿æœ€æ–°èµ„æ–™è¦†ç›–ï¼ˆä¸ä¼šå½±å“æ¨¡æ¿å­—æ®µåï¼‰\n      this.loadUserProfile()\n    }\n\n    // âœ… æ—¶æ®µå ç”¨æƒ…å†µåœ¨ initReserveRooms() é‡Œæ ¹æ®é»˜è®¤æˆ¿é—´è‡ªåŠ¨æ‹‰å–\n\n    // é¦–é¡µä¹Ÿæ‹‰ä¸€æ¬¡æˆ‘çš„é¢„çº¦ï¼ˆä¸å¼¹â€œæœªç­¾åˆ°åˆ·æ–°â€çš„æé†’ï¼‰\n    this.loadMyReservations({ refreshNoShowNotify: false })\n\n    this.loadWeather()\n    this.loadQuoteFromDb()\n    this.loadHomeDashboard()\n    this.loadHomeNotices()\n  },\n\n  methods: {\n    /* ---------------------------\n     * ç»Ÿä¸€å¤„ç† Axios è¿”å›ç»“æ„\n     * --------------------------- */\n    normalizeBody (res) {\n      // âœ… ä½ çš„ request.js å·²ç» return response.data\n      // æ‰€ä»¥è¿™é‡Œæ‹¿åˆ°çš„ res å°±æ˜¯åç«¯ JSONï¼ˆResultï¼‰\n      return res\n    },\n    normalizeData (res) {\n      const body = this.normalizeBody(res)\n\n      // âœ… æ ‡å‡† Resultï¼š{code,msg,data,total}\n      if (body && typeof body === 'object' && 'code' in body && 'data' in body) {\n        return body.data\n      }\n\n      // å…œåº•ï¼šå¦‚æœä»¥åæŸäº›æ¥å£çœŸè¿”å›â€œè£¸æ•°æ®â€\n      return body\n    },\n    isBizOk (resOrBody) {\n      const body = this.normalizeBody(resOrBody)\n\n      // âœ… åªè®¤ Result.code===200 ä¸ºæˆåŠŸ\n      if (!body || typeof body !== 'object' || !('code' in body)) return false\n      return Number(body.code) === 200\n    },\n    getMsg (resOrBody, fallback = '') {\n      const body = this.normalizeBody(resOrBody)\n      if (!body || typeof body !== 'object') return fallback\n      return body.msg || fallback\n    },\n\n    getUserStorage () {\n      // ä¼˜å…ˆ localStorageï¼Œå…¶æ¬¡ sessionStorageï¼›éƒ½æ²¡æœ‰å°±é»˜è®¤ localStorage\n      if (localStorage.getItem('ssrmsUser')) return localStorage\n      if (sessionStorage.getItem('ssrmsUser')) return sessionStorage\n      return localStorage\n    },\n\n    getStoredUser () {\n      const storage = this.getUserStorage()\n      const raw = storage.getItem('ssrmsUser')\n      if (!raw) return null\n      try {\n        return JSON.parse(raw)\n      } catch (e) {\n        console.error('è§£æ ssrmsUser å¤±è´¥', e)\n        return null\n      }\n    },\n\n    setStoredUser (userObj) {\n      const storage = this.getUserStorage()\n      storage.setItem('ssrmsUser', JSON.stringify(userObj))\n    },\n\n    ensureCurrentUserId () {\n      if (this.currentUserId) return this.currentUserId\n      const u = this.getStoredUser()\n      if (u) {\n        this.currentUserId = u.userId ?? u.id ?? null\n      }\n      return this.currentUserId\n    },\n\n    emitChange (page) {\n      this.$emit('change-page', page)\n    },\n\n    /* ---------------------------\n     * é¢„çº¦é¡µï¼šæˆ¿é—´é€‰é¡¹åˆå§‹åŒ–\n     * --------------------------- */\n    async initReserveRooms () {\n      // âœ… é‡æ–°è¿›å…¥ä¹Ÿåˆ·æ–°ä¸€æ¬¡å†²çªæ•°æ®ï¼ˆå¦åˆ™æ¢äº†æ—¥æœŸ/æ•™å®¤å†å›æ¥å¯èƒ½è¿˜æ˜¯æ—§çš„ï¼‰\n      if (this.campusOptions && this.campusOptions.length) {\n        await this.fetchSlotStatus()\n        return\n      }\n\n      // 1) å…ˆå°è¯•ä»åç«¯æ‹‰æˆ¿é—´åˆ—è¡¨ï¼ˆä½ åç«¯ RoomController å†™å¥½åï¼Œè¿™é‡Œä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼‰\n      const rooms = await this.loadRoomsFromBackend().catch(() => null)\n\n      // 2) æ‹‰ä¸åˆ°å°±ç”¨å‰ç«¯å…œåº•ç”Ÿæˆï¼ˆé¡ºåºä¸æˆ‘ä»¬ä¹‹å‰çš„æ‰¹é‡æ’å…¥ä¿æŒä¸€è‡´ï¼Œid ä» 1 å¼€å§‹ï¼‰\n      this.allRooms = Array.isArray(rooms) && rooms.length ? rooms : this.buildFallbackRooms()\n\n      // 3) æ„å»ºä¸‹æ‹‰é€‰é¡¹ï¼Œå¹¶ç»™ä¸€ä¸ªé»˜è®¤å€¼\n      this.campusOptions = Array.from(new Set(this.allRooms.map(r => r.campus)))\n      this.selectedCampus = this.selectedCampus || (this.campusOptions[0] || '')\n      this.onCampusChange()\n\n      // é»˜è®¤æ—¶é—´\n      if (this.startHour == null) this.startHour = 8\n      if (this.endHour == null) this.endHour = 9\n\n      // âœ… é»˜è®¤å€¼å°±ç»ªåï¼Œåˆ·æ–°ä¸€æ¬¡å†²çª\n      await this.fetchSlotStatus()\n    },\n\n    async loadRoomsFromBackend () {\n      // å…¼å®¹ä½ åç«¯æœªæ¥å¯èƒ½çš„ä¸åŒæ¥å£å‘½åï¼Œå°½é‡â€œå…ˆèƒ½è·‘â€\n      const tries = [\n        { url: '/room/list' },\n        { url: '/room/all' },\n      ]\n\n      for (const t of tries) {\n        try {\n          const res = await this.$axios.get(t.url)\n          const data = this.normalizeData(res)\n          if (Array.isArray(data) && data.length) return data\n        } catch (e) {\n          // ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ª\n        }\n      }\n      return null\n    },\n\n    buildFallbackRooms () {\n      const campuses = ['æœ¬éƒ¨æ ¡åŒº', 'ä¸œæ ¡åŒº', 'æ¢…å±±æ ¡åŒº']\n      const buildings = ['å›¾ä¹¦é¦†', '1å·æ•™å­¦æ¥¼', '2å·æ•™å­¦æ¥¼', '3å·æ•™å­¦æ¥¼']\n      const rooms = []\n\n      // 101~105, 201~205 ... 501~505\n      const roomNames = []\n      for (let floor = 1; floor <= 5; floor++) {\n        for (let no = 1; no <= 5; no++) {\n          roomNames.push(`${floor}0${no}`)\n        }\n      }\n\n      let id = 1\n      for (const c of campuses) {\n        for (const b of buildings) {\n          for (const rn of roomNames) {\n            rooms.push({\n              id,\n              campus: c,\n              building: b,\n              roomName: rn,\n              totalSeats: 80,\n              openSeats: 80,\n              status: 'open'\n            })\n            id++\n          }\n        }\n      }\n      return rooms\n    },\n\n    onCampusChange () {\n      // é‡å»º buildingOptions\n      const bs = this.allRooms\n          .filter(r => r.campus === this.selectedCampus)\n          .map(r => r.building)\n      this.buildingOptions = Array.from(new Set(bs))\n\n      if (!this.buildingOptions.includes(this.selectedBuilding)) {\n        this.selectedBuilding = this.buildingOptions[0] || ''\n      }\n\n      this.onBuildingChange()\n    },\n\n    onBuildingChange () {\n      // é‡å»º roomOptions\n      const list = this.allRooms\n          .filter(r => r.campus === this.selectedCampus && r.building === this.selectedBuilding)\n          .map(r => ({ id: r.id, roomName: r.roomName }))\n\n      this.roomOptions = list\n\n      const ids = list.map(x => Number(x.id))\n      if (!ids.includes(Number(this.selectedRoomId))) {\n        this.selectedRoomId = list.length ? Number(list[0].id) : null\n      }\n\n      // æˆ¿é—´åˆ‡æ¢ååˆ·æ–°å ç”¨æ—¶æ®µ & æ¸…ç©ºåº§ä½ï¼ˆåº§ä½å ç”¨åç«¯è¿˜æ²¡æ¥ï¼Œè¿™é‡Œå…ˆæ¸…ç©ºï¼‰\n      this.selectedSeatNo = ''\n      this.fetchSlotStatus()\n    },\n\n    onRoomChange () {\n      this.selectedSeatNo = ''\n      this.fetchSlotStatus()\n    },\n\n    pad2 (n) {\n      return String(n).padStart(2, '0')\n    },\n\n    handleStartHourChange () {\n      if (this.startHour == null) return\n      const maxEnd = Math.min(23, this.startHour + 4)\n\n      if (this.endHour == null || this.endHour <= this.startHour) this.endHour = this.startHour + 1\n      if (this.endHour > maxEnd) this.endHour = maxEnd\n\n      this.fetchSeatConflicts()\n    },\n    handleEndHourChange () {\n      if (this.startHour == null || this.endHour == null) return\n      const maxEnd = Math.min(23, this.startHour + 4)\n      if (this.endHour <= this.startHour) this.endHour = this.startHour + 1\n      if (this.endHour > maxEnd) this.endHour = maxEnd\n\n      this.fetchSeatConflicts()\n    },\n\n    initDates () {\n      const today = new Date()\n      const list = []\n      const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­']\n\n      for (let i = 0; i < 14; i++) {\n        const d = new Date(today)\n        d.setDate(d.getDate() + i + 1)\n\n        const month = d.getMonth() + 1\n        const day = d.getDate()\n        const fullLabel =\n            `${d.getFullYear()}-${month.toString().padStart(2, '0')}-` +\n            `${day.toString().padStart(2, '0')}`\n\n        list.push({\n          key: i,\n          year: d.getFullYear(),\n          month,\n          day,\n          weekday: weekdays[d.getDay()],\n          monthLabel: `${d.getFullYear()}-${month.toString().padStart(2, '0')}`,\n          isToday: false,\n          isTomorrow: i === 0,\n          fullLabel\n        })\n      }\n\n      this.dateList = list\n      this.visibleStart = 0\n      this.currentDateIndex = 0\n    },\n\n    moveDates (direction) {\n      if (direction === 'prev' && this.canMovePrev) this.visibleStart -= 1\n      else if (direction === 'next' && this.canMoveNext) this.visibleStart += 1\n    },\n\n    async selectDate (index) {\n      this.currentDateIndex = index\n      await this.fetchSlotStatus()\n    },\n\n    async fetchSlotStatus () {\n      this.disabledSlotIds = []\n      // åŒæ­¥åˆ·æ–°åº§ä½å†²çªï¼ˆç”¨äºç½®ç°ä¸å¯é¢„çº¦åº§ä½ï¼‰\n      await this.fetchSeatConflicts()\n    },\n\n    /* ---------------------------\n     * é¢„çº¦é¡µï¼šåº§ä½é€‰æ‹©\n     * --------------------------- */\n    seatState (seat) {\n      if (this.disabledSeatNos.includes(seat)) return 'disabled'\n      if (this.selectedSeatNo === seat) return 'selected'\n      return 'available'\n    },\n    seatClass (seat) {\n      const state = this.seatState(seat)\n      return {\n        'slot-available': state === 'available',\n        'slot-disabled': state === 'disabled',\n        'slot-selected': state === 'selected'\n      }\n    },\n    toggleSeat (seat) {\n      // ç‚¹åˆ°å†²çªåº§ä½ï¼šä¸é€‰æ‹©ï¼Œä½†æç¤ºå†²çªåŒºé—´\n      if (this.disabledSeatNos.includes(seat)) { return }\n\n      // å¯é€‰åº§ä½ï¼šæ­£å¸¸é€‰ä¸­ï¼Œå¹¶æ¸…ç©ºæç¤º\n      this.selectedSeatNo = (this.selectedSeatNo === seat) ? '' : seat\n    },\n\n    resetSelections () {\n      // åªæ¸…ç©ºå½“å‰â€œè¾“å…¥æ¡†â€é€‰æ‹©ï¼Œä¸å½±å“å·²æ·»åŠ çš„ä¸´æ—¶åˆ—è¡¨\n      this.startHour = null\n      this.endHour = null\n      this.selectedSeatNo = ''\n    },\n\n    clearAllSelections () {\n      // æ¸…ç©ºå½“å‰é€‰æ‹© + ä¸´æ—¶åˆ—è¡¨\n      this.resetSelections()\n      this.tempReservations = []\n    },\n\n    addTempReservation () {\n      if (!this.canAddTempReservation) return\n\n      const room = this.allRooms.find(r => Number(r.id) == Number(this.currentRoomId))\n      const labelParts = []\n      if (room) labelParts.push(`${room.campus} Â· ${room.building} ${room.roomName}`)\n      if (this.currentDateStr) labelParts.push(this.currentDateStr)\n      if (this.selectedTimeText) labelParts.push(this.selectedTimeText)\n      labelParts.push(`åº§ä½ ${this.selectedSeatNo}`)\n\n      const item = {\n        key: this.currentTempKey,\n        roomId: this.currentRoomId,\n        date: this.currentDateStr,\n        startHour: this.startHour,\n        endHour: this.endHour,\n        seatNo: this.selectedSeatNo,\n        label: labelParts.join(' Â· ')\n      }\n\n      this.tempReservations.push(item)\n      // æ·»åŠ åæŒ‰é’®ä¼šå› â€œé‡å¤â€è€Œè‡ªåŠ¨å˜ç°ï¼ˆisDuplicateTempReservationï¼‰\n    },\n\n    removeTempReservation (idx) {\n      if (idx == null) return\n      this.tempReservations.splice(idx, 1)\n    },\n\n    async submitReservations () {\n      if (!this.canSubmitReservation) return\n      if (!this.ensureCurrentUserId()) {\n        alert('è¯·å…ˆç™»å½•åå†é¢„çº¦')\n        return\n      }\n\n      const first = this.tempReservations[0]\n\n      // åç«¯ä¸€æ¬¡æäº¤åªèƒ½å¤„ç†åŒä¸€ room/date/time çš„å¤šä¸ª seatNos\n      const same = this.tempReservations.every(x =>\n          Number(x.roomId) === Number(first.roomId) &&\n          x.date === first.date &&\n          Number(x.startHour) === Number(first.startHour) &&\n          Number(x.endHour) === Number(first.endHour)\n      )\n      if (!same) {\n        alert('è¯·ç¡®ä¿ä¸´æ—¶åˆ—è¡¨é‡Œçš„é¢„çº¦å±äºåŒä¸€æ•™å®¤/æ—¥æœŸ/æ—¶é—´æ®µï¼ˆå¯å¤šé€‰åº§ä½ï¼‰ï¼Œå¦åˆ™è¯·åˆ†å¤šæ¬¡æäº¤ã€‚')\n        return\n      }\n\n      const payload = {\n        userId: this.currentUserId,\n        roomId: first.roomId,\n        date: first.date,\n        startTime: `${this.pad2(first.startHour)}:00`,\n        endTime: `${this.pad2(first.endHour)}:00`,\n        seatNos: this.tempReservations.map(x => String(x.seatNo))\n      }\n\n      this.submittingReservations = true\n      try {\n        const res = await this.$axios.post('/reservation/create', payload)\n        const body = this.normalizeBody(res)\n\n        if (!this.isBizOk(body)) {\n          const msg = this.getMsg(body, 'é¢„çº¦å¤±è´¥')\n          if (msg && msg.includes('\\n')) {\n            this.conflictLines = msg.split('\\n').slice(0, 4)\n          }\n          alert(msg)\n          return\n        }\n\n        alert(this.getMsg(body, 'é¢„çº¦æˆåŠŸ'))\n        this.clearAllSelections()\n        this.emitChange('user-reservations')\n      } catch (e) {\n        console.error(e)\n        alert('é¢„çº¦å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\n      } finally {\n        this.submittingReservations = false\n      }\n    },\n\n    async loadMyReservations (opts = {}) {\n      const {\n        refreshNoShowNotify = true // æ˜¯å¦æç¤ºâ€œè‡ªåŠ¨æ ‡è®°æœªç­¾åˆ°â€\n      } = opts\n\n      if (!this.ensureCurrentUserId()) return\n\n      // è¿›å…¥åˆ—è¡¨å‰ï¼Œè®©åç«¯åˆ·æ–°ä¸€æ¬¡æœªç­¾åˆ°çŠ¶æ€ï¼ˆå¯é€‰æ‹©æ˜¯å¦å¼¹æé†’ï¼‰\n      await this.refreshNoShowStatus({ notify: refreshNoShowNotify })\n\n      try {\n        const res = await this.$axios.get('/reservation/my', {\n          params: { userId: this.currentUserId }\n        })\n\n        const list = Array.isArray(this.normalizeData(res)) ? this.normalizeData(res).slice() : []\n\n        // æ—¥æœŸå‡åºï¼ŒåŒä¸€å¤©æŒ‰å¼€å§‹æ—¶é—´å‡åº\n        list.sort((a, b) => {\n          const da = a.date || ''\n          const db = b.date || ''\n          if (da !== db) return da.localeCompare(db)\n          const ta = a.startTime || ''\n          const tb = b.startTime || ''\n          return ta.localeCompare(tb)\n        })\n\n        this.myReservations = list\n      } catch (e) {\n        console.error(e)\n        alert('åŠ è½½é¢„çº¦åˆ—è¡¨å¤±è´¥')\n      }\n    },\n\n    formatTimeRange (item) {\n      const s = (item.startTime || '').slice(0, 5)\n      const e = (item.endTime || '').slice(0, 5)\n      return s && e ? `${s}-${e}` : ''\n    },\n\n    renderStatusText (status) {\n      switch (status) {\n        case 'reserved': return 'å¾…ç­¾åˆ°'\n        case 'checked_in': return 'å·²ç­¾åˆ°'\n        case 'late': return 'è¿Ÿåˆ°'\n        case 'no_show': return 'æœªç­¾åˆ°'\n        case 'cancelled': return 'å·²å–æ¶ˆ'\n        case 'cancel_overdue': return 'é€¾æœŸå–æ¶ˆ'\n        default: return status || ''\n      }\n    },\n\n    statusClass (status) {\n      return {\n        'badge-pending': status === 'reserved',\n        'badge-done': status === 'checked_in',\n        'badge-late': status === 'late',\n        'badge-missed': status === 'no_show',\n        'badge-cancelled': status === 'cancelled',\n        'badge-cancel-overdue': status === 'cancel_overdue'\n      }\n    },\n\n    violationTypeClass (type) {\n      const t = (type || '').toString()\n      if (t.includes('æœªç­¾åˆ°')) return 'vt-no-show'\n      if (t.includes('è¿Ÿåˆ°')) return 'vt-late'\n      return 'vt-other'\n    },\n\n\n    gotoPrevPage () {\n      if (this.reservationPageIndex > 1) this.reservationPageIndex--\n    },\n    gotoNextPage () {\n      if (this.reservationPageIndex < this.totalPages) this.reservationPageIndex++\n    },\n\n    async handleCheckIn (item) {\n      try {\n        const res = await this.$axios.post(`/reservation/checkin/${item.id}`)\n        const body = this.normalizeBody(res)\n\n        const ok = this.isBizOk(body)\n        alert(this.getMsg(body, ok ? 'ç­¾åˆ°æˆåŠŸ' : 'ç­¾åˆ°å¤±è´¥'))\n\n        // âœ… ä¸ç®¡æˆåŠŸå¤±è´¥ï¼Œéƒ½åˆ·æ–°ä¸€æ¬¡åˆ—è¡¨ï¼ˆé¿å…â€œåç«¯å·²æ›´æ–°ä½†é¡µé¢ä¸å˜â€ï¼‰\n        await this.loadMyReservations({ refreshNoShowNotify: false })\n      } catch (e) {\n        console.error(e)\n        alert('ç­¾åˆ°å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\n      }\n    },\n\n    async handleCancel (item) {\n      if (!this.canCancel(item)) {\n        alert('è·ç¦»å¼€å§‹ä¸è¶³ 10 åˆ†é’Ÿï¼Œæ— æ³•å–æ¶ˆï¼Œè¯·è”ç³»ç®¡ç†å‘˜å¤„ç†')\n        return\n      }\n\n      const ok = window.confirm(`ç¡®å®šè¦å–æ¶ˆæœ¬æ¬¡é¢„çº¦ï¼ˆ${item.date} ${this.formatTimeRange(item)}ï¼‰å—ï¼Ÿ`)\n      if (!ok) return\n\n      try {\n        const res = await this.$axios.post(`/reservation/cancel/${item.id}`)\n        const body = this.normalizeBody(res)\n\n        if (!this.isBizOk(body)) {\n          alert(this.getMsg(body, 'å–æ¶ˆå¤±è´¥'))\n          return\n        }\n\n        alert(this.getMsg(body, 'å–æ¶ˆæˆåŠŸ'))\n        await this.loadMyReservations({ refreshNoShowNotify: false })\n        await this.fetchSlotStatus()\n      } catch (e) {\n        console.error(e)\n        alert('å–æ¶ˆå¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\n      }\n    },\n\n    canCancel (item) {\n      if (item.status !== 'reserved') return false\n      if (!item.date || !item.startTime) return false\n\n      try {\n        const startStr = item.date + 'T' + (item.startTime || '').slice(0, 8)\n        const start = new Date(startStr)\n        if (isNaN(start.getTime())) return true\n\n        const now = new Date()\n        const diffMs = start.getTime() - now.getTime()\n        const tenMinutes = 10 * 60 * 1000\n        return diffMs > tenMinutes\n      } catch (e) {\n        console.error(e)\n        return true\n      }\n    },\n\n    async refreshNoShowStatus (opts = {}) {\n      const { notify = true } = opts\n      if (!this.ensureCurrentUserId()) return\n\n      try {\n        const res = await this.$axios.post('/reservation/refreshNoShow', null, {\n          params: { userId: this.currentUserId }\n        })\n        const data = this.normalizeData(res)\n        const updated = typeof data === 'number' ? data : 0\n\n        if (notify && updated > 0) {\n          alert(`æœ‰ ${updated} æ¡å·²è¿‡æœŸä½†æœªç­¾åˆ°çš„é¢„çº¦ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€ï¼Œè¯·ç•™æ„ä¿¡ç”¨åˆ†å˜åŒ–ã€‚`)\n        }\n      } catch (e) {\n        console.error(e)\n      }\n    },\n\n    async loadMyViolations () {\n      if (!this.ensureCurrentUserId()) return\n\n      try {\n        // è¿™é‡Œé»˜è®¤ä¸å¼¹â€œåˆ·æ–°æœªç­¾åˆ°â€çš„æé†’ï¼Œé¿å…ç”¨æˆ·ä¸€è¿›é¡µé¢å°±è¢«æ‰“æ–­\n        await this.refreshNoShowStatus({ notify: false })\n\n        const res = await this.$axios.get('/reservation/violations', {\n          params: { userId: this.currentUserId }\n        })\n\n        const list = Array.isArray(this.normalizeData(res)) ? this.normalizeData(res).slice() : []\n        this.myViolations = list\n        this.violationPageIndex = 1\n      } catch (e) {\n        console.error(e)\n        alert('åŠ è½½è¿è§„è®°å½•å¤±è´¥')\n      }\n\n      await this.loadUserProfile()\n\n    },\n\n    gotoPrevViolationPage () {\n      if (this.violationPageIndex > 1) this.violationPageIndex--\n    },\n    gotoNextViolationPage () {\n      if (this.violationPageIndex < this.violationTotalPages) this.violationPageIndex++\n    },\n\n    async loadUserProfile () {\n      if (!this.ensureCurrentUserId()) return\n\n      this.profileLoading = true\n      try {\n        const res = await this.$axios.get('/user/profile', {\n          params: { userId: this.currentUserId }\n        })\n\n        const u = this.normalizeData(res) || {}\n        this.currentCreditScore = Number.isFinite(Number(u.creditScore)) ? Number(u.creditScore) : 100\n\n        this.profileForm = {\n          name: u.userName || u.name || this.profileForm.name || '',\n          account: u.accountNo || u.account || this.profileForm.account || '',\n          studentNo: u.accountNo || u.studentNo || this.profileForm.studentNo || '',\n          college: u.college || '',\n          gradeClass: u.gradeClass || '',\n          phone: u.phone || '',\n          email: u.email || '',\n          commonCampus: u.commonCampus || '',\n          profileRemark: u.profileRemark || ''\n        }\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e)\n      } finally {\n        this.profileLoading = false\n      }\n    },\n\n    async handleProfileSave () {\n      if (!this.ensureCurrentUserId()) {\n        alert('å½“å‰ç”¨æˆ·ä¿¡æ¯ç¼ºå¤±ï¼Œè¯·é‡æ–°ç™»å½•åå†è¯•')\n        return\n      }\n\n      this.profileSaving = true\n      try {\n        // åŒæ—¶å¸¦ä¸Š userName/accountNo ç­‰å­—æ®µï¼Œå…¼å®¹åç«¯ä¸åŒå‘½å\n        const payload = {\n          userId: this.currentUserId,\n          id: this.currentUserId,\n\n          userName: this.profileForm.name,\n          name: this.profileForm.name,\n\n          accountNo: this.profileForm.studentNo || this.profileForm.account,\n          account: this.profileForm.studentNo || this.profileForm.account,\n          studentNo: this.profileForm.studentNo || this.profileForm.account,\n\n          college: this.profileForm.college,\n          gradeClass: this.profileForm.gradeClass,\n          phone: this.profileForm.phone,\n          email: this.profileForm.email,\n          commonCampus: this.profileForm.commonCampus,\n          profileRemark: this.profileForm.profileRemark\n        }\n\n        const res = await this.$axios.post('/user/profile', payload)\n        const body = this.normalizeBody(res)\n\n        if (!this.isBizOk(body)) {\n          alert(this.getMsg(body, 'ä¿å­˜å¤±è´¥'))\n          return\n        }\n\n        alert(this.getMsg(body, 'ä¿å­˜æˆåŠŸ'))\n\n        // æ›´æ–° localStorage\n        const storage = this.getUserStorage()\n        const raw = storage.getItem('ssrmsUser')\n        if (raw) {\n          try {\n            const user = JSON.parse(raw)\n            Object.assign(user, {\n              name: this.profileForm.name,\n              studentNo: this.profileForm.studentNo,\n              college: this.profileForm.college,\n              gradeClass: this.profileForm.gradeClass,\n              phone: this.profileForm.phone,\n              email: this.profileForm.email,\n              age: this.profileForm.age,\n              sex: this.profileForm.sex,\n              commonCampus: this.profileForm.commonCampus,\n              profileRemark: this.profileForm.profileRemark\n            })\n            storage.setItem('ssrmsUser', JSON.stringify(user))\n          } catch (e) {\n            console.error(e)\n          }\n        }\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e)\n        alert('ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')\n      } finally {\n        this.profileSaving = false\n      }\n    },\n\n    submitFB (score) {\n      console.log('ç”¨æˆ·ç»™äº†ä¸€ä¸ªå¿«æ·è¯„åˆ†ï¼š', score)\n      this.openFeedback = false\n    },\n\n    codeToDesc (code) {\n      const map = {\n        0: 'æ™´',\n        1: 'å¤šäº‘',\n        2: 'å¤šäº‘',\n        3: 'é˜´',\n        45: 'æœ‰é›¾',\n        48: 'é›¾ï¼Œåœ°é¢ç»“å†°',\n        51: 'æ¯›æ¯›é›¨',\n        53: 'å°é›¨',\n        55: 'ä¸­é›¨',\n        61: 'å°é›¨',\n        63: 'ä¸­é›¨',\n        65: 'å¤§é›¨',\n        71: 'å°é›ª',\n        73: 'ä¸­é›ª',\n        75: 'å¤§é›ª',\n        95: 'é›·é˜µé›¨',\n        96: 'é›·é˜µé›¨ä¼´æœ‰å†°é›¹'\n      }\n      return map[code] || 'å¤šäº‘'\n    },\n\n    async loadWeather () {\n      try {\n        const resp = await fetch(\n            'https://api.open-meteo.com/v1/forecast' +\n            '?latitude=29.88&longitude=121.55' +\n            '&current_weather=true'\n        )\n        const json = await resp.json()\n        const cw = (json && json.current_weather) || {}\n        const temp = cw.temperature\n        const windSpeed = cw.windspeed\n        const code = cw.weathercode\n        const desc = this.codeToDesc(code)\n\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: temp != null ? temp : 18,\n          desc: desc || 'å¤šäº‘',\n          wind: windSpeed != null ? `é£é€Ÿ ${windSpeed} km/h` : 'å¾®é£'\n        }\n      } catch (e) {\n        console.warn('è¯·æ±‚å¤©æ°”å¤±è´¥ï¼Œä½¿ç”¨å…œåº•æ–‡æ¡ˆ', e)\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: 18,\n          desc: 'å¤šäº‘',\n          wind: 'å¾®é£'\n        }\n      }\n    },\n\n    async loadQuoteFromDb () {\n      try {\n        const res = await this.$axios.get('/quote/random', {\n          params: { excludeId: this.dailyQuoteId || undefined }\n        })\n\n        const body = this.normalizeBody(res)\n        const data = this.normalizeData(res)\n\n        // è¿™é‡Œå³ä½¿åç«¯ä¸åŒ… Rï¼Œä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ\n        if (this.isBizOk(body) && data && data.content) {\n          this.dailyQuote = data.content || ''\n          this.dailyQuoteId = data.id || null\n          return\n        }\n\n        // åç«¯è¿”å›æˆåŠŸä½† content ä¸ºç©ºçš„å…œåº•\n        this.dailyQuote = 'ä»Šå¤©ä¹Ÿè¦ç¨³ä½èŠ‚å¥ï¼Œå…ˆåšä¸€å°æ­¥ã€‚'\n        this.dailyQuoteId = null\n      } catch (e) {\n        // âœ… å…³é”®ï¼šæŠŠçœŸæ­£å¤±è´¥åŸå› æ‰“å‡ºæ¥ï¼ˆ404 / 405 / CORS / 500 ä¸€çœ¼å°±èƒ½çœ‹è§ï¼‰\n        const status = e?.response?.status\n        const url = e?.config?.url\n        const msg = e?.message\n        console.warn('[quote] load failed:', { status, url, msg, resp: e?.response?.data })\n\n        this.dailyQuote = 'ç½‘ç»œå¼€å°å·®äº†ï¼Œä½†ä½ çš„è‡ªå¾‹åˆ«æ‰çº¿ã€‚'\n        this.dailyQuoteId = null\n      }\n    },\n\n    startQuoteTimer () {\n      this.stopQuoteTimer()\n      this.quoteTimer = setInterval(() => {\n        if (this.currentPage === 'home') {\n          this.loadQuoteFromDb()\n        }\n      }, 20000)\n    },\n\n    stopQuoteTimer () {\n      if (this.quoteTimer) {\n        clearInterval(this.quoteTimer)\n        this.quoteTimer = null\n      }\n    },\n\n    async refreshQuote () {\n      // æ‰‹åŠ¨åˆ·æ–°ï¼šå…ˆæ¢ä¸€å¥ï¼Œå†æŠŠ 20s è®¡æ—¶ä»ç°åœ¨é‡æ–°å¼€å§‹\n      await this.loadQuoteFromDb()\n      this.startQuoteTimer()\n    },\n\n    emojiWeather (desc) {\n      if (!desc) return 'â›…'\n      if (desc.includes('é›¨')) return 'ğŸŒ§ï¸'\n      if (desc.includes('äº‘')) return 'â›…'\n      if (desc.includes('æ™´')) return 'â˜€ï¸'\n      if (desc.includes('é›ª')) return 'â„ï¸'\n      return 'â›…'\n    },\n\n    async fetchSeatConflicts () {\n      this.disabledSeatNos = []\n\n      if (!this.currentRoomId || !this.currentDateStr || this.startHour == null || this.endHour == null) return\n\n      const startTime = `${this.pad2(this.startHour)}:00`\n      const endTime = `${this.pad2(this.endHour)}:00`\n\n      try {\n        const res = await this.$axios.get('/reservation/seatConflicts', {\n          params: { roomId: this.currentRoomId, date: this.currentDateStr, startTime, endTime }\n        })\n\n        const map = this.normalizeData(res) || {}\n        this.disabledSeatNos = Object.keys(map)\n\n        // å¦‚æœå½“å‰å·²é€‰åº§ä½åœ¨æ–°æ—¶é—´æ®µä¸‹å˜æˆå†²çªï¼šç›´æ¥æ¸…æ‰é€‰æ‹©\n        if (this.selectedSeatNo && this.disabledSeatNos.includes(this.selectedSeatNo)) {\n          this.selectedSeatNo = ''\n        }\n      } catch (e) {\n        console.error(e)\n      }\n    },\n\n    async loadHomeDashboard () {\n      try {\n        if (!this.currentUserId) return\n        const res = await this.$axios.get('/dashboard/home', {\n          params: { userId: this.currentUserId }\n        })\n        const data = this.normalizeData(res) || {}\n        if (data.todayOverview) this.todayOverview = data.todayOverview\n        if (data.monthBrief) this.monthBrief = data.monthBrief\n      } catch (e) {\n        console.error('loadHomeDashboard failed:', e)\n      }\n    },\n\n\n    async loadHomeNotices () {\n      this.noticeLoading = true\n      try {\n        // âœ… é¦–é¡µåªå±•ç¤º 3 æ¡ï¼Œä½†ä¸ºäº†å®ç°â€œNEW ä¼˜å…ˆ + æ—¶é—´å€’åºâ€çš„è§„åˆ™\n        // è¿™é‡Œéœ€è¦å…ˆæ‹‰å–æ›´å¤šæ•°æ®ä½œä¸ºå€™é€‰æ± ï¼Œå†åœ¨å‰ç«¯ç»Ÿä¸€æ’åºåæˆªå–å‰ 3 æ¡å±•ç¤º\n        const res = await this.$axios.get('/announcement/home', {\n          params: { roleId: 1, limit: 50 }\n        })\n\n        const list = this.normalizeData(res) || []\n        const mapped = (list || []).map(x => ({\n          ...x,\n          summary: this.makeNoticeSummary(x.content),\n          roomHint: x.roomHint || ''\n        }))\n\n        const sorted = this.sortNotices(mapped)\n\n        // âœ… ç¼“å­˜ï¼šè¯»/æœªè¯»å˜åŒ–åï¼Œå¯ä»¥ä»å€™é€‰æ± é‡Œâ€œè¡¥ä½â€ï¼Œä¿è¯é¦–é¡µæ°¸è¿œä¼˜å…ˆå±•ç¤º NEW\n        this.homeNoticeAllCache = sorted\n\n        this.homeNotices = sorted.slice(0, this.homeNoticeLimit || 3)\n\n        // âœ… æ•°é‡ï¼šè‡³å°‘ç”¨å½“å‰æ‹‰å–åˆ°çš„æ•°é‡ï¼›æ‰“å¼€â€œå…¬å‘Šä¸­å¿ƒâ€åä¼šå¾—åˆ°æ›´å‡†ç¡®çš„æ€»æ•°\n        this.noticeTotalCount = Math.max(Number(this.noticeTotalCount || 0), sorted.length)\n      } catch (e) {\n        console.error('loadHomeNotices failed:', e)\n        this.homeNotices = []\n        this.homeNoticeAllCache = []\n      } finally {\n        this.noticeLoading = false\n      }\n    },\n\n\n    async loadNoticePage () {\n      this.noticeLoading = true\n      try {\n        // âœ… å…¬å‘Šé‡ä¸å¤§ï¼šä¸€æ¬¡æ€§æ‹‰å–ï¼Œå‰ç«¯åšâ€œNEWä¼˜å…ˆ + æ—¶é—´å€’åºâ€å…¨å±€æ’åºåå†åˆ†é¡µå±•ç¤º\n        const res = await this.$axios.get('/announcement/page', {\n          params: {\n            roleId: 1,\n            pageNum: 1,\n            pageSize: 9999,\n            type: this.noticeTypeFilter || undefined\n          }\n        })\n\n        const body = this.normalizeBody(res)\n        let list = []\n        if (body && typeof body === 'object' && 'data' in body) {\n          list = body.data || []\n        } else {\n          list = this.normalizeData(res) || []\n        }\n\n        const mapped = (list || []).map(x => ({\n          ...x,\n          summary: this.makeNoticeSummary(x.content)\n        }))\n\n        this.noticeAllList = this.sortNotices(mapped)\n        this.noticeTotalCount = (this.noticeAllList || []).length\n\n        this.rebuildNoticePageList()\n      } catch (e) {\n        console.error('loadNoticePage failed:', e)\n        this.noticeAllList = []\n        this.noticePageList = []\n        this.noticeTotalCount = 0\n      } finally {\n        this.noticeLoading = false\n      }\n    },\n\n    openNoticeDetail (item) {\n      this.noticeDetail = item\n      this.noticeDetailFrom = 'home'\n      this.noticeDetailVisible = true\n\n      this.markNoticeRead(item && item.id)\n      this.afterNoticeRead()\n    },\n\n    openNoticeAll () {\n      this.noticeAllVisible = true\n      this.noticePageNum = 1\n      this.noticeDetail = null\n      this.loadNoticePage()\n    },\n\n    openNoticeDetailFromAll (item) {\n      this.noticeDetail = item\n      this.noticeDetailFrom = 'list'\n      this.noticeDetailVisible = true\n      this.noticeAllVisible = false\n\n      this.markNoticeRead(item && item.id)\n      this.afterNoticeRead()\n    },\n\n    backToNoticeAllList () {\n      this.noticeDetailVisible = false\n      this.noticeAllVisible = true\n      this.rebuildNoticePageList()\n    },\n\n    onNoticePageChange (page) {\n      this.noticePageNum = page\n      this.rebuildNoticePageList()\n    },\n\n    onNoticeTypeChange () {\n      this.noticePageNum = 1\n      this.loadNoticePage()\n    },\n\n\n    noticeTypeText (type) {\n      const map = {\n        RULE: 'è§„åˆ™',\n        ADJUSTMENT: 'è°ƒæ•´',\n        EMERGENCY: 'çªå‘',\n        MAINTENANCE: 'ç»´æŠ¤',\n        EXAM: 'è€ƒè¯•',\n        OTHER: 'å…¶ä»–'\n      }\n      return map[type] || 'å…¶ä»–'\n    },\n\n    noticeTypeIcon (type) {\n      const map = {\n        RULE: 'ğŸ“Œ',\n        ADJUSTMENT: 'ğŸ•’',\n        EMERGENCY: 'ğŸš¨',\n        MAINTENANCE: 'ğŸ› ï¸',\n        EXAM: 'ğŸ“',\n        OTHER: 'ğŸ“£'\n      }\n      return map[type] || 'ğŸ“£'\n    },\n\n    noticeLevelText (level) {\n      const map = {\n        IMPORTANT: 'é‡è¦',\n        WARNING: 'æé†’',\n        INFO: 'é€šçŸ¥'\n      }\n      return map[level] || 'é€šçŸ¥'\n    },\n\n    makeNoticeSummary (content) {\n      if (!content) return ''\n      const s = String(content).replace(/\\s+/g, ' ').trim()\n      if (!s) return ''\n      return s.length > 60 ? (s.slice(0, 60) + 'â€¦') : s\n    },\n\n    /* ---------------------------\n     * è¯„ä»·ä¸åé¦ˆï¼ˆfeedbackï¼‰\n     * --------------------------- */\n    fbCategoryLabel (cat) {\n      const c = String(cat || '')\n      const hit = (this.fbCategoryOptions || []).find(x => x.value === c)\n      return hit ? hit.label : (c || 'å…¶ä»–')\n    },\n    fbStatusLabel (st) {\n      const s = String(st || '')\n      const map = {\n        pending: 'å¾…å¤„ç†',\n        processing: 'å¤„ç†ä¸­',\n        resolved: 'å·²å¤„ç†'\n      }\n      return map[s] || (s || 'å¾…å¤„ç†')\n    },\n    fbStatusClass (st) {\n      const s = String(st || '')\n      if (s === 'resolved') return 'fb-tag-ok'\n      if (s === 'processing') return 'fb-tag-warn'\n      return 'fb-tag-pending'\n    },\n    fbPreview (txt, maxLen = 160) {\n      if (!txt) return ''\n      const s = String(txt).replace(/\\s+/g, ' ').trim()\n      if (!s) return ''\n      return s.length > maxLen ? (s.slice(0, maxLen) + 'â€¦') : s\n    },\n    fbReservationLabel (r) {\n      if (!r) return ''\n      const room = r.roomLabel || r.roomName || `${r.campus || ''}${r.building ? ('Â·' + r.building) : ''}${r.roomName ? ('Â·' + r.roomName) : ''}`\n      const d = r.date || ''\n      const st = String(r.startTime || '').slice(0, 5)\n      const et = String(r.endTime || '').slice(0, 5)\n      const seat = r.seatNo ? ` Â· åº§ä½ ${r.seatNo}` : ''\n      return `${d} ${st}-${et} Â· ${room}${seat}`\n    },\n    formatFbTime (dtStr) {\n      return this.formatNoticeTime(dtStr, true)\n    },\n\n    onFeedbackCategoryChange () {\n      // éè¯„ä»·ç±»ä¸å¼ºåˆ¶è¯„åˆ†\n      if (!this.fbNeedRating) {\n        this.feedbackForm.rating = null\n        this.$nextTick(() => {\n\n          try {\n            const ref = this.$refs.feedbackFormRef\n            if (ref && ref.clearValidate) ref.clearValidate(['rating'])\n          } catch (e) {\n            // å¿½ç•¥æ¸…ç†æ ¡éªŒçš„å¼‚å¸¸\n          }\n\n        })\n      } else if (!this.feedbackForm.rating) {\n        this.feedbackForm.rating = 5\n      }\n    },\n\n    resetFeedbackForm () {\n      this.feedbackForm = {\n        category: 'env',\n        reservationId: '',\n        rating: 5,\n        content: ''\n      }\n      this.$nextTick(() => {\n\n        try {\n          const ref = this.$refs.feedbackFormRef\n          if (ref && ref.clearValidate) ref.clearValidate()\n        } catch (e) {\n          // å¿½ç•¥æ¸…ç†æ ¡éªŒçš„å¼‚å¸¸\n        }\n\n      })\n    },\n\n    async submitFeedback () {\n      const userId = this.ensureCurrentUserId()\n      if (!userId) {\n        ElMessage.error('æœªè·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œè¯·é‡æ–°ç™»å½•')\n        return\n      }\n\n      // å…ˆåšè¡¨å•æ ¡éªŒ\n      try {\n        if (this.fbNeedRating) {\n          await this.$refs.feedbackFormRef.validate()\n        } else {\n          await this.$refs.feedbackFormRef.validateField(['category', 'content'])\n        }\n      } catch (e) {\n        // validate ä¼šæŠ›é”™ï¼Œç›´æ¥ç»“æŸ\n        return\n      }\n\n      const payload = {\n        userId,\n        category: this.feedbackForm.category,\n        rating: this.fbNeedRating ? this.feedbackForm.rating : null,\n        content: this.feedbackForm.content,\n        reservationId: this.feedbackForm.reservationId ? Number(this.feedbackForm.reservationId) : null\n      }\n\n      this.fbSubmitting = true\n      try {\n        const res = await this.$axios.post('/feedback/submit', payload)\n        if (this.isBizOk(res)) {\n          ElMessage.success('æäº¤æˆåŠŸï¼Œæ„Ÿè°¢ä½ çš„åé¦ˆï¼')\n          this.resetFeedbackForm()\n          this.fbActiveTab = 'mine'\n          this.fbPageNum = 1\n          await this.reloadMyFeedback()\n        } else {\n          ElMessage.error(this.getMsg(res, 'æäº¤å¤±è´¥'))\n        }\n      } catch (err) {\n        console.error(err)\n        ElMessage.error('æäº¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•')\n      } finally {\n        this.fbSubmitting = false\n      }\n    },\n\n    onFbTabChange () {\n      if (this.fbActiveTab === 'mine') {\n        this.fbPageNum = 1\n        this.reloadMyFeedback()\n      }\n    },\n    onFbFilterChange () {\n      this.fbPageNum = 1\n      this.reloadMyFeedback()\n    },\n    onFbPageChange (p) {\n      this.fbPageNum = Number(p || 1)\n      this.reloadMyFeedback()\n    },\n    async reloadMyFeedback () {\n      const userId = this.ensureCurrentUserId()\n      if (!userId) return\n\n      this.fbListLoading = true\n      try {\n        const params = {\n          userId,\n          pageNum: this.fbPageNum,\n          pageSize: this.fbPageSize\n        }\n        if (this.fbStatusFilter) params.status = this.fbStatusFilter\n\n        const res = await this.$axios.get('/feedback/my-page', { params })\n        if (this.isBizOk(res)) {\n          const list = this.normalizeData(res)\n          this.fbList = Array.isArray(list) ? list : []\n          this.fbTotal = Number(res.total || 0)\n        } else {\n          this.fbList = []\n          this.fbTotal = 0\n        }\n      } catch (err) {\n        console.error(err)\n        this.fbList = []\n        this.fbTotal = 0\n      } finally {\n        this.fbListLoading = false\n      }\n    },\n\n    openFeedbackDetail (item) {\n      this.fbDetail = item ? { ...item } : {}\n      this.fbDetailVisible = true\n    },\n\n    formatNoticeTime (dtStr, withTime = false) {\n      if (!dtStr) return '-'\n      const parts = String(dtStr).replace('T', ' ').split(' ')\n      const [d, t] = parts.length >= 2 ? parts : [parts[0], '']\n      const ds = d.split('-')\n      if (ds.length >= 3) {\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`\n        if (!withTime) return mmdd\n        if (!t) return mmdd\n        const hhmm = t.slice(0, 5)\n        return `${mmdd} ${hhmm}`\n      }\n      return String(dtStr)\n    },\n    noticeReadStorageKey () {\n      return `ssrms_notice_read_${this.currentUserId || 'guest'}`\n    },\n\n    loadNoticeReadIds () {\n      try {\n        const raw = localStorage.getItem(this.noticeReadStorageKey())\n        const arr = raw ? JSON.parse(raw) : []\n        this.noticeReadIds = Array.isArray(arr) ? arr.map(x => Number(x)).filter(x => !Number.isNaN(x)) : []\n      } catch (e) {\n        this.noticeReadIds = []\n      }\n    },\n\n    saveNoticeReadIds () {\n      try {\n        localStorage.setItem(this.noticeReadStorageKey(), JSON.stringify(this.noticeReadIds || []))\n      } catch (e) {\n        // ignore\n      }\n    },\n\n    isNoticeRead (id) {\n      if (id === null || id === undefined) return false\n      const nid = Number(id)\n      if (Number.isNaN(nid)) return false\n      return (this.noticeReadIds || []).includes(nid)\n    },\n\n    markNoticeRead (id) {\n      if (id === null || id === undefined) return\n      const nid = Number(id)\n      if (Number.isNaN(nid)) return\n      if (!this.isNoticeRead(nid)) {\n        this.noticeReadIds = [...(this.noticeReadIds || []), nid]\n        this.saveNoticeReadIds()\n      }\n    },\n\n    // NEW è§„åˆ™ï¼šæœªè¯»å³ NEWï¼ˆæ‰“å¼€è¯¦æƒ…å³ä¼šæ ‡è®°ä¸ºå·²è¯»å¹¶æ¶ˆå¤±ï¼‰\n    isNoticeNew (id) {\n      return !this.isNoticeRead(id)\n    },\n\n    noticeTimeValue (dtStr) {\n      if (!dtStr) return 0\n      const raw = String(dtStr).trim()\n      if (/^\\d+$/.test(raw)) return Number(raw)\n\n      let s = raw\n      if (/^\\d{2}-\\d{2}\\s+\\d{2}:\\d{2}/.test(s)) {\n        const y = new Date().getFullYear()\n        s = `${y}-${s}`\n      }\n\n      const normalized = s.replace('T', ' ').replace(/-/g, '/')\n      const ms = Date.parse(normalized)\n      return Number.isNaN(ms) ? 0 : ms\n    },\n\n    sortNotices (list) {\n      const arr = Array.isArray(list) ? list.slice() : []\n      arr.sort((a, b) => {\n        const aTop = Number(a && a.isTop) === 1 ? 1 : 0\n        const bTop = Number(b && b.isTop) === 1 ? 1 : 0\n        if (aTop !== bTop) return bTop - aTop\n\n        const aNew = this.isNoticeNew(a && a.id) ? 1 : 0\n        const bNew = this.isNoticeNew(b && b.id) ? 1 : 0\n        if (aNew !== bNew) return bNew - aNew\n\n        const at = this.noticeTimeValue(a && a.publishTime)\n        const bt = this.noticeTimeValue(b && b.publishTime)\n        if (at !== bt) return bt - at\n\n        const aid = Number(a && a.id) || 0\n        const bid = Number(b && b.id) || 0\n        return bid - aid\n      })\n      return arr\n    },\n\n    rebuildNoticePageList () {\n      const all = Array.isArray(this.noticeAllList) ? this.noticeAllList : []\n      const size = Number(this.noticePageSize) || 6\n      const page = Number(this.noticePageNum) || 1\n      const start = (page - 1) * size\n      this.noticePageList = all.slice(start, start + size)\n    },\n\n\n    afterNoticeRead () {\n      // âœ… é¦–é¡µï¼šä¼˜å…ˆä»â€œå€™é€‰æ± â€é‡æ–°æ’åºå¹¶æˆªå–å‰ 3 æ¡ï¼Œä¿è¯ NEW è¡¥ä½\n      if (Array.isArray(this.homeNoticeAllCache) && this.homeNoticeAllCache.length) {\n        this.homeNoticeAllCache = this.sortNotices(this.homeNoticeAllCache)\n        this.homeNotices = this.homeNoticeAllCache.slice(0, this.homeNoticeLimit || 3)\n      } else {\n        this.homeNotices = this.sortNotices(this.homeNotices).slice(0, this.homeNoticeLimit || 3)\n      }\n\n      // âœ… å…¬å‘Šä¸­å¿ƒï¼šå¦‚æœå·²åŠ è½½è¿‡å…¨éƒ¨åˆ—è¡¨ï¼Œä¹ŸåŒæ­¥é‡æ’\n      if (Array.isArray(this.noticeAllList) && this.noticeAllList.length) {\n        this.noticeAllList = this.sortNotices(this.noticeAllList)\n        this.rebuildNoticePageList()\n      }\n    },\n\n\n    openNoticeAllFromDetail () {\n      this.noticeDetailVisible = false\n      this.openNoticeAll()\n    },\n\n\n    formatLastVisit (dtStr) {\n      if (!dtStr) return '-'\n\n      // dtStr: \"yyyy-MM-dd HH:mm\"\n      const parts = dtStr.replace('T', ' ').split(' ')\n      if (parts.length < 2) return dtStr\n\n      const [d, t] = parts\n      const [y, m, day] = d.split('-').map(n => parseInt(n, 10))\n      const [hh, mm] = t.split(':').map(n => parseInt(n, 10))\n\n      const dt = new Date(y, (m || 1) - 1, day || 1, hh || 0, mm || 0)\n      const now = new Date()\n\n      const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate())\n      const startOfDt = new Date(dt.getFullYear(), dt.getMonth(), dt.getDate())\n      const diffDays = Math.round((startOfToday - startOfDt) / (24 * 3600 * 1000))\n\n      const timeText = `${String(dt.getHours()).padStart(2, '0')}:${String(dt.getMinutes()).padStart(2, '0')}`\n\n      if (diffDays === 0) return `ä»Šå¤© ${timeText}`\n      if (diffDays === 1) return `æ˜¨å¤© ${timeText}`\n      return `${String(dt.getMonth() + 1).padStart(2, '0')}-${String(dt.getDate()).padStart(2, '0')} ${timeText}`\n    },\n  },\n\n  watch: {\n    currentPage: {\n      immediate: true,\n      handler (newVal) {\n        if (newVal === 'home') {\n          this.startQuoteTimer()\n          this.loadHomeNotices()\n        } else {\n          this.stopQuoteTimer()\n        }\n\n        if (newVal === 'user-reservations') this.loadMyReservations({ refreshNoShowNotify: true })\n        if (newVal === 'user-reserve') this.initReserveRooms()\n        if (newVal === 'user-violations') this.loadMyViolations()\n        if (newVal === 'user-profile') this.loadUserProfile()\n        if (newVal === 'user-feedback') this.reloadMyFeedback()\n      }\n    },\n    myReservations () {\n      this.reservationPageIndex = 1\n    },\n    onlyViolation (v) {\n      this.reservationPageIndex = 1\n      if (v) this.onlyPending = false\n    },\n    onlyPending (v) {\n      this.reservationPageIndex = 1\n      if (v) this.onlyViolation = false\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  flex: 1;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n/* é€šç”¨å¡ç‰‡æ ·å¼ */\n.card {\n  background-color: #ffffff;\n  padding: 22px 24px;\n  margin-bottom: 16px;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);\n  border: 1px solid #e5e7eb;\n}\n\n.page-title {\n  font-size: 24px;\n  margin: 0 0 10px 0;\n  color: #111827;\n}\n\n.page-subtitle {\n  font-size: 15px;\n  color: #6b7280;\n  margin-bottom: 16px;\n}\n\n/* å…¬å…±è¡¨æ ¼æ ·å¼ */\n\n.table-wrapper {\n  margin-top: 12px;\n  border-radius: 10px;\n  overflow-x: auto;\n  overflow-y: hidden;\n  border: 1px solid #e5e7eb;\n}\n\n.table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 13px;\n}\n\n.table th,\n.table td {\n  padding: 10px 12px;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.table th {\n  background-color: #f3f4f6;\n  text-align: left;\n  font-weight: 600;\n  color: #374151;\n}\n\n.violation-record-card .violation-table{\n  --vio-col-pad-x: 22px; /* âœ…ä½ å°±æ”¹è¿™é‡Œï¼šè¶Šå¤§åˆ—é—´è·è¶Šå¤§ */\n}\n\n.violation-record-card .violation-table th,\n.violation-record-card .violation-table td{\n  padding: 10px var(--vio-col-pad-x);\n}\n\n.table tr:nth-child(even) td {\n  background-color: #f9fafb;\n}\n\n.text-right {\n  text-align: right;\n}\n\n.link-danger {\n  color: #dc2626;\n}\n\n/* ä¿¡ç”¨åˆ† */\n\n.credit-summary {\n  margin-top: 6px;\n  margin-bottom: 10px;\n}\n\n.credit-score {\n  font-size: 15px;\n  color: #111827;\n}\n\n.score-number {\n  font-size: 20px;\n  font-weight: 600;\n  color: #16a34a;\n}\n\n/* è¯„ä»·ä¸åé¦ˆ */\n\n.fb-head {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.fb-tabs :deep(.el-tabs__header) {\n  margin-bottom: 14px;\n}\n\n.fb-submit-layout {\n  display: grid;\n  grid-template-columns: 1fr 320px;\n  gap: 16px;\n  align-items: start;\n}\n\n@media (max-width: 1080px) {\n  .fb-submit-layout {\n    grid-template-columns: 1fr;\n  }\n}\n\n.fb-form-card {\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 18px 18px 16px;\n  background: #fff;\n}\n\n.fb-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: flex-start;\n  padding-left: 92px;\n  margin-top: 6px;\n}\n\n.fb-rate-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.fb-rate-hint {\n  color: #6b7280;\n  font-size: 13px;\n}\n\n.fb-tip-card {\n  border: 1px dashed rgba(99, 102, 241, 0.45);\n  background: rgba(99, 102, 241, 0.06);\n  border-radius: 12px;\n  padding: 16px;\n}\n\n.fb-tip-title {\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 2px;\n}\n\n.fb-tip-sub {\n  color: #6b7280;\n  font-size: 13px;\n  margin-bottom: 10px;\n}\n\n.fb-tip-list {\n  margin: 0;\n  padding-left: 18px;\n  color: #374151;\n  font-size: 13px;\n  line-height: 1.7;\n}\n\n.fb-mine-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.fb-filter-label {\n  color: #6b7280;\n  font-size: 13px;\n  margin-right: 8px;\n}\n\n.fb-filter {\n  width: 140px;\n}\n\n.fb-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.fb-item {\n  display: flex;\n  gap: 10px;\n  justify-content: space-between;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 14px 14px 12px;\n  background: #fff;\n}\n\n.fb-item-main {\n  flex: 1;\n  min-width: 0;\n}\n\n.fb-item-top {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 10px;\n}\n\n.fb-item-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: center;\n}\n\n.fb-item-time {\n  color: #9ca3af;\n  font-size: 12px;\n  white-space: nowrap;\n}\n\n.fb-tag {\n  display: inline-flex;\n  align-items: center;\n  height: 22px;\n  padding: 0 10px;\n  border-radius: 999px;\n  font-size: 12px;\n  border: 1px solid transparent;\n}\n\n.fb-tag-type {\n  background: rgba(59, 130, 246, 0.10);\n  color: #1d4ed8;\n  border-color: rgba(59, 130, 246, 0.18);\n}\n\n.fb-tag-plain {\n  background: #f8fafc;\n  color: #374151;\n  border-color: #e5e7eb;\n}\n\n.fb-tag-pending {\n  background: rgba(245, 158, 11, 0.10);\n  color: #b45309;\n  border-color: rgba(245, 158, 11, 0.20);\n}\n\n.fb-tag-warn {\n  background: rgba(99, 102, 241, 0.10);\n  color: #4338ca;\n  border-color: rgba(99, 102, 241, 0.18);\n}\n\n.fb-tag-ok {\n  background: rgba(16, 185, 129, 0.10);\n  color: #047857;\n  border-color: rgba(16, 185, 129, 0.18);\n}\n\n.fb-item-preview {\n  margin-top: 8px;\n  color: #111827;\n  font-size: 14px;\n  line-height: 1.6;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.fb-item-reply-preview {\n  margin-top: 8px;\n  background: #f8fafc;\n  border: 1px solid #e5e7eb;\n  border-radius: 10px;\n  padding: 10px 12px;\n  color: #374151;\n  font-size: 13px;\n  line-height: 1.6;\n}\n\n.fb-item-reply-preview .label {\n  color: #6b7280;\n  margin-right: 6px;\n}\n\n.fb-item-actions {\n  display: flex;\n  align-items: flex-start;\n  padding-top: 2px;\n}\n\n.fb-detail-title {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.fb-detail-meta {\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 8px;\n  color: #6b7280;\n  font-size: 13px;\n  margin-bottom: 14px;\n}\n\n.fb-detail-block {\n  border-top: 1px solid #eef2f7;\n  padding-top: 12px;\n  margin-top: 12px;\n}\n\n.fb-detail-block .t {\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 6px;\n}\n\n.fb-detail-block .c {\n  white-space: pre-wrap;\n  color: #111827;\n  line-height: 1.75;\n}\n\n.empty-state {\n  padding: 26px 0;\n  text-align: center;\n  color: #9ca3af;\n}\n\n/* é¡¶éƒ¨ï¼šæ ‡é¢˜ + æ¦‚è¦å¡ç‰‡ */\n.reserve-header-row {\n  display: flex;\n  justify-content: space-between;\n  gap: 24px;\n  align-items: flex-start;\n}\n\n.reserve-header-left {\n  flex: 1;\n}\n\n.reserve-summary-box {\n  width: 260px;\n  padding: 12px 14px;\n  border-radius: 14px;\n  background: linear-gradient(135deg, #eef2ff, #f5f7ff);\n  border: 1px solid #e0e7ff;\n  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.04);\n  font-size: 13px;\n}\n\n.summary-title {\n  font-weight: 600;\n  color: #111827;\n  margin-bottom: 6px;\n}\n\n.summary-main {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.summary-row {\n  display: flex;\n  justify-content: space-between;\n}\n\n.summary-label {\n  color: #6b7280;\n}\n\n.summary-value {\n  color: #111827;\n  font-weight: 500;\n  text-align: right;\n}\n\n.summary-empty {\n  color: #9ca3af;\n  font-weight: 400;\n}\n\n/* åœºåœ° tabs + å¼€å…³ */\n.reserve-toolbar {\n  display: flex;\n  flex-wrap: nowrap;\n  align-items: center;\n  gap: 10px;\n  margin-top: 2px;\n}\n\n.reserve-control {\n  flex: 1;\n  min-width: 140px;\n}\n\n.reserve-control.short {\n  flex: 0.95;\n  min-width: 140px;\n}\n\n.reserve-control.long {\n  flex: 1.25;\n  min-width: 170px;\n}\n\n@media (max-width: 1100px) {\n  .reserve-toolbar {\n    flex-wrap: wrap;\n  }\n  .reserve-control.short,\n  .reserve-control.long {\n    flex: 1;\n    min-width: 160px;\n  }\n}\n\n.reserve-select {\n  width: 100%;\n  height: 38px;\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  background-color: #fff;\n  padding: 0 12px;\n  font-size: 13px;\n  color: #111827;\n  outline: none;\n  transition: border-color 0.15s ease, box-shadow 0.15s ease;\n}\n\n.reserve-select:focus {\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 4px rgba(147, 197, 253, 0.35);\n}\n\n.reserve-select:disabled {\n  background-color: #f3f4f6;\n  color: #9ca3af;\n  cursor: not-allowed;\n}\n\n.reserve-warning {\n  font-size: 12px;\n  color: #dc2626;\n  white-space: nowrap;\n}\n\n.venue-tabs {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.venue-tab {\n  padding: 6px 14px;\n  border-radius: 999px;\n  border: 1px solid #e5e7eb;\n  background-color: #fff;\n  font-size: 13px;\n  color: #374151;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.venue-tab:hover {\n  border-color: #93c5fd;\n  background-color: #eff6ff;\n}\n\n.venue-tab.active {\n  border-color: #2563eb;\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\n  color: #fff;\n  box-shadow: 0 6px 14px rgba(37, 99, 235, 0.25);\n}\n\n.reserve-toolbar-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.switch-label {\n  white-space: nowrap;\n}\n\n/* æ—¥æœŸæ¡ */\n.date-strip {\n  margin-top: 6px;\n  padding: 10px 12px;\n  border-radius: 14px;\n  background-color: #f9fafb;\n  display: flex;\n  align-items: stretch;\n  gap: 8px;\n}\n\n.date-arrow {\n  width: 32px;\n  border-radius: 10px;\n  border: none;\n  background-color: #fff;\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);\n  font-size: 18px;\n  color: #4b5563;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.date-arrow:disabled {\n  opacity: 0.4;\n  cursor: default;\n  box-shadow: none;\n}\n\n.date-list {\n  display: flex;\n  gap: 8px;\n  flex: 1;\n}\n\n.date-item {\n  flex: 1;\n  min-width: 90px;\n  border-radius: 12px;\n  border: 1px solid transparent;\n  background-color: #fff;\n  padding: 8px 10px;\n  text-align: left;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  height: 80px;\n}\n\n.date-item:hover {\n  border-color: #bfdbfe;\n  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.06);\n}\n\n.date-item.active {\n  border-color: #2563eb;\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\n  color: #fff;\n}\n\n.date-item.active .date-month,\n.date-item.active .date-weekday,\n.date-item.active .date-extra {\n  color: #e0ecff;\n}\n\n.date-item.active .date-day-number {\n  color: #fff;\n}\n\n.date-month {\n  font-size: 11px;\n  color: #6b7280;\n}\n\n.date-day-row {\n  display: flex;\n  align-items: baseline;\n  gap: 4px;\n  margin: 4px 0;\n}\n\n.date-day-number {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.date-weekday {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.date-extra {\n  font-size: 11px;\n  color: #2563eb;\n}\n\n/* æ—¶é—´æ®µåŒºåŸŸ */\n\n.slot-section {\n  margin-top: 16px;\n}\n\n.slot-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.slot-title {\n  font-size: 14px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.slot-legend {\n  display: flex;\n  gap: 12px;\n  font-size: 11px;\n  color: #6b7280;\n}\n\n.legend-item {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.legend-dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n}\n\n.legend-available {\n  background-color: #e5f3ff;\n  border: 1px solid #93c5fd;\n}\n\n.legend-selected {\n  background-color: #2563eb;\n}\n\n.legend-disabled {\n  background-color: #e5e7eb;\n}\n\n.slot-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(86px, 1fr));\n  gap: 10px;\n}\n\n.slot-item {\n  border-radius: 12px;\n  border: 1px solid #e5e7eb;\n  padding: 8px 10px;\n  background-color: #f9fafb;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.15s ease;\n  display: flex;\n  flex-direction: column; /* çºµå‘æ’å¸ƒå­å…ƒç´  */\n  align-items: center;\n}\n\n.slot-item:disabled {\n  cursor: not-allowed;\n}\n\n.slot-time {\n  font-size: 14px;\n  font-weight: 600;\n  margin-bottom: 2px;\n}\n\n.slot-range {\n  font-size: 10px;\n  color: #6b7280;\n}\n\n/* å·²é€‰æ—¶æ®µ + æäº¤åŒºåŸŸ */\n\n.reserve-bottom {\n  margin-top: 16px;\n  border-top: 1px dashed #e5e7eb;\n  padding-top: 12px;\n}\n\n.selected-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n\n.selected-tag {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  border-radius: 999px;\n  background-color: #eff6ff;\n  padding: 4px 8px 4px 10px;\n  font-size: 11px;\n  color: #1f2937;\n}\n\n.selected-tag-close {\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.selected-tag-close:hover {\n  color: #111827;\n}\n\n.reserve-actions {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 12px;\n}\n\n.link-btn {\n  border: none;\n  background: none;\n  font-size: 12px;\n  color: #6b7280;\n  cursor: pointer;\n  padding: 4px 8px;\n}\n\n.link-btn:hover {\n  color: #111827;\n  text-decoration: underline;\n}\n\n.link-btn:disabled {\n  opacity: 0.4;\n  cursor: default;\n  text-decoration: none;\n}\n\n.reserve-btn {\n  padding: 8px 20px;\n}\n\n.primary-btn {\n  border: none;\n  border-radius: 999px;\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\n  color: #fff;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  padding: 8px 18px;\n  box-shadow: 0 8px 18px rgba(37, 99, 235, 0.3);\n  transition: all 0.15s ease;\n}\n\n.primary-btn:disabled {\n  opacity: 0.4;\n  cursor: default;\n  box-shadow: none;\n}\n\n.primary-btn:not(:disabled):hover {\n  transform: translateY(-1px);\n  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.38);\n}\n\n.pager {\n  margin-top: 10px;\n  padding: 8px 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 24px;\n  font-size: 13px;\n  color: #4b5563;\n}\n\n.pager-center {\n  min-width: 120px;\n  text-align: center;\n}\n\n.pager-btn {\n  padding: 4px 12px;\n  border-radius: 999px;\n  border: 1px solid #d1d5db;\n  background-color: #ffffff;\n  cursor: pointer;\n  font-size: 13px;\n  min-width: 72px;\n}\n\n.pager-btn:hover {\n  border-color: #2563eb;\n  color: #2563eb;\n}\n\n/* ç¦ç”¨çŠ¶æ€çš„æ ·å¼ */\n.pager-btn-disabled,\n.pager-btn:disabled {\n  color: #9ca3af;\n  border-color: #e5e7eb;\n  background-color: #f9fafb;\n  cursor: not-allowed;\n}\n\n/* åªè°ƒâ€œæˆ‘çš„é¢„çº¦â€é‚£ä¸€é¡µçš„é—´è· */\n.card-reservations .page-title {\n  margin-bottom: 15px;   /* æ ‡é¢˜åˆ°è¡¨æ ¼çš„ä¸Šé—´è·çš„ä¸€åŠæ¥è‡ªè¿™é‡Œ */\n}\n\n.card-reservations .table-wrapper {\n  margin-top: 15px;      /* æ ‡é¢˜åˆ°è¡¨æ ¼çš„å¦ä¸€åŠæ¥è‡ªè¿™é‡Œ */\n  margin-bottom: 15px;   /* è¡¨æ ¼åˆ°åº•ä¸‹åˆ†é¡µçš„é—´è·çš„ä¸€åŠ */\n}\n\n.card-reservations .pager {\n  margin-top: 15px;      /* è¡¨æ ¼åˆ°åº•éƒ¨åˆ†é¡µçš„å¦ä¸€åŠ */\n}\n\n/* å¤–å±‚å¡ç‰‡ï¼Œè®©ä¸ªäººä¸­å¿ƒæ’‘æ»¡å³ä¾§é«˜åº¦ */\n.full-page-card {\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  background: #ffffff;\n  /* ä¸€èˆ¬å†…å®¹ä¸å¤šï¼Œä¹Ÿä¸éœ€è¦æ»šåŠ¨æ¡äº†ï¼Œå¯ä»¥æ”¹æˆ auto æˆ–å¹²è„†åˆ æ‰ */\n  overflow-y: auto;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */\n.user-header-section {\n  background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\n  padding: 24px 32px;\n  color: #ffffff;\n  border-radius: 12px 12px 0 0;\n}\n\n.user-info-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.user-info-left {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.user-profile-info {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.user-name {\n  font-size: 28px;\n  font-weight: 600;\n  margin: 0;\n  color: #ffffff;\n}\n\n.user-role {\n  background: rgba(255, 255, 255, 0.2);\n  padding: 4px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #ffffff;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n/* å³ä¸Šè§’æ“ä½œï¼ˆé¢„ç•™â€œé€€å‡ºç™»å½•â€æŒ‰é’®ä¹‹ç±»ï¼‰ */\n.header-actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n/* ä¸»å†…å®¹åŒºåŸŸ */\n.profile-content {\n  padding: 20px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  background: #ffffff;\n}\n\n/* è¡¨å•æ¨¡å—ï¼ˆä¸ªäººä¿¡æ¯ / è”ç³»æ–¹å¼ / åå¥½è®¾ç½® / å¤‡æ³¨ï¼‰ */\n.form-section {\n  background: #ffffff;\n  border-radius: 8px;\n  padding: 0;\n  border-bottom: none;\n}\n\n.profile-content .section-title {\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n  margin: 0 0 12px 0;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #f3f4f6;\n}\n\n.form-group {\n  margin-top: 8px;\n}\n\n/* ä¸¤åˆ—æ …æ ¼å¸ƒå±€ */\n.form-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 14px;\n}\n\n/* å•ä¸ªè¡¨å•é¡¹ */\n.form-item {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form-item label {\n  font-size: 14px;\n  font-weight: 500;\n  color: #374151;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n/* æ–‡æœ¬è¾“å…¥æ¡†/ä¸‹æ‹‰/æ–‡æœ¬åŸŸçš„é€šç”¨æ ·å¼ï¼Œæ’é™¤æ‰ radio */\n.form-item input:not([type=\"radio\"]),\n.form-item select,\n.form-item textarea {\n  width: 100%;\n  padding: 10px 12px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  font-size: 14px;\n  color: #111827;\n  background: #ffffff;\n  transition: all 0.2s ease;\n  outline: none;\n  box-sizing: border-box;\n}\n\n/* æ–‡æœ¬è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„é«˜äº®ï¼ˆä¸ä½œç”¨äº radioï¼‰ */\n.form-item input:not([type=\"radio\"]):focus,\n.form-item select:focus,\n.form-item textarea:focus {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.form-item input:read-only {\n  background-color: #f9fafb;\n  border-color: #e5e7eb;\n  color: #6b7280;\n  cursor: not-allowed;\n}\n\n/* å¤‡æ³¨æ–‡æœ¬åŸŸå æ»¡ä¸€æ•´è¡Œ */\n.form-item.full-width {\n  grid-column: 1 / -1;\n}\n\n/* ä¸‹æ‹‰æ¡†çš„å°ç®­å¤´ï¼ˆå¯ä»¥åˆ æ‰è¿™ä¸€æ®µï¼Œä¹Ÿä¸å½±å“åŠŸèƒ½ï¼‰ */\n.form-item select {\n  width: 100%;\n  appearance: none;\n  /* è¿™é‡ŒåŸæœ¬æœ‰ä¸€é•¿ä¸² SVG çš„ background-imageï¼Œç”¨æ¥ç”»ä¸‹æ‹‰ç®­å¤´ã€‚\n     ä½ å¯ä»¥å…ˆä¸å†™ï¼Œæœ‰éœ€è¦å†è¡¥ï¼›ä¸å½±å“è¡¨å•åŠŸèƒ½ã€‚ */\n  background-repeat: no-repeat;\n  background-position: right 12px center;\n  background-size: 12px;\n  padding-right: 36px;\n  cursor: pointer;\n}\n\n/* è¾“å…¥æ¡† + å³ä¾§â€œä¿®æ”¹â€æŒ‰é’® */\n.input-with-action {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.input-with-action input {\n  flex: 1;\n}\n\n.radio-group {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin-top: 2px;\n}\n\n.radio-option {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  cursor: pointer;\n  padding: 2px 0;\n}\n\n.radio-option input[type=\"radio\"] {\n  width: 16px;\n  height: 16px;\n  accent-color: #3b82f6;\n}\n\n.radio-label {\n  font-size: 14px;\n  color: #374151;\n  font-weight: 500;\n}\n\n.radio-option input[type=\"radio\"]:checked + .radio-label {\n  color: #3b82f6;\n}\n\n/* å¤‡æ³¨æ–‡æœ¬åŸŸ */\n.form-item textarea {\n  min-height: 100px;\n  resize: vertical;\n  font-family: inherit;\n  line-height: 1.5;\n  padding: 12px;\n}\n\n/* æ“ä½œæŒ‰é’®åŒºåŸŸï¼ˆåº•éƒ¨çš„ å–æ¶ˆ / ä¿å­˜ + æç¤ºï¼‰ */\n.profile-actions {\n  margin-top: 4px;\n  padding-top: 0;\n  border-top: none;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n/* åªåœ¨ä¸ªäººä¸­å¿ƒåº•éƒ¨ä½¿ç”¨çš„æŒ‰é’®æ ·å¼ */\n.profile-actions .primary-btn {\n  padding: 10px 32px;\n  background: #3b82f6;\n  color: #ffffff;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.profile-actions .primary-btn:hover {\n  background: #2563eb;\n}\n\n/* å“åº”å¼é€‚é…ï¼šçª„å±æ—¶å‹ç¼©è¾¹è· & æŒ‰é’®çºµå‘æ’åˆ— */\n@media (max-width: 768px) {\n  .user-header-section {\n    padding: 20px;\n  }\n\n  .profile-content {\n    padding: 20px;\n  }\n\n  .user-info-header {\n    flex-direction: column;\n    gap: 20px;\n  }\n\n  .form-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .profile-actions {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 12px;\n  }\n\n  .profile-actions .hint-text {\n    text-align: center;\n    margin-left: 0;\n    margin-top: 8px;\n    min-width: 100%;\n  }\n}\n\n/* é¦–é¡µå¤–å±‚å®¹å™¨ï¼Œæ‹‰æ»¡å³ä¾§é«˜åº¦ */\n.home-wrapper {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n/* é¦–é¡µè¿™å¼ å¤§å¡ç‰‡è¦æ’‘æ»¡é«˜åº¦ */\n.home-card {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0;\n}\n\n/* é¦–é¡µä¸ŠåŠéƒ¨åˆ†ï¼šæ¬¢è¿æ–‡æ¡ˆ */\n.home-top {\n  display: flex;\n  align-items: stretch;\n  gap: 24px;\n  margin-bottom: 20px;\n}\n\n.home-top.home-head {\n  position: relative;\n}\n\n.home-intro {\n  flex: 1.3;\n  padding-right: 150px;\n}\n\n.home-tagline {\n  font-size: 13px;\n  color: #4b5563;\n  margin-top: 6px;\n}\n\n.home-tagline strong {\n  color: #2563eb;\n}\n\n/* ä»Šæ—¥æ¦‚å†µå¡ç‰‡ï¼šç»Ÿä¸€ä¸ºç™½è‰²å¡ç‰‡èƒŒæ™¯ */\n.home-panel {\n  border-radius: 12px;\n  padding: 16px 18px;\n  background-color: #ffffff;\n  border: 1px solid #e5e7eb;\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.04);\n  color: #111827;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.home-overview-body {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.home-overview-line {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.home-overview-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  margin-top: 4px;\n}\n\n.tag {\n  font-size: 11px;\n  padding: 3px 9px;\n  border-radius: 999px;\n  background-color: #eff6ff;\n  color: #1d4ed8;\n}\n\n.tag-gray {\n  background-color: #f3f4f6;\n  color: #4b5563;\n}\n\n.tag-blue {\n  background-color: #eff6ff;\n  color: #2563eb;\n}\n\n.my-today-card .home-panel-body {\n  padding-top: 8px;\n}\n\n.my-today-body {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.today-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 6px 0;\n  border-bottom: 1px dashed #e5e7eb;\n}\n\n.today-item:last-child {\n  border-bottom: none;\n}\n\n.today-left {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.today-time {\n  font-size: 13px;\n  font-weight: 500;\n  color: #111827;\n}\n\n.today-room {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.today-empty {\n  font-size: 12px;\n  color: #9ca3af;\n  padding: 4px 0;\n}\n\n.notice-panel {\n  margin-top: 4px;\n}\n\n.notice-more-btn {\n  border: none;\n  background: transparent;\n  font-size: 12px;\n  color: #2563eb;\n  cursor: pointer;\n  padding: 2px 4px;\n}\n\n.notice-more-btn:hover {\n  text-decoration: underline;\n}\n\n.notice-list {\n  margin: 8px 0 0;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  max-height: 320px;\n  overflow-y: auto;\n}\n\n.notice-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n}\n\n.notice-item-click {\n  cursor: pointer;\n}\n\n.notice-center-detail-top {\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 12px;\n}\n\n.notice-tag {\n  font-size: 11px;\n  padding: 2px 8px;\n  border-radius: 999px;\n  white-space: nowrap;\n}\n\n.notice-main {\n  flex: 1;\n  min-width: 0;\n}\n\n.notice-title {\n  font-size: 13px;\n  color: #111827;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.notice-meta {\n  font-size: 11px;\n  color: #9ca3af;\n  margin-top: 2px;\n}\n\n\n.notice-count {\n  font-size: 12px;\n  color: #6b7280;\n  font-weight: 500;\n  margin-left: 6px;\n}\n\n.notice-loading {\n  font-size: 12px;\n  color: #6b7280;\n  padding: 10px 2px;\n}\n\n.notice-empty {\n  font-size: 12px;\n  color: #9ca3af;\n  padding: 10px 2px;\n}\n\n.notice-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 10px 10px;\n  border-radius: 10px;\n  cursor: pointer;\n  border: 1px solid transparent;\n  transition: background-color .15s ease, border-color .15s ease, transform .15s ease;\n}\n\n.notice-item:hover {\n  background-color: #f9fafb;\n  border-color: #e5e7eb;\n  transform: translateY(-1px);\n}\n\n.notice-badges {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  min-width: 82px;\n}\n\n.notice-pill {\n  font-size: 11px;\n  padding: 3px 8px;\n  border-radius: 999px;\n  white-space: nowrap;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  line-height: 1;\n}\n\n.notice-icon {\n  font-size: 12px;\n}\n\n.notice-top {\n  background: #111827;\n  color: #ffffff;\n}\n\n.notice-detail-actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.notice-snippet {\n  font-size: 12px;\n  color: #6b7280;\n  margin-top: 4px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.notice-dot {\n  margin: 0 6px;\n  color: #d1d5db;\n}\n\n.notice-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding-left: 6px;\n}\n\n.notice-new {\n  font-size: 11px;\n  font-weight: 700;\n  color: #dc2626;\n  background: #fee2e2;\n  border-radius: 999px;\n  padding: 2px 8px;\n}\n\n.notice-arrow {\n  color: #9ca3af;\n  font-size: 18px;\n  line-height: 1;\n}\n\n/* ç±»å‹é…è‰² */\n.notice-type.type-RULE { background: #eff6ff; color: #1d4ed8; }\n.notice-type.type-ADJUSTMENT { background: #ecfeff; color: #0e7490; }\n.notice-type.type-EMERGENCY { background: #fff1f2; color: #be123c; }\n.notice-type.type-MAINTENANCE { background: #f5f3ff; color: #6d28d9; }\n.notice-type.type-EXAM { background: #f0fdf4; color: #15803d; }\n.notice-type.type-OTHER { background: #f3f4f6; color: #374151; }\n\n/* çº§åˆ«é…è‰² */\n.notice-level.level-IMPORTANT { background: #fef3c7; color: #92400e; }\n.notice-level.level-WARNING { background: #ffedd5; color: #9a3412; }\n.notice-level.level-INFO { background: #e0f2fe; color: #075985; }\n\n/* å¼¹çª—ï¼šå…¬å‘Šè¯¦æƒ… */\n.notice-detail .nd-title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #111827;\n  margin-bottom: 10px;\n}\n\n.notice-detail .nd-title-row {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 12px;\n}\n\n.notice-detail .nd-top {\n  font-size: 12px;\n  padding: 4px 10px;\n  border-radius: 999px;\n  background: #111827;\n  color: #ffffff;\n  flex: none;\n}\n\n.notice-detail .nd-info {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 10px 14px;\n  margin: 6px 0 4px;\n}\n\n.notice-detail .nd-info-item .k {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.notice-detail .nd-info-item .v {\n  font-size: 13px;\n  color: #111827;\n  margin-top: 2px;\n}\n\n@media (max-width: 520px) {\n  .notice-detail .nd-info {\n    grid-template-columns: 1fr;\n  }\n}\n\n.notice-detail .nd-tags {\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  margin-bottom: 8px;\n  flex-wrap: wrap;\n}\n\n.notice-detail .nd-tag {\n  font-size: 12px;\n  padding: 4px 10px;\n  border-radius: 999px;\n}\n\n.notice-detail .nd-tag.type-RULE { background: #eff6ff; color: #1d4ed8; }\n.notice-detail .nd-tag.type-ADJUSTMENT { background: #ecfeff; color: #0e7490; }\n.notice-detail .nd-tag.type-EMERGENCY { background: #fff1f2; color: #be123c; }\n.notice-detail .nd-tag.type-MAINTENANCE { background: #f5f3ff; color: #6d28d9; }\n.notice-detail .nd-tag.type-EXAM { background: #f0fdf4; color: #15803d; }\n.notice-detail .nd-tag.type-OTHER { background: #f3f4f6; color: #374151; }\n\n.notice-detail .nd-tag.level-IMPORTANT { background: #fef3c7; color: #92400e; }\n.notice-detail .nd-tag.level-WARNING { background: #ffedd5; color: #9a3412; }\n.notice-detail .nd-tag.level-INFO { background: #e0f2fe; color: #075985; }\n\n.notice-detail .nd-meta {\n  font-size: 12px;\n  color: #6b7280;\n  margin-bottom: 14px;\n}\n\n.notice-detail .nd-content {\n  font-size: 14px;\n  color: #111827;\n  line-height: 1.7;\n  white-space: pre-line;\n  padding: 10px 12px;\n  background: #f9fafb;\n  border: 1px solid #e5e7eb;\n  border-radius: 10px;\n}\n\n/* å…¨éƒ¨å…¬å‘Šå¼¹çª— */\n.notice-all-head {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 10px;\n}\n\n.notice-all-filter {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.filter-label {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.notice-all-tip {\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.notice-list-all {\n  max-height: 420px;\n}\n\n.notice-pagination {\n  margin-top: 12px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n\n.home-panel-title {\n  font-size: 15px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.home-panel-subtitle {\n  margin-top: 2px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.home-panel-number {\n  font-size: 26px;\n  font-weight: 600;\n  margin: 6px 0 2px;\n}\n\n.home-panel-desc {\n  font-size: 13px;\n  opacity: 0.95;\n}\n\n.home-panel-footer {\n  font-size: 12px;\n  opacity: 0.88;\n  margin-top: 8px;\n}\n.home-panel-footer span {\n  font-weight: 500;\n}\n\n.weather-icon{font-size: 28px}\n.weather-temp{font-size: 22px;font-weight: 600;margin-left:6px}\n.weather-desc{font-size: 12px;color:#9ca3af}\n\n/* æœˆæŠ¥ + ä¿¡ç”¨ç¯ æ¨ªå‘ä¸€æ’ */\n.month-report{\n  flex: 1;\n  background: #ffffff;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  padding: 14px;\n  box-shadow: 0 2px 8px rgba(15,23,42,.04);\n}\n.report-title {\n  font-size: 15px;      /* â­ è·Ÿ .home-panel-title ä¸€è‡´ */\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: #111827;\n}\n.report-row{\n  display: flex;\n  justify-content: space-between;\n  font-size: 13px;\n  margin: 6px 0;\n}\n.report-row strong{color:#2563eb}\n\n/* 10. å¿«æ·åé¦ˆæµ®å±‚ */\n.feedback-float{\n  position: fixed;\n  right: 24px;\n  bottom: 80px;\n  z-index: 999;\n}\n.feedback-btn{\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  background: #2563eb;\n  color: #fff;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  box-shadow: 0 2px 8px rgba(37,99,235,.35);\n}\n.feedback-panel{\n  position: absolute;\n  bottom: 56px;\n  right: 0;\n  background: #fff;\n  border: 1px solid #e5e7eb;\n  border-radius: 10px;\n  padding: 10px 12px;\n  box-shadow: 0 4px 12px rgba(15,23,42,.08);\n  width: 140px;\n}\n.feedback-title{font-size: 12px;color:#6b7280;margin-bottom: 6px;text-align: center}\n.feedback-emojis{display: flex;justify-content: space-around;font-size: 20px;cursor: pointer}\n\n.weather-mini{\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  background: #ffffff;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  padding: 8px 10px;\n  box-shadow: 0 2px 6px rgba(15,23,42,.06);\n  width: 130px;\n  z-index: 1;\n}\n.weather-mini .weather-main{\n  margin: 0 0 2px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.weather-mini .weather-icon{ font-size: 20px; }\n.weather-mini .weather-temp{ font-size: 16px; font-weight: 600; margin-left: 6px; }\n.weather-mini .weather-desc{ font-size: 11px; color: #6b7280; text-align: center; white-space: nowrap; }\n\n/* é¦–é¡µä¸­éƒ¨ä¸»å¸ƒå±€ï¼šæŒ‰è¡Œæ’åˆ— */\n.home-main-grid {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 10px;\n}\n\n.home-row {\n  width: 100%;\n}\n\n/* ç¬¬äºŒè¡Œï¼šä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µ + æœ¬æœˆå­¦ä¹ ç®€æŠ¥ */\n.home-row-two {\n  display: grid;\n  grid-template-columns: 1.4fr 2fr;\n  gap: 12px;\n}\n\n/* è®©ç¬¬äºŒè¡Œä¸¤å—å¡ç‰‡åŒé«˜ */\n.home-row-two .home-overview,\n.home-row-two .month-report {\n  height: 100%;\n}\n\n/* çª„å±ä¸‹ï¼šæ¦‚å†µå’ŒæœˆæŠ¥ä¸Šä¸‹å †å  */\n@media (max-width: 1024px) {\n  .home-row-two {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* ä»Šæ—¥æç¤ºæ•´å—å¡ç‰‡ */\n.quote-card {\n  width: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  background: #f9fafb;\n  border-radius: 12px;\n  padding: 14px 16px;\n  border: 1px solid #e5e7eb;\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.04);\n}\n\n.quote-refresh-btn {\n  position: absolute;\n  top: 10px;\n  right: 12px;\n  width: 26px;\n  height: 26px;\n  border-radius: 50%;\n  border: none;\n  background: #ffffff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #6b7280;\n  cursor: pointer;\n  box-shadow: 0 1px 4px rgba(15, 23, 42, 0.12);\n}\n\n.quote-refresh-btn:hover {\n  background: #eff6ff;\n  color: #2563eb;\n}\n\n.quote-content {\n  max-width: 640px;\n}\n\n/* ä¸Šé¢ä¸€è¡Œï¼šå›¾æ ‡ + â€œä»Šæ—¥æç¤ºâ€ */\n.quote-header {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-bottom: 6px;\n}\n\n.quote-icon-inline {\n  font-size: 24px;\n}\n\n.quote-label {\n  font-size: 16px;\n  color: #9ca3af;\n}\n\n.quote-text {\n  font-size: 17px;           /* â­ æ¯”ä¹‹å‰æ›´å¤§ä¸€ç‚¹ */\n  color: #4b5563;\n  line-height: 1.6;\n}\n\n.slot-item.slot-available {\n  background-color: #f9fafb;\n}\n\n.slot-item.slot-selected {\n  border-color: #2563eb;\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\n  color: #ffffff;\n}\n\n.slot-item.slot-selected .slot-range {\n  color: #e0ecff;\n}\n\n.slot-item.slot-disabled {\n  background-color: #f3f4f6;\n  border-color: #e5e7eb;\n  color: #9ca3af;\n}\n\n.slot-item.slot-disabled .slot-range {\n  color: #9ca3af;\n}\n\n.badge.badge-pending {\n  background-color: #fef3c7;\n  color: #92400e;\n}\n\n.badge.badge-done {\n  background-color: #dcfce7;\n  color: #166534;\n}\n\n.badge.badge-late {\n  background-color: #ffe4e6;\n  color: #9f1239;\n}\n\n.badge.badge-missed {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n.badge.badge-cancelled {\n  background-color: #e5e7eb;\n  color: #374151;\n}\n\n.badge.badge-cancel-overdue {\n  background-color: #e0e7ff;\n  color: #3730a3;\n}\n\n.badge.today-badge{\n  background-color: transparent !important;\n}\n\n\n/* âœ… æˆ‘çš„é¢„çº¦ï¼šçŠ¶æ€åªç”¨â€œæ–‡å­—é¢œè‰²â€æç¤ºï¼Œä¸è¦åº•è‰² */\n.my-res-table .badge{\n  background-color: transparent !important;\n  border: none !important;\n  padding: 0 !important;\n  border-radius: 0 !important;\n  font-weight: 600;\n}\n\n.my-res-table .badge.badge-pending{ color: #d97706; }        /* å¾…ç­¾åˆ°ï¼šåé»„ */\n.my-res-table .badge.badge-done{ color: #16a34a; }           /* å·²ç­¾åˆ°ï¼šç»¿ */\n.my-res-table .badge.badge-late{ color: #dc2626; }           /* è¿Ÿåˆ°ï¼šçº¢ */\n.my-res-table .badge.badge-missed{ color: #dc2626; }         /* æœªç­¾åˆ°ï¼šçº¢ */\n.my-res-table .badge.badge-cancelled{ color: #6b7280; }      /* å·²å–æ¶ˆï¼šç° */\n.my-res-table .badge.badge-cancel-overdue{ color: #4f46e5; } /* é€¾æœŸå–æ¶ˆï¼šç´« */\n\n.home-panel-header{\n  display:flex;\n  align-items:center;\n  justify-content:space-between;\n  gap:12px;\n}\n.home-panel-body{\n  margin-top: 8px;\n}\n\n.my-res-table { table-layout: fixed; }\n\n.my-res-table th,\n.my-res-table td {\n  padding: 10px 8px;\n}\n\n.my-res-table th.col-no,      .my-res-table td.col-no      { width: 140px; padding-right: 4px; }\n.my-res-table th.col-campus,  .my-res-table td.col-campus  { width: 80px;  padding-left: 4px;  }\n.my-res-table th.col-building,.my-res-table td.col-building{ width: 100px; }\n.my-res-table th.col-room,    .my-res-table td.col-room    { width: 80px;  }\n.my-res-table th.col-date,    .my-res-table td.col-date    { width: 110px; }\n.my-res-table th.col-time,    .my-res-table td.col-time    { width: 100px; }\n.my-res-table th.col-seat,    .my-res-table td.col-seat    { width: 70px;  text-align: center; }\n.my-res-table th.col-status,  .my-res-table td.col-status  { width: 90px;  text-align: center; }\n.my-res-table th.col-actions, .my-res-table td.col-actions { width: 80px; text-align: left; }\n\n.my-res-table td.col-no,\n.my-res-table td.col-building {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.my-res-table td.col-actions .actions{\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.res-filter-row{\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  gap: 14px;\n  flex-wrap: wrap;\n  margin: 6px 0 10px;\n}\n\n.res-filter{\n  display: inline-flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 12px;\n  color: #6b7280;\n  user-select: none;\n}\n\n.res-filter-checkbox{\n  width: 14px;\n  height: 14px;\n  accent-color: #2563eb;\n  cursor: pointer;\n}\n\n/* å…¬å‘Šä¸­å¿ƒï¼šç­›é€‰æ¡æ›´åƒâ€œå·¥å…·æ â€ */\n.notice-all-head{\n  padding: 10px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 12px;\n  background: #f9fafb;\n}\n\n.notice-type-select :deep(.el-input__wrapper){\n  border-radius: 999px;\n  box-shadow: none;\n  border: 1px solid #e5e7eb;\n  background: #fff;\n}\n\n.notice-type-select :deep(.el-input__wrapper.is-focus){\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 4px rgba(147, 197, 253, 0.35);\n}\n\n.notice-type-select :deep(.el-input__inner){\n  font-size: 12px;\n}\n\n/* ä¸‹æ‹‰é¢æ¿é‡Œé€‰é¡¹ï¼šå›¾æ ‡ + æ–‡æœ¬æ’ç‰ˆ */\n.opt-row{\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n.opt-ico{ font-size: 14px; }\n.opt-text{ font-size: 12px; }\n\n:deep(.notice-type-popper){\n  z-index: 5000 !important;\n}\n\n/* ä¸‹æ‹‰ popperï¼ˆä½ ç»™äº† popper-class æ‰èƒ½å®šå‘ç¾åŒ–ï¼‰ */\n:deep(.notice-type-popper .el-select-dropdown__item){\n  border-radius: 8px;\n  margin: 2px 6px;\n}\n:deep(.notice-type-popper .el-select-dropdown__item.selected){\n  font-weight: 600;\n}\n\n/* å…¬å‘Šä¸­å¿ƒåˆ—è¡¨ï¼šè®© 9 æ¡åœ¨å…¨å±é‡Œæ›´èˆ’æœ */\n.notice-list-all{\n  max-height: calc(100vh - 260px);\n}\n\n\n\n\n/* è¿è§„è®°å½•è¡¨æ ¼å­—ä½“ä¸\"æˆ‘çš„é¢„çº¦\"ä¸€è‡´ */\n.violation-record-card .table{\n  font-size: 14px;\n}\n.violation-record-card .table thead th{\n  font-size: 14px;\n}\n\n\n\n/* ===========================\n   è¿è§„è®°å½•é¡µï¼šä¿¡ç”¨åˆ†é¢æ¿ï¼ˆæ›´æ¥è¿‘â€œæˆ‘çš„é¢„çº¦â€çš„é£æ ¼ï¼‰\n   =========================== */\n\n.credit-panel{\n  display: grid;\n  grid-template-columns: 140px 1fr;\n  gap: 16px;\n  align-items: center;\n  padding: 14px 14px;\n  border: 1px solid #e5e7eb;\n  border-radius: 14px;\n  background: #f9fafb;\n  margin-top: 10px;\n  margin-bottom: 14px;\n}\n\n@media (max-width: 900px){\n  .credit-panel{\n    grid-template-columns: 1fr;\n  }\n}\n\n.credit-panel-left{\n  display: flex;\n  justify-content: center;\n}\n\n.credit-ring{\n  width: 116px;\n  height: 116px;\n  border-radius: 999px;\n  background: #ffffff;\n  border: 1px solid #e5e7eb;\n  box-shadow: 0 6px 18px rgba(17, 24, 39, 0.06);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.credit-ring-num{\n  font-size: 34px;\n  font-weight: 800;\n  line-height: 1;\n}\n\n.credit-ring-label{\n  margin-top: 6px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.credit-panel-right{\n  min-width: 0;\n}\n\n.credit-head{\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n}\n\n.credit-head-title{\n  font-weight: 800;\n  color: #111827;\n}\n\n.credit-level-pill{\n  font-size: 12px;\n  font-weight: 700;\n  padding: 4px 10px;\n  border-radius: 999px;\n  border: 1px solid #e5e7eb;\n  background: #fff;\n  color: #374151;\n  white-space: nowrap;\n}\n\n.credit-sub{\n  margin-top: 6px;\n  color: #6b7280;\n  font-size: 13px;\n  line-height: 1.5;\n}\n\n.credit-bar{\n  margin-top: 10px;\n  height: 10px;\n  border-radius: 999px;\n  background: #e5e7eb;\n  overflow: hidden;\n}\n\n.credit-bar-inner{\n  height: 100%;\n  border-radius: 999px;\n  background: #9ca3af;\n}\n\n.credit-note{\n  margin-top: 10px;\n  padding: 10px 12px;\n  border-radius: 12px;\n  border: 1px dashed rgba(107, 114, 128, 0.35);\n  background: rgba(107, 114, 128, 0.06);\n  color: #374151;\n  font-size: 13px;\n  line-height: 1.45;\n}\n\n.credit-note-strong{\n  font-weight: 800;\n}\n\n/* åˆ†æ¡£é¢œè‰²ï¼ˆåªä½œç”¨äºæ–‡å­—/æ¡ï¼Œä¸ç»™ä½ æ•´â€œè¡€å‹é£™å‡â€çš„å¤§çº¢åº•ï¼‰ */\n.credit-good .credit-ring-num{ color: #16a34a; }\n.credit-warn .credit-ring-num{ color: #d97706; }\n.credit-bad  .credit-ring-num{ color: #dc2626; }\n\n.credit-good .credit-bar-inner{ background: #16a34a; }\n.credit-warn .credit-bar-inner{ background: #d97706; }\n.credit-bad  .credit-bar-inner{ background: #dc2626; }\n\n.credit-good .credit-level-pill{ border-color: rgba(22, 163, 74, 0.35); color: #16a34a; }\n.credit-warn .credit-level-pill{ border-color: rgba(217, 119, 6, 0.35); color: #d97706; }\n.credit-bad  .credit-level-pill{ border-color: rgba(220, 38, 38, 0.35); color: #dc2626; }\n\n.credit-good .credit-note{ border-color: rgba(22, 163, 74, 0.35); background: rgba(22, 163, 74, 0.06); }\n.credit-warn .credit-note{ border-color: rgba(217, 119, 6, 0.35); background: rgba(217, 119, 6, 0.06); }\n.credit-bad  .credit-note{ border-color: rgba(220, 38, 38, 0.35); background: rgba(220, 38, 38, 0.06); }\n\n/* ===========================\n   è¿è§„è®°å½•è¡¨ï¼šåˆ—å®½ã€é—´è·ã€æ ‡ç­¾\n   =========================== */\n\n.violation-table th.col-no,       .violation-table td.col-no{ width: 150px; padding-right: 8px; }\n.violation-table th.col-campus,   .violation-table td.col-campus{ width: 80px; padding-left: 24px; }\n.violation-table th.col-building, .violation-table td.col-building{ width: 100px; }\n.violation-table th.col-room,     .violation-table td.col-room{ width: 80px; }\n.violation-table th.col-date,     .violation-table td.col-date{ width: 110px; }\n.violation-table th.col-time,     .violation-table td.col-time{ width: 100px; }\n.violation-table th.col-seat,     .violation-table td.col-seat{ width: 70px; text-align: center; }\n.violation-table th.col-vtype,    .violation-table td.col-vtype{ width: 90px; text-align: center; }\n.violation-table th.col-penalty,  .violation-table td.col-penalty{ width: 70px; text-align: center; }\n.violation-table th.col-remark,   .violation-table td.col-remark{ min-width: 220px; }\n\n.violation-table td.col-no,\n.violation-table td.col-building,\n.violation-table td.col-remark{\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.violation-tag{\n  font-weight: 800;\n}\n\n.violation-tag.vt-late{\n  color: #d97706;\n}\n\n.violation-tag.vt-no-show{\n  color: #dc2626;\n}\n\n.violation-tag.vt-other{\n  color: #374151;\n}\n\n.penalty-num{\n  font-weight: 800;\n  color: #dc2626;\n}\n\n.remark-text{\n  display: inline-block;\n  max-width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}