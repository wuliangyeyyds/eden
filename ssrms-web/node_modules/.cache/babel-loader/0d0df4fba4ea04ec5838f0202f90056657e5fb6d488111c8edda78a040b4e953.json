{"ast":null,"code":"import { defineComponent, inject, ref, computed, unref, provide, resolveComponent, openBlock, createBlock, withCtx, renderSlot } from 'vue';\nimport { ElCollectionItem } from './roving-focus-group.mjs';\nimport { ROVING_FOCUS_GROUP_INJECTION_KEY, ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY } from './tokens.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nimport { composeEventHandlers, getEventCode } from '../../../utils/dom/event.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nconst _sfc_main = defineComponent({\n  components: {\n    ElRovingFocusCollectionItem: ElCollectionItem\n  },\n  props: {\n    focusable: {\n      type: Boolean,\n      default: true\n    },\n    active: Boolean\n  },\n  emits: [\"mousedown\", \"focus\", \"keydown\"],\n  setup(props, {\n    emit\n  }) {\n    const {\n      currentTabbedId,\n      onItemFocus,\n      onItemShiftTab,\n      onKeydown\n    } = inject(ROVING_FOCUS_GROUP_INJECTION_KEY, void 0);\n    const id = useId();\n    const rovingFocusGroupItemRef = ref();\n    const handleMousedown = composeEventHandlers(e => {\n      emit(\"mousedown\", e);\n    }, e => {\n      if (!props.focusable) {\n        e.preventDefault();\n      } else {\n        onItemFocus(unref(id));\n      }\n    });\n    const handleFocus = composeEventHandlers(e => {\n      emit(\"focus\", e);\n    }, () => {\n      onItemFocus(unref(id));\n    });\n    const handleKeydown = composeEventHandlers(e => {\n      emit(\"keydown\", e);\n    }, e => {\n      const {\n        shiftKey,\n        target,\n        currentTarget\n      } = e;\n      const code = getEventCode(e);\n      if (code === EVENT_CODE.tab && shiftKey) {\n        onItemShiftTab();\n        return;\n      }\n      if (target !== currentTarget) return;\n      onKeydown(e);\n    });\n    const isCurrentTab = computed(() => currentTabbedId.value === unref(id));\n    provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY, {\n      rovingFocusGroupItemRef,\n      tabIndex: computed(() => unref(isCurrentTab) ? 0 : -1),\n      handleMousedown,\n      handleFocus,\n      handleKeydown\n    });\n    return {\n      id,\n      handleKeydown,\n      handleFocus,\n      handleMousedown\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_roving_focus_collection_item = resolveComponent(\"el-roving-focus-collection-item\");\n  return openBlock(), createBlock(_component_el_roving_focus_collection_item, {\n    id: _ctx.id,\n    focusable: _ctx.focusable,\n    active: _ctx.active\n  }, {\n    default: withCtx(() => [renderSlot(_ctx.$slots, \"default\")]),\n    _: 3\n  }, 8, [\"id\", \"focusable\", \"active\"]);\n}\nvar ElRovingFocusItem = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"roving-focus-item.vue\"]]);\nexport { ElRovingFocusItem as default };","map":{"version":3,"names":["_sfc_main","defineComponent","components","ElRovingFocusCollectionItem","ElCollectionItem","props","focusable","type","Boolean","default","active","emits","setup","emit","currentTabbedId","onItemFocus","onItemShiftTab","onKeydown","inject","ROVING_FOCUS_GROUP_INJECTION_KEY","id","useId","rovingFocusGroupItemRef","ref","handleMousedown","composeEventHandlers","e","preventDefault","unref","handleFocus","handleKeydown","shiftKey","target","currentTarget","code","getEventCode","EVENT_CODE","tab","isCurrentTab","computed","value","provide","ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY","tabIndex","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_component_el_roving_focus_collection_item","resolveComponent","openBlock","createBlock","withCtx","renderSlot","$slots","ElRovingFocusItem","_export_sfc"],"sources":["../../../../../../packages/components/roving-focus-group/src/roving-focus-item.vue"],"sourcesContent":["<template>\n  <el-roving-focus-collection-item\n    :id=\"id\"\n    :focusable=\"focusable\"\n    :active=\"active\"\n  >\n    <slot />\n  </el-roving-focus-collection-item>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, provide, ref, unref } from 'vue'\nimport { useId } from '@element-plus/hooks'\nimport { composeEventHandlers, getEventCode } from '@element-plus/utils'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { ElCollectionItem as ElRovingFocusCollectionItem } from './roving-focus-group'\nimport {\n  ROVING_FOCUS_GROUP_INJECTION_KEY,\n  ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY,\n} from './tokens'\n\nexport default defineComponent({\n  components: {\n    ElRovingFocusCollectionItem,\n  },\n  props: {\n    focusable: {\n      type: Boolean,\n      default: true,\n    },\n    active: Boolean,\n  },\n  emits: ['mousedown', 'focus', 'keydown'],\n  setup(props, { emit }) {\n    const { currentTabbedId, onItemFocus, onItemShiftTab, onKeydown } = inject(\n      ROVING_FOCUS_GROUP_INJECTION_KEY,\n      undefined\n    )!\n\n    const id = useId()\n    const rovingFocusGroupItemRef = ref<HTMLElement>()\n\n    const handleMousedown = composeEventHandlers(\n      (e: Event) => {\n        emit('mousedown', e)\n      },\n      (e) => {\n        if (!props.focusable) {\n          e.preventDefault()\n        } else {\n          onItemFocus(unref(id))\n        }\n      }\n    )\n\n    const handleFocus = composeEventHandlers(\n      (e: Event) => {\n        emit('focus', e)\n      },\n      () => {\n        onItemFocus(unref(id))\n      }\n    )\n\n    const handleKeydown = composeEventHandlers(\n      (e: Event) => {\n        emit('keydown', e)\n      },\n      (e) => {\n        const { shiftKey, target, currentTarget } = e as KeyboardEvent\n        const code = getEventCode(e as KeyboardEvent)\n\n        if (code === EVENT_CODE.tab && shiftKey) {\n          onItemShiftTab()\n          return\n        }\n        if (target !== currentTarget) return\n        onKeydown(e as KeyboardEvent)\n      }\n    )\n\n    const isCurrentTab = computed(() => currentTabbedId.value === unref(id))\n\n    provide(ROVING_FOCUS_GROUP_ITEM_INJECTION_KEY, {\n      rovingFocusGroupItemRef,\n      tabIndex: computed(() => (unref(isCurrentTab) ? 0 : -1)),\n      handleMousedown,\n      handleFocus,\n      handleKeydown,\n    })\n\n    return {\n      id,\n      handleKeydown,\n      handleFocus,\n      handleMousedown,\n    }\n  },\n})\n</script>\n"],"mappings":";;;;;;;AAqBA,MAAKA,SAAA,GAAaC,eAAa;EAC7BC,UAAY;IAAAC,2BAAA,EACVC;EAAA,CACF;EACAC,KAAO;IACLC,SAAW;MACTC,IAAM,EAAAC,OAAA;MACNC,OAAS;IAAA,CACX;IACAC,MAAQ,EAAAF;EAAA,CACV;EACAG,KAAO,GAAC,WAAa,WAAS,SAAS;EACvCC,KAAMA,CAAAP,KAAA,EAAO;IAAEQ;EAAA,CAAQ;IACrB,MAAM;MAAEC,eAAA;MAAiBC,WAAa;MAAAC,cAAA;MAAgBC;IAAA,CAAc,GAAAC,MAAA,CAAAC,gCAAA;IAClE,MAAAC,EAAA,GAAAC,KAAA;IACA,MAAAC,uBAAA,GAAAC,GAAA;IACF,MAAAC,eAAA,GAAAC,oBAAA,CAAAC,CAAA;MAEAb,IAAM,YAAW,EAAAa,CAAA;IACjB,GAAAA,CAAA;MAEA,IAAM,CAAkBrB,KAAA,CAAAC,SAAA;QACRoB,CAAA,CAAAC,cAAA;MACZ,OAAK;QACPZ,WAAA,CAAAa,KAAA,CAAAR,EAAA;MAAA;IAEE,CAAI;IACF,MAAAS,WAAiB,GAAAJ,oBAAA,CAAAC,CAAA;MAAAb,IACZ,UAAAa,CAAA;IACL,CAAY;MACdX,WAAA,CAAAa,KAAA,CAAAR,EAAA;IAAA,CACF;IACF,MAAAU,aAAA,GAAAL,oBAAA,CAAAC,CAAA;MAEAb,IAAM,CAAc,WAAAa,CAAA;IAAA,GACJA,CAAA;MACZ;QAAAK,QAAc;QAACC,MAAA;QAAAC;MAAA,IAAAP,CAAA;MACjB,MAAAQ,IAAA,GAAAC,YAAA,CAAAT,CAAA;MACA,IAAMQ,IAAA,KAAAE,UAAA,CAAAC,GAAA,IAAAN,QAAA;QACQf,cAAA;QACd;MAAA;MAGF,IAAMgB,MAAgB,KAAAC,aAAA,EACN;MACZhB,SAAA,CAAAS,CAAA;IAAiB,CACnB;IAAA,MACOY,YAAA,GAAAC,QAAA,OAAAzB,eAAA,CAAA0B,KAAA,KAAAZ,KAAA,CAAAR,EAAA;IACLqB,OAAA,CAAAC,qCAA4C;MACtCpB,uBAAA;MAEFqB,QAAA,EAAAJ,QAAoB,OAAAX,KAAA,CAAAU,YAAiB;MACxBd,eAAA;MACfK,WAAA;MACFC;IACA;IACA;MACFV,EAAA;MACFU,aAAA;MAEAD,WAAA;MAEAL;IAA+C,CAC7C;EAAA;AACuD,CACvD;AACA,SACAoB,YAAAC,IAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,QAAA;EAAA,MACDC,0CAAA,GAAAC,gBAAA;EAEM,OAAAC,SAAA,IAAAC,WAAA,CAAAH,0CAAA;IACL/B,EAAA,EAAAyB,IAAA,CAAAzB,EAAA;IACAd,SAAA,EAAAuC,IAAA,CAAAvC,SAAA;IACAI,MAAA,EAAAmC,IAAA,CAAAnC;EAAA,CACA;IACFD,OAAA,EAAA8C,OAAA,QACFC,UAAA,CAAAX,IAAA,CAAAY,MAAA,aACD;;;;AA3FmC,IAAAC,iBAAA,GAL3B,eAAAC,WAAA,CAAA3D,SAAA,cAAA4C,WAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}