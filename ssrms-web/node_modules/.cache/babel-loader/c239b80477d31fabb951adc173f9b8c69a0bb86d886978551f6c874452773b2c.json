{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nexport default {\n  name: 'AppHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n  beforeUnmount() {\n    this.stopQuoteTimer();\n  },\n  data() {\n    return {\n      // åœºåœ°ï¼ˆåœ°ç‚¹ï¼‰åˆ—è¡¨\n      reserveVenues: ['æœ¬éƒ¨ Â· å›¾ä¹¦é¦† 301', 'æœ¬éƒ¨ Â· å›¾ä¹¦é¦† 401', 'ä¸œæ ¡åŒº Â· æ•™å­¦æ¥¼ 3 æ¥¼'],\n      reserveVenueIndex: 0,\n      // æ—¥æœŸç›¸å…³\n      dateList: [],\n      visibleStart: 0,\n      visibleCount: 7,\n      // ä¸€å±å±•ç¤ºå¤šå°‘å¤©\n      currentDateIndex: 0,\n      // æ—¶é—´æ®µåˆ—è¡¨ï¼ˆ0 ç‚¹~24 ç‚¹ï¼‰\n      timeSlots: [],\n      // åç«¯è¿”å›çš„â€œå·²æ»¡æ—¶æ®µâ€ï¼ˆid åˆ—è¡¨ï¼Œä¾‹å¦‚ [8,9,14]ï¼‰\n      disabledSlotIds: [],\n      // å·²é€‰æ—¶æ®µï¼ˆæœ€å¤š 4 ä¸ªï¼‰\n      selectedSlots: [],\n      // æ˜¯å¦åªå±•ç¤ºâ€œå¯é¢„çº¦â€çš„æ—¶æ®µ\n      onlyShowAvailable: false,\n      // æˆ¿é—´ id æ˜ å°„ï¼ˆæŒ‰é¡ºåºå’Œ reserveVenues å¯¹åº”ï¼‰\n      roomIds: [1, 2, 3],\n      // æ¢æˆä½  room è¡¨é‡Œçš„çœŸå® id\n\n      // å½“å‰ç™»å½•ç”¨æˆ· idï¼ˆä»ç™»å½•æ—¶å­˜çš„ç”¨æˆ·ä¿¡æ¯é‡Œè¯»ï¼‰\n      currentUserId: null,\n      // æˆ‘çš„é¢„çº¦åˆ—è¡¨\n      myReservations: [],\n      // æˆ‘çš„é¢„çº¦åˆ†é¡µ\n      pageSize: 15,\n      reservationPageIndex: 1,\n      // è¿è§„è®°å½•ç›¸å…³\n      myViolations: [],\n      // åç«¯æ‹‰å›æ¥çš„å®Œæ•´è¿è§„åˆ—è¡¨\n      violationPageIndex: 1,\n      // å½“å‰è¿è§„é¡µç \n      violationPageSize: 15,\n      // ä¸ªäººä¸­å¿ƒè¡¨å•æ•°æ®\n      profileForm: {\n        name: '',\n        // å§“å\n        account: '',\n        // ç™»å½•è´¦å·\n        studentNo: '',\n        // å­¦å·\n        college: '',\n        gradeClass: '',\n        phone: '',\n        email: '',\n        commonCampus: '',\n        profileRemark: ''\n      },\n      profileLoading: false,\n      profileSaving: false,\n      // é¦–é¡µ - å¤©æ°”ã€é‡‘å¥ã€å¿«æ·åé¦ˆ\n      weatherData: null,\n      dailyQuote: '',\n      dailyQuoteId: null,\n      quoteTimer: null,\n      openFeedback: false,\n      // é¦–é¡µ - å…¬å‘Šåˆ—è¡¨ç¤ºä¾‹æ•°æ®ï¼ˆåç»­å¯ä»¥æ¥ /notice æ¥å£æ›¿æ¢ï¼‰\n      homeNotices: [{\n        id: 1,\n        title: 'ã€å¼€æ”¾æ—¶é—´è°ƒæ•´ã€‘æœ¬éƒ¨å›¾ä¹¦é¦† 301 è‡ªä¹ å®¤æœ¬å‘¨æœ«å»¶é•¿å¼€æ”¾è‡³ 22:30',\n        date: '04-02',\n        level: 'important',\n        levelText: 'é‡è¦',\n        target: 'å…¨ä½“å­¦ç”Ÿ'\n      }, {\n        id: 2,\n        title: 'ã€è€ƒè¯•å ç”¨æé†’ã€‘æœ¬å‘¨å…­ä¸‹åˆ 14:00â€“17:00 401 è‡ªä¹ å®¤ç”¨äºå››å…­çº§æ¨¡æ‹Ÿè€ƒè¯•',\n        date: '03-28',\n        level: 'info',\n        levelText: 'æé†’',\n        target: 'è‹±è¯­è€ƒç”Ÿ'\n      }, {\n        id: 3,\n        title: 'ã€è®¾å¤‡ç»´æŠ¤ã€‘ä¸œæ ¡åŒº 3 æ¥¼è‡ªä¹ å®¤ 4 æœˆ 3 æ—¥ 9:00â€“12:00 æš‚åœå¼€æ”¾',\n        date: '03-27',\n        level: 'warning',\n        levelText: 'ç»´æŠ¤',\n        target: 'ä¸œæ ¡åŒºå­¦ç”Ÿ'\n      }],\n      // æ”¾ä¸€ä¸ªå‡½æ•°åœ¨ data é‡Œä¹Ÿæ²¡é—®é¢˜ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨\n      emojiWeather: function (desc) {\n        if (!desc) return 'â›…';\n        if (desc.includes('é›¨')) return 'ğŸŒ§ï¸';\n        if (desc.includes('äº‘')) return 'â›…';\n        if (desc.includes('æ™´')) return 'â˜€ï¸';\n        if (desc.includes('é›ª')) return 'â„ï¸';\n        return 'â›…';\n      }\n    };\n  },\n  computed: {\n    visibleDates() {\n      return this.dateList.slice(this.visibleStart, this.visibleStart + this.visibleCount).map((d, idx) => ({\n        ...d,\n        index: this.visibleStart + idx\n      }));\n    },\n    canMovePrev() {\n      return this.visibleStart > 0;\n    },\n    canMoveNext() {\n      return this.visibleStart + this.visibleCount < this.dateList.length;\n    },\n    currentVenueName() {\n      return this.reserveVenues[this.reserveVenueIndex] || '';\n    },\n    // å½“å‰é€‰ä¸­çš„æ—¥æœŸå®Œæ•´æ–‡æœ¬ï¼ˆç”¨äºå³ä¾§æ¦‚è¦ï¼‰\n    currentDateLabel() {\n      const cur = this.dateList[this.currentDateIndex];\n      return cur ? cur.fullLabel : '';\n    },\n    // æ ¹æ®å¼€å…³è¿‡æ»¤æ—¶é—´æ®µåˆ—è¡¨\n    filteredTimeSlots() {\n      if (!this.onlyShowAvailable) {\n        return this.timeSlots;\n      }\n      // åªå±•ç¤ºâ€œå¯é¢„çº¦â€çš„æ—¶æ®µ\n      return this.timeSlots.filter(slot => this.slotState(slot) === 'available');\n    },\n    // å½“å‰æˆ¿é—´ id\n    currentRoomId() {\n      return this.roomIds[this.reserveVenueIndex];\n    },\n    // åç«¯éœ€è¦ yyyy-MM-dd æ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²\n    currentDateStr() {\n      const cur = this.dateList[this.currentDateIndex];\n      // æˆ‘ä»¬åœ¨ initDates é‡Œå·²ç»ç”Ÿæˆäº† fullLabel = '2025-12-13'\n      return cur ? cur.fullLabel : null;\n    },\n    // æ€»é¡µæ•°\n    totalPages() {\n      if (!this.myReservations.length) return 0;\n      return Math.ceil(this.myReservations.length / this.pageSize);\n    },\n    // å½“å‰é¡µè¦å±•ç¤ºçš„ 15 æ¡\n    pagedReservations() {\n      if (!this.myReservations.length) return [];\n      const total = this.totalPages || 1;\n      const page = Math.min(this.reservationPageIndex, total);\n      const start = (page - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.myReservations.slice(start, end);\n    },\n    violationTotalPages() {\n      if (!this.myViolations.length) return 0;\n      return Math.ceil(this.myViolations.length / this.violationPageSize);\n    },\n    pagedViolations() {\n      if (!this.myViolations.length) return [];\n      const total = this.violationTotalPages || 1;\n      const page = Math.min(this.violationPageIndex, total);\n      const start = (page - 1) * this.violationPageSize;\n      const end = start + this.violationPageSize;\n      return this.myViolations.slice(start, end);\n    },\n    // é¦–é¡µé—®å€™ï¼šä»Šå¤©æ—¥æœŸã€æ˜ŸæœŸå‡ ã€æ—¶é—´æ®µé—®å€™è¯­\n    todayStr() {\n      const d = new Date();\n      return `${d.getMonth() + 1} æœˆ ${d.getDate()} æ—¥`;\n    },\n    weekDayStr() {\n      const list = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];\n      return 'æ˜ŸæœŸ' + list[new Date().getDay()];\n    },\n    timeGreeting() {\n      const h = new Date().getHours();\n      if (h < 11) return 'ä¸Šåˆå¥½';\n      if (h < 14) return 'ä¸­åˆå¥½';\n      if (h < 19) return 'ä¸‹åˆå¥½';\n      return 'æ™šä¸Šå¥½';\n    },\n    // æ–°å¢ï¼šæˆ‘çš„ä»Šæ—¥é¢„çº¦ï¼ˆä»å·²åŠ è½½çš„ myReservations ä¸­ç­›é€‰â€œä»Šå¤©â€çš„è®°å½•ï¼‰\n    todayAppointments() {\n      const list = Array.isArray(this.myReservations) ? this.myReservations : [];\n      if (!list.length) return [];\n      const todayStr = new Date().toISOString().slice(0, 10); // yyyy-MM-dd\n      return list.filter(item => item.date === todayStr);\n    }\n  },\n  created() {\n    // åˆå§‹åŒ–æ—¶é—´æ®µã€æ—¥æœŸ\n    this.timeSlots = this.buildTimeSlots();\n    this.initDates();\n\n    // è¯»å–å½“å‰ç™»å½•ç”¨æˆ·ï¼šä» localStorage çš„ ssrmsUser é‡Œå–\n    const raw = localStorage.getItem('ssrmsUser');\n    if (raw) {\n      try {\n        const user = JSON.parse(raw);\n        console.log('localStorage ssrmsUser = ', user);\n        this.currentUserId = user.userId ?? user.id;\n        this.profileForm = {\n          name: user.name || '',\n          account: user.account || '',\n          // ç™»å½•è´¦å·\n          studentNo: user.studentNo || '',\n          // å­¦å·\n          college: user.college || '',\n          gradeClass: user.gradeClass || '',\n          phone: user.phone || '',\n          email: user.email || '',\n          commonCampus: user.commonCampus || '',\n          profileRemark: user.profileRemark || ''\n        };\n\n        // â­ å†å»è¯·æ±‚åç«¯ï¼Œæ‹¿â€œæœ€æ–°â€çš„ä¸€ä»½è¦†ç›–\n        this.loadUserProfile();\n      } catch (e) {\n        console.error('è§£æ ssrmsUser å¤±è´¥', e);\n      }\n    } else {\n      console.warn('localStorage é‡Œæ²¡æœ‰ ssrmsUser');\n    }\n\n    // åˆå§‹åŒ–å®Œåæ‹‰ä¸€æ¬¡å½“å‰é€‰ä¸­æ—¥æœŸï¼ˆâ€œæ˜å¤©â€ï¼‰çš„å ç”¨æƒ…å†µ\n    this.fetchSlotStatus();\n    this.loadWeather();\n    this.loadQuoteFromDb();\n    this.startQuoteTimer();\n  },\n  methods: {\n    emitChange(page) {\n      this.$emit('change-page', page);\n    },\n    // ç‚¹å‡»åœºåœ° tab\n    handleVenueClick(index) {\n      this.reserveVenueIndex = index;\n      this.fetchSlotStatus();\n    },\n    buildTimeSlots() {\n      const list = [];\n\n      // ğŸ‘‰ è¿™é‡Œæ§åˆ¶å¼€æ”¾çš„æ—¶é—´æ®µ\n      // startHourï¼šç¬¬ä¸€ä¸ªæ—¶æ®µçš„å¼€å§‹å°æ—¶\n      // endHourï¼šæœ€åä¸€ä¸ªæ—¶æ®µçš„å¼€å§‹å°æ—¶\n      // ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šä» 08:00-09:00 ä¸€ç›´åˆ° 22:00-23:00\n      const startHour = 8; // 08:00\n      const endHour = 22; // 22:00\n\n      for (let h = startHour; h <= endHour; h++) {\n        const next = h + 1;\n        const id = String(h); // ä»ç„¶ç”¨å°æ—¶å½“ä½œ slotIdï¼Œå’Œåç«¯ä¿æŒä¸€è‡´\n\n        const range = `${h.toString().padStart(2, '0')}:00 - ` + `${next.toString().padStart(2, '0')}:00`;\n        const label = (h % 12 === 0 ? 12 : h % 12) + ': 00 ' + (h < 12 ? 'AM' : 'PM');\n        list.push({\n          id,\n          label,\n          range\n        });\n      }\n      return list;\n    },\n    // ç”Ÿæˆæ¥ä¸‹æ¥ 14 å¤©çš„æ—¥æœŸæ¡ï¼ˆä»â€œæ˜å¤©â€å¼€å§‹ï¼‰\n    initDates() {\n      const today = new Date();\n      const list = [];\n      const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];\n      for (let i = 0; i < 14; i++) {\n        // â­ è¿™é‡ŒåŠ  1ï¼Œè¡¨ç¤ºä»â€œæ˜å¤©â€å¼€å§‹\n        const d = new Date(today);\n        d.setDate(d.getDate() + i + 1);\n        const month = d.getMonth() + 1;\n        const day = d.getDate();\n        const fullLabel = `${d.getFullYear()}-${month.toString().padStart(2, '0')}-` + `${day.toString().padStart(2, '0')}`;\n        list.push({\n          key: i,\n          // ç”¨ 0~13 å½“ key å°±å¤Ÿäº†\n          year: d.getFullYear(),\n          month,\n          day,\n          weekday: weekdays[d.getDay()],\n          monthLabel: `${d.getFullYear()}-${month.toString().padStart(2, '0')}`,\n          isToday: false,\n          // â­ ä¸å†æœ‰â€œä»Šå¤©â€\n          isTomorrow: i === 0,\n          // â­ ç¬¬ä¸€å¼ æ ‡è®°ä¸ºâ€œæ˜å¤©â€\n          fullLabel\n        });\n      }\n      this.dateList = list;\n      this.visibleStart = 0;\n      this.currentDateIndex = 0; // â­ é»˜è®¤é€‰ä¸­ç¬¬ä¸€å¤©ï¼ˆä¹Ÿå°±æ˜¯â€œæ˜å¤©â€ï¼‰\n    },\n    moveDates(direction) {\n      if (direction === 'prev' && this.canMovePrev) {\n        this.visibleStart -= 1;\n      } else if (direction === 'next' && this.canMoveNext) {\n        this.visibleStart += 1;\n      }\n    },\n    // ç‚¹å‡»æ—¥æœŸ\n    selectDate(index) {\n      this.currentDateIndex = index;\n      this.fetchSlotStatus();\n    },\n    buildKey(dateIndex, slotId) {\n      return `${dateIndex}-${slotId}`;\n    },\n    // å½“å‰æ—¶æ®µæ˜¯å¯é¢„çº¦ / å·²é€‰ / ä¸å¯é¢„çº¦\n    slotState(slot) {\n      if (this.disabledSlotIds.includes(slot.id)) {\n        return 'disabled';\n      }\n      const key = this.buildKey(this.currentDateIndex, slot.id);\n      const exists = this.selectedSlots.some(item => item.key === key);\n      if (exists) {\n        return 'selected';\n      }\n      return 'available';\n    },\n    slotClass(slot) {\n      const state = this.slotState(slot);\n      return {\n        'slot-available': state === 'available',\n        'slot-disabled': state === 'disabled',\n        'slot-selected': state === 'selected'\n      };\n    },\n    // ç‚¹å‡»æ—¶æ®µï¼šé€‰ä¸­ / å–æ¶ˆ\n    toggleSlot(slot) {\n      if (this.slotState(slot) === 'disabled') {\n        return;\n      }\n      const key = this.buildKey(this.currentDateIndex, slot.id);\n      const index = this.selectedSlots.findIndex(item => item.key === key);\n      if (index !== -1) {\n        this.selectedSlots.splice(index, 1);\n        return;\n      }\n      if (this.selectedSlots.length >= 4) {\n        alert('æœ€å¤šåªèƒ½é€‰æ‹© 4 ä¸ªé¢„çº¦æ—¶æ®µ');\n        return;\n      }\n      const dateInfo = this.dateList[this.currentDateIndex];\n      const dateLabel = dateInfo.fullLabel;\n      this.selectedSlots.push({\n        key,\n        dateIndex: this.currentDateIndex,\n        dateLabel,\n        slot\n      });\n    },\n    removeSelected(key) {\n      const index = this.selectedSlots.findIndex(item => item.key === key);\n      if (index !== -1) {\n        this.selectedSlots.splice(index, 1);\n      }\n    },\n    resetSelections() {\n      this.selectedSlots = [];\n    },\n    // æäº¤é¢„çº¦ï¼šè°ƒç”¨åç«¯ /reservation/create\n    async submitReservations() {\n      if (!this.selectedSlots.length) return;\n      if (!this.currentUserId) {\n        alert('è¯·å…ˆç™»å½•åå†é¢„çº¦');\n        return;\n      }\n      const slotIds = this.selectedSlots.map(item => Number(item.slot.id));\n      try {\n        const result = await this.$axios.post('/reservation/create', {\n          userId: this.currentUserId,\n          // å…ˆç›´æ¥ä¼ ï¼Œä¹‹åå¯ä»¥æ”¹æˆåç«¯ä»ç™»å½•æ€è·å–\n          roomId: this.currentRoomId,\n          date: this.currentDateStr,\n          slotIds\n        });\n        alert('é¢„çº¦æˆåŠŸ');\n        // æ¸…ç©ºé€‰æ‹©\n        this.selectedSlots = [];\n        // é‡æ–°æ‹‰ä¸€éæ—¶æ®µçŠ¶æ€ï¼Œåˆ·æ–°ç°è‰²/å¯é€‰çŠ¶æ€\n        await this.fetchSlotStatus();\n        // ä¿ç•™åŸæ¥çš„è¡Œä¸ºï¼šé¢„çº¦åè·³åˆ°â€œæˆ‘çš„é¢„çº¦â€\n        this.emitChange('user-reservations');\n      } catch (e) {\n        console.error(e);\n        alert('é¢„çº¦å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      }\n    },\n    // ä»åç«¯æ‹‰å–æŸæˆ¿é—´æŸå¤©çš„â€œå·²æ»¡æ—¶æ®µâ€\n    async fetchSlotStatus() {\n      // æˆ¿é—´æˆ–æ—¥æœŸè¿˜æ²¡å‡†å¤‡å¥½å°±å…ˆä¸è°ƒ\n      if (!this.currentRoomId || !this.currentDateStr) return;\n      try {\n        const result = await this.$axios.get('/reservation/slots', {\n          params: {\n            roomId: this.currentRoomId,\n            date: this.currentDateStr\n          }\n        });\n        const dto = result.data || {};\n        // åç«¯è¿”å›çš„æ˜¯ [8,9,14] è¿™æ ·ï¼Œæˆ‘ä»¬å‰ç«¯ç”¨å­—ç¬¦ä¸² id\n        this.disabledSlotIds = (dto.disabledSlotIds || []).map(id => String(id));\n      } catch (e) {\n        console.error(e);\n        alert('è·å–æ—¶æ®µçŠ¶æ€å¤±è´¥');\n      }\n    },\n    // æŠŠåç«¯è¿”å›çš„é¢„çº¦åˆ—è¡¨åŠ è½½åˆ°è¡¨æ ¼\n    async loadMyReservations() {\n      // ç¡®ä¿æœ‰ currentUserIdï¼Œæ²¡æœ‰çš„è¯å†å°è¯•ä» localStorage è¯»ä¸€æ¬¡\n      if (!this.currentUserId) {\n        const raw = localStorage.getItem('ssrmsUser');\n        if (raw) {\n          try {\n            const user = JSON.parse(raw);\n            this.currentUserId = user.userId ?? user.id;\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n      if (!this.currentUserId) return;\n\n      // â­ å…³é”®ï¼šå…ˆè®©åç«¯åˆ·æ–°ä¸€æ¬¡â€œæœªç­¾åˆ°â€çŠ¶æ€\n      await this.refreshNoShowStatus();\n      try {\n        const result = await this.$axios.get('/reservation/my', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const list = Array.isArray(result.data) ? result.data.slice() : [];\n\n        // æ—¥æœŸå‡åºï¼ŒåŒä¸€å¤©æŒ‰å¼€å§‹æ—¶é—´å‡åº\n        list.sort((a, b) => {\n          const da = a.date || '';\n          const db = b.date || '';\n          if (da !== db) {\n            // æ—¥æœŸå‡åº\n            return da.localeCompare(db);\n          }\n          const ta = a.startTime || '';\n          const tb = b.startTime || '';\n          // åŒä¸€å¤©æ—¶é—´å‡åº\n          return ta.localeCompare(tb);\n        });\n        this.myReservations = list;\n      } catch (e) {\n        console.error(e);\n        alert('åŠ è½½é¢„çº¦åˆ—è¡¨å¤±è´¥');\n      }\n    },\n    // æŠŠ startTime / endTime æ‹¼æˆ â€œHH:mm-HH:mmâ€\n    formatTimeRange(item) {\n      const s = (item.startTime || '').slice(0, 5);\n      const e = (item.endTime || '').slice(0, 5);\n      return s && e ? `${s}-${e}` : '';\n    },\n    // æŠŠåç«¯çŠ¶æ€è‹±æ–‡è½¬æˆä¸­æ–‡æ–‡æ¡ˆ\n    renderStatusText(status) {\n      switch (status) {\n        case 'reserved':\n          return 'å¾…ç­¾åˆ°';\n        case 'checked_in':\n          return 'å·²ç­¾åˆ°';\n        case 'late':\n          return 'è¿Ÿåˆ°';\n        case 'no_show':\n          return 'æœªç­¾åˆ°';\n        case 'cancelled':\n          return 'å·²å–æ¶ˆ';\n        case 'cancel_overdue':\n          return 'é€¾æœŸå–æ¶ˆ';\n        default:\n          return status || '';\n      }\n    },\n    // æ ¹æ®çŠ¶æ€å†³å®šå¾½æ ‡é¢œè‰²ï¼ˆå…ˆç•™å¥½é’©å­ï¼Œæ ·å¼åé¢æƒ³ç¾åŒ–å†æ”¹ï¼‰\n    statusClass(status) {\n      return {\n        'badge-pending': status === 'reserved',\n        'badge-done': status === 'checked_in',\n        'badge-late': status === 'late',\n        'badge-missed': status === 'no_show',\n        'badge-cancelled': status === 'cancelled',\n        'badge-cancel-overdue': status === 'cancel_overdue'\n      };\n    },\n    gotoPrevPage() {\n      if (this.reservationPageIndex > 1) {\n        this.reservationPageIndex--;\n      }\n    },\n    gotoNextPage() {\n      if (this.reservationPageIndex < this.totalPages) {\n        this.reservationPageIndex++;\n      }\n    },\n    // ç­¾åˆ°\n    async handleCheckIn(item) {\n      try {\n        const result = await this.$axios.post(`/reservation/checkin/${item.id}`);\n        if (result.code && result.code !== 200) {\n          alert(result.msg || 'ç­¾åˆ°å¤±è´¥');\n          return;\n        }\n        alert(result.msg || 'ç­¾åˆ°æˆåŠŸ');\n        // é‡æ–°åˆ·æ–°åˆ—è¡¨å’Œå ç”¨æƒ…å†µ\n        await this.loadMyReservations();\n        // å¦‚æœä½ å¸Œæœ›â€œæˆ‘è¦é¢„çº¦â€é‚£è¾¹ä¹Ÿç«‹å³åˆ·æ–°å ç”¨ï¼Œå¯ä»¥é¡ºå¸¦ï¼š\n        // await this.fetchSlotStatus()\n      } catch (e) {\n        console.error(e);\n        alert('ç­¾åˆ°å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      }\n    },\n    // å–æ¶ˆé¢„çº¦\n    async handleCancel(item) {\n      // å‰ç«¯å†ä¿é™©ä¸€æ¬¡ 10 åˆ†é’Ÿè§„åˆ™\n      if (!this.canCancel(item)) {\n        alert('è·ç¦»å¼€å§‹ä¸è¶³ 10 åˆ†é’Ÿï¼Œæ— æ³•å–æ¶ˆï¼Œè¯·è”ç³»ç®¡ç†å‘˜å¤„ç†');\n        return;\n      }\n      const ok = window.confirm(`ç¡®å®šè¦å–æ¶ˆæœ¬æ¬¡é¢„çº¦ï¼ˆ${item.date} ${this.formatTimeRange(item)}ï¼‰å—ï¼Ÿ`);\n      if (!ok) {\n        return;\n      }\n      try {\n        const result = await this.$axios.post(`/reservation/cancel/${item.id}`);\n\n        // è¿™é‡ŒæŒ‰ä½ çš„ Result çº¦å®šæ¥ï¼Œå¦‚æœåç«¯æ˜¯ code === 200 ä»£è¡¨æˆåŠŸå°±ä¿ç•™è¿™ä¸€å¥\n        if (result.code && result.code !== 200) {\n          alert(result.msg || 'å–æ¶ˆå¤±è´¥');\n          return;\n        }\n\n        // åç«¯ä¼šæ ¹æ®è§„åˆ™æŠŠçŠ¶æ€æ”¹æˆ cancelled æˆ– cancel_overdue\n        alert(result.msg || 'å–æ¶ˆæˆåŠŸ');\n\n        // é‡æ–°åŠ è½½é¢„çº¦åˆ—è¡¨\n        await this.loadMyReservations();\n        // é‡Šæ”¾åº§ä½åï¼Œé¡ºä¾¿åˆ·æ–°ä¸€ä¸‹â€œæˆ‘è¦é¢„çº¦â€é¡µé¢çš„å ç”¨æƒ…å†µ\n        await this.fetchSlotStatus();\n      } catch (e) {\n        console.error(e);\n        alert('å–æ¶ˆå¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸');\n      }\n    },\n    // æ˜¯å¦å…è®¸å–æ¶ˆï¼šåªæ‹¦â€œå¼€å§‹å‰ 10 åˆ†é’Ÿâ€çš„æƒ…å†µ\n    canCancel(item) {\n      if (item.status !== 'reserved') return false;\n      if (!item.date || !item.startTime) return false;\n      try {\n        // date ä¾‹å¦‚ '2025-12-22'ï¼ŒstartTime ä¾‹å¦‚ '01:00:00'\n        const startStr = item.date + 'T' + (item.startTime || '').slice(0, 8);\n        const start = new Date(startStr);\n        if (isNaN(start.getTime())) {\n          // è§£æå¤±è´¥å°±ä¸åœ¨å‰ç«¯æ‹¦ï¼Œäº¤ç»™åç«¯åˆ¤æ–­\n          return true;\n        }\n        const now = new Date();\n        const diffMs = start.getTime() - now.getTime();\n        const tenMinutes = 10 * 60 * 1000;\n\n        // diffMs > 10 åˆ†é’Ÿ â‡’ å¯ä»¥å–æ¶ˆ\n        return diffMs > tenMinutes;\n      } catch (e) {\n        console.error(e);\n        // å‡ºå¼‚å¸¸ç›´æ¥æ”¾è¡Œï¼Œäº¤ç»™åç«¯\n        return true;\n      }\n    },\n    // è¿›å…¥â€œæˆ‘çš„é¢„çº¦â€å‰ï¼Œå…ˆè®©åå°æŠŠå·²è¿‡æœŸçš„é¢„çº¦æ‰¹é‡æ ‡è®°ä¸ºæœªç­¾åˆ°\n    async refreshNoShowStatus() {\n      // ç¡®ä¿ currentUserId æœ‰å€¼\n      if (!this.currentUserId) {\n        const raw = localStorage.getItem('ssrmsUser');\n        if (raw) {\n          try {\n            const user = JSON.parse(raw);\n            this.currentUserId = user.userId ?? user.id;\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n      if (!this.currentUserId) return;\n      try {\n        const result = await this.$axios.post('/reservation/refreshNoShow', null, {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const updated = typeof result.data === 'number' ? result.data : 0;\n\n        // æœ‰æ–°è¢«æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€çš„è®°å½•ï¼Œå†æé†’ä¸€æ¬¡\n        if (updated > 0) {\n          alert(`æœ‰ ${updated} æ¡å·²è¿‡æœŸä½†æœªç­¾åˆ°çš„é¢„çº¦ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€ï¼Œè¯·ç•™æ„ä¿¡ç”¨åˆ†å˜åŒ–ã€‚`);\n        }\n      } catch (e) {\n        console.error(e);\n        // è¿™é‡Œä¸å¼ºåˆ¶æŠ¥é”™ç»™ç”¨æˆ·ï¼Œé¿å…å½±å“åˆ—è¡¨åŠ è½½\n      }\n    },\n    async loadMyViolations() {\n      // å’Œ loadMyReservations ä¸€æ ·ï¼Œå…ˆç¡®ä¿æœ‰ currentUserId\n      if (!this.currentUserId) {\n        const raw = localStorage.getItem('ssrmsUser');\n        if (raw) {\n          try {\n            const user = JSON.parse(raw);\n            this.currentUserId = user.userId ?? user.id;\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n      if (!this.currentUserId) return;\n      try {\n        // å…ˆè®©åç«¯æ›´æ–°ä¸€æ¬¡æœªç­¾åˆ°çŠ¶æ€\n        await this.refreshNoShowStatus();\n        const result = await this.$axios.get('/reservation/violations', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        const list = Array.isArray(result.data) ? result.data.slice() : [];\n\n        // è¿™é‡Œåç«¯å·²ç»æŒ‰æ—¥æœŸå€’åº + æ—¶é—´å‡åºæ’è¿‡äº†ï¼Œä¹Ÿå¯ä»¥å†æŒ‰ä½ æƒ³è¦çš„é¡ºåºæ’ä¸€æ¬¡\n        this.myViolations = list;\n        this.violationPageIndex = 1; // æ¯æ¬¡åŠ è½½å›åˆ°ç¬¬ä¸€é¡µ\n      } catch (e) {\n        console.error(e);\n        alert('åŠ è½½è¿è§„è®°å½•å¤±è´¥');\n      }\n    },\n    gotoPrevViolationPage() {\n      if (this.violationPageIndex > 1) {\n        this.violationPageIndex--;\n      }\n    },\n    gotoNextViolationPage() {\n      if (this.violationPageIndex < this.violationTotalPages) {\n        this.violationPageIndex++;\n      }\n    },\n    // åŠ è½½ä¸ªäººä¿¡æ¯\n    async loadUserProfile() {\n      // å…ˆç¡®ä¿ currentUserId æœ‰å€¼\n      if (!this.currentUserId) {\n        const raw = localStorage.getItem('ssrmsUser');\n        if (raw) {\n          try {\n            const user = JSON.parse(raw);\n            this.currentUserId = user.userId ?? user.id;\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      }\n      if (!this.currentUserId) {\n        console.warn('currentUserId ä¸ºç©ºï¼Œæ— æ³•åŠ è½½ä¸ªäººä¿¡æ¯');\n        return;\n      }\n      this.profileLoading = true;\n      try {\n        // âœ… å’Œä½ åç«¯ä¸€è‡´ï¼š@RequestParam Integer userId\n        const result = await this.$axios.get('/user/profile', {\n          params: {\n            userId: this.currentUserId\n          }\n        });\n        console.log('GET /user/profile è¿”å›ï¼š', result);\n\n        // å…¼å®¹ä¸¤ç§å†™æ³•ï¼š\n        // 1ï¼‰{ code, msg, data: { ...user } }\n        // 2ï¼‰ç›´æ¥å°±æ˜¯ { id, name, ... }ï¼ˆä¸‡ä¸€ä»¥åä½ æ”¹ Resultï¼‰\n        const u = result.data || result;\n        if (!u || !u.id) {\n          console.error('åŠ è½½ä¸ªäººä¿¡æ¯å¤±è´¥ï¼š', result.msg || 'è¿”å›æ•°æ®ä¸ºç©º');\n          return;\n        }\n\n        // å’Œå®ä½“å­—æ®µä¸€ä¸€å¯¹åº”\n        this.profileForm = {\n          name: user.userName || user.name || '',\n          account: user.accountNo || user.account || '',\n          studentNo: user.accountNo || user.studentNo || '',\n          college: user.college || '',\n          gradeClass: user.gradeClass || '',\n          phone: user.phone || '',\n          email: user.email || '',\n          commonCampus: user.commonCampus || '',\n          profileRemark: user.profileRemark || ''\n        };\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e);\n      } finally {\n        this.profileLoading = false;\n      }\n    },\n    // ä¿å­˜ä¸ªäººä¿¡æ¯\n    async handleProfileSave() {\n      if (!this.currentUserId) {\n        alert('å½“å‰ç”¨æˆ·ä¿¡æ¯ç¼ºå¤±ï¼Œè¯·é‡æ–°ç™»å½•åå†è¯•');\n        return;\n      }\n      this.profileSaving = true;\n      try {\n        const payload = {\n          id: this.currentUserId,\n          name: this.profileForm.name,\n          college: this.profileForm.college,\n          gradeClass: this.profileForm.gradeClass,\n          phone: this.profileForm.phone,\n          email: this.profileForm.email,\n          commonCampus: this.profileForm.commonCampus,\n          profileRemark: this.profileForm.profileRemark,\n          studentNo: this.profileForm.studentNo\n        };\n        const result = await this.$axios.post('/user/profile', payload);\n        if (result.code === 200) {\n          alert('ä¿å­˜æˆåŠŸ');\n\n          // é¡ºä¾¿æ›´æ–° localStorage é‡Œçš„ ssrmsUserï¼Œè®©å…¶ä»–é¡µé¢ä¹Ÿç”¨åˆ°æœ€æ–°ä¿¡æ¯\n          const raw = localStorage.getItem('ssrmsUser');\n          if (raw) {\n            try {\n              const user = JSON.parse(raw);\n              Object.assign(user, payload);\n              localStorage.setItem('ssrmsUser', JSON.stringify(user));\n            } catch (e) {\n              console.error(e);\n            }\n          }\n        } else {\n          alert(result.msg || 'ä¿å­˜å¤±è´¥');\n        }\n      } catch (e) {\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e);\n        alert('ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');\n      } finally {\n        this.profileSaving = false;\n      }\n    },\n    // å³ä¸‹è§’â€œéšæ‰‹ä¸€è¯„â€æŒ‰é’®\n    submitFB(score) {\n      // è¿™é‡Œåªæ˜¯æ¼”ç¤ºï¼šå®é™…æ¥å…¥æ¥å£æ—¶ï¼ŒæŠŠ scoreã€å½“å‰ç”¨æˆ·ã€æ—¶é—´ç­‰å‘ç»™åç«¯å³å¯\n      console.log('ç”¨æˆ·ç»™äº†ä¸€ä¸ªå¿«æ·è¯„åˆ†ï¼š', score);\n      this.openFeedback = false;\n    },\n    // æŠŠå¤©æ°”ä»£ç ç¿»è¯‘æˆä¸­æ–‡\n    codeToDesc(code) {\n      // open-meteo çš„å¤©æ°”ä»£ç å«ä¹‰å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£é‡ŒæŸ¥ï¼Œè¿™é‡Œåªåˆ—äº†ä¸€äº›å¸¸è§çš„\n      const map = {\n        0: 'æ™´',\n        1: 'å¤šäº‘',\n        2: 'å¤šäº‘',\n        3: 'é˜´',\n        45: 'æœ‰é›¾',\n        48: 'é›¾ï¼Œåœ°é¢ç»“å†°',\n        51: 'æ¯›æ¯›é›¨',\n        53: 'å°é›¨',\n        55: 'ä¸­é›¨',\n        61: 'å°é›¨',\n        63: 'ä¸­é›¨',\n        65: 'å¤§é›¨',\n        71: 'å°é›ª',\n        73: 'ä¸­é›ª',\n        75: 'å¤§é›ª',\n        95: 'é›·é˜µé›¨',\n        96: 'é›·é˜µé›¨ä¼´æœ‰å†°é›¹'\n      };\n      return map[code] || 'å¤šäº‘';\n    },\n    // æ‹‰å¤©æ°”ï¼ˆç¤ºèŒƒæ¥å£ï¼šopen-meteoï¼Œä½¿ç”¨ fetch å³å¯ï¼‰\n    async loadWeather() {\n      try {\n        const resp = await fetch('https://api.open-meteo.com/v1/forecast' + '?latitude=29.88&longitude=121.55' + '&current_weather=true');\n        const json = await resp.json();\n        const cw = json && json.current_weather || {};\n        const temp = cw.temperature;\n        const windSpeed = cw.windspeed;\n        const code = cw.weathercode;\n        const desc = this.codeToDesc(code);\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: temp != null ? temp : 18,\n          desc: desc || 'å¤šäº‘',\n          wind: windSpeed != null ? `é£é€Ÿ ${windSpeed} km/h` : 'å¾®é£'\n        };\n      } catch (e) {\n        console.warn('è¯·æ±‚å¤©æ°”å¤±è´¥ï¼Œä½¿ç”¨å…œåº•æ–‡æ¡ˆ', e);\n        this.weatherData = {\n          city: 'å®æ³¢',\n          temp: 18,\n          desc: 'å¤šäº‘',\n          wind: 'å¾®é£'\n        };\n      }\n    },\n    async loadQuoteFromDb() {\n      try {\n        const result = await this.$axios.post('/quote/random', {\n          params: {\n            excludeId: this.dailyQuoteId\n          }\n        });\n\n        // resp æ˜¯åç«¯ Resultï¼š{ code, msg, data, total }:contentReference[oaicite:6]{index=6}\n        if (resp && resp.code === 200 && resp.data) {\n          this.dailyQuote = resp.data.content || '';\n          this.dailyQuoteId = resp.data.id || null;\n          return;\n        }\n\n        // åç«¯è¿”å›å¤±è´¥\n        this.dailyQuote = 'ä»Šå¤©ä¹Ÿè¦ç¨³ä½èŠ‚å¥ï¼Œå…ˆåšä¸€å°æ­¥ã€‚';\n        this.dailyQuoteId = null;\n      } catch (e) {\n        console.warn('åŠ è½½ä»Šæ—¥æç¤ºå¤±è´¥ï¼š', e);\n        this.dailyQuote = 'ç½‘ç»œå¼€å°å·®äº†ï¼Œä½†ä½ çš„è‡ªå¾‹åˆ«æ‰çº¿ã€‚';\n        this.dailyQuoteId = null;\n      }\n    },\n    startQuoteTimer() {\n      this.stopQuoteTimer();\n      this.quoteTimer = setInterval(() => {\n        // åªæœ‰åœ¨é¦–é¡µæ—¶æ‰è½®è¯¢ï¼ˆæ›´çœè¯·æ±‚ï¼‰\n        if (this.currentPage === 'home') {\n          this.loadQuoteFromDb();\n        }\n      }, 20000);\n    },\n    stopQuoteTimer() {\n      if (this.quoteTimer) {\n        clearInterval(this.quoteTimer);\n        this.quoteTimer = null;\n      }\n    },\n    refreshQuote() {\n      // å³ä¸Šè§’â€œâ†»â€æŒ‰é’®ï¼šæ‰‹åŠ¨æ¢ä¸€å¥\n      this.loadQuoteFromDb();\n    }\n  },\n  watch: {\n    currentPage(newVal) {\n      if (newVal === 'user-reservations') {\n        this.loadMyReservations();\n      }\n      if (newVal === 'user-reserve') {\n        this.fetchSlotStatus();\n      }\n      if (newVal === 'user-violations') {\n        this.loadMyViolations();\n      }\n      if (newVal === 'user-profile') {\n        this.loadUserProfile();\n      }\n    },\n    myReservations() {\n      this.reservationPageIndex = 1;\n    }\n  }\n};","map":{"version":3,"names":["name","props","currentPage","type","String","required","emits","beforeUnmount","stopQuoteTimer","data","reserveVenues","reserveVenueIndex","dateList","visibleStart","visibleCount","currentDateIndex","timeSlots","disabledSlotIds","selectedSlots","onlyShowAvailable","roomIds","currentUserId","myReservations","pageSize","reservationPageIndex","myViolations","violationPageIndex","violationPageSize","profileForm","account","studentNo","college","gradeClass","phone","email","commonCampus","profileRemark","profileLoading","profileSaving","weatherData","dailyQuote","dailyQuoteId","quoteTimer","openFeedback","homeNotices","id","title","date","level","levelText","target","emojiWeather","desc","includes","computed","visibleDates","slice","map","d","idx","index","canMovePrev","canMoveNext","length","currentVenueName","currentDateLabel","cur","fullLabel","filteredTimeSlots","filter","slot","slotState","currentRoomId","currentDateStr","totalPages","Math","ceil","pagedReservations","total","page","min","start","end","violationTotalPages","pagedViolations","todayStr","Date","getMonth","getDate","weekDayStr","list","getDay","timeGreeting","h","getHours","todayAppointments","Array","isArray","toISOString","item","created","buildTimeSlots","initDates","raw","localStorage","getItem","user","JSON","parse","console","log","userId","loadUserProfile","e","error","warn","fetchSlotStatus","loadWeather","loadQuoteFromDb","startQuoteTimer","methods","emitChange","$emit","handleVenueClick","startHour","endHour","next","range","toString","padStart","label","push","today","weekdays","i","setDate","month","day","getFullYear","key","year","weekday","monthLabel","isToday","isTomorrow","moveDates","direction","selectDate","buildKey","dateIndex","slotId","exists","some","slotClass","state","toggleSlot","findIndex","splice","alert","dateInfo","dateLabel","removeSelected","resetSelections","submitReservations","slotIds","Number","result","$axios","post","roomId","get","params","dto","loadMyReservations","refreshNoShowStatus","sort","a","b","da","db","localeCompare","ta","startTime","tb","formatTimeRange","s","endTime","renderStatusText","status","statusClass","gotoPrevPage","gotoNextPage","handleCheckIn","code","msg","handleCancel","canCancel","ok","window","confirm","startStr","isNaN","getTime","now","diffMs","tenMinutes","updated","loadMyViolations","gotoPrevViolationPage","gotoNextViolationPage","u","userName","accountNo","handleProfileSave","payload","Object","assign","setItem","stringify","submitFB","score","codeToDesc","resp","fetch","json","cw","current_weather","temp","temperature","windSpeed","windspeed","weathercode","city","wind","excludeId","content","setInterval","clearInterval","refreshQuote","watch","newVal"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\UserHome.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <!-- é¦–é¡µ -->\r\n    <div v-if=\"currentPage === 'home'\" class=\"home-wrapper\">\r\n      <div class=\"card home-card\">\r\n        <!-- é¡¶éƒ¨ï¼šæ¬¢è¿ + å³ä¸Šè§’å¤©æ°”å°å¡ç‰‡ -->\r\n        <div class=\"home-top home-head\">\r\n          <div class=\"home-intro\">\r\n            <h2 class=\"page-title\">{{ timeGreeting }}ï¼Œæ¬¢è¿ä½¿ç”¨è‡ªä¹ å®¤é¢„çº¦ç³»ç»Ÿï¼ˆå­¦ç”Ÿç«¯ï¼‰</h2>\r\n            <p class=\"page-subtitle\">\r\n              ä»Šå¤©æ˜¯ {{ todayStr }} Â· {{ weekDayStr }}ã€‚ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹è‡ªä¹ å®¤å¼€æ”¾æƒ…å†µã€é¢„çº¦åº§ä½ã€æŸ¥çœ‹è‡ªå·±çš„é¢„çº¦è®°å½•ä»¥åŠè¿è§„çŠ¶æ€ç­‰ã€‚\r\n            </p>\r\n          </div>\r\n\r\n          <!-- å³ä¸Šè§’å¤©æ°”è¿·ä½ å¡ç‰‡ -->\r\n          <div v-if=\"weatherData\" class=\"weather-mini\">\r\n            <div class=\"weather-main\">\r\n              <span class=\"weather-icon\">{{ emojiWeather(weatherData.desc) }}</span>\r\n              <span class=\"weather-temp\">{{ weatherData.temp }}Â°C</span>\r\n            </div>\r\n            <div class=\"weather-desc\">\r\n              {{ weatherData.city }} Â· {{ weatherData.desc }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ä¸­éƒ¨å¸ƒå±€ï¼šæŒ‰è¡Œæ’åˆ— -->\r\n        <div class=\"home-main-grid\">\r\n          <!-- ç¬¬ä¸€è¡Œï¼šä»Šæ—¥æç¤ºï¼ˆæ•´è¡Œï¼Œå±…ä¸­ï¼‰ -->\r\n          <div class=\"home-row\">\r\n            <div class=\"quote-card\" v-if=\"dailyQuote\">\r\n              <!-- å³ä¸Šè§’åˆ·æ–°æŒ‰é’® -->\r\n              <button\r\n                  type=\"button\"\r\n                  class=\"quote-refresh-btn\"\r\n                  title=\"æ¢ä¸€å¥\"\r\n                  @click=\"refreshQuote\"\r\n              >\r\n                â†»\r\n              </button>\r\n\r\n              <div class=\"quote-header\">\r\n                <span class=\"quote-icon-inline\">ğŸ’¡</span>\r\n                <span class=\"quote-label\">ä»Šæ—¥æç¤º</span>\r\n              </div>\r\n\r\n              <div class=\"quote-content\">\r\n                <div class=\"quote-text\">{{ dailyQuote }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- ç¬¬äºŒè¡Œï¼šä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µï¼ˆå·¦ï¼‰ + æœ¬æœˆå­¦ä¹ ç®€æŠ¥ï¼ˆå³ï¼‰ -->\r\n          <div class=\"home-row-two\">\r\n            <!-- å·¦ï¼šä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µ -->\r\n            <div class=\"home-panel home-overview\">\r\n              <div class=\"home-panel-header\">\r\n                <div class=\"home-panel-title\">ä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µ</div>\r\n              </div>\r\n              <div class=\"home-panel-body home-overview-body\">\r\n                <div class=\"home-overview-line\">\r\n                  <div class=\"home-panel-number\">180 ä¸ªåº§ä½</div>\r\n                  <div class=\"home-panel-desc\">\r\n                    å·²é¢„çº¦ 72 Â· æ­£åœ¨ä½¿ç”¨ 58 Â· å‰©ä½™ 50\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- å³ï¼šæœ¬æœˆå­¦ä¹ ç®€æŠ¥ -->\r\n            <div class=\"month-report\">\r\n              <div class=\"report-title\">æœ¬æœˆå­¦ä¹ ç®€æŠ¥</div>\r\n              <div class=\"report-row\">\r\n                <span>æœ¬æœˆç´¯è®¡é¢„çº¦</span>\r\n                <span><strong>12</strong> æ¬¡</span>\r\n              </div>\r\n              <div class=\"report-row\">\r\n                <span>æœ¬æœˆç´¯è®¡è‡ªä¹ æ—¶é•¿</span>\r\n                <span><strong>28</strong> å°æ—¶</span>\r\n              </div>\r\n              <div class=\"report-row\">\r\n                <span>æœ€è¿‘ä¸€æ¬¡åˆ°é¦†</span>\r\n                <span>æ˜¨å¤© 19:10</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- ç¬¬ä¸‰è¡Œï¼šå…¬å‘Š / é€šçŸ¥ï¼ˆæ•´è¡Œï¼‰ -->\r\n          <div class=\"home-row\">\r\n            <div class=\"home-panel notice-panel\">\r\n              <div class=\"home-panel-header\">\r\n                <div class=\"home-panel-title\">å…¬å‘Š / é€šçŸ¥</div>\r\n                <button type=\"button\" class=\"notice-more-btn\">æŸ¥çœ‹å…¨éƒ¨</button>\r\n              </div>\r\n\r\n              <ul class=\"notice-list\">\r\n                <li\r\n                    v-for=\"item in homeNotices\"\r\n                    :key=\"item.id\"\r\n                    class=\"notice-item\"\r\n                >\r\n                  <div\r\n                      class=\"notice-tag\"\r\n                      :class=\"'notice-level-' + item.level\"\r\n                  >\r\n                    {{ item.levelText }}\r\n                  </div>\r\n                  <div class=\"notice-main\">\r\n                    <div\r\n                        class=\"notice-title\"\r\n                        :title=\"item.title\"\r\n                    >\r\n                      {{ item.title }}\r\n                    </div>\r\n                    <div class=\"notice-meta\">\r\n                      {{ item.date }} Â· {{ item.target }}\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- ç¬¬å››è¡Œï¼šæˆ‘çš„ä»Šæ—¥é¢„çº¦ï¼ˆæ•´è¡Œï¼‰ -->\r\n          <div class=\"home-row\">\r\n            <div class=\"home-panel my-today-card\">\r\n              <div class=\"home-panel-header\">\r\n                <div class=\"home-panel-title\">æˆ‘çš„ä»Šæ—¥é¢„çº¦</div>\r\n                <div\r\n                    class=\"home-panel-subtitle\"\r\n                    v-if=\"todayAppointments.length\"\r\n                >\r\n                  ä»Šæ—¥å…± {{ todayAppointments.length }} åœºè‡ªä¹ å®‰æ’\r\n                </div>\r\n                <div\r\n                    class=\"home-panel-subtitle\"\r\n                    v-else\r\n                >\r\n                  ä»Šæ—¥æš‚æ— é¢„çº¦ï¼Œå¯ä»¥å®‰æ’ä¸€åœºé«˜æ•ˆè‡ªä¹ ï½\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"home-panel-body my-today-body\">\r\n                <!-- æœ‰é¢„çº¦æ—¶ï¼Œå±•ç¤ºå‰ 3 æ¡ -->\r\n                <template v-if=\"todayAppointments.length\">\r\n                  <div\r\n                      v-for=\"(item, idx) in todayAppointments.slice(0, 3)\"\r\n                      :key=\"idx\"\r\n                      class=\"today-item\"\r\n                  >\r\n                    <div class=\"today-left\">\r\n                      <div class=\"today-time\">{{ formatTimeRange(item) }}</div>\r\n                      <div class=\"today-room\">\r\n                        {{ item.roomFullName || item.roomName || 'è‡ªä¹ å®¤' }}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <span class=\"badge\" :class=\"statusClass(item.status)\">\r\n              {{ renderStatusText(item.status) }}\r\n            </span>\r\n                  </div>\r\n                </template>\r\n\r\n                <!-- æ²¡é¢„çº¦æ—¶çš„æ–‡æ¡ˆ -->\r\n                <div\r\n                    v-else\r\n                    class=\"today-empty\"\r\n                >\r\n                  å½“å‰è¿˜æ²¡æœ‰é¢„çº¦ï¼Œå·¦ä¾§å¯¼èˆªæ ä¸­çš„â€œåº§ä½é¢„çº¦â€å¯ä»¥å¿«é€Ÿåˆ›å»ºæ–°çš„é¢„çº¦ã€‚\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- å³ä¸‹è§’â€œéšæ‰‹ä¸€è¯„â€æµ®å±‚ -->\r\n      <transition name=\"fade\">\r\n        <div v-if=\"openFeedback\" class=\"feedback-float\">\r\n          <div class=\"feedback-panel\">\r\n            <div class=\"feedback-title\">ä»Šå¤©çš„è‡ªä¹ æ°›å›´å¦‚ä½•ï¼Ÿ</div>\r\n            <div class=\"feedback-emojis\">\r\n              <span @click=\"submitFB(1)\">ğŸ˜£</span>\r\n              <span @click=\"submitFB(2)\">ğŸ˜•</span>\r\n              <span @click=\"submitFB(3)\">ğŸ™‚</span>\r\n              <span @click=\"submitFB(4)\">ğŸ˜Š</span>\r\n              <span @click=\"submitFB(5)\">ğŸ¤©</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n      <div class=\"feedback-float\" v-if=\"!openFeedback\">\r\n        <div class=\"feedback-btn\" @click=\"openFeedback = true\">\r\n          è¯„ä»·\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æˆ‘è¦é¢„çº¦é¡µé¢ï¼ˆç¾åŒ–ç‰ˆï¼‰ -->\r\n    <div v-else-if=\"currentPage === 'user-reserve'\">\r\n      <div class=\"card reserve-card\">\r\n        <!-- é¡¶éƒ¨ï¼šæ ‡é¢˜ + å½“å‰é€‰æ‹©æ¦‚è§ˆ -->\r\n        <div class=\"reserve-header-row\">\r\n          <div class=\"reserve-header-left\">\r\n            <h2 class=\"page-title\">æˆ‘è¦é¢„çº¦</h2>\r\n            <p class=\"page-subtitle\">\r\n              é€‰æ‹©è‡ªä¹ å®¤ã€æ—¥æœŸå’Œæ—¶é—´æ®µè¿›è¡Œé¢„çº¦ï¼Œç‚¹å‡»å¡ç‰‡é€‰æ‹© / å–æ¶ˆï¼Œæœ€å¤šå¯åŒæ—¶é€‰æ‹© 4 ä¸ªæ—¶æ®µã€‚\r\n            </p>\r\n          </div>\r\n\r\n          <!-- å³ä¾§ï¼šå½“å‰é€‰æ‹©æ¦‚è¦ -->\r\n          <div class=\"reserve-summary-box\">\r\n            <div class=\"summary-title\">å½“å‰é€‰æ‹©</div>\r\n            <div class=\"summary-main\">\r\n              <div class=\"summary-row\">\r\n                <span class=\"summary-label\">åœºåœ°</span>\r\n                <span class=\"summary-value\">\r\n              {{ currentVenueName }}\r\n            </span>\r\n              </div>\r\n              <div class=\"summary-row\">\r\n                <span class=\"summary-label\">æ—¥æœŸ</span>\r\n                <span class=\"summary-value\">\r\n              {{ currentDateLabel || 'è¯·é€‰æ‹©æ—¥æœŸ' }}\r\n            </span>\r\n              </div>\r\n              <div class=\"summary-row\">\r\n                <span class=\"summary-label\">æ—¶æ®µ</span>\r\n                <span\r\n                    class=\"summary-value\"\r\n                    v-if=\"selectedSlots.length\"\r\n                >\r\n              å·²é€‰ {{ selectedSlots.length }} / 4 ä¸ª\r\n            </span>\r\n                <span\r\n                    class=\"summary-value summary-empty\"\r\n                    v-else\r\n                >\r\n              å°šæœªé€‰æ‹©\r\n            </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- åœºåœ°é€‰æ‹© + â€œåªçœ‹å¯é¢„çº¦â€å¼€å…³ -->\r\n        <div class=\"reserve-toolbar\">\r\n          <div class=\"venue-tabs\">\r\n            <button\r\n                v-for=\"(venue, index) in reserveVenues\"\r\n                :key=\"venue\"\r\n                type=\"button\"\r\n                class=\"venue-tab\"\r\n                :class=\"{ active: reserveVenueIndex === index }\"\r\n                @click=\"handleVenueClick(index)\"\r\n            >\r\n              {{ venue }}\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"reserve-toolbar-right\">\r\n            <span class=\"switch-label\">åªçœ‹å¯é¢„çº¦æ—¶æ®µ</span>\r\n            <!-- Element Plus çš„å¼€å…³ç»„ä»¶ -->\r\n            <el-switch\r\n                v-model=\"onlyShowAvailable\"\r\n                size=\"small\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- æ—¥æœŸæ¡ -->\r\n        <div class=\"date-strip\">\r\n          <button\r\n              class=\"date-arrow\"\r\n              type=\"button\"\r\n              @click=\"moveDates('prev')\"\r\n              :disabled=\"!canMovePrev\"\r\n          >\r\n            â€¹\r\n          </button>\r\n\r\n          <div class=\"date-list\">\r\n            <button\r\n                v-for=\"d in visibleDates\"\r\n                :key=\"d.key\"\r\n                type=\"button\"\r\n                class=\"date-item\"\r\n                :class=\"{ active: currentDateIndex === d.index }\"\r\n                @click=\"selectDate(d.index)\"\r\n            >\r\n              <div class=\"date-month\">{{ d.monthLabel }}</div>\r\n              <div class=\"date-day-row\">\r\n                <span class=\"date-day-number\">{{ d.day }}</span>\r\n                <span class=\"date-weekday\">{{ d.weekday }}</span>\r\n              </div>\r\n              <div class=\"date-extra\" v-if=\"d.isToday\">ä»Šå¤©</div>\r\n              <div class=\"date-extra\" v-else-if=\"d.isTomorrow\">æ˜å¤©</div>\r\n            </button>\r\n          </div>\r\n\r\n          <button\r\n              class=\"date-arrow\"\r\n              type=\"button\"\r\n              @click=\"moveDates('next')\"\r\n              :disabled=\"!canMoveNext\"\r\n          >\r\n            â€º\r\n          </button>\r\n        </div>\r\n\r\n        <!-- æ—¶é—´æ®µé€‰æ‹©åŒºåŸŸ -->\r\n        <div class=\"slot-section\">\r\n          <div class=\"slot-header\">\r\n            <div class=\"slot-title\">é€‰æ‹©æ—¶é—´æ®µ</div>\r\n            <div class=\"slot-legend\">\r\n          <span class=\"legend-item\">\r\n            <span class=\"legend-dot legend-available\"></span>å¯é¢„çº¦\r\n          </span>\r\n              <span class=\"legend-item\">\r\n            <span class=\"legend-dot legend-selected\"></span>å·²é€‰\r\n          </span>\r\n              <span class=\"legend-item\">\r\n            <span class=\"legend-dot legend-disabled\"></span>ä¸å¯é¢„çº¦\r\n          </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"slot-grid\">\r\n            <button\r\n                v-for=\"slot in filteredTimeSlots\"\r\n                :key=\"slot.id\"\r\n                type=\"button\"\r\n                class=\"slot-item\"\r\n                :class=\"slotClass(slot)\"\r\n                :disabled=\"slotState(slot) === 'disabled'\"\r\n                @click=\"toggleSlot(slot)\"\r\n            >\r\n              <span class=\"slot-time\">{{ slot.label }}</span>\r\n              <span class=\"slot-range\">{{ slot.range }}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- å·²é€‰æ—¶æ®µ + æäº¤åŒºåŸŸ -->\r\n        <div class=\"reserve-bottom\">\r\n          <div class=\"selected-tags\" v-if=\"selectedSlots.length\">\r\n            <div\r\n                v-for=\"item in selectedSlots\"\r\n                :key=\"item.key\"\r\n                class=\"selected-tag\"\r\n            >\r\n          <span class=\"selected-tag-text\">\r\n            {{ item.dateLabel }} Â· {{ currentVenueName }} Â· {{ item.slot.range }}\r\n          </span>\r\n              <button\r\n                  type=\"button\"\r\n                  class=\"selected-tag-close\"\r\n                  @click=\"removeSelected(item.key)\"\r\n              >\r\n                Ã—\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"reserve-actions\">\r\n            <button\r\n                type=\"button\"\r\n                class=\"link-btn\"\r\n                v-if=\"selectedSlots.length\"\r\n                @click=\"resetSelections\"\r\n            >\r\n              æ¸…ç©ºé€‰æ‹©\r\n            </button>\r\n\r\n            <button\r\n                type=\"button\"\r\n                class=\"primary-btn reserve-btn\"\r\n                :disabled=\"!selectedSlots.length\"\r\n                @click=\"submitReservations\"\r\n            >\r\n              ç¡®è®¤é¢„çº¦\r\n            </button>\r\n          </div>\r\n\r\n          <p class=\"hint-text\">\r\n            ç‚¹å‡»â€œç¡®è®¤é¢„çº¦â€åä¼šå¼¹å‡ºå½“å‰é€‰æ‹©çš„æ—¶æ®µï¼Œå¹¶è·³è½¬åˆ°â€œæˆ‘çš„é¢„çº¦â€ã€‚\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æˆ‘çš„é¢„çº¦ -->\r\n    <div v-else-if=\"currentPage === 'user-reservations'\">\r\n      <div class=\"card card-reservations\">\r\n        <h2 class=\"page-title\">é¢„çº¦ä¸ç­¾åˆ°ç­¾é€€</h2>\r\n        <div class=\"table-wrapper\">\r\n          <table class=\"table\">\r\n            <thead>\r\n            <tr>\r\n              <th>é¢„çº¦ç¼–å·</th>\r\n              <th>è‡ªä¹ å®¤</th>\r\n              <th>æ—¥æœŸ</th>\r\n              <th>æ—¶é—´æ®µ</th>\r\n              <th>åº§ä½å·</th>\r\n              <th>çŠ¶æ€</th>\r\n              <th style=\"text-align: right;\">æ“ä½œ</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr\r\n                v-for=\"item in pagedReservations\"\r\n                :key=\"item.id\"\r\n            >\r\n              <td>{{ item.reservationNo }}</td>\r\n              <td>{{ item.roomName }}</td>\r\n              <td>{{ item.date }}</td>\r\n              <td>{{ formatTimeRange(item) }}</td>\r\n              <td>{{ item.seatLabel || '-' }}</td>\r\n              <td>\r\n      <span\r\n          class=\"badge\"\r\n          :class=\"statusClass(item.status)\"\r\n      >\r\n        {{ renderStatusText(item.status) }}\r\n      </span>\r\n              </td>\r\n              <td class=\"text-right\">\r\n                <!-- å¾…ç­¾åˆ°ï¼šå¯ä»¥â€œç­¾åˆ° / å–æ¶ˆâ€ -->\r\n                <template v-if=\"item.status === 'reserved'\">\r\n                  <button\r\n                      class=\"link-btn\"\r\n                      type=\"button\"\r\n                      @click=\"handleCheckIn(item)\"\r\n                  >\r\n                    ç­¾åˆ°\r\n                  </button>\r\n                  <button\r\n                      class=\"link-btn link-danger\"\r\n                      type=\"button\"\r\n                      :disabled=\"!canCancel(item)\"\r\n                      @click=\"handleCancel(item)\"\r\n                  >\r\n                    å–æ¶ˆ\r\n                  </button>\r\n                </template>\r\n\r\n                <!-- å·²ç­¾åˆ° / è¿Ÿåˆ° -->\r\n                <button\r\n                    class=\"link-btn\"\r\n                    v-else-if=\"item.status === 'checked_in' || item.status === 'late'\"\r\n                    type=\"button\"\r\n                    disabled\r\n                >\r\n                  å·²ç­¾åˆ°\r\n                </button>\r\n\r\n                <!-- æœªç­¾åˆ° -->\r\n                <button\r\n                    class=\"link-btn\"\r\n                    v-else-if=\"item.status === 'no_show'\"\r\n                    type=\"button\"\r\n                    disabled\r\n                >\r\n                  å·²è¿‡æœŸ\r\n                </button>\r\n\r\n                <!-- å·²å–æ¶ˆ / é€¾æœŸå–æ¶ˆï¼ˆéƒ½ä¸å¯å†æ“ä½œï¼‰ -->\r\n                <button\r\n                    class=\"link-btn\"\r\n                    v-else-if=\"item.status === 'cancelled' || item.status === 'cancel_overdue'\"\r\n                    type=\"button\"\r\n                    disabled\r\n                >\r\n                  ä¸å¯æ“ä½œ\r\n                </button>\r\n              </td>\r\n            </tr>\r\n            <!-- æ²¡æœ‰ä»»ä½•é¢„çº¦æ—¶çš„å ä½è¡Œ -->\r\n            <tr v-if=\"!myReservations.length\">\r\n              <td colspan=\"7\" style=\"text-align: center; color: #9ca3af; padding: 16px 0;\">\r\n                æš‚æ— é¢„çº¦è®°å½•\r\n              </td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <!-- â­ åˆ†é¡µæ¡ï¼šåªæœ‰å½“æ€»æ•° > 15 æ—¶æ‰å‡ºç° -->\r\n        <div class=\"pager\" v-if=\"totalPages > 1\">\r\n          <!-- ä¸Šä¸€é¡µ -->\r\n          <button\r\n              type=\"button\"\r\n              class=\"pager-btn\"\r\n              :class=\"{ 'pager-btn-disabled': reservationPageIndex <= 1 }\"\r\n              :disabled=\"reservationPageIndex <= 1\"\r\n              @click=\"gotoPrevPage\"\r\n          >\r\n            ä¸Šä¸€é¡µ\r\n          </button>\r\n\r\n          <!-- ä¸­é—´é¡µç  -->\r\n          <div class=\"pager-center\">\r\n            ç¬¬ {{ reservationPageIndex }} / {{ totalPages }} é¡µ\r\n          </div>\r\n\r\n          <!-- ä¸‹ä¸€é¡µ -->\r\n          <button\r\n              type=\"button\"\r\n              class=\"pager-btn\"\r\n              :class=\"{ 'pager-btn-disabled': reservationPageIndex >= totalPages }\"\r\n              :disabled=\"reservationPageIndex >= totalPages\"\r\n              @click=\"gotoNextPage\"\r\n          >\r\n            ä¸‹ä¸€é¡µ\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è¿è§„è®°å½• -->\r\n    <div v-else-if=\"currentPage === 'user-violations'\">\r\n      <div class=\"card\">\r\n        <h2 class=\"page-title\">è¿è§„è®°å½•ä¸ä¿¡ç”¨åˆ†</h2>\r\n        <p class=\"page-subtitle\">\r\n          ä¿¡ç”¨åˆ†ä» 100 å¼€å§‹ï¼Œæœªç­¾åˆ°ã€è¿Ÿåˆ°ç­‰è¡Œä¸ºä¼šæ‰£åˆ†ã€‚\r\n        </p>\r\n\r\n        <div class=\"credit-summary\">\r\n          <div class=\"credit-score\">\r\n            å½“å‰ä¿¡ç”¨åˆ†ï¼š\r\n            <span class=\"score-number\">\r\n          {{ 100 + (myViolations || []).reduce((sum, v) => sum + (v.penaltyScore || 0), 0) }}\r\n        </span>\r\n          </div>\r\n          <p class=\"hint-text\">\r\n            ä¿¡ç”¨åˆ†ä½äº 60 å¯èƒ½ä¼šè¢«åˆ—å…¥é»‘åå•ï¼Œä¸€æ®µæ—¶é—´å†…æ— æ³•é¢„çº¦ã€‚\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"table-wrapper\">\r\n          <table class=\"table\">\r\n            <thead>\r\n            <tr>\r\n              <th>æ—¥æœŸ</th>\r\n              <th>è‡ªä¹ å®¤</th>\r\n              <th>è¿è§„ç±»å‹</th>\r\n              <th>æ‰£åˆ†</th>\r\n              <th>å¤‡æ³¨</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr v-if=\"!pagedViolations.length\">\r\n              <td colspan=\"5\" style=\"text-align: center; color: #999;\">\r\n                æš‚æ— è¿è§„è®°å½•\r\n              </td>\r\n            </tr>\r\n            <tr v-for=\"item in pagedViolations\" :key=\"item.reservationId\">\r\n              <td>{{ item.date }}</td>\r\n              <td>{{ item.roomFullName }}</td>\r\n              <td>{{ item.violationType }}</td>\r\n              <td>{{ item.penaltyScore }}</td>\r\n              <td>{{ item.remark }}</td>\r\n            </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <!-- åˆ†é¡µå™¨ -->\r\n        <div class=\"pager\" v-if=\"violationTotalPages > 1\">\r\n          <!-- ä¸Šä¸€é¡µ -->\r\n          <button\r\n              type=\"button\"\r\n              class=\"pager-btn\"\r\n              :class=\"{ 'pager-btn-disabled': violationPageIndex <= 1 }\"\r\n              :disabled=\"violationPageIndex <= 1\"\r\n              @click=\"gotoPrevViolationPage\"\r\n          >\r\n            ä¸Šä¸€é¡µ\r\n          </button>\r\n\r\n          <div class=\"pager-center\">\r\n            ç¬¬ {{ violationPageIndex }} / {{ violationTotalPages }} é¡µ\r\n          </div>\r\n\r\n          <!-- ä¸‹ä¸€é¡µ -->\r\n          <button\r\n              type=\"button\"\r\n              class=\"pager-btn\"\r\n              :class=\"{ 'pager-btn-disabled': violationPageIndex >= violationTotalPages }\"\r\n              :disabled=\"violationPageIndex >= violationTotalPages\"\r\n              @click=\"gotoNextViolationPage\"\r\n          >\r\n            ä¸‹ä¸€é¡µ\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è¯„ä»·ä¸æŠ•è¯‰ -->\r\n    <div v-else-if=\"currentPage === 'user-feedback'\">\r\n      <div class=\"card\">\r\n        <h2 class=\"page-title\">è¯„ä»·ä¸æŠ•è¯‰</h2>\r\n        <p class=\"page-subtitle\">\r\n          å¯ä»¥å¯¹è‡ªä¹ ç¯å¢ƒã€è§„åˆ™æ‰§è¡Œæƒ…å†µè¿›è¡Œè¯„ä»·ï¼Œä¹Ÿå¯ä»¥æäº¤æŠ•è¯‰ä¿¡æ¯ï¼ˆç¤ºæ„è¡¨å•ï¼‰ã€‚\r\n        </p>\r\n\r\n        <div class=\"feedback-grid\">\r\n          <div class=\"feedback-column\">\r\n            <h3 class=\"section-title\">å¿«é€Ÿè¯„ä»·</h3>\r\n            <textarea\r\n                class=\"textarea\"\r\n                rows=\"4\"\r\n                placeholder=\"ä¾‹å¦‚ï¼šç¯å¢ƒå®‰é™ã€å«ç”Ÿè‰¯å¥½ã€ç®¡ç†å‘˜æœåŠ¡æ€åº¦ä¸é”™ç­‰ã€‚\"\r\n            ></textarea>\r\n            <button class=\"primary-btn\">æäº¤è¯„ä»·</button>\r\n          </div>\r\n          <div class=\"feedback-column\">\r\n            <h3 class=\"section-title\">æŠ•è¯‰ / å»ºè®®</h3>\r\n            <textarea\r\n                class=\"textarea\"\r\n                rows=\"4\"\r\n                placeholder=\"è¯·è¯¦ç»†æè¿°é—®é¢˜ï¼šå‘ç”Ÿæ—¶é—´ã€åœ°ç‚¹ã€æ¶‰åŠäººå‘˜ã€å…·ä½“æƒ…å†µç­‰ï¼Œä»¥ä¾¿ç®¡ç†å‘˜è·Ÿè¿›å¤„ç†ã€‚\"\r\n            ></textarea>\r\n            <button class=\"primary-btn\">æäº¤æŠ•è¯‰</button>\r\n          </div>\r\n        </div>\r\n\r\n        <p class=\"hint-text\">\r\n          ç¤ºä¾‹é¡µé¢ä¸ä¼šçœŸæ­£å‘é€æ•°æ®åˆ°åç«¯ï¼Œæ¥å…¥æ¥å£åï¼ŒæŒ‰é’®å¯è§¦å‘å®é™…æäº¤é€»è¾‘ã€‚\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ä¸ªäººä¸­å¿ƒ -->\r\n    <div v-else-if=\"currentPage === 'user-profile'\">\r\n      <div class=\"card full-page-card\">\r\n        <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->\r\n        <div class=\"user-header-section\">\r\n          <div class=\"user-info-header\">\r\n            <div class=\"user-info-left\">\r\n              <div class=\"user-profile-info\">\r\n                <!-- è¿™é‡Œæ˜¾ç¤ºåç«¯æ¥çš„å§“åï¼Œæ²¡æœ‰å°±å…ˆå«â€œåŒå­¦â€ -->\r\n                <h2 class=\"user-name\">\r\n                  {{ profileForm.name || 'åŒå­¦' }}\r\n                </h2>\r\n                <span class=\"user-role\">å­¦ç”Ÿ</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"header-actions\">\r\n              <!-- é¢„ç•™é€€å‡ºç™»å½•æŒ‰é’® -->\r\n              <!-- <button class=\"logout-btn\">é€€å‡ºç™»å½•</button> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ä¸ªäººä¿¡æ¯è¡¨å• -->\r\n        <div class=\"profile-content\">\r\n          <!-- ä¸ªäººä¿¡æ¯æ¨¡å— -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">ä¸ªäººä¿¡æ¯</h3>\r\n\r\n            <div class=\"form-group\">\r\n              <div class=\"form-grid\">\r\n                <!-- å·¦è¾¹ï¼šå§“å -->\r\n                <div class=\"form-item\">\r\n                  <label>å§“å:</label>\r\n                  <input\r\n                      type=\"text\"\r\n                      v-model=\"profileForm.name\"\r\n                  />\r\n                </div>\r\n                <!-- å³è¾¹ï¼šå­¦å·ï¼ˆstudent_noï¼‰ -->\r\n                <div class=\"form-item\">\r\n                  <label>å­¦å·:</label>\r\n                  <input\r\n                      type=\"text\"\r\n                      v-model=\"profileForm.studentNo\"\r\n                  />\r\n                </div>\r\n                <div class=\"form-item\">\r\n                  <label>å­¦é™¢:</label>\r\n                  <select v-model=\"profileForm.college\">\r\n                    <option value=\"\">è¯·é€‰æ‹©å­¦é™¢</option>\r\n                    <option value=\"è®¡ç®—æœºå­¦é™¢\">è®¡ç®—æœºå­¦é™¢</option>\r\n                    <option value=\"ä¿¡æ¯å·¥ç¨‹å­¦é™¢\">ä¿¡æ¯å·¥ç¨‹å­¦é™¢</option>\r\n                    <option value=\"å•†å­¦é™¢\">å•†å­¦é™¢</option>\r\n                    <option value=\"æ³•å­¦é™¢\">æ³•å­¦é™¢</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"form-item\">\r\n                  <label>å¹´çº§ä¸ç­çº§:</label>\r\n                  <input\r\n                      type=\"text\"\r\n                      v-model=\"profileForm.gradeClass\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- è”ç³»æ–¹å¼æ¨¡å— -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">è”ç³»æ–¹å¼</h3>\r\n\r\n            <div class=\"form-grid\">\r\n              <div class=\"form-item\">\r\n                <label>æ‰‹æœºå·:</label>\r\n                <div class=\"input-with-action\">\r\n                  <input\r\n                      type=\"text\"\r\n                      v-model=\"profileForm.phone\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div class=\"form-item\">\r\n                <label>é‚®ç®±:</label>\r\n                <div class=\"input-with-action\">\r\n                  <input\r\n                      type=\"email\"\r\n                      v-model=\"profileForm.email\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- åå¥½è®¾ç½®æ¨¡å— -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">åå¥½è®¾ç½®</h3>\r\n\r\n            <div class=\"form-grid\">\r\n              <div class=\"form-item\">\r\n                <label>å¸¸ç”¨æ ¡åŒº:</label>\r\n                <div class=\"radio-group\">\r\n                  <label class=\"radio-option\">\r\n                    <input\r\n                        type=\"radio\"\r\n                        value=\"æœ¬éƒ¨æ ¡åŒº\"\r\n                        v-model=\"profileForm.commonCampus\"\r\n                    />\r\n                    <span class=\"radio-label\">æœ¬éƒ¨æ ¡åŒº</span>\r\n                  </label>\r\n                  <label class=\"radio-option\">\r\n                    <input\r\n                        type=\"radio\"\r\n                        value=\"ä¸œæ ¡åŒº\"\r\n                        v-model=\"profileForm.commonCampus\"\r\n                    />\r\n                    <span class=\"radio-label\">ä¸œæ ¡åŒº</span>\r\n                  </label>\r\n                  <label class=\"radio-option\">\r\n                    <input\r\n                        type=\"radio\"\r\n                        value=\"æ¢…å±±æ ¡åŒº\"\r\n                        v-model=\"profileForm.commonCampus\"\r\n                    />\r\n                    <span class=\"radio-label\">æ¢…å±±æ ¡åŒº</span>\r\n                  </label>\r\n                </div>\r\n              </div>\r\n              <div class=\"form-item full-width\">\r\n                <label>å¤‡æ³¨ä¿¡æ¯:</label>\r\n                <textarea\r\n                    placeholder=\"ä¾‹å¦‚ï¼šåå¥½å›¾ä¹¦é¦†ã€æ™šä¸Šæ—¶æ®µè¾ƒå¤šã€ä¸æ“…é•¿é«˜æ•°ç­‰\"\r\n                    v-model=\"profileForm.profileRemark\"\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- æ“ä½œæŒ‰é’® -->\r\n          <div class=\"profile-actions\">\r\n            <button\r\n                class=\"primary-btn\"\r\n                type=\"button\"\r\n                @click=\"handleProfileSave\"\r\n                :disabled=\"profileSaving\"\r\n            >\r\n              {{ profileSaving ? 'ä¿å­˜ä¸­â€¦' : 'ä¿å­˜ä¿¡æ¯' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'AppHome',\r\n  props: {\r\n    currentPage: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  emits: ['change-page'],\r\n  beforeUnmount () {\r\n    this.stopQuoteTimer()\r\n  },\r\n  data () {\r\n    return {\r\n      // åœºåœ°ï¼ˆåœ°ç‚¹ï¼‰åˆ—è¡¨\r\n      reserveVenues: ['æœ¬éƒ¨ Â· å›¾ä¹¦é¦† 301', 'æœ¬éƒ¨ Â· å›¾ä¹¦é¦† 401', 'ä¸œæ ¡åŒº Â· æ•™å­¦æ¥¼ 3 æ¥¼'],\r\n      reserveVenueIndex: 0,\r\n\r\n      // æ—¥æœŸç›¸å…³\r\n      dateList: [],\r\n      visibleStart: 0,\r\n      visibleCount: 7, // ä¸€å±å±•ç¤ºå¤šå°‘å¤©\r\n      currentDateIndex: 0,\r\n\r\n      // æ—¶é—´æ®µåˆ—è¡¨ï¼ˆ0 ç‚¹~24 ç‚¹ï¼‰\r\n      timeSlots: [],\r\n\r\n      // åç«¯è¿”å›çš„â€œå·²æ»¡æ—¶æ®µâ€ï¼ˆid åˆ—è¡¨ï¼Œä¾‹å¦‚ [8,9,14]ï¼‰\r\n      disabledSlotIds: [],\r\n\r\n      // å·²é€‰æ—¶æ®µï¼ˆæœ€å¤š 4 ä¸ªï¼‰\r\n      selectedSlots: [],\r\n\r\n      // æ˜¯å¦åªå±•ç¤ºâ€œå¯é¢„çº¦â€çš„æ—¶æ®µ\r\n      onlyShowAvailable: false,\r\n\r\n      // æˆ¿é—´ id æ˜ å°„ï¼ˆæŒ‰é¡ºåºå’Œ reserveVenues å¯¹åº”ï¼‰\r\n      roomIds: [1, 2, 3], // æ¢æˆä½  room è¡¨é‡Œçš„çœŸå® id\r\n\r\n      // å½“å‰ç™»å½•ç”¨æˆ· idï¼ˆä»ç™»å½•æ—¶å­˜çš„ç”¨æˆ·ä¿¡æ¯é‡Œè¯»ï¼‰\r\n      currentUserId: null,\r\n\r\n      // æˆ‘çš„é¢„çº¦åˆ—è¡¨\r\n      myReservations: [],\r\n\r\n      // æˆ‘çš„é¢„çº¦åˆ†é¡µ\r\n      pageSize: 15,\r\n      reservationPageIndex: 1,\r\n\r\n      // è¿è§„è®°å½•ç›¸å…³\r\n      myViolations: [],        // åç«¯æ‹‰å›æ¥çš„å®Œæ•´è¿è§„åˆ—è¡¨\r\n      violationPageIndex: 1,   // å½“å‰è¿è§„é¡µç \r\n      violationPageSize: 15,\r\n\r\n      // ä¸ªäººä¸­å¿ƒè¡¨å•æ•°æ®\r\n      profileForm: {\r\n        name: '',          // å§“å\r\n        account: '',       // ç™»å½•è´¦å·\r\n        studentNo: '',     // å­¦å·\r\n        college: '',\r\n        gradeClass: '',\r\n        phone: '',\r\n        email: '',\r\n        commonCampus: '',\r\n        profileRemark: ''\r\n      },\r\n      profileLoading: false,\r\n      profileSaving: false,\r\n\r\n      // é¦–é¡µ - å¤©æ°”ã€é‡‘å¥ã€å¿«æ·åé¦ˆ\r\n      weatherData: null,\r\n      dailyQuote: '',\r\n      dailyQuoteId: null,\r\n      quoteTimer: null,\r\n      openFeedback: false,\r\n\r\n      // é¦–é¡µ - å…¬å‘Šåˆ—è¡¨ç¤ºä¾‹æ•°æ®ï¼ˆåç»­å¯ä»¥æ¥ /notice æ¥å£æ›¿æ¢ï¼‰\r\n      homeNotices: [\r\n        {\r\n          id: 1,\r\n          title: 'ã€å¼€æ”¾æ—¶é—´è°ƒæ•´ã€‘æœ¬éƒ¨å›¾ä¹¦é¦† 301 è‡ªä¹ å®¤æœ¬å‘¨æœ«å»¶é•¿å¼€æ”¾è‡³ 22:30',\r\n          date: '04-02',\r\n          level: 'important',\r\n          levelText: 'é‡è¦',\r\n          target: 'å…¨ä½“å­¦ç”Ÿ'\r\n        },\r\n        {\r\n          id: 2,\r\n          title: 'ã€è€ƒè¯•å ç”¨æé†’ã€‘æœ¬å‘¨å…­ä¸‹åˆ 14:00â€“17:00 401 è‡ªä¹ å®¤ç”¨äºå››å…­çº§æ¨¡æ‹Ÿè€ƒè¯•',\r\n          date: '03-28',\r\n          level: 'info',\r\n          levelText: 'æé†’',\r\n          target: 'è‹±è¯­è€ƒç”Ÿ'\r\n        },\r\n        {\r\n          id: 3,\r\n          title: 'ã€è®¾å¤‡ç»´æŠ¤ã€‘ä¸œæ ¡åŒº 3 æ¥¼è‡ªä¹ å®¤ 4 æœˆ 3 æ—¥ 9:00â€“12:00 æš‚åœå¼€æ”¾',\r\n          date: '03-27',\r\n          level: 'warning',\r\n          levelText: 'ç»´æŠ¤',\r\n          target: 'ä¸œæ ¡åŒºå­¦ç”Ÿ'\r\n        }\r\n      ],\r\n\r\n      // æ”¾ä¸€ä¸ªå‡½æ•°åœ¨ data é‡Œä¹Ÿæ²¡é—®é¢˜ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨\r\n      emojiWeather: function (desc) {\r\n        if (!desc) return 'â›…'\r\n        if (desc.includes('é›¨')) return 'ğŸŒ§ï¸'\r\n        if (desc.includes('äº‘')) return 'â›…'\r\n        if (desc.includes('æ™´')) return 'â˜€ï¸'\r\n        if (desc.includes('é›ª')) return 'â„ï¸'\r\n        return 'â›…'\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    visibleDates () {\r\n      return this.dateList\r\n          .slice(this.visibleStart, this.visibleStart + this.visibleCount)\r\n          .map((d, idx) => ({\r\n            ...d,\r\n            index: this.visibleStart + idx\r\n          }))\r\n    },\r\n    canMovePrev () {\r\n      return this.visibleStart > 0\r\n    },\r\n    canMoveNext () {\r\n      return this.visibleStart + this.visibleCount < this.dateList.length\r\n    },\r\n    currentVenueName () {\r\n      return this.reserveVenues[this.reserveVenueIndex] || ''\r\n    },\r\n    // å½“å‰é€‰ä¸­çš„æ—¥æœŸå®Œæ•´æ–‡æœ¬ï¼ˆç”¨äºå³ä¾§æ¦‚è¦ï¼‰\r\n    currentDateLabel () {\r\n      const cur = this.dateList[this.currentDateIndex]\r\n      return cur ? cur.fullLabel : ''\r\n    },\r\n    // æ ¹æ®å¼€å…³è¿‡æ»¤æ—¶é—´æ®µåˆ—è¡¨\r\n    filteredTimeSlots () {\r\n      if (!this.onlyShowAvailable) {\r\n        return this.timeSlots\r\n      }\r\n      // åªå±•ç¤ºâ€œå¯é¢„çº¦â€çš„æ—¶æ®µ\r\n      return this.timeSlots.filter(slot => this.slotState(slot) === 'available')\r\n    },\r\n    // å½“å‰æˆ¿é—´ id\r\n    currentRoomId () {\r\n      return this.roomIds[this.reserveVenueIndex]\r\n    },\r\n    // åç«¯éœ€è¦ yyyy-MM-dd æ ¼å¼çš„æ—¥æœŸå­—ç¬¦ä¸²\r\n    currentDateStr () {\r\n      const cur = this.dateList[this.currentDateIndex]\r\n      // æˆ‘ä»¬åœ¨ initDates é‡Œå·²ç»ç”Ÿæˆäº† fullLabel = '2025-12-13'\r\n      return cur ? cur.fullLabel : null\r\n    },\r\n    // æ€»é¡µæ•°\r\n    totalPages () {\r\n      if (!this.myReservations.length) return 0\r\n      return Math.ceil(this.myReservations.length / this.pageSize)\r\n    },\r\n    // å½“å‰é¡µè¦å±•ç¤ºçš„ 15 æ¡\r\n    pagedReservations () {\r\n      if (!this.myReservations.length) return []\r\n      const total = this.totalPages || 1\r\n      const page = Math.min(this.reservationPageIndex, total)\r\n      const start = (page - 1) * this.pageSize\r\n      const end = start + this.pageSize\r\n      return this.myReservations.slice(start, end)\r\n    },\r\n    violationTotalPages () {\r\n      if (!this.myViolations.length) return 0\r\n      return Math.ceil(this.myViolations.length / this.violationPageSize)\r\n    },\r\n    pagedViolations () {\r\n      if (!this.myViolations.length) return []\r\n      const total = this.violationTotalPages || 1\r\n      const page = Math.min(this.violationPageIndex, total)\r\n      const start = (page - 1) * this.violationPageSize\r\n      const end = start + this.violationPageSize\r\n      return this.myViolations.slice(start, end)\r\n    },\r\n    // é¦–é¡µé—®å€™ï¼šä»Šå¤©æ—¥æœŸã€æ˜ŸæœŸå‡ ã€æ—¶é—´æ®µé—®å€™è¯­\r\n    todayStr () {\r\n      const d = new Date()\r\n      return `${d.getMonth() + 1} æœˆ ${d.getDate()} æ—¥`\r\n    },\r\n    weekDayStr () {\r\n      const list = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­']\r\n      return 'æ˜ŸæœŸ' + list[new Date().getDay()]\r\n    },\r\n    timeGreeting () {\r\n      const h = new Date().getHours()\r\n      if (h < 11) return 'ä¸Šåˆå¥½'\r\n      if (h < 14) return 'ä¸­åˆå¥½'\r\n      if (h < 19) return 'ä¸‹åˆå¥½'\r\n      return 'æ™šä¸Šå¥½'\r\n    },\r\n    // æ–°å¢ï¼šæˆ‘çš„ä»Šæ—¥é¢„çº¦ï¼ˆä»å·²åŠ è½½çš„ myReservations ä¸­ç­›é€‰â€œä»Šå¤©â€çš„è®°å½•ï¼‰\r\n    todayAppointments () {\r\n      const list = Array.isArray(this.myReservations) ? this.myReservations : []\r\n      if (!list.length) return []\r\n\r\n      const todayStr = new Date().toISOString().slice(0, 10) // yyyy-MM-dd\r\n      return list.filter(item => item.date === todayStr)\r\n    },\r\n  },\r\n  created () {\r\n    // åˆå§‹åŒ–æ—¶é—´æ®µã€æ—¥æœŸ\r\n    this.timeSlots = this.buildTimeSlots()\r\n    this.initDates()\r\n\r\n    // è¯»å–å½“å‰ç™»å½•ç”¨æˆ·ï¼šä» localStorage çš„ ssrmsUser é‡Œå–\r\n    const raw = localStorage.getItem('ssrmsUser')\r\n    if (raw) {\r\n      try {\r\n        const user = JSON.parse(raw)\r\n        console.log('localStorage ssrmsUser = ', user)\r\n\r\n        this.currentUserId = user.userId ?? user.id\r\n\r\n        this.profileForm = {\r\n          name: user.name || '',\r\n          account: user.account || '',          // ç™»å½•è´¦å·\r\n          studentNo: user.studentNo || '',      // å­¦å·\r\n          college: user.college || '',\r\n          gradeClass: user.gradeClass || '',\r\n          phone: user.phone || '',\r\n          email: user.email || '',\r\n          commonCampus: user.commonCampus || '',\r\n          profileRemark: user.profileRemark || ''\r\n        }\r\n\r\n        // â­ å†å»è¯·æ±‚åç«¯ï¼Œæ‹¿â€œæœ€æ–°â€çš„ä¸€ä»½è¦†ç›–\r\n        this.loadUserProfile()\r\n      } catch (e) {\r\n        console.error('è§£æ ssrmsUser å¤±è´¥', e)\r\n      }\r\n    } else {\r\n      console.warn('localStorage é‡Œæ²¡æœ‰ ssrmsUser')\r\n    }\r\n\r\n    // åˆå§‹åŒ–å®Œåæ‹‰ä¸€æ¬¡å½“å‰é€‰ä¸­æ—¥æœŸï¼ˆâ€œæ˜å¤©â€ï¼‰çš„å ç”¨æƒ…å†µ\r\n    this.fetchSlotStatus()\r\n    this.loadWeather()\r\n    this.loadQuoteFromDb()\r\n    this.startQuoteTimer()\r\n  },\r\n  methods: {\r\n    emitChange (page) {\r\n      this.$emit('change-page', page)\r\n    },\r\n\r\n    // ç‚¹å‡»åœºåœ° tab\r\n    handleVenueClick (index) {\r\n      this.reserveVenueIndex = index\r\n      this.fetchSlotStatus()\r\n    },\r\n\r\n    buildTimeSlots () {\r\n      const list = []\r\n\r\n      // ğŸ‘‰ è¿™é‡Œæ§åˆ¶å¼€æ”¾çš„æ—¶é—´æ®µ\r\n      // startHourï¼šç¬¬ä¸€ä¸ªæ—¶æ®µçš„å¼€å§‹å°æ—¶\r\n      // endHourï¼šæœ€åä¸€ä¸ªæ—¶æ®µçš„å¼€å§‹å°æ—¶\r\n      // ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼šä» 08:00-09:00 ä¸€ç›´åˆ° 22:00-23:00\r\n      const startHour = 8   // 08:00\r\n      const endHour = 22    // 22:00\r\n\r\n      for (let h = startHour; h <= endHour; h++) {\r\n        const next = h + 1\r\n        const id = String(h)   // ä»ç„¶ç”¨å°æ—¶å½“ä½œ slotIdï¼Œå’Œåç«¯ä¿æŒä¸€è‡´\r\n\r\n        const range =\r\n            `${h.toString().padStart(2, '0')}:00 - ` +\r\n            `${next.toString().padStart(2, '0')}:00`\r\n\r\n        const label =\r\n            (h % 12 === 0 ? 12 : h % 12) +\r\n            ': 00 ' +\r\n            (h < 12 ? 'AM' : 'PM')\r\n\r\n        list.push({\r\n          id,\r\n          label,\r\n          range\r\n        })\r\n      }\r\n      return list\r\n    },\r\n\r\n\r\n\r\n    // ç”Ÿæˆæ¥ä¸‹æ¥ 14 å¤©çš„æ—¥æœŸæ¡ï¼ˆä»â€œæ˜å¤©â€å¼€å§‹ï¼‰\r\n    initDates () {\r\n      const today = new Date()\r\n      const list = []\r\n      const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­']\r\n\r\n      for (let i = 0; i < 14; i++) {\r\n        // â­ è¿™é‡ŒåŠ  1ï¼Œè¡¨ç¤ºä»â€œæ˜å¤©â€å¼€å§‹\r\n        const d = new Date(today)\r\n        d.setDate(d.getDate() + i + 1)\r\n\r\n        const month = d.getMonth() + 1\r\n        const day = d.getDate()\r\n        const fullLabel =\r\n            `${d.getFullYear()}-${month.toString().padStart(2, '0')}-` +\r\n            `${day.toString().padStart(2, '0')}`\r\n\r\n        list.push({\r\n          key: i,   // ç”¨ 0~13 å½“ key å°±å¤Ÿäº†\r\n          year: d.getFullYear(),\r\n          month,\r\n          day,\r\n          weekday: weekdays[d.getDay()],\r\n          monthLabel: `${d.getFullYear()}-${month.toString().padStart(2, '0')}`,\r\n          isToday: false,        // â­ ä¸å†æœ‰â€œä»Šå¤©â€\r\n          isTomorrow: i === 0,   // â­ ç¬¬ä¸€å¼ æ ‡è®°ä¸ºâ€œæ˜å¤©â€\r\n          fullLabel\r\n        })\r\n      }\r\n\r\n      this.dateList = list\r\n      this.visibleStart = 0\r\n      this.currentDateIndex = 0   // â­ é»˜è®¤é€‰ä¸­ç¬¬ä¸€å¤©ï¼ˆä¹Ÿå°±æ˜¯â€œæ˜å¤©â€ï¼‰\r\n    },\r\n\r\n    moveDates (direction) {\r\n      if (direction === 'prev' && this.canMovePrev) {\r\n        this.visibleStart -= 1\r\n      } else if (direction === 'next' && this.canMoveNext) {\r\n        this.visibleStart += 1\r\n      }\r\n    },\r\n\r\n    // ç‚¹å‡»æ—¥æœŸ\r\n    selectDate (index) {\r\n      this.currentDateIndex = index\r\n      this.fetchSlotStatus()\r\n    },\r\n\r\n    buildKey (dateIndex, slotId) {\r\n      return `${dateIndex}-${slotId}`\r\n    },\r\n\r\n    // å½“å‰æ—¶æ®µæ˜¯å¯é¢„çº¦ / å·²é€‰ / ä¸å¯é¢„çº¦\r\n    slotState (slot) {\r\n      if (this.disabledSlotIds.includes(slot.id)) {\r\n        return 'disabled'\r\n      }\r\n      const key = this.buildKey(this.currentDateIndex, slot.id)\r\n      const exists = this.selectedSlots.some(item => item.key === key)\r\n      if (exists) {\r\n        return 'selected'\r\n      }\r\n      return 'available'\r\n    },\r\n\r\n    slotClass (slot) {\r\n      const state = this.slotState(slot)\r\n      return {\r\n        'slot-available': state === 'available',\r\n        'slot-disabled': state === 'disabled',\r\n        'slot-selected': state === 'selected'\r\n      }\r\n    },\r\n\r\n    // ç‚¹å‡»æ—¶æ®µï¼šé€‰ä¸­ / å–æ¶ˆ\r\n    toggleSlot (slot) {\r\n      if (this.slotState(slot) === 'disabled') {\r\n        return\r\n      }\r\n      const key = this.buildKey(this.currentDateIndex, slot.id)\r\n      const index = this.selectedSlots.findIndex(item => item.key === key)\r\n      if (index !== -1) {\r\n        this.selectedSlots.splice(index, 1)\r\n        return\r\n      }\r\n      if (this.selectedSlots.length >= 4) {\r\n        alert('æœ€å¤šåªèƒ½é€‰æ‹© 4 ä¸ªé¢„çº¦æ—¶æ®µ')\r\n        return\r\n      }\r\n      const dateInfo = this.dateList[this.currentDateIndex]\r\n      const dateLabel = dateInfo.fullLabel\r\n      this.selectedSlots.push({\r\n        key,\r\n        dateIndex: this.currentDateIndex,\r\n        dateLabel,\r\n        slot\r\n      })\r\n    },\r\n\r\n    removeSelected (key) {\r\n      const index = this.selectedSlots.findIndex(item => item.key === key)\r\n      if (index !== -1) {\r\n        this.selectedSlots.splice(index, 1)\r\n      }\r\n    },\r\n\r\n    resetSelections () {\r\n      this.selectedSlots = []\r\n    },\r\n\r\n    // æäº¤é¢„çº¦ï¼šè°ƒç”¨åç«¯ /reservation/create\r\n    async submitReservations () {\r\n      if (!this.selectedSlots.length) return\r\n\r\n      if (!this.currentUserId) {\r\n        alert('è¯·å…ˆç™»å½•åå†é¢„çº¦')\r\n        return\r\n      }\r\n\r\n      const slotIds = this.selectedSlots.map(item => Number(item.slot.id))\r\n\r\n      try {\r\n        const result = await this.$axios.post('/reservation/create', {\r\n          userId: this.currentUserId, // å…ˆç›´æ¥ä¼ ï¼Œä¹‹åå¯ä»¥æ”¹æˆåç«¯ä»ç™»å½•æ€è·å–\r\n          roomId: this.currentRoomId,\r\n          date: this.currentDateStr,\r\n          slotIds\r\n        })\r\n\r\n        alert('é¢„çº¦æˆåŠŸ')\r\n        // æ¸…ç©ºé€‰æ‹©\r\n        this.selectedSlots = []\r\n        // é‡æ–°æ‹‰ä¸€éæ—¶æ®µçŠ¶æ€ï¼Œåˆ·æ–°ç°è‰²/å¯é€‰çŠ¶æ€\r\n        await this.fetchSlotStatus()\r\n        // ä¿ç•™åŸæ¥çš„è¡Œä¸ºï¼šé¢„çº¦åè·³åˆ°â€œæˆ‘çš„é¢„çº¦â€\r\n        this.emitChange('user-reservations')\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('é¢„çº¦å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\r\n      }\r\n    },\r\n\r\n    // ä»åç«¯æ‹‰å–æŸæˆ¿é—´æŸå¤©çš„â€œå·²æ»¡æ—¶æ®µâ€\r\n    async fetchSlotStatus () {\r\n      // æˆ¿é—´æˆ–æ—¥æœŸè¿˜æ²¡å‡†å¤‡å¥½å°±å…ˆä¸è°ƒ\r\n      if (!this.currentRoomId || !this.currentDateStr) return\r\n\r\n      try {\r\n        const result = await this.$axios.get('/reservation/slots', {\r\n          params: {\r\n            roomId: this.currentRoomId,\r\n            date: this.currentDateStr\r\n          }\r\n        })\r\n\r\n        const dto = result.data || {}\r\n        // åç«¯è¿”å›çš„æ˜¯ [8,9,14] è¿™æ ·ï¼Œæˆ‘ä»¬å‰ç«¯ç”¨å­—ç¬¦ä¸² id\r\n        this.disabledSlotIds = (dto.disabledSlotIds || []).map(id => String(id))\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('è·å–æ—¶æ®µçŠ¶æ€å¤±è´¥')\r\n      }\r\n    },\r\n\r\n    // æŠŠåç«¯è¿”å›çš„é¢„çº¦åˆ—è¡¨åŠ è½½åˆ°è¡¨æ ¼\r\n    async loadMyReservations () {\r\n      // ç¡®ä¿æœ‰ currentUserIdï¼Œæ²¡æœ‰çš„è¯å†å°è¯•ä» localStorage è¯»ä¸€æ¬¡\r\n      if (!this.currentUserId) {\r\n        const raw = localStorage.getItem('ssrmsUser')\r\n        if (raw) {\r\n          try {\r\n            const user = JSON.parse(raw)\r\n            this.currentUserId = user.userId ?? user.id\r\n          } catch (e) {\r\n            console.error(e)\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!this.currentUserId) return\r\n\r\n      // â­ å…³é”®ï¼šå…ˆè®©åç«¯åˆ·æ–°ä¸€æ¬¡â€œæœªç­¾åˆ°â€çŠ¶æ€\r\n      await this.refreshNoShowStatus()\r\n\r\n      try {\r\n        const result = await this.$axios.get('/reservation/my', {\r\n          params: { userId: this.currentUserId }\r\n        })\r\n\r\n        const list = Array.isArray(result.data) ? result.data.slice() : []\r\n\r\n        // æ—¥æœŸå‡åºï¼ŒåŒä¸€å¤©æŒ‰å¼€å§‹æ—¶é—´å‡åº\r\n        list.sort((a, b) => {\r\n          const da = a.date || ''\r\n          const db = b.date || ''\r\n          if (da !== db) {\r\n            // æ—¥æœŸå‡åº\r\n            return da.localeCompare(db)\r\n          }\r\n          const ta = a.startTime || ''\r\n          const tb = b.startTime || ''\r\n          // åŒä¸€å¤©æ—¶é—´å‡åº\r\n          return ta.localeCompare(tb)\r\n        })\r\n\r\n        this.myReservations = list\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('åŠ è½½é¢„çº¦åˆ—è¡¨å¤±è´¥')\r\n      }\r\n    },\r\n\r\n    // æŠŠ startTime / endTime æ‹¼æˆ â€œHH:mm-HH:mmâ€\r\n    formatTimeRange (item) {\r\n      const s = (item.startTime || '').slice(0, 5)\r\n      const e = (item.endTime || '').slice(0, 5)\r\n      return s && e ? `${s}-${e}` : ''\r\n    },\r\n\r\n    // æŠŠåç«¯çŠ¶æ€è‹±æ–‡è½¬æˆä¸­æ–‡æ–‡æ¡ˆ\r\n    renderStatusText (status) {\r\n      switch (status) {\r\n        case 'reserved':\r\n          return 'å¾…ç­¾åˆ°'\r\n        case 'checked_in':\r\n          return 'å·²ç­¾åˆ°'\r\n        case 'late':\r\n          return 'è¿Ÿåˆ°'\r\n        case 'no_show':\r\n          return 'æœªç­¾åˆ°'\r\n        case 'cancelled':\r\n          return 'å·²å–æ¶ˆ'\r\n        case 'cancel_overdue':\r\n          return 'é€¾æœŸå–æ¶ˆ'\r\n        default:\r\n          return status || ''\r\n      }\r\n    },\r\n\r\n    // æ ¹æ®çŠ¶æ€å†³å®šå¾½æ ‡é¢œè‰²ï¼ˆå…ˆç•™å¥½é’©å­ï¼Œæ ·å¼åé¢æƒ³ç¾åŒ–å†æ”¹ï¼‰\r\n    statusClass (status) {\r\n      return {\r\n        'badge-pending': status === 'reserved',\r\n        'badge-done': status === 'checked_in',\r\n        'badge-late': status === 'late',\r\n        'badge-missed': status === 'no_show',\r\n        'badge-cancelled': status === 'cancelled',\r\n        'badge-cancel-overdue': status === 'cancel_overdue'\r\n      }\r\n    },\r\n\r\n    gotoPrevPage () {\r\n      if (this.reservationPageIndex > 1) {\r\n        this.reservationPageIndex--\r\n      }\r\n    },\r\n\r\n    gotoNextPage () {\r\n      if (this.reservationPageIndex < this.totalPages) {\r\n        this.reservationPageIndex++\r\n      }\r\n    },\r\n\r\n    // ç­¾åˆ°\r\n    async handleCheckIn (item) {\r\n      try {\r\n        const result = await this.$axios.post(`/reservation/checkin/${item.id}`)\r\n        if (result.code && result.code !== 200) {\r\n          alert(result.msg || 'ç­¾åˆ°å¤±è´¥')\r\n          return\r\n        }\r\n        alert(result.msg || 'ç­¾åˆ°æˆåŠŸ')\r\n        // é‡æ–°åˆ·æ–°åˆ—è¡¨å’Œå ç”¨æƒ…å†µ\r\n        await this.loadMyReservations()\r\n        // å¦‚æœä½ å¸Œæœ›â€œæˆ‘è¦é¢„çº¦â€é‚£è¾¹ä¹Ÿç«‹å³åˆ·æ–°å ç”¨ï¼Œå¯ä»¥é¡ºå¸¦ï¼š\r\n        // await this.fetchSlotStatus()\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('ç­¾åˆ°å¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\r\n      }\r\n    },\r\n\r\n    // å–æ¶ˆé¢„çº¦\r\n    async handleCancel (item) {\r\n      // å‰ç«¯å†ä¿é™©ä¸€æ¬¡ 10 åˆ†é’Ÿè§„åˆ™\r\n      if (!this.canCancel(item)) {\r\n        alert('è·ç¦»å¼€å§‹ä¸è¶³ 10 åˆ†é’Ÿï¼Œæ— æ³•å–æ¶ˆï¼Œè¯·è”ç³»ç®¡ç†å‘˜å¤„ç†')\r\n        return\r\n      }\r\n\r\n      const ok = window.confirm(`ç¡®å®šè¦å–æ¶ˆæœ¬æ¬¡é¢„çº¦ï¼ˆ${item.date} ${this.formatTimeRange(item)}ï¼‰å—ï¼Ÿ`)\r\n      if (!ok) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const result = await this.$axios.post(`/reservation/cancel/${item.id}`)\r\n\r\n        // è¿™é‡ŒæŒ‰ä½ çš„ Result çº¦å®šæ¥ï¼Œå¦‚æœåç«¯æ˜¯ code === 200 ä»£è¡¨æˆåŠŸå°±ä¿ç•™è¿™ä¸€å¥\r\n        if (result.code && result.code !== 200) {\r\n          alert(result.msg || 'å–æ¶ˆå¤±è´¥')\r\n          return\r\n        }\r\n\r\n        // åç«¯ä¼šæ ¹æ®è§„åˆ™æŠŠçŠ¶æ€æ”¹æˆ cancelled æˆ– cancel_overdue\r\n        alert(result.msg || 'å–æ¶ˆæˆåŠŸ')\r\n\r\n        // é‡æ–°åŠ è½½é¢„çº¦åˆ—è¡¨\r\n        await this.loadMyReservations()\r\n        // é‡Šæ”¾åº§ä½åï¼Œé¡ºä¾¿åˆ·æ–°ä¸€ä¸‹â€œæˆ‘è¦é¢„çº¦â€é¡µé¢çš„å ç”¨æƒ…å†µ\r\n        await this.fetchSlotStatus()\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('å–æ¶ˆå¤±è´¥ï¼ŒæœåŠ¡å™¨å¼‚å¸¸')\r\n      }\r\n    },\r\n\r\n    // æ˜¯å¦å…è®¸å–æ¶ˆï¼šåªæ‹¦â€œå¼€å§‹å‰ 10 åˆ†é’Ÿâ€çš„æƒ…å†µ\r\n    canCancel (item) {\r\n      if (item.status !== 'reserved') return false\r\n      if (!item.date || !item.startTime) return false\r\n\r\n      try {\r\n        // date ä¾‹å¦‚ '2025-12-22'ï¼ŒstartTime ä¾‹å¦‚ '01:00:00'\r\n        const startStr = item.date + 'T' + (item.startTime || '').slice(0, 8)\r\n        const start = new Date(startStr)\r\n        if (isNaN(start.getTime())) {\r\n          // è§£æå¤±è´¥å°±ä¸åœ¨å‰ç«¯æ‹¦ï¼Œäº¤ç»™åç«¯åˆ¤æ–­\r\n          return true\r\n        }\r\n        const now = new Date()\r\n        const diffMs = start.getTime() - now.getTime()\r\n        const tenMinutes = 10 * 60 * 1000\r\n\r\n        // diffMs > 10 åˆ†é’Ÿ â‡’ å¯ä»¥å–æ¶ˆ\r\n        return diffMs > tenMinutes\r\n      } catch (e) {\r\n        console.error(e)\r\n        // å‡ºå¼‚å¸¸ç›´æ¥æ”¾è¡Œï¼Œäº¤ç»™åç«¯\r\n        return true\r\n      }\r\n    },\r\n    // è¿›å…¥â€œæˆ‘çš„é¢„çº¦â€å‰ï¼Œå…ˆè®©åå°æŠŠå·²è¿‡æœŸçš„é¢„çº¦æ‰¹é‡æ ‡è®°ä¸ºæœªç­¾åˆ°\r\n    async refreshNoShowStatus () {\r\n      // ç¡®ä¿ currentUserId æœ‰å€¼\r\n      if (!this.currentUserId) {\r\n        const raw = localStorage.getItem('ssrmsUser')\r\n        if (raw) {\r\n          try {\r\n            const user = JSON.parse(raw)\r\n            this.currentUserId = user.userId ?? user.id\r\n          } catch (e) {\r\n            console.error(e)\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!this.currentUserId) return\r\n\r\n      try {\r\n        const result = await this.$axios.post('/reservation/refreshNoShow', null, {\r\n          params: { userId: this.currentUserId }\r\n        })\r\n        const updated = typeof result.data === 'number' ? result.data : 0\r\n\r\n        // æœ‰æ–°è¢«æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€çš„è®°å½•ï¼Œå†æé†’ä¸€æ¬¡\r\n        if (updated > 0) {\r\n          alert(`æœ‰ ${updated} æ¡å·²è¿‡æœŸä½†æœªç­¾åˆ°çš„é¢„çº¦ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨æ ‡è®°ä¸ºâ€œæœªç­¾åˆ°â€ï¼Œè¯·ç•™æ„ä¿¡ç”¨åˆ†å˜åŒ–ã€‚`)\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n        // è¿™é‡Œä¸å¼ºåˆ¶æŠ¥é”™ç»™ç”¨æˆ·ï¼Œé¿å…å½±å“åˆ—è¡¨åŠ è½½\r\n      }\r\n    },\r\n    async loadMyViolations () {\r\n      // å’Œ loadMyReservations ä¸€æ ·ï¼Œå…ˆç¡®ä¿æœ‰ currentUserId\r\n      if (!this.currentUserId) {\r\n        const raw = localStorage.getItem('ssrmsUser')\r\n        if (raw) {\r\n          try {\r\n            const user = JSON.parse(raw)\r\n            this.currentUserId = user.userId ?? user.id\r\n          } catch (e) {\r\n            console.error(e)\r\n          }\r\n        }\r\n      }\r\n      if (!this.currentUserId) return\r\n\r\n      try {\r\n        // å…ˆè®©åç«¯æ›´æ–°ä¸€æ¬¡æœªç­¾åˆ°çŠ¶æ€\r\n        await this.refreshNoShowStatus()\r\n\r\n        const result = await this.$axios.get('/reservation/violations', {\r\n          params: { userId: this.currentUserId }\r\n        })\r\n\r\n        const list = Array.isArray(result.data) ? result.data.slice() : []\r\n\r\n        // è¿™é‡Œåç«¯å·²ç»æŒ‰æ—¥æœŸå€’åº + æ—¶é—´å‡åºæ’è¿‡äº†ï¼Œä¹Ÿå¯ä»¥å†æŒ‰ä½ æƒ³è¦çš„é¡ºåºæ’ä¸€æ¬¡\r\n        this.myViolations = list\r\n        this.violationPageIndex = 1   // æ¯æ¬¡åŠ è½½å›åˆ°ç¬¬ä¸€é¡µ\r\n      } catch (e) {\r\n        console.error(e)\r\n        alert('åŠ è½½è¿è§„è®°å½•å¤±è´¥')\r\n      }\r\n    },\r\n\r\n    gotoPrevViolationPage () {\r\n      if (this.violationPageIndex > 1) {\r\n        this.violationPageIndex--\r\n      }\r\n    },\r\n\r\n    gotoNextViolationPage () {\r\n      if (this.violationPageIndex < this.violationTotalPages) {\r\n        this.violationPageIndex++\r\n      }\r\n    },\r\n\r\n    // åŠ è½½ä¸ªäººä¿¡æ¯\r\n    async loadUserProfile () {\r\n      // å…ˆç¡®ä¿ currentUserId æœ‰å€¼\r\n      if (!this.currentUserId) {\r\n        const raw = localStorage.getItem('ssrmsUser')\r\n        if (raw) {\r\n          try {\r\n            const user = JSON.parse(raw)\r\n            this.currentUserId = user.userId ?? user.id\r\n          } catch (e) {\r\n            console.error(e)\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!this.currentUserId) {\r\n        console.warn('currentUserId ä¸ºç©ºï¼Œæ— æ³•åŠ è½½ä¸ªäººä¿¡æ¯')\r\n        return\r\n      }\r\n\r\n      this.profileLoading = true\r\n      try {\r\n        // âœ… å’Œä½ åç«¯ä¸€è‡´ï¼š@RequestParam Integer userId\r\n        const result = await this.$axios.get('/user/profile', {\r\n          params: { userId: this.currentUserId }\r\n        })\r\n\r\n        console.log('GET /user/profile è¿”å›ï¼š', result)\r\n\r\n        // å…¼å®¹ä¸¤ç§å†™æ³•ï¼š\r\n        // 1ï¼‰{ code, msg, data: { ...user } }\r\n        // 2ï¼‰ç›´æ¥å°±æ˜¯ { id, name, ... }ï¼ˆä¸‡ä¸€ä»¥åä½ æ”¹ Resultï¼‰\r\n        const u = result.data || result\r\n        if (!u || !u.id) {\r\n          console.error('åŠ è½½ä¸ªäººä¿¡æ¯å¤±è´¥ï¼š', result.msg || 'è¿”å›æ•°æ®ä¸ºç©º')\r\n          return\r\n        }\r\n\r\n        // å’Œå®ä½“å­—æ®µä¸€ä¸€å¯¹åº”\r\n        this.profileForm = {\r\n          name: user.userName || user.name || '',\r\n          account: user.accountNo || user.account || '',\r\n          studentNo: user.accountNo || user.studentNo || '',\r\n          college: user.college || '',\r\n          gradeClass: user.gradeClass || '',\r\n          phone: user.phone || '',\r\n          email: user.email || '',\r\n          commonCampus: user.commonCampus || '',\r\n          profileRemark: user.profileRemark || ''\r\n        }\r\n      } catch (e) {\r\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e)\r\n      } finally {\r\n        this.profileLoading = false\r\n      }\r\n    },\r\n\r\n    // ä¿å­˜ä¸ªäººä¿¡æ¯\r\n    async handleProfileSave () {\r\n      if (!this.currentUserId) {\r\n        alert('å½“å‰ç”¨æˆ·ä¿¡æ¯ç¼ºå¤±ï¼Œè¯·é‡æ–°ç™»å½•åå†è¯•')\r\n        return\r\n      }\r\n\r\n      this.profileSaving = true\r\n      try {\r\n        const payload = {\r\n          id: this.currentUserId,\r\n          name: this.profileForm.name,\r\n          college: this.profileForm.college,\r\n          gradeClass: this.profileForm.gradeClass,\r\n          phone: this.profileForm.phone,\r\n          email: this.profileForm.email,\r\n          commonCampus: this.profileForm.commonCampus,\r\n          profileRemark: this.profileForm.profileRemark,\r\n          studentNo: this.profileForm.studentNo\r\n        }\r\n\r\n        const result = await this.$axios.post('/user/profile', payload)\r\n\r\n        if (result.code === 200) {\r\n          alert('ä¿å­˜æˆåŠŸ')\r\n\r\n          // é¡ºä¾¿æ›´æ–° localStorage é‡Œçš„ ssrmsUserï¼Œè®©å…¶ä»–é¡µé¢ä¹Ÿç”¨åˆ°æœ€æ–°ä¿¡æ¯\r\n          const raw = localStorage.getItem('ssrmsUser')\r\n          if (raw) {\r\n            try {\r\n              const user = JSON.parse(raw)\r\n              Object.assign(user, payload)\r\n              localStorage.setItem('ssrmsUser', JSON.stringify(user))\r\n            } catch (e) {\r\n              console.error(e)\r\n            }\r\n          }\r\n        } else {\r\n          alert(result.msg || 'ä¿å­˜å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        console.error('è¯·æ±‚ /user/profile å¤±è´¥', e)\r\n        alert('ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')\r\n      } finally {\r\n        this.profileSaving = false\r\n      }\r\n    },\r\n\r\n    // å³ä¸‹è§’â€œéšæ‰‹ä¸€è¯„â€æŒ‰é’®\r\n    submitFB (score) {\r\n      // è¿™é‡Œåªæ˜¯æ¼”ç¤ºï¼šå®é™…æ¥å…¥æ¥å£æ—¶ï¼ŒæŠŠ scoreã€å½“å‰ç”¨æˆ·ã€æ—¶é—´ç­‰å‘ç»™åç«¯å³å¯\r\n      console.log('ç”¨æˆ·ç»™äº†ä¸€ä¸ªå¿«æ·è¯„åˆ†ï¼š', score)\r\n      this.openFeedback = false\r\n    },\r\n\r\n    // æŠŠå¤©æ°”ä»£ç ç¿»è¯‘æˆä¸­æ–‡\r\n    codeToDesc (code) {\r\n      // open-meteo çš„å¤©æ°”ä»£ç å«ä¹‰å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£é‡ŒæŸ¥ï¼Œè¿™é‡Œåªåˆ—äº†ä¸€äº›å¸¸è§çš„\r\n      const map = {\r\n        0: 'æ™´',\r\n        1: 'å¤šäº‘',\r\n        2: 'å¤šäº‘',\r\n        3: 'é˜´',\r\n        45: 'æœ‰é›¾',\r\n        48: 'é›¾ï¼Œåœ°é¢ç»“å†°',\r\n        51: 'æ¯›æ¯›é›¨',\r\n        53: 'å°é›¨',\r\n        55: 'ä¸­é›¨',\r\n        61: 'å°é›¨',\r\n        63: 'ä¸­é›¨',\r\n        65: 'å¤§é›¨',\r\n        71: 'å°é›ª',\r\n        73: 'ä¸­é›ª',\r\n        75: 'å¤§é›ª',\r\n        95: 'é›·é˜µé›¨',\r\n        96: 'é›·é˜µé›¨ä¼´æœ‰å†°é›¹'\r\n      }\r\n      return map[code] || 'å¤šäº‘'\r\n    },\r\n\r\n    // æ‹‰å¤©æ°”ï¼ˆç¤ºèŒƒæ¥å£ï¼šopen-meteoï¼Œä½¿ç”¨ fetch å³å¯ï¼‰\r\n    async loadWeather () {\r\n      try {\r\n        const resp = await fetch(\r\n            'https://api.open-meteo.com/v1/forecast' +\r\n            '?latitude=29.88&longitude=121.55' +\r\n            '&current_weather=true'\r\n        )\r\n        const json = await resp.json()\r\n        const cw = (json && json.current_weather) || {}\r\n        const temp = cw.temperature\r\n        const windSpeed = cw.windspeed\r\n        const code = cw.weathercode\r\n        const desc = this.codeToDesc(code)\r\n\r\n        this.weatherData = {\r\n          city: 'å®æ³¢',\r\n          temp: temp != null ? temp : 18,\r\n          desc: desc || 'å¤šäº‘',\r\n          wind: windSpeed != null ? `é£é€Ÿ ${windSpeed} km/h` : 'å¾®é£'\r\n        }\r\n      } catch (e) {\r\n        console.warn('è¯·æ±‚å¤©æ°”å¤±è´¥ï¼Œä½¿ç”¨å…œåº•æ–‡æ¡ˆ', e)\r\n        this.weatherData = {\r\n          city: 'å®æ³¢',\r\n          temp: 18,\r\n          desc: 'å¤šäº‘',\r\n          wind: 'å¾®é£'\r\n        }\r\n      }\r\n    },\r\n\r\n    async loadQuoteFromDb () {\r\n      try {\r\n        const result = await this.$axios.post('/quote/random', {\r\n          params: { excludeId: this.dailyQuoteId }\r\n        })\r\n\r\n        // resp æ˜¯åç«¯ Resultï¼š{ code, msg, data, total }:contentReference[oaicite:6]{index=6}\r\n        if (resp && resp.code === 200 && resp.data) {\r\n          this.dailyQuote = resp.data.content || ''\r\n          this.dailyQuoteId = resp.data.id || null\r\n          return\r\n        }\r\n\r\n        // åç«¯è¿”å›å¤±è´¥\r\n        this.dailyQuote = 'ä»Šå¤©ä¹Ÿè¦ç¨³ä½èŠ‚å¥ï¼Œå…ˆåšä¸€å°æ­¥ã€‚'\r\n        this.dailyQuoteId = null\r\n      } catch (e) {\r\n        console.warn('åŠ è½½ä»Šæ—¥æç¤ºå¤±è´¥ï¼š', e)\r\n        this.dailyQuote = 'ç½‘ç»œå¼€å°å·®äº†ï¼Œä½†ä½ çš„è‡ªå¾‹åˆ«æ‰çº¿ã€‚'\r\n        this.dailyQuoteId = null\r\n      }\r\n    },\r\n\r\n    startQuoteTimer () {\r\n      this.stopQuoteTimer()\r\n      this.quoteTimer = setInterval(() => {\r\n        // åªæœ‰åœ¨é¦–é¡µæ—¶æ‰è½®è¯¢ï¼ˆæ›´çœè¯·æ±‚ï¼‰\r\n        if (this.currentPage === 'home') {\r\n          this.loadQuoteFromDb()\r\n        }\r\n      }, 20000)\r\n    },\r\n\r\n    stopQuoteTimer () {\r\n      if (this.quoteTimer) {\r\n        clearInterval(this.quoteTimer)\r\n        this.quoteTimer = null\r\n      }\r\n    },\r\n\r\n    refreshQuote () {\r\n      // å³ä¸Šè§’â€œâ†»â€æŒ‰é’®ï¼šæ‰‹åŠ¨æ¢ä¸€å¥\r\n      this.loadQuoteFromDb()\r\n    },\r\n\r\n  },\r\n  watch: {\r\n    currentPage (newVal) {\r\n      if (newVal === 'user-reservations') {\r\n        this.loadMyReservations()\r\n      }\r\n      if (newVal === 'user-reserve') {\r\n        this.fetchSlotStatus()\r\n      }\r\n      if (newVal === 'user-violations') {\r\n        this.loadMyViolations()\r\n      }\r\n      if (newVal === 'user-profile') {\r\n        this.loadUserProfile()\r\n      }\r\n    },\r\n    myReservations () {\r\n      this.reservationPageIndex = 1\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  flex: 1;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* é€šç”¨å¡ç‰‡æ ·å¼ */\r\n.card {\r\n  background-color: #ffffff;\r\n  padding: 22px 24px;\r\n  margin-bottom: 16px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);\r\n  border: 1px solid #e5e7eb;\r\n}\r\n\r\n.page-title {\r\n  font-size: 24px;\r\n  margin: 0 0 10px 0;\r\n  color: #111827;\r\n}\r\n\r\n.page-subtitle {\r\n  font-size: 15px;\r\n  color: #6b7280;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n/* å…¬å…±è¡¨æ ¼æ ·å¼ */\r\n\r\n.table-wrapper {\r\n  margin-top: 12px;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  border: 1px solid #e5e7eb;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 13px;\r\n}\r\n\r\n.table th,\r\n.table td {\r\n  padding: 10px 12px;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n\r\n.table th {\r\n  background-color: #f3f4f6;\r\n  text-align: left;\r\n  font-weight: 600;\r\n  color: #374151;\r\n}\r\n\r\n.table tr:nth-child(even) td {\r\n  background-color: #f9fafb;\r\n}\r\n\r\n.text-right {\r\n  text-align: right;\r\n}\r\n\r\n.link-danger {\r\n  color: #dc2626;\r\n}\r\n\r\n/* ä¿¡ç”¨åˆ† */\r\n\r\n.credit-summary {\r\n  margin-top: 6px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.credit-score {\r\n  font-size: 15px;\r\n  color: #111827;\r\n}\r\n\r\n.score-number {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  color: #16a34a;\r\n}\r\n\r\n/* è¯„ä»·ä¸æŠ•è¯‰ */\r\n\r\n.feedback-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\r\n  gap: 16px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.feedback-column {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.section-title {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.textarea {\r\n  border-radius: 10px;\r\n  border: 1px solid #d1d5db;\r\n  padding: 8px 10px;\r\n  resize: vertical;\r\n  font-size: 13px;\r\n}\r\n\r\n.badge {\r\n  display: inline-block;\r\n  padding: 2px 8px;\r\n  border-radius: 999px;\r\n  font-size: 11px;\r\n  background-color: #e0e7ff;\r\n  color: #3730a3;\r\n}\r\n\r\n.hint-text {\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n  margin-top: 8px;\r\n}\r\n\r\n.reserve-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18px;\r\n}\r\n\r\n/* é¡¶éƒ¨ï¼šæ ‡é¢˜ + æ¦‚è¦å¡ç‰‡ */\r\n.reserve-header-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 24px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.reserve-header-left {\r\n  flex: 1;\r\n}\r\n\r\n.reserve-summary-box {\r\n  width: 260px;\r\n  padding: 12px 14px;\r\n  border-radius: 14px;\r\n  background: linear-gradient(135deg, #eef2ff, #f5f7ff);\r\n  border: 1px solid #e0e7ff;\r\n  box-shadow: 0 8px 20px rgba(15, 23, 42, 0.04);\r\n  font-size: 13px;\r\n}\r\n\r\n.summary-title {\r\n  font-weight: 600;\r\n  color: #111827;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.summary-main {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n\r\n.summary-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.summary-label {\r\n  color: #6b7280;\r\n}\r\n\r\n.summary-value {\r\n  color: #111827;\r\n  font-weight: 500;\r\n  text-align: right;\r\n}\r\n\r\n.summary-empty {\r\n  color: #9ca3af;\r\n  font-weight: 400;\r\n}\r\n\r\n/* åœºåœ° tabs + å¼€å…³ */\r\n.reserve-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 16px;\r\n  margin-top: 2px;\r\n}\r\n\r\n.venue-tabs {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.venue-tab {\r\n  padding: 6px 14px;\r\n  border-radius: 999px;\r\n  border: 1px solid #e5e7eb;\r\n  background-color: #fff;\r\n  font-size: 13px;\r\n  color: #374151;\r\n  cursor: pointer;\r\n  transition: all 0.15s ease;\r\n}\r\n\r\n.venue-tab:hover {\r\n  border-color: #93c5fd;\r\n  background-color: #eff6ff;\r\n}\r\n\r\n.venue-tab.active {\r\n  border-color: #2563eb;\r\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\r\n  color: #fff;\r\n  box-shadow: 0 6px 14px rgba(37, 99, 235, 0.25);\r\n}\r\n\r\n.reserve-toolbar-right {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.switch-label {\r\n  white-space: nowrap;\r\n}\r\n\r\n/* æ—¥æœŸæ¡ */\r\n.date-strip {\r\n  margin-top: 6px;\r\n  padding: 10px 12px;\r\n  border-radius: 14px;\r\n  background-color: #f9fafb;\r\n  display: flex;\r\n  align-items: stretch;\r\n  gap: 8px;\r\n}\r\n\r\n.date-arrow {\r\n  width: 32px;\r\n  border-radius: 10px;\r\n  border: none;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.08);\r\n  font-size: 18px;\r\n  color: #4b5563;\r\n  cursor: pointer;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.date-arrow:disabled {\r\n  opacity: 0.4;\r\n  cursor: default;\r\n  box-shadow: none;\r\n}\r\n\r\n.date-list {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex: 1;\r\n}\r\n\r\n.date-item {\r\n  flex: 1;\r\n  min-width: 90px;\r\n  border-radius: 12px;\r\n  border: 1px solid transparent;\r\n  background-color: #fff;\r\n  padding: 8px 10px;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  transition: all 0.15s ease;\r\n  height: 80px;\r\n}\r\n\r\n.date-item:hover {\r\n  border-color: #bfdbfe;\r\n  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.06);\r\n}\r\n\r\n.date-item.active {\r\n  border-color: #2563eb;\r\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\r\n  color: #fff;\r\n}\r\n\r\n.date-item.active .date-month,\r\n.date-item.active .date-weekday,\r\n.date-item.active .date-extra {\r\n  color: #e0ecff;\r\n}\r\n\r\n.date-item.active .date-day-number {\r\n  color: #fff;\r\n}\r\n\r\n.date-month {\r\n  font-size: 11px;\r\n  color: #6b7280;\r\n}\r\n\r\n.date-day-row {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 4px;\r\n  margin: 4px 0;\r\n}\r\n\r\n.date-day-number {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.date-weekday {\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.date-extra {\r\n  font-size: 11px;\r\n  color: #2563eb;\r\n}\r\n\r\n/* æ—¶é—´æ®µåŒºåŸŸ */\r\n\r\n.slot-section {\r\n  margin-top: 16px;\r\n}\r\n\r\n.slot-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.slot-title {\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.slot-legend {\r\n  display: flex;\r\n  gap: 12px;\r\n  font-size: 11px;\r\n  color: #6b7280;\r\n}\r\n\r\n.legend-item {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n.legend-dot {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 999px;\r\n}\r\n\r\n.legend-available {\r\n  background-color: #e5f3ff;\r\n  border: 1px solid #93c5fd;\r\n}\r\n\r\n.legend-selected {\r\n  background-color: #2563eb;\r\n}\r\n\r\n.legend-disabled {\r\n  background-color: #e5e7eb;\r\n}\r\n\r\n.slot-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, minmax(0, 1fr));\r\n  gap: 10px;\r\n}\r\n\r\n.slot-item {\r\n  border-radius: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  padding: 8px 10px;\r\n  background-color: #f9fafb;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  transition: all 0.15s ease;\r\n  display: flex;\r\n  flex-direction: column; /* çºµå‘æ’å¸ƒå­å…ƒç´  */\r\n}\r\n\r\n.slot-item:disabled {\r\n  cursor: not-allowed;\r\n}\r\n\r\n.slot-time {\r\n  font-size: 13px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.slot-range {\r\n  font-size: 11px;\r\n  color: #6b7280;\r\n}\r\n\r\n.slot-selected .slot-range {\r\n  color: #e0ecff;\r\n}\r\n\r\n/* å·²é€‰æ—¶æ®µ + æäº¤åŒºåŸŸ */\r\n\r\n.reserve-bottom {\r\n  margin-top: 16px;\r\n  border-top: 1px dashed #e5e7eb;\r\n  padding-top: 12px;\r\n}\r\n\r\n.selected-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.selected-tag {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  border-radius: 999px;\r\n  background-color: #eff6ff;\r\n  padding: 4px 8px 4px 10px;\r\n  font-size: 11px;\r\n  color: #1f2937;\r\n}\r\n\r\n.selected-tag-close {\r\n  border: none;\r\n  background: none;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.selected-tag-close:hover {\r\n  color: #111827;\r\n}\r\n\r\n.reserve-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.link-btn {\r\n  border: none;\r\n  background: none;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n  cursor: pointer;\r\n  padding: 4px 8px;\r\n}\r\n\r\n.link-btn:hover {\r\n  color: #111827;\r\n  text-decoration: underline;\r\n}\r\n\r\n.reserve-btn {\r\n  padding: 8px 20px;\r\n}\r\n\r\n.primary-btn {\r\n  border: none;\r\n  border-radius: 999px;\r\n  background: linear-gradient(135deg, #2563eb, #4f46e5);\r\n  color: #fff;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  padding: 8px 18px;\r\n  box-shadow: 0 8px 18px rgba(37, 99, 235, 0.3);\r\n  transition: all 0.15s ease;\r\n}\r\n\r\n.primary-btn:disabled {\r\n  opacity: 0.4;\r\n  cursor: default;\r\n  box-shadow: none;\r\n}\r\n\r\n.primary-btn:not(:disabled):hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.38);\r\n}\r\n\r\n.pager {\r\n  margin-top: 10px;\r\n  padding: 8px 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 24px;\r\n  font-size: 13px;\r\n  color: #4b5563;\r\n}\r\n\r\n.pager-center {\r\n  min-width: 120px;\r\n  text-align: center;\r\n}\r\n\r\n.pager-btn {\r\n  padding: 4px 12px;\r\n  border-radius: 999px;\r\n  border: 1px solid #d1d5db;\r\n  background-color: #ffffff;\r\n  cursor: pointer;\r\n  font-size: 13px;\r\n  min-width: 72px;\r\n}\r\n\r\n.pager-btn:hover {\r\n  border-color: #2563eb;\r\n  color: #2563eb;\r\n}\r\n\r\n/* ç¦ç”¨çŠ¶æ€çš„æ ·å¼ */\r\n.pager-btn-disabled,\r\n.pager-btn:disabled {\r\n  color: #9ca3af;\r\n  border-color: #e5e7eb;\r\n  background-color: #f9fafb;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* åªè°ƒâ€œæˆ‘çš„é¢„çº¦â€é‚£ä¸€é¡µçš„é—´è· */\r\n.card-reservations .page-title {\r\n  margin-bottom: 15px;   /* æ ‡é¢˜åˆ°è¡¨æ ¼çš„ä¸Šé—´è·çš„ä¸€åŠæ¥è‡ªè¿™é‡Œ */\r\n}\r\n\r\n.card-reservations .table-wrapper {\r\n  margin-top: 15px;      /* æ ‡é¢˜åˆ°è¡¨æ ¼çš„å¦ä¸€åŠæ¥è‡ªè¿™é‡Œ */\r\n  margin-bottom: 15px;   /* è¡¨æ ¼åˆ°åº•ä¸‹åˆ†é¡µçš„é—´è·çš„ä¸€åŠ */\r\n}\r\n\r\n.card-reservations .pager {\r\n  margin-top: 15px;      /* è¡¨æ ¼åˆ°åº•éƒ¨åˆ†é¡µçš„å¦ä¸€åŠ */\r\n}\r\n\r\n/* å¤–å±‚å¡ç‰‡ï¼Œè®©ä¸ªäººä¸­å¿ƒæ’‘æ»¡å³ä¾§é«˜åº¦ */\r\n.full-page-card {\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #ffffff;\r\n  /* ä¸€èˆ¬å†…å®¹ä¸å¤šï¼Œä¹Ÿä¸éœ€è¦æ»šåŠ¨æ¡äº†ï¼Œå¯ä»¥æ”¹æˆ auto æˆ–å¹²è„†åˆ æ‰ */\r\n  overflow-y: auto;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ */\r\n.user-header-section {\r\n  background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);\r\n  padding: 24px 32px;\r\n  color: #ffffff;\r\n  border-radius: 12px 12px 0 0;\r\n}\r\n\r\n.user-info-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n}\r\n\r\n.user-info-left {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.user-profile-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n.user-name {\r\n  font-size: 28px;\r\n  font-weight: 600;\r\n  margin: 0;\r\n  color: #ffffff;\r\n}\r\n\r\n.user-role {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  padding: 4px 16px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #ffffff;\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* å³ä¸Šè§’æ“ä½œï¼ˆé¢„ç•™â€œé€€å‡ºç™»å½•â€æŒ‰é’®ä¹‹ç±»ï¼‰ */\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n}\r\n\r\n/* ä¸»å†…å®¹åŒºåŸŸ */\r\n.profile-content {\r\n  padding: 20px;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  background: #ffffff;\r\n}\r\n\r\n/* è¡¨å•æ¨¡å—ï¼ˆä¸ªäººä¿¡æ¯ / è”ç³»æ–¹å¼ / åå¥½è®¾ç½® / å¤‡æ³¨ï¼‰ */\r\n.form-section {\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  padding: 0;\r\n  border-bottom: none;\r\n}\r\n\r\n.profile-content .section-title {\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n  margin: 0 0 12px 0;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid #f3f4f6;\r\n}\r\n\r\n.form-group {\r\n  margin-top: 8px;\r\n}\r\n\r\n/* ä¸¤åˆ—æ …æ ¼å¸ƒå±€ */\r\n.form-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 14px;\r\n}\r\n\r\n/* å•ä¸ªè¡¨å•é¡¹ */\r\n.form-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.form-item label {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #374151;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n}\r\n\r\n/* æ–‡æœ¬è¾“å…¥æ¡†/ä¸‹æ‹‰/æ–‡æœ¬åŸŸçš„é€šç”¨æ ·å¼ï¼Œæ’é™¤æ‰ radio */\r\n.form-item input:not([type=\"radio\"]),\r\n.form-item select,\r\n.form-item textarea {\r\n  width: 100%;\r\n  padding: 10px 12px;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  color: #111827;\r\n  background: #ffffff;\r\n  transition: all 0.2s ease;\r\n  outline: none;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* æ–‡æœ¬è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„é«˜äº®ï¼ˆä¸ä½œç”¨äº radioï¼‰ */\r\n.form-item input:not([type=\"radio\"]):focus,\r\n.form-item select:focus,\r\n.form-item textarea:focus {\r\n  border-color: #3b82f6;\r\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.form-item input:read-only {\r\n  background-color: #f9fafb;\r\n  border-color: #e5e7eb;\r\n  color: #6b7280;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* å¤‡æ³¨æ–‡æœ¬åŸŸå æ»¡ä¸€æ•´è¡Œ */\r\n.form-item.full-width {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n/* ä¸‹æ‹‰æ¡†çš„å°ç®­å¤´ï¼ˆå¯ä»¥åˆ æ‰è¿™ä¸€æ®µï¼Œä¹Ÿä¸å½±å“åŠŸèƒ½ï¼‰ */\r\n.form-item select {\r\n  width: 100%;\r\n  appearance: none;\r\n  /* è¿™é‡ŒåŸæœ¬æœ‰ä¸€é•¿ä¸² SVG çš„ background-imageï¼Œç”¨æ¥ç”»ä¸‹æ‹‰ç®­å¤´ã€‚\r\n     ä½ å¯ä»¥å…ˆä¸å†™ï¼Œæœ‰éœ€è¦å†è¡¥ï¼›ä¸å½±å“è¡¨å•åŠŸèƒ½ã€‚ */\r\n  background-repeat: no-repeat;\r\n  background-position: right 12px center;\r\n  background-size: 12px;\r\n  padding-right: 36px;\r\n  cursor: pointer;\r\n}\r\n\r\n/* è¾“å…¥æ¡† + å³ä¾§â€œä¿®æ”¹â€æŒ‰é’® */\r\n.input-with-action {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n}\r\n\r\n.input-with-action input {\r\n  flex: 1;\r\n}\r\n\r\n.radio-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  margin-top: 2px;\r\n}\r\n\r\n.radio-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  cursor: pointer;\r\n  padding: 2px 0;\r\n}\r\n\r\n.radio-option input[type=\"radio\"] {\r\n  width: 16px;\r\n  height: 16px;\r\n  accent-color: #3b82f6;\r\n}\r\n\r\n.radio-label {\r\n  font-size: 14px;\r\n  color: #374151;\r\n  font-weight: 500;\r\n}\r\n\r\n.radio-option input[type=\"radio\"]:checked + .radio-label {\r\n  color: #3b82f6;\r\n}\r\n\r\n/* å¤‡æ³¨æ–‡æœ¬åŸŸ */\r\n.form-item textarea {\r\n  min-height: 100px;\r\n  resize: vertical;\r\n  font-family: inherit;\r\n  line-height: 1.5;\r\n  padding: 12px;\r\n}\r\n\r\n/* æ“ä½œæŒ‰é’®åŒºåŸŸï¼ˆåº•éƒ¨çš„ å–æ¶ˆ / ä¿å­˜ + æç¤ºï¼‰ */\r\n.profile-actions {\r\n  margin-top: 4px;\r\n  padding-top: 0;\r\n  border-top: none;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n}\r\n\r\n/* åªåœ¨ä¸ªäººä¸­å¿ƒåº•éƒ¨ä½¿ç”¨çš„æŒ‰é’®æ ·å¼ */\r\n.profile-actions .primary-btn {\r\n  padding: 10px 32px;\r\n  background: #3b82f6;\r\n  color: #ffffff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.profile-actions .primary-btn:hover {\r\n  background: #2563eb;\r\n}\r\n\r\n/* å“åº”å¼é€‚é…ï¼šçª„å±æ—¶å‹ç¼©è¾¹è· & æŒ‰é’®çºµå‘æ’åˆ— */\r\n@media (max-width: 768px) {\r\n  .user-header-section {\r\n    padding: 20px;\r\n  }\r\n\r\n  .profile-content {\r\n    padding: 20px;\r\n  }\r\n\r\n  .user-info-header {\r\n    flex-direction: column;\r\n    gap: 20px;\r\n  }\r\n\r\n  .form-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .profile-actions {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 12px;\r\n  }\r\n\r\n  .profile-actions .hint-text {\r\n    text-align: center;\r\n    margin-left: 0;\r\n    margin-top: 8px;\r\n    min-width: 100%;\r\n  }\r\n}\r\n\r\n/* é¦–é¡µå¤–å±‚å®¹å™¨ï¼Œæ‹‰æ»¡å³ä¾§é«˜åº¦ */\r\n.home-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* é¦–é¡µè¿™å¼ å¤§å¡ç‰‡è¦æ’‘æ»¡é«˜åº¦ */\r\n.home-card {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 0;\r\n}\r\n\r\n/* é¦–é¡µä¸ŠåŠéƒ¨åˆ†ï¼šæ¬¢è¿æ–‡æ¡ˆ */\r\n.home-top {\r\n  display: flex;\r\n  align-items: stretch;\r\n  gap: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.home-top.home-head {\r\n  position: relative;\r\n}\r\n\r\n.home-intro {\r\n  flex: 1.3;\r\n  padding-right: 150px;\r\n}\r\n\r\n.home-tagline {\r\n  font-size: 13px;\r\n  color: #4b5563;\r\n  margin-top: 6px;\r\n}\r\n\r\n.home-tagline strong {\r\n  color: #2563eb;\r\n}\r\n\r\n/* ä»Šæ—¥æ¦‚å†µå¡ç‰‡ï¼šç»Ÿä¸€ä¸ºç™½è‰²å¡ç‰‡èƒŒæ™¯ */\r\n.home-panel {\r\n  border-radius: 12px;\r\n  padding: 16px 18px;\r\n  background-color: #ffffff;\r\n  border: 1px solid #e5e7eb;\r\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.04);\r\n  color: #111827;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n}\r\n\r\n.home-overview-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.home-overview-line {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n}\r\n\r\n.home-overview-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 6px;\r\n  margin-top: 4px;\r\n}\r\n\r\n.tag {\r\n  font-size: 11px;\r\n  padding: 3px 9px;\r\n  border-radius: 999px;\r\n  background-color: #eff6ff;\r\n  color: #1d4ed8;\r\n}\r\n\r\n.tag-gray {\r\n  background-color: #f3f4f6;\r\n  color: #4b5563;\r\n}\r\n\r\n.tag-blue {\r\n  background-color: #eff6ff;\r\n  color: #2563eb;\r\n}\r\n\r\n.my-today-card .home-panel-body {\r\n  padding-top: 8px;\r\n}\r\n\r\n.my-today-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n}\r\n\r\n.today-item {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 6px 0;\r\n  border-bottom: 1px dashed #e5e7eb;\r\n}\r\n\r\n.today-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.today-left {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n}\r\n\r\n.today-time {\r\n  font-size: 13px;\r\n  font-weight: 500;\r\n  color: #111827;\r\n}\r\n\r\n.today-room {\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.today-empty {\r\n  font-size: 12px;\r\n  color: #9ca3af;\r\n  padding: 4px 0;\r\n}\r\n\r\n.notice-panel {\r\n  margin-top: 4px;\r\n}\r\n\r\n.notice-more-btn {\r\n  border: none;\r\n  background: transparent;\r\n  font-size: 12px;\r\n  color: #2563eb;\r\n  cursor: pointer;\r\n  padding: 2px 4px;\r\n}\r\n\r\n.notice-more-btn:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.notice-list {\r\n  margin: 8px 0 0;\r\n  padding: 0;\r\n  list-style: none;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  max-height: 160px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.notice-item {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 8px;\r\n}\r\n\r\n.notice-tag {\r\n  font-size: 11px;\r\n  padding: 2px 8px;\r\n  border-radius: 999px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.notice-main {\r\n  flex: 1;\r\n  min-width: 0;\r\n}\r\n\r\n.notice-title {\r\n  font-size: 13px;\r\n  color: #111827;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.notice-meta {\r\n  font-size: 11px;\r\n  color: #9ca3af;\r\n  margin-top: 2px;\r\n}\r\n\r\n.home-panel-title {\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.home-panel-subtitle {\r\n  margin-top: 2px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.home-panel-number {\r\n  font-size: 26px;\r\n  font-weight: 600;\r\n  margin: 6px 0 2px;\r\n}\r\n\r\n.home-panel-desc {\r\n  font-size: 13px;\r\n  opacity: 0.95;\r\n}\r\n\r\n.home-panel-footer {\r\n  font-size: 12px;\r\n  opacity: 0.88;\r\n  margin-top: 8px;\r\n}\r\n.home-panel-footer span {\r\n  font-weight: 500;\r\n}\r\n\r\n.weather-main{margin:6px 0}\r\n.weather-icon{font-size: 28px}\r\n.weather-temp{font-size: 22px;font-weight: 600;margin-left:6px}\r\n.weather-desc{font-size: 12px;color:#9ca3af}\r\n\r\n/* æœˆæŠ¥ + ä¿¡ç”¨ç¯ æ¨ªå‘ä¸€æ’ */\r\n.month-report{\r\n  flex: 1;\r\n  background: #ffffff;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 12px;\r\n  padding: 14px;\r\n  box-shadow: 0 2px 8px rgba(15,23,42,.04);\r\n}\r\n.report-title {\r\n  font-size: 15px;      /* â­ è·Ÿ .home-panel-title ä¸€è‡´ */\r\n  font-weight: 600;\r\n  margin-bottom: 10px;\r\n  color: #111827;\r\n}\r\n.report-row{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 13px;\r\n  margin: 6px 0;\r\n}\r\n.report-row strong{color:#2563eb}\r\n\r\n/* 10. å¿«æ·åé¦ˆæµ®å±‚ */\r\n.feedback-float{\r\n  position: fixed;\r\n  right: 24px;\r\n  bottom: 80px;\r\n  z-index: 999;\r\n}\r\n.feedback-btn{\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 50%;\r\n  background: #2563eb;\r\n  color: #fff;\r\n  font-size: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  box-shadow: 0 2px 8px rgba(37,99,235,.35);\r\n}\r\n.feedback-panel{\r\n  position: absolute;\r\n  bottom: 56px;\r\n  right: 0;\r\n  background: #fff;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 10px;\r\n  padding: 10px 12px;\r\n  box-shadow: 0 4px 12px rgba(15,23,42,.08);\r\n  width: 140px;\r\n}\r\n.feedback-title{font-size: 12px;color:#6b7280;margin-bottom: 6px;text-align: center}\r\n.feedback-emojis{display: flex;justify-content: space-around;font-size: 20px;cursor: pointer}\r\n\r\n/* æ–°å¢ */\r\n.weather-mini{\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 12px;\r\n  background: #ffffff;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 8px;\r\n  padding: 8px 10px;\r\n  box-shadow: 0 2px 6px rgba(15,23,42,.06);\r\n  width: 130px;\r\n  z-index: 1;\r\n}\r\n.weather-mini .weather-main{ display: flex; align-items: center; justify-content: center; margin-bottom: 2px; }\r\n.weather-mini .weather-icon{ font-size: 20px; }\r\n.weather-mini .weather-temp{ font-size: 16px; font-weight: 600; margin-left: 6px; }\r\n.weather-mini .weather-desc{ font-size: 11px; color: #6b7280; text-align: center; white-space: nowrap; }\r\n\r\n/* é¦–é¡µä¸­éƒ¨ä¸»å¸ƒå±€ï¼šæŒ‰è¡Œæ’åˆ— */\r\n.home-main-grid {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  margin-top: 10px;\r\n}\r\n\r\n/* é€šç”¨ä¸€è¡Œå®¹å™¨ï¼ˆæ•´è¡Œ 1 åˆ—ï¼‰ */\r\n.home-row {\r\n  width: 100%;\r\n}\r\n\r\n/* ç¬¬äºŒè¡Œï¼šä»Šæ—¥è‡ªä¹ å®¤æ¦‚å†µ + æœ¬æœˆå­¦ä¹ ç®€æŠ¥ */\r\n.home-row-two {\r\n  display: grid;\r\n  grid-template-columns: 1.4fr 2fr;\r\n  gap: 12px;\r\n}\r\n\r\n/* è®©ç¬¬äºŒè¡Œä¸¤å—å¡ç‰‡åŒé«˜ */\r\n.home-row-two .home-overview,\r\n.home-row-two .month-report {\r\n  height: 100%;\r\n}\r\n\r\n/* çª„å±ä¸‹ï¼šæ¦‚å†µå’ŒæœˆæŠ¥ä¸Šä¸‹å †å  */\r\n@media (max-width: 1024px) {\r\n  .home-row-two {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n/* ä»Šæ—¥æç¤ºæ•´å—å¡ç‰‡ */\r\n.quote-card {\r\n  position: relative;              /* ä¸ºå³ä¸Šè§’æŒ‰é’®æä¾›å®šä½å‚ç…§ */\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 8px;\r\n  background: #f9fafb;\r\n  border-radius: 12px;\r\n  padding: 14px 16px;\r\n  border: 1px solid #e5e7eb;\r\n  box-shadow: 0 2px 8px rgba(15, 23, 42, 0.04);\r\n}\r\n\r\n.quote-refresh-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 12px;\r\n  width: 26px;\r\n  height: 26px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: #ffffff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 14px;\r\n  color: #6b7280;\r\n  cursor: pointer;\r\n  box-shadow: 0 1px 4px rgba(15, 23, 42, 0.12);\r\n}\r\n\r\n.quote-refresh-btn:hover {\r\n  background: #eff6ff;\r\n  color: #2563eb;\r\n}\r\n\r\n.quote-content {\r\n  max-width: 640px;          /* æ§åˆ¶ä¸€ä¸‹å®½åº¦ï¼Œé¿å…å¤ªé•¿ä¸€è¡Œ */\r\n}\r\n\r\n/* ä¸Šé¢ä¸€è¡Œï¼šå›¾æ ‡ + â€œä»Šæ—¥æç¤ºâ€ */\r\n.quote-header {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 6px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.quote-icon-inline {\r\n  font-size: 24px;\r\n}\r\n\r\n.quote-label {\r\n  font-size: 16px;\r\n  color: #9ca3af;\r\n}\r\n\r\n/* ä¸‹é¢ä¸€å¥è¯å†…å®¹ï¼Œå­—ä½“è°ƒå¤§ä¸€ç‚¹ */\r\n.quote-text {\r\n  font-size: 17px;           /* â­ æ¯”ä¹‹å‰æ›´å¤§ä¸€ç‚¹ */\r\n  color: #4b5563;\r\n  line-height: 1.6;\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}