{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  name: 'AdminHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n  data() {\n    return {\n      /* timers */\n      dashboardTimer: null,\n      reservationTimer: null,\n      userTimer: null,\n      /* Dashboard */\n      autoRefresh: false,\n      metrics: {\n        todayReservations: 120,\n        todayTrend: 12,\n        todaySignRate: 82,\n        openRooms: 12,\n        totalSeats: 680,\n        pendingItems: 5\n      },\n      trendItems: [{\n        key: 'weekReservation',\n        title: 'æœ¬å‘¨é¢„çº¦å®Œæˆç‡',\n        value: '86%',\n        percent: 86,\n        status: 'success',\n        desc: 'é¢„çº¦å®Œæˆç‡ä¿æŒåœ¨è¾ƒé«˜æ°´å¹³ï¼Œå¯ç»§ç»­è§‚å¯Ÿå‘¨æœ«æ³¢åŠ¨ã€‚'\n      }, {\n        key: 'weekCheckin',\n        title: 'æœ¬å‘¨å¹³å‡ç­¾åˆ°ç‡',\n        value: '79%',\n        percent: 79,\n        status: 'success',\n        desc: 'å»ºè®®é’ˆå¯¹ä½å¹´çº§åŒå­¦å¼€å±•ä¸€æ¬¡åˆ°é¦†æé†’æ´»åŠ¨ã€‚'\n      }, {\n        key: 'weekViolation',\n        title: 'æœ¬å‘¨è¿çº¦ç‡',\n        value: '6%',\n        percent: 6,\n        status: 'warning',\n        desc: 'æœ‰ 8 ä½åŒå­¦å‡ºç°å¤šæ¬¡è¿çº¦ï¼Œå¯ç»“åˆä¿¡ç”¨åˆ†è§„åˆ™é‡ç‚¹å…³æ³¨ã€‚'\n      }],\n      /* Admin Announcement */\n      adminNoticeHomeLoading: false,\n      adminNoticeListLoading: false,\n      adminHomeNotices: [],\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\n      noticeTypeOptions: [{\n        label: 'è§„åˆ™',\n        value: 'RULE'\n      }, {\n        label: 'è°ƒæ•´',\n        value: 'ADJUSTMENT'\n      }, {\n        label: 'çªå‘',\n        value: 'EMERGENCY'\n      }, {\n        label: 'ç»´æŠ¤',\n        value: 'MAINTENANCE'\n      }, {\n        label: 'è€ƒè¯•',\n        value: 'EXAM'\n      }, {\n        label: 'å…¶ä»–',\n        value: 'OTHER'\n      }],\n      noticeLevelOptions: [{\n        label: 'é‡è¦',\n        value: 'IMPORTANT'\n      }, {\n        label: 'æé†’',\n        value: 'WARNING'\n      }, {\n        label: 'é€šçŸ¥',\n        value: 'INFO'\n      }],\n      noticeTargetOptions: [{\n        label: 'å…¨ä½“ç®¡ç†å‘˜',\n        value: 0\n      }, {\n        label: 'å…¨ä½“å­¦ç”Ÿ',\n        value: 1\n      }, {\n        label: 'å…¨éƒ¨ç”¨æˆ·',\n        value: 2\n      }],\n      adminNoticeAllVisible: false,\n      adminNoticeDetailVisible: false,\n      adminNoticeDetail: null,\n      adminNoticeDetailFrom: 'home',\n      adminNoticeTypeFilter: '',\n      adminNoticeLevelFilter: '',\n      adminNoticeTargetFilter: null,\n      adminNoticeKeyword: '',\n      adminNoticeIncludeExpired: false,\n      adminNoticePageNum: 1,\n      adminNoticePageSize: 6,\n      adminNoticeTotalCount: 0,\n      adminNoticePageList: [],\n      adminNoticeEditVisible: false,\n      adminNoticeEditMode: 'create',\n      // create | edit\n      adminNoticeSubmitting: false,\n      adminNoticeForm: {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2,\n        // 0=ç®¡ç†å‘˜ 1=å­¦ç”Ÿ 2=å…¨éƒ¨ç”¨æˆ·\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      },\n      /* Admin Feedbackï¼ˆæŠ•è¯‰å¤„ç†ï¼‰ */\n      fbAdminLoading: false,\n      fbAdminList: [],\n      fbAdminPageNum: 1,\n      fbAdminPageSize: 8,\n      fbAdminTotal: 0,\n      fbAdminStatusFilter: '',\n      fbAdminCategoryFilter: '',\n      fbAdminKeyword: '',\n      fbAdminOnlyPending: true,\n      fbAdminStats: {\n        pending: 0,\n        processing: 0,\n        resolved: 0\n      },\n      fbAdminDrawerVisible: false,\n      fbAdminDetail: null,\n      fbAdminSubmitting: false,\n      fbAdminHandleForm: {\n        status: 'processing',\n        reply: '',\n        cancelReservation: false\n      },\n      todos: [{\n        id: 1,\n        type: 'complaint',\n        content: 'å¤„ç† 2 æ¡å…³äºè‡ªä¹ å®¤å™ªéŸ³çš„æŠ•è¯‰è®°å½•ã€‚',\n        from: 'æŠ•è¯‰å¤„ç†',\n        time: '2025-12-10 09:20',\n        priority: 'high'\n      }, {\n        id: 2,\n        type: 'violation',\n        content: 'æ£€æŸ¥æœ¬å‘¨è¿ç»­è¿çº¦è¶…è¿‡ 3 æ¬¡çš„å­¦ç”Ÿåå•ã€‚',\n        from: 'æ—¥å¿—ç»Ÿè®¡',\n        time: '2025-12-10 08:50',\n        priority: 'medium'\n      }, {\n        id: 3,\n        type: 'rule',\n        content: 'ç¡®è®¤æœŸæœ«è€ƒè¯•å‘¨è‡ªä¹ å®¤å¼€æ”¾æ—¶é—´ä¸é¢„çº¦ä¸Šé™ã€‚',\n        from: 'åº§ä½ç®¡ç†',\n        time: '2025-12-09 16:10',\n        priority: 'medium'\n      }, {\n        id: 4,\n        type: 'system',\n        content: 'å¯¼å‡ºæœ¬æœˆé¢„çº¦ä¸ç­¾åˆ°æŠ¥è¡¨å­˜æ¡£ã€‚',\n        from: 'æ—¥å¿—ç»Ÿè®¡',\n        time: '2025-12-09 10:25',\n        priority: 'low'\n      }],\n      latestActivities: [{\n        id: 1,\n        text: 'å¼ ä¸‰ é¢„çº¦äº† å›¾ä¹¦é¦† 401 Â· 10:00-12:00',\n        type: 'book',\n        typeLabel: 'æ–°é¢„çº¦',\n        time: '09:15'\n      }, {\n        id: 2,\n        text: 'æå›› åœ¨ æœ¬éƒ¨ Â· 3 æ¥¼ 301 å®Œæˆç­¾åˆ°',\n        type: 'sign',\n        typeLabel: 'å·²ç­¾åˆ°',\n        time: '08:05'\n      }, {\n        id: 3,\n        text: 'ç‹äº” å–æ¶ˆäº† æ˜æ—¥çš„é¢„çº¦ï¼ˆåŸå› ï¼šè¯¾ç¨‹è°ƒæ•´ï¼‰',\n        type: 'cancel',\n        typeLabel: 'å·²å–æ¶ˆ',\n        time: '07:48'\n      }],\n      /* Reservation Manage */\n      reservationFilters: {\n        keyword: '',\n        room: '',\n        date: '',\n        status: ''\n      },\n      reservationAutoRefresh: false,\n      roomOptions: ['3 æ¥¼ 301', 'å›¾ä¹¦é¦† 401', 'å›¾ä¹¦é¦† 501'],\n      statusOptions: [{\n        label: 'å·²é¢„çº¦',\n        value: 'booked'\n      }, {\n        label: 'å·²ç­¾åˆ°',\n        value: 'signed'\n      }, {\n        label: 'å·²å–æ¶ˆ',\n        value: 'canceled'\n      }, {\n        label: 'è¿çº¦',\n        value: 'violation'\n      }],\n      reservations: [{\n        id: 1,\n        code: 'Y20251204001',\n        studentNo: '20210001',\n        studentName: 'å¼ ä¸‰',\n        room: '3 æ¥¼ 301',\n        seatNo: 'A-15',\n        date: '2025-12-05',\n        timeRange: '08:00-10:00',\n        status: 'booked',\n        remark: 'è¿Ÿåˆ°éœ€äººå·¥ç¡®è®¤'\n      }, {\n        id: 2,\n        code: 'Y20251204002',\n        studentNo: '20210002',\n        studentName: 'æå››',\n        room: 'å›¾ä¹¦é¦† 401',\n        seatNo: 'B-08',\n        date: '2025-12-05',\n        timeRange: '10:00-12:00',\n        status: 'signed',\n        remark: 'æŒ‰æ—¶ç­¾åˆ°'\n      }, {\n        id: 3,\n        code: 'Y20251204003',\n        studentNo: '20210003',\n        studentName: 'ç‹äº”',\n        room: 'å›¾ä¹¦é¦† 401',\n        seatNo: 'C-07',\n        date: '2025-12-05',\n        timeRange: '14:00-16:00',\n        status: 'canceled',\n        remark: 'å­¦ç”Ÿä¸»åŠ¨å–æ¶ˆ'\n      }, {\n        id: 4,\n        code: 'Y20251204004',\n        studentNo: '20210004',\n        studentName: 'èµµå…­',\n        room: '3 æ¥¼ 301',\n        seatNo: 'A-01',\n        date: '2025-12-04',\n        timeRange: '18:00-20:00',\n        status: 'violation',\n        remark: 'æœªåˆ°åœºä¸”æœªå–æ¶ˆ'\n      }],\n      reservationSelection: [],\n      reservationPage: 1,\n      reservationPageSize: 10,\n      /* User Manage */\n      userFilters: {\n        keyword: '',\n        role: '',\n        status: '',\n        onlyAbnormal: false\n      },\n      userAutoRefresh: false,\n      userRoleOptions: [{\n        label: 'å­¦ç”Ÿ',\n        value: 'student'\n      }, {\n        label: 'æ•™å¸ˆ',\n        value: 'teacher'\n      }, {\n        label: 'ç®¡ç†å‘˜',\n        value: 'admin'\n      }],\n      userStatusOptions: [{\n        label: 'æ­£å¸¸',\n        value: 'normal'\n      }, {\n        label: 'é¢„è­¦',\n        value: 'warning'\n      }, {\n        label: 'é»‘åå•',\n        value: 'blacklist'\n      }],\n      users: [{\n        id: 1,\n        studentNo: '20210001',\n        name: 'å¼ ä¸‰',\n        role: 'student',\n        major: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯',\n        clazz: '3ç­',\n        creditScore: 100,\n        violationCount: 0,\n        status: 'normal',\n        lastLoginAt: '2025-12-05 08:10',\n        phone: '138****0001'\n      }, {\n        id: 2,\n        studentNo: '20210002',\n        name: 'æå››',\n        role: 'student',\n        major: 'è½¯ä»¶å·¥ç¨‹',\n        clazz: '2ç­',\n        creditScore: 78,\n        violationCount: 1,\n        status: 'warning',\n        lastLoginAt: '2025-12-05 09:05',\n        phone: '138****0002'\n      }, {\n        id: 3,\n        studentNo: '20210003',\n        name: 'ç‹äº”',\n        role: 'student',\n        major: 'äººå·¥æ™ºèƒ½',\n        clazz: '1ç­',\n        creditScore: 55,\n        violationCount: 3,\n        status: 'blacklist',\n        lastLoginAt: '2025-12-03 19:20',\n        phone: '138****0003'\n      }, {\n        id: 4,\n        studentNo: 'T00001',\n        name: 'èµµè€å¸ˆ',\n        role: 'teacher',\n        major: 'ä¿¡æ¯å­¦é™¢',\n        clazz: 'è¾…å¯¼å‘˜',\n        creditScore: 100,\n        violationCount: 0,\n        status: 'normal',\n        lastLoginAt: '2025-12-05 07:40',\n        phone: '139****8888'\n      }, {\n        id: 5,\n        studentNo: 'A00001',\n        name: 'ç³»ç»Ÿç®¡ç†å‘˜',\n        role: 'admin',\n        major: 'ä¿¡æ¯ä¸­å¿ƒ',\n        clazz: 'åå°ç®¡ç†',\n        creditScore: 100,\n        violationCount: 0,\n        status: 'normal',\n        lastLoginAt: '2025-12-05 08:00',\n        phone: 'â€”'\n      }],\n      userSelection: [],\n      userPage: 1,\n      userPageSize: 10,\n      /* Seat Manage */\n      currentCampus: 'main',\n      campusOptions: [{\n        label: 'æœ¬éƒ¨æ ¡åŒº',\n        value: 'main'\n      }, {\n        label: 'ä¸œæ ¡åŒº',\n        value: 'east'\n      }],\n      currentBuild: '',\n      buildOptions: [{\n        label: '3 å·æ•™å­¦æ¥¼',\n        value: '3F'\n      }, {\n        label: 'å›¾ä¹¦é¦†',\n        value: 'LIB'\n      }],\n      onlyShowOpen: true,\n      roomKeyword: '',\n      roomCapacityFilter: 'all',\n      rooms: [{\n        id: 1,\n        name: '3 æ¥¼ 301 è‡ªä¹ å®¤',\n        campus: 'main',\n        building: '3 å·æ•™å­¦æ¥¼',\n        buildingCode: '3F',\n        floor: 3,\n        capacity: 60,\n        usedSeats: 32,\n        status: 'open'\n      }, {\n        id: 2,\n        name: '3 æ¥¼ 302 è‡ªä¹ å®¤',\n        campus: 'main',\n        building: '3 å·æ•™å­¦æ¥¼',\n        buildingCode: '3F',\n        floor: 3,\n        capacity: 40,\n        usedSeats: 12,\n        status: 'open'\n      }, {\n        id: 3,\n        name: 'å›¾ä¹¦é¦† 401 è‡ªä¹ åŒº',\n        campus: 'main',\n        building: 'å›¾ä¹¦é¦†',\n        buildingCode: 'LIB',\n        floor: 4,\n        capacity: 90,\n        usedSeats: 76,\n        status: 'open'\n      }, {\n        id: 4,\n        name: 'å›¾ä¹¦é¦† 501 ç ”è®¨åŒº',\n        campus: 'main',\n        building: 'å›¾ä¹¦é¦†',\n        buildingCode: 'LIB',\n        floor: 5,\n        capacity: 30,\n        usedSeats: 5,\n        status: 'closed'\n      }],\n      selectedRoomId: 1,\n      activeTab: 'layout',\n      showSeatNo: true,\n      showDemoOccupied: true,\n      seatGrid: [],\n      seatRule: {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      }\n    };\n  },\n  computed: {\n    todayText() {\n      const d = new Date();\n      const y = d.getFullYear();\n      const m = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${y}-${m}-${day}`;\n    },\n    /* reservation computed */\n    filteredReservations() {\n      const {\n        keyword,\n        room,\n        date,\n        status\n      } = this.reservationFilters;\n      return this.reservations.filter(item => {\n        let ok = true;\n        if (keyword && keyword.trim()) {\n          const k = keyword.trim();\n          ok = ok && (item.studentName.includes(k) || item.studentNo.includes(k) || item.code.includes(k));\n        }\n        if (room) ok = ok && item.room === room;\n        if (date) ok = ok && item.date === date;\n        if (status) ok = ok && item.status === status;\n        return ok;\n      });\n    },\n    paginatedReservations() {\n      const start = (this.reservationPage - 1) * this.reservationPageSize;\n      return this.filteredReservations.slice(start, start + this.reservationPageSize);\n    },\n    reservationStats() {\n      const stats = {\n        total: 0,\n        booked: 0,\n        signed: 0,\n        canceled: 0,\n        violation: 0\n      };\n      stats.total = this.filteredReservations.length;\n      this.filteredReservations.forEach(item => {\n        if (item.status === 'booked') stats.booked++;else if (item.status === 'signed') stats.signed++;else if (item.status === 'canceled') stats.canceled++;else if (item.status === 'violation') stats.violation++;\n      });\n      return stats;\n    },\n    /* user computed */\n    filteredUsers() {\n      const {\n        keyword,\n        role,\n        status,\n        onlyAbnormal\n      } = this.userFilters;\n      return this.users.filter(user => {\n        let ok = true;\n        if (keyword && keyword.trim()) {\n          const k = keyword.trim();\n          ok = ok && (user.name.includes(k) || user.studentNo.includes(k) || user.major && user.major.includes(k));\n        }\n        if (role) ok = ok && user.role === role;\n        if (status) ok = ok && user.status === status;\n        if (onlyAbnormal) ok = ok && (user.status === 'warning' || user.status === 'blacklist');\n        return ok;\n      });\n    },\n    paginatedUsers() {\n      const start = (this.userPage - 1) * this.userPageSize;\n      return this.filteredUsers.slice(start, start + this.userPageSize);\n    },\n    userStats() {\n      const stats = {\n        total: 0,\n        normal: 0,\n        warning: 0,\n        blacklist: 0\n      };\n      stats.total = this.filteredUsers.length;\n      this.filteredUsers.forEach(user => {\n        if (user.status === 'normal') stats.normal++;else if (user.status === 'warning') stats.warning++;else if (user.status === 'blacklist') stats.blacklist++;\n      });\n      return stats;\n    },\n    /* seat computed */\n    filteredRooms() {\n      return this.rooms.filter(room => {\n        let ok = true;\n        if (this.currentCampus) ok = ok && room.campus === this.currentCampus;\n        if (this.currentBuild) ok = ok && room.buildingCode === this.currentBuild;\n        if (this.onlyShowOpen) ok = ok && room.status === 'open';\n        if (this.roomKeyword && this.roomKeyword.trim()) {\n          const k = this.roomKeyword.trim();\n          ok = ok && (room.name.includes(k) || String(room.floor).includes(k) || room.building.includes(k));\n        }\n        if (this.roomCapacityFilter === 'small') ok = ok && room.capacity <= 40;\n        if (this.roomCapacityFilter === 'medium') ok = ok && room.capacity > 40 && room.capacity < 80;\n        if (this.roomCapacityFilter === 'large') ok = ok && room.capacity >= 80;\n        return ok;\n      });\n    },\n    selectedRoom() {\n      const room = this.rooms.find(r => r.id === this.selectedRoomId);\n      if (!room) return null;\n      return {\n        ...room,\n        statusModel: room.status === 'open'\n      };\n    },\n    seatStats() {\n      const stats = {\n        free: 0,\n        occupied: 0,\n        disabled: 0,\n        blockedArea: 1\n      };\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => {\n          if (seat.status === 'free') stats.free++;else if (seat.status === 'occupied') stats.occupied++;else if (seat.status === 'disabled') stats.disabled++;\n        });\n      });\n      return stats;\n    },\n    latestActivitiesLeft() {\n      const mid = Math.ceil(this.latestActivities.length / 2);\n      return this.latestActivities.slice(0, mid);\n    },\n    latestActivitiesRight() {\n      const mid = Math.ceil(this.latestActivities.length / 2);\n      return this.latestActivities.slice(mid);\n    },\n    lastLoginIp() {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n      const u = s ? JSON.parse(s) : {};\n      return u.lastLoginIp || 'æœªçŸ¥';\n    }\n  },\n  watch: {\n    currentPage(val) {\n      if (val !== 'admin-home') this.stopDashboardTimer();else if (this.autoRefresh) this.startDashboardTimer();\n      if (val === 'admin-home') this.loadAdminNoticeHome();\n      if (val !== 'admin-reservations') this.stopReservationTimer();else if (this.reservationAutoRefresh) this.startReservationTimer();\n      if (val !== 'admin-users') this.stopUserTimer();else if (this.userAutoRefresh) this.startUserTimer();\n      if (val === 'admin-complaints') {\n        this.loadAdminFeedback(true);\n        this.loadAdminFeedbackStats();\n      }\n    },\n    autoRefresh(val) {\n      if (val && this.currentPage === 'admin-home') this.startDashboardTimer();else this.stopDashboardTimer();\n    },\n    reservationAutoRefresh(val) {\n      if (val && this.currentPage === 'admin-reservations') this.startReservationTimer();else this.stopReservationTimer();\n    },\n    userAutoRefresh(val) {\n      if (val && this.currentPage === 'admin-users') this.startUserTimer();else this.stopUserTimer();\n    }\n  },\n  created() {\n    this.initSeatGrid();\n    this.loadAdminNoticeHome();\n  },\n  beforeUnmount() {\n    this.stopDashboardTimer();\n    this.stopReservationTimer();\n    this.stopUserTimer();\n  },\n  methods: {\n    emitChange(page) {\n      this.$emit('change-page', page);\n    },\n    /* ---------- dashboard timers ---------- */\n    startDashboardTimer() {\n      this.stopDashboardTimer();\n      this.dashboardTimer = setInterval(() => {\n        this.refreshDashboardMetrics();\n      }, 8000);\n    },\n    stopDashboardTimer() {\n      if (this.dashboardTimer) {\n        clearInterval(this.dashboardTimer);\n        this.dashboardTimer = null;\n      }\n    },\n    refreshDashboardMetrics() {\n      // çº¯å‰ç«¯æ¼”ç¤ºï¼šè½»å¾®æ³¢åŠ¨ä¸€ä¸‹æ•°å€¼ï¼Œä½“ç°â€œè‡ªåŠ¨åˆ·æ–°â€ç¡®å®åœ¨åŠ¨\n      const jitter = (n, min, max) => Math.min(max, Math.max(min, n));\n      this.metrics.todayReservations = jitter(this.metrics.todayReservations + (Math.random() < 0.5 ? -1 : 1) * Math.floor(Math.random() * 3), 80, 200);\n      this.metrics.todaySignRate = jitter(this.metrics.todaySignRate + (Math.random() < 0.5 ? -1 : 1) * Math.floor(Math.random() * 2), 60, 98);\n      this.metrics.pendingItems = jitter(this.metrics.pendingItems + (Math.random() < 0.5 ? -1 : 1), 0, 20);\n    },\n    /* ---------- admin announcement ---------- */\n    noticeTypeText(t) {\n      if (t === 'RULE') return 'è§„åˆ™';\n      if (t === 'ADJUSTMENT') return 'è°ƒæ•´';\n      if (t === 'EMERGENCY') return 'çªå‘';\n      if (t === 'MAINTENANCE') return 'ç»´æŠ¤';\n      if (t === 'EXAM') return 'è€ƒè¯•';\n      return 'å…¶ä»–';\n    },\n    noticeTypeIcon(t) {\n      if (t === 'RULE') return 'ğŸ“Œ';\n      if (t === 'ADJUSTMENT') return 'ğŸ§­';\n      if (t === 'EMERGENCY') return 'ğŸš¨';\n      if (t === 'MAINTENANCE') return 'ğŸ§°';\n      if (t === 'EXAM') return 'ğŸ“';\n      return 'ğŸ“£';\n    },\n    noticeLevelText(l) {\n      if (l === 'IMPORTANT') return 'é‡è¦';\n      if (l === 'WARNING') return 'æé†’';\n      return 'é€šçŸ¥';\n    },\n    formatNoticeTime(timeStr, withTime) {\n      if (!timeStr) return 'â€”';\n      const d = new Date(timeStr);\n      if (Number.isNaN(d.getTime())) return String(timeStr);\n      const pad = n => String(n).padStart(2, '0');\n      const y = d.getFullYear();\n      const m = pad(d.getMonth() + 1);\n      const day = pad(d.getDate());\n      if (!withTime) return `${y}-${m}-${day}`;\n      const hh = pad(d.getHours());\n      const mm = pad(d.getMinutes());\n      return `${y}-${m}-${day} ${hh}:${mm}`;\n    },\n    makeNoticeSummary(content, maxLen = 42) {\n      if (!content) return '';\n      const s = String(content).replace(/\\s+/g, ' ').trim();\n      if (!s) return '';\n      return s.length > maxLen ? s.slice(0, maxLen) + 'â€¦' : s;\n    },\n    normalizeNoticeItem(item) {\n      const it = item || {};\n      return {\n        ...it,\n        summary: it.summary || this.makeNoticeSummary(it.content)\n      };\n    },\n    getCurrentUser() {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n      try {\n        return s ? JSON.parse(s) : {};\n      } catch (e) {\n        return {};\n      }\n    },\n    getCurrentUserId() {\n      const u = this.getCurrentUser();\n      const id = u && (u.id ?? u.userId);\n      const n = Number(id);\n      return Number.isFinite(n) ? n : null;\n    },\n    async loadAdminNoticeHome(silent = false) {\n      if (!silent) this.adminNoticeHomeLoading = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: {\n            pageNum: 1,\n            pageSize: 3,\n            includeExpired: 0\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : [];\n          this.adminHomeNotices = list.map(this.normalizeNoticeItem);\n        } else {\n          this.adminHomeNotices = [];\n        }\n      } catch (e) {\n        this.adminHomeNotices = [];\n      } finally {\n        if (!silent) this.adminNoticeHomeLoading = false;\n      }\n    },\n    openAdminNoticeAll() {\n      this.adminNoticeAllVisible = true;\n      this.reloadAdminNoticePage(true);\n    },\n    async reloadAdminNoticePage(resetPage) {\n      if (resetPage) this.adminNoticePageNum = 1;\n      this.adminNoticeListLoading = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: {\n            pageNum: this.adminNoticePageNum,\n            pageSize: this.adminNoticePageSize,\n            type: this.adminNoticeTypeFilter || undefined,\n            level: this.adminNoticeLevelFilter || undefined,\n            targetRole: this.adminNoticeTargetFilter === null || this.adminNoticeTargetFilter === '' || this.adminNoticeTargetFilter === undefined ? undefined : Number(this.adminNoticeTargetFilter),\n            keyword: this.adminNoticeKeyword || undefined,\n            includeExpired: this.adminNoticeIncludeExpired ? 1 : 0\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : [];\n          this.adminNoticePageList = list.map(this.normalizeNoticeItem);\n          this.adminNoticeTotalCount = Number(res.total || 0);\n        } else {\n          this.adminNoticePageList = [];\n          this.adminNoticeTotalCount = 0;\n          ElMessage.error(res?.msg || 'åŠ è½½å…¬å‘Šå¤±è´¥');\n        }\n      } catch (e) {\n        this.adminNoticePageList = [];\n        this.adminNoticeTotalCount = 0;\n        ElMessage.error('åŠ è½½å…¬å‘Šå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeListLoading = false;\n      }\n    },\n    onAdminNoticePageChange(p) {\n      this.adminNoticePageNum = p;\n      this.reloadAdminNoticePage(false);\n    },\n    resetAdminNoticeFilters() {\n      this.adminNoticeTypeFilter = '';\n      this.adminNoticeLevelFilter = '';\n      this.adminNoticeTargetFilter = null;\n      this.adminNoticeKeyword = '';\n      this.adminNoticeIncludeExpired = false;\n      this.reloadAdminNoticePage(true);\n    },\n    async openAdminNoticeDetail(item, from) {\n      this.adminNoticeDetailFrom = from || 'home';\n      // å…ˆå±•ç¤ºï¼ˆæ›´ä¸æ»‘ï¼‰ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°è¯¦æƒ…\n      this.adminNoticeDetail = this.normalizeNoticeItem(item);\n      this.adminNoticeDetailVisible = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/detail', {\n          params: {\n            id: item.id\n          }\n        });\n        if (res && Number(res.code) === 200 && res.data) {\n          this.adminNoticeDetail = this.normalizeNoticeItem(res.data);\n        }\n      } catch (e) {\n        // é™é»˜ï¼šå·²æœ‰åˆ—è¡¨æ•°æ®å¯å±•ç¤º\n      }\n    },\n    backToAdminNoticeList() {\n      this.adminNoticeDetailVisible = false;\n      if (this.adminNoticeDetailFrom === 'list') {\n        this.adminNoticeAllVisible = true;\n      }\n    },\n    openAdminNoticeCreate() {\n      this.adminNoticeEditMode = 'create';\n      this.adminNoticeForm = {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2,\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      };\n      this.adminNoticeEditVisible = true;\n    },\n    openAdminNoticeEdit(item) {\n      const it = item || {};\n      this.adminNoticeEditMode = 'edit';\n      this.adminNoticeForm = {\n        id: it.id,\n        type: it.type || 'RULE',\n        level: it.level || 'INFO',\n        targetRole: typeof it.targetRole === 'number' ? it.targetRole : Number(it.targetRole ?? 2),\n        targetText: it.targetText || '',\n        title: it.title || '',\n        content: it.content || '',\n        isTop: Number(it.isTop) === 1\n      };\n      this.adminNoticeEditVisible = true;\n    },\n    async submitAdminNotice() {\n      const f = this.adminNoticeForm || {};\n      const title = String(f.title || '').trim();\n      const content = String(f.content || '').trim();\n      const type = String(f.type || '').trim();\n      const level = String(f.level || '').trim();\n      const targetRole = f.targetRole;\n      if (!title) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šæ ‡é¢˜');\n      if (!content) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šå†…å®¹');\n      if (!type) return ElMessage.warning('è¯·é€‰æ‹©å…¬å‘Šç±»å‹');\n      if (!level) return ElMessage.warning('è¯·é€‰æ‹©é‡è¦ç¨‹åº¦');\n      if (targetRole === null || targetRole === undefined || targetRole === '') return ElMessage.warning('è¯·é€‰æ‹©é¢å‘å¯¹è±¡');\n      const payload = {\n        id: this.adminNoticeEditMode === 'edit' ? f.id : undefined,\n        title,\n        content,\n        type,\n        level,\n        targetRole: Number(targetRole),\n        targetText: String(f.targetText || '').trim(),\n        isTop: f.isTop ? 1 : 0,\n        createdBy: this.getCurrentUserId()\n      };\n      this.adminNoticeSubmitting = true;\n      try {\n        const api = this.adminNoticeEditMode === 'create' ? '/announcement/admin/create' : '/announcement/admin/republish';\n        const res = await this.$axios.post(api, payload);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(this.adminNoticeEditMode === 'create' ? 'å‘å¸ƒæˆåŠŸ' : 'é‡æ–°å‘å¸ƒæˆåŠŸ');\n          this.adminNoticeEditVisible = false;\n          this.adminNoticeDetailVisible = false;\n\n          // åˆ·æ–°ï¼šä¸»é¡µ + åˆ—è¡¨ï¼ˆå¦‚æœæ‰“å¼€ï¼‰\n          this.loadAdminNoticeHome(true);\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true);\n        } else {\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeSubmitting = false;\n      }\n    },\n    async confirmAdminNoticeDelete(item) {\n      const it = item || {};\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šåˆ é™¤å…¬å‘Šã€Œ${it.title || 'ï¼ˆæ— æ ‡é¢˜ï¼‰'}ã€å—ï¼Ÿåˆ é™¤åå­¦ç”Ÿç«¯ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚`, 'åˆ é™¤ç¡®è®¤', {\n          type: 'warning',\n          confirmButtonText: 'åˆ é™¤',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      this.adminNoticeListLoading = true;\n      try {\n        const res = await this.$axios.delete('/announcement/admin/delete', {\n          params: {\n            id: it.id\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success('åˆ é™¤æˆåŠŸ');\n          this.adminNoticeDetailVisible = false;\n          this.loadAdminNoticeHome(true);\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true);\n        } else {\n          ElMessage.error(res?.msg || 'åˆ é™¤å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('åˆ é™¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeListLoading = false;\n      }\n    },\n    getTodoTagType(type) {\n      if (type === 'complaint') return 'danger';\n      if (type === 'violation') return 'warning';\n      if (type === 'rule') return 'success';\n      return 'info';\n    },\n    getTodoTypeText(type) {\n      if (type === 'complaint') return 'æŠ•è¯‰';\n      if (type === 'violation') return 'è¿çº¦';\n      if (type === 'rule') return 'è§„åˆ™é…ç½®';\n      if (type === 'system') return 'ç³»ç»Ÿ';\n      return 'å…¶ä»–';\n    },\n    getPriorityText(p) {\n      if (p === 'high') return 'é«˜';\n      if (p === 'medium') return 'ä¸­';\n      return 'ä½';\n    },\n    handleTodoGo(row) {\n      // è®©â€œå‰å¾€å¤„ç†â€çœŸçš„èƒ½è·³é¡µï¼ˆæ•´åˆåå¯ç”¨ï¼‰\n      if (row.type === 'complaint') return this.emitChange('admin-complaints');\n      if (row.type === 'rule') return this.emitChange('admin-seats');\n      // violation / system ç»Ÿä¸€å¼•å¯¼åˆ°æ—¥å¿—ç»Ÿè®¡\n      return this.emitChange('admin-logs');\n    },\n    handleTodoDone(row) {\n      this.todos = this.todos.filter(t => t.id !== row.id);\n    },\n    handleMarkAllDone() {\n      this.todos = [];\n    },\n    /* ---------- reservation timers ---------- */\n    startReservationTimer() {\n      this.stopReservationTimer();\n      this.reservationTimer = setInterval(() => {\n        this.handleReservationSearch();\n      }, 8000);\n    },\n    stopReservationTimer() {\n      if (this.reservationTimer) {\n        clearInterval(this.reservationTimer);\n        this.reservationTimer = null;\n      }\n    },\n    /* reservation methods */\n    handleReservationSearch() {\n      this.reservationPage = 1;\n    },\n    resetReservationFilters() {\n      this.reservationFilters = {\n        keyword: '',\n        room: '',\n        date: '',\n        status: ''\n      };\n      this.reservationPage = 1;\n    },\n    handleSelectionChange(val) {\n      this.reservationSelection = val || [];\n    },\n    handlePageChange(page) {\n      this.reservationPage = page;\n    },\n    handlePageSizeChange(size) {\n      this.reservationPageSize = size;\n      this.reservationPage = 1;\n    },\n    getStatusTagType(status) {\n      if (status === 'booked') return 'info';\n      if (status === 'signed') return 'success';\n      if (status === 'canceled') return 'warning';\n      if (status === 'violation') return 'danger';\n      return '';\n    },\n    getStatusText(status) {\n      if (status === 'booked') return 'å·²é¢„çº¦';\n      if (status === 'signed') return 'å·²ç­¾åˆ°';\n      if (status === 'canceled') return 'å·²å–æ¶ˆ';\n      if (status === 'violation') return 'è¿çº¦';\n      return status;\n    },\n    handleSign(row) {\n      row.status = 'signed';\n    },\n    handleCancel(row) {\n      row.status = 'canceled';\n    },\n    handleMarkViolation(row) {\n      row.status = 'violation';\n    },\n    handleViewDetail(row) {\n      console.log('æŸ¥çœ‹é¢„çº¦è¯¦æƒ…', row);\n    },\n    handleBatchSign() {\n      this.reservationSelection.forEach(item => {\n        if (item.status === 'booked') item.status = 'signed';\n      });\n      this.reservationSelection = [];\n    },\n    handleBatchCancel() {\n      this.reservationSelection.forEach(item => {\n        if (item.status === 'booked') item.status = 'canceled';\n      });\n      this.reservationSelection = [];\n    },\n    /* ---------- user timers ---------- */\n    startUserTimer() {\n      this.stopUserTimer();\n      this.userTimer = setInterval(() => {\n        this.handleUserSearch();\n      }, 8000);\n    },\n    stopUserTimer() {\n      if (this.userTimer) {\n        clearInterval(this.userTimer);\n        this.userTimer = null;\n      }\n    },\n    /* user methods */\n    handleUserSearch() {\n      this.userPage = 1;\n    },\n    resetUserFilters() {\n      this.userFilters = {\n        keyword: '',\n        role: '',\n        status: '',\n        onlyAbnormal: false\n      };\n      this.userPage = 1;\n    },\n    handleUserSelectionChange(val) {\n      this.userSelection = val || [];\n    },\n    handleUserPageChange(page) {\n      this.userPage = page;\n    },\n    handleUserPageSizeChange(size) {\n      this.userPageSize = size;\n      this.userPage = 1;\n    },\n    getUserStatusTagType(status) {\n      if (status === 'normal') return 'success';\n      if (status === 'warning') return 'warning';\n      if (status === 'blacklist') return 'danger';\n      return '';\n    },\n    getUserStatusText(status) {\n      if (status === 'normal') return 'æ­£å¸¸';\n      if (status === 'warning') return 'é¢„è­¦';\n      if (status === 'blacklist') return 'é»‘åå•';\n      return status;\n    },\n    handleLockUser(row) {\n      row.status = 'blacklist';\n      if (row.creditScore > 60) row.creditScore = 60;\n    },\n    handleUnlockUser(row) {\n      row.status = 'normal';\n      if (row.creditScore < 80) row.creditScore = 80;\n    },\n    handleResetPassword(row) {\n      console.log('é‡ç½®å¯†ç ', row);\n    },\n    handleViewUserDetail(row) {\n      console.log('æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…', row);\n    },\n    handleBatchLock() {\n      this.userSelection.forEach(user => {\n        user.status = 'blacklist';\n        if (user.creditScore > 60) user.creditScore = 60;\n      });\n      this.userSelection = [];\n    },\n    handleBatchUnlock() {\n      this.userSelection.forEach(user => {\n        user.status = 'normal';\n        if (user.creditScore < 80) user.creditScore = 80;\n      });\n      this.userSelection = [];\n    },\n    /* seat methods */\n    initSeatGrid() {\n      const rows = 6;\n      const cols = 8;\n      const grid = [];\n      let id = 1;\n      for (let r = 0; r < rows; r++) {\n        const row = {\n          rowIndex: r,\n          seats: []\n        };\n        for (let c = 0; c < cols; c++) {\n          row.seats.push({\n            id: id++,\n            row: r,\n            col: c,\n            label: `${r + 1}-${c + 1}`,\n            status: 'free',\n            selected: false\n          });\n        }\n        grid.push(row);\n      }\n      grid[0].seats[0].status = 'occupied';\n      grid[0].seats[1].status = 'occupied';\n      grid[2].seats[3].status = 'disabled';\n      grid[3].seats[4].status = 'disabled';\n      this.seatGrid = grid;\n    },\n    handleSelectRoom(row) {\n      this.selectedRoomId = row.id;\n    },\n    toggleRoomOpen(row) {\n      row.status = row.status === 'open' ? 'closed' : 'open';\n    },\n    handleEditRoom(row) {\n      console.log('ç¼–è¾‘è‡ªä¹ å®¤é…ç½®ï¼ˆå¼¹çª—é¢„ç•™ï¼‰', row);\n    },\n    syncRoomStatus(val) {\n      const room = this.rooms.find(r => r.id === this.selectedRoomId);\n      if (room) room.status = val ? 'open' : 'closed';\n    },\n    seatCellClass(seat) {\n      return [`seat-status-${seat.status}`, seat.selected ? 'seat-selected' : ''];\n    },\n    handleSeatClick(seat) {\n      seat.selected = !seat.selected;\n      if (this.showDemoOccupied && seat.status === 'free' && Math.random() < 0.05) {\n        seat.status = 'occupied';\n      }\n    },\n    handleBatchDisable() {\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => {\n          if (seat.selected) {\n            seat.status = 'disabled';\n            seat.selected = false;\n          }\n        });\n      });\n    },\n    handleClearSelection() {\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => {\n          seat.selected = false;\n        });\n      });\n    },\n    /* ---------- admin feedback/complaints ---------- */\n    onFbAdminFilterChange() {\n      this.fbAdminPageNum = 1;\n      this.loadAdminFeedback(false);\n      this.loadAdminFeedbackStats();\n    },\n    fbAdminPageChange(p) {\n      this.fbAdminPageNum = Number(p || 1);\n      this.loadAdminFeedback(false);\n    },\n    fbAdminStatusText(s) {\n      const v = String(s || '');\n      if (v === 'pending') return 'å¾…å¤„ç†';\n      if (v === 'processing') return 'å¤„ç†ä¸­';\n      if (v === 'resolved') return 'å·²è§£å†³';\n      return v || '-';\n    },\n    fbAdminStatusTagType(s) {\n      const v = String(s || '');\n      if (v === 'pending') return 'warning';\n      if (v === 'processing') return 'info';\n      if (v === 'resolved') return 'success';\n      return '';\n    },\n    fbAdminCategoryText(c) {\n      const v = String(c || '');\n      if (v === 'env') return 'ç¯å¢ƒè¯„ä»·';\n      if (v === 'service') return 'æœåŠ¡è¯„ä»·';\n      if (v === 'suggestion') return 'å»ºè®®';\n      if (v === 'complaint') return 'æŠ•è¯‰';\n      if (v === 'appeal') return 'ç”³è¯‰';\n      if (v === 'other') return 'å…¶ä»–';\n      return v || '-';\n    },\n    fbAdminCategoryTagType(c) {\n      const v = String(c || '');\n      if (v === 'complaint') return 'danger';\n      if (v === 'appeal') return 'warning';\n      if (v === 'suggestion') return 'success';\n      if (v === 'env' || v === 'service') return 'info';\n      return '';\n    },\n    formatYmdhm(dtStr) {\n      if (!dtStr) return '-';\n      const s = String(dtStr).replace('T', ' ');\n      const parts = s.split(' ');\n      const d = parts[0] || '';\n      const t = (parts[1] || '').slice(0, 5);\n      if (!d) return s;\n      const ds = d.split('-');\n      if (ds.length >= 3) {\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`;\n        return t ? `${mmdd} ${t}` : mmdd;\n      }\n      return s;\n    },\n    async loadAdminFeedbackStats() {\n      try {\n        const res = await this.$axios.get('/feedback/admin/stats');\n        if (res && res.code === 200) {\n          const d = res.data || {};\n          this.fbAdminStats = {\n            pending: Number(d.pending || 0),\n            processing: Number(d.processing || 0),\n            resolved: Number(d.resolved || 0)\n          };\n          // åŒæ­¥ Dashboard å¾…åŠæ•°é‡ï¼ˆå¯é€‰ï¼‰\n          this.metrics.pendingItems = this.fbAdminStats.pending + this.fbAdminStats.processing;\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    async loadAdminFeedback(resetPage = false) {\n      if (resetPage) this.fbAdminPageNum = 1;\n      this.fbAdminLoading = true;\n      try {\n        const params = {\n          pageNum: this.fbAdminPageNum,\n          pageSize: this.fbAdminPageSize\n        };\n        if (this.fbAdminOnlyPending) params.onlyPending = true;\n        if (this.fbAdminStatusFilter) params.status = this.fbAdminStatusFilter;\n        if (this.fbAdminCategoryFilter) params.category = this.fbAdminCategoryFilter;\n        if (this.fbAdminKeyword) params.keyword = this.fbAdminKeyword;\n        const res = await this.$axios.get('/feedback/admin/page', {\n          params\n        });\n        if (res && res.code === 200) {\n          this.fbAdminList = Array.isArray(res.data) ? res.data : [];\n          this.fbAdminTotal = Number(res.total || 0);\n        } else {\n          this.fbAdminList = [];\n          this.fbAdminTotal = 0;\n        }\n      } catch (e) {\n        console.error(e);\n        this.fbAdminList = [];\n        this.fbAdminTotal = 0;\n      } finally {\n        this.fbAdminLoading = false;\n      }\n    },\n    openFbAdminDetail(row) {\n      this.fbAdminDetail = row ? {\n        ...row\n      } : null;\n      const currentStatus = String(row && row.status || 'pending');\n      this.fbAdminHandleForm = {\n        status: currentStatus === 'resolved' ? 'resolved' : 'processing',\n        reply: row && row.reply ? String(row.reply) : '',\n        cancelReservation: false\n      };\n      this.fbAdminDrawerVisible = true;\n    },\n    async quickResolveFb(row) {\n      if (!row || !row.id) return;\n      try {\n        await ElMessageBox.confirm('ç¡®è®¤å°†è¯¥åé¦ˆæ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Ÿ', 'æç¤º', {\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ',\n          type: 'warning'\n        });\n      } catch (_) {\n        return;\n      }\n      this.fbAdminSubmitting = true;\n      try {\n        const payload = {\n          feedbackId: Number(row.id),\n          status: 'resolved',\n          reply: row && row.reply ? String(row.reply) : ''\n        };\n        const res = await this.$axios.post('/feedback/admin/handle', payload);\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'å·²æ ‡è®°ä¸ºå·²è§£å†³');\n          this.loadAdminFeedback(false);\n          this.loadAdminFeedbackStats();\n        } else {\n          ElMessage.error(res && res.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        console.error(e);\n        ElMessage.error('è¯·æ±‚å¤±è´¥');\n      } finally {\n        this.fbAdminSubmitting = false;\n      }\n    },\n    async submitFbAdminHandle() {\n      if (!this.fbAdminDetail || !this.fbAdminDetail.id) return;\n      if (String(this.fbAdminHandleForm.status) === 'resolved' && !String(this.fbAdminHandleForm.reply || '').trim()) {\n        try {\n          await ElMessageBox.confirm('ä½ å°†æ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Œä½†å›å¤å†…å®¹ä¸ºç©ºã€‚ç»§ç»­æäº¤ï¼Ÿ', 'æç¤º', {\n            confirmButtonText: 'ç»§ç»­',\n            cancelButtonText: 'è¿”å›å¡«å†™',\n            type: 'warning'\n          });\n        } catch (_) {\n          return;\n        }\n      }\n      this.fbAdminSubmitting = true;\n      try {\n        const payload = {\n          feedbackId: Number(this.fbAdminDetail.id),\n          status: this.fbAdminHandleForm.status,\n          reply: this.fbAdminHandleForm.reply,\n          cancelReservation: !!this.fbAdminHandleForm.cancelReservation\n        };\n        const res = await this.$axios.post('/feedback/admin/handle', payload);\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'æäº¤æˆåŠŸ');\n          this.fbAdminDrawerVisible = false;\n          this.fbAdminDetail = null;\n          this.loadAdminFeedback(false);\n          this.loadAdminFeedbackStats();\n        } else {\n          ElMessage.error(res && res.msg || 'æäº¤å¤±è´¥');\n        }\n      } catch (e) {\n        console.error(e);\n        ElMessage.error('è¯·æ±‚å¤±è´¥');\n      } finally {\n        this.fbAdminSubmitting = false;\n      }\n    },\n    resetSeatRule() {\n      this.seatRule = {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      };\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","ElMessageBox","name","props","currentPage","type","String","required","emits","data","dashboardTimer","reservationTimer","userTimer","autoRefresh","metrics","todayReservations","todayTrend","todaySignRate","openRooms","totalSeats","pendingItems","trendItems","key","title","value","percent","status","desc","adminNoticeHomeLoading","adminNoticeListLoading","adminHomeNotices","noticeTypeOptions","label","noticeLevelOptions","noticeTargetOptions","adminNoticeAllVisible","adminNoticeDetailVisible","adminNoticeDetail","adminNoticeDetailFrom","adminNoticeTypeFilter","adminNoticeLevelFilter","adminNoticeTargetFilter","adminNoticeKeyword","adminNoticeIncludeExpired","adminNoticePageNum","adminNoticePageSize","adminNoticeTotalCount","adminNoticePageList","adminNoticeEditVisible","adminNoticeEditMode","adminNoticeSubmitting","adminNoticeForm","id","level","targetRole","targetText","content","isTop","fbAdminLoading","fbAdminList","fbAdminPageNum","fbAdminPageSize","fbAdminTotal","fbAdminStatusFilter","fbAdminCategoryFilter","fbAdminKeyword","fbAdminOnlyPending","fbAdminStats","pending","processing","resolved","fbAdminDrawerVisible","fbAdminDetail","fbAdminSubmitting","fbAdminHandleForm","reply","cancelReservation","todos","from","time","priority","latestActivities","text","typeLabel","reservationFilters","keyword","room","date","reservationAutoRefresh","roomOptions","statusOptions","reservations","code","studentNo","studentName","seatNo","timeRange","remark","reservationSelection","reservationPage","reservationPageSize","userFilters","role","onlyAbnormal","userAutoRefresh","userRoleOptions","userStatusOptions","users","major","clazz","creditScore","violationCount","lastLoginAt","phone","userSelection","userPage","userPageSize","currentCampus","campusOptions","currentBuild","buildOptions","onlyShowOpen","roomKeyword","roomCapacityFilter","rooms","campus","building","buildingCode","floor","capacity","usedSeats","selectedRoomId","activeTab","showSeatNo","showDemoOccupied","seatGrid","seatRule","allowCrossTime","maxHoursPerOrder","maxOrdersPerDay","autoReleaseNoSign","releaseAfterMinutes","violationStrategy","description","computed","todayText","d","Date","y","getFullYear","m","getMonth","padStart","day","getDate","filteredReservations","filter","item","ok","trim","k","includes","paginatedReservations","start","slice","reservationStats","stats","total","booked","signed","canceled","violation","length","forEach","filteredUsers","user","paginatedUsers","userStats","normal","warning","blacklist","filteredRooms","selectedRoom","find","r","statusModel","seatStats","free","occupied","disabled","blockedArea","row","seats","seat","latestActivitiesLeft","mid","Math","ceil","latestActivitiesRight","lastLoginIp","s","localStorage","getItem","sessionStorage","u","JSON","parse","watch","val","stopDashboardTimer","startDashboardTimer","loadAdminNoticeHome","stopReservationTimer","startReservationTimer","stopUserTimer","startUserTimer","loadAdminFeedback","loadAdminFeedbackStats","created","initSeatGrid","beforeUnmount","methods","emitChange","page","$emit","setInterval","refreshDashboardMetrics","clearInterval","jitter","n","min","max","random","noticeTypeText","t","noticeTypeIcon","noticeLevelText","l","formatNoticeTime","timeStr","withTime","Number","isNaN","getTime","pad","hh","getHours","mm","getMinutes","makeNoticeSummary","maxLen","replace","normalizeNoticeItem","it","summary","getCurrentUser","e","getCurrentUserId","userId","isFinite","silent","res","$axios","get","params","pageNum","pageSize","includeExpired","list","Array","isArray","map","openAdminNoticeAll","reloadAdminNoticePage","resetPage","undefined","error","msg","onAdminNoticePageChange","p","resetAdminNoticeFilters","openAdminNoticeDetail","backToAdminNoticeList","openAdminNoticeCreate","openAdminNoticeEdit","submitAdminNotice","f","payload","createdBy","api","post","success","confirmAdminNoticeDelete","confirm","confirmButtonText","cancelButtonText","delete","getTodoTagType","getTodoTypeText","getPriorityText","handleTodoGo","handleTodoDone","handleMarkAllDone","handleReservationSearch","resetReservationFilters","handleSelectionChange","handlePageChange","handlePageSizeChange","size","getStatusTagType","getStatusText","handleSign","handleCancel","handleMarkViolation","handleViewDetail","console","log","handleBatchSign","handleBatchCancel","handleUserSearch","resetUserFilters","handleUserSelectionChange","handleUserPageChange","handleUserPageSizeChange","getUserStatusTagType","getUserStatusText","handleLockUser","handleUnlockUser","handleResetPassword","handleViewUserDetail","handleBatchLock","handleBatchUnlock","rows","cols","grid","rowIndex","c","push","col","selected","handleSelectRoom","toggleRoomOpen","handleEditRoom","syncRoomStatus","seatCellClass","handleSeatClick","handleBatchDisable","handleClearSelection","onFbAdminFilterChange","fbAdminPageChange","fbAdminStatusText","v","fbAdminStatusTagType","fbAdminCategoryText","fbAdminCategoryTagType","formatYmdhm","dtStr","parts","split","ds","mmdd","onlyPending","category","openFbAdminDetail","currentStatus","quickResolveFb","_","feedbackId","submitFbAdminHandle","resetSeatRule"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\AdminHome.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <!-- ============ åå°é¦–é¡µï¼ˆDashboard æ•´åˆç‰ˆï¼‰ ============ -->\n    <div v-if=\"currentPage === 'admin-home'\" class=\"dashboard-page\">\n      <!-- é¡¶éƒ¨æ¬¢è¿ + ä»Šæ—¥æ¦‚è§ˆ -->\n      <div class=\"card welcome-card\">\n        <div class=\"welcome-left\">\n          <div class=\"welcome-title-row\">\n            <h2 class=\"welcome-title\">è‡ªä¹ å®¤é¢„çº¦ç³»ç»Ÿ Â· ç®¡ç†åå°</h2>\n            <el-tag size=\"small\" type=\"success\">è¿è¡Œæ­£å¸¸</el-tag>\n          </div>\n          <p class=\"welcome-subtitle\">\n            æ¬¢è¿å›æ¥ï¼Œç®¡ç†å‘˜ã€‚åŒä¸€æ—¶é—´å¯ä»¥åœ¨è¿™é‡Œæ€»è§ˆé¢„çº¦æƒ…å†µã€ç­¾åˆ°ç‡å’Œå¼‚å¸¸æé†’ï¼Œå¿«é€Ÿè¿›å…¥å„ä¸ªç®¡ç†æ¨¡å—ã€‚\n          </p>\n\n          <div class=\"welcome-meta\">\n            <span class=\"meta-item\">ä»Šå¤©ï¼š{{ todayText }}</span>\n            <span class=\"meta-separator\">Â·</span>\n            <span class=\"meta-item\">æœ€è¿‘ç™»å½• IPï¼š{{ lastLoginIp }}</span>\n          </div>\n        </div>\n\n        <div class=\"welcome-right\">\n          <div class=\"metric-grid\">\n            <div class=\"metric-item\">\n              <div class=\"metric-label\">ä»Šæ—¥é¢„çº¦æ€»æ•°</div>\n              <div class=\"metric-value\">{{ metrics.todayReservations }}</div>\n              <div class=\"metric-desc\">è¾ƒæ˜¨æ—¥ {{ metrics.todayTrend }}%</div>\n            </div>\n\n            <div class=\"metric-item\">\n              <div class=\"metric-label\">ä»Šæ—¥ç­¾åˆ°ç‡</div>\n              <div class=\"metric-value\">\n                {{ metrics.todaySignRate }}<span class=\"metric-unit\">%</span>\n              </div>\n              <el-progress\n                  :percentage=\"metrics.todaySignRate\"\n                  :stroke-width=\"6\"\n                  status=\"success\"\n                  class=\"metric-progress\"\n              />\n            </div>\n\n            <div class=\"metric-item\">\n              <div class=\"metric-label\">å½“å‰å¼€æ”¾è‡ªä¹ å®¤</div>\n              <div class=\"metric-value\">{{ metrics.openRooms }}</div>\n              <div class=\"metric-desc\">è¦†ç›– {{ metrics.totalSeats }} ä¸ªåº§ä½</div>\n            </div>\n\n            <div class=\"metric-item\">\n              <div class=\"metric-label\">å¾…å¤„ç†äº‹é¡¹</div>\n              <div class=\"metric-value warning\">{{ metrics.pendingItems }}</div>\n              <div class=\"metric-desc\">æŠ•è¯‰ / å¼‚å¸¸ / å®¡æ ¸ ç­‰</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ä¸­é—´ä¸¤åˆ—ï¼šè¶‹åŠ¿é¢„è§ˆ + æ»šåŠ¨å…¬å‘Š -->\n      <div class=\"middle-row\">\n        <!-- è¶‹åŠ¿é¢„è§ˆ -->\n        <div class=\"card trend-card\">\n          <div class=\"card-header-row\">\n            <div>\n              <h3 class=\"card-title\">æœ¬å‘¨è¿è¡Œæ¦‚è§ˆ</h3>\n              <p class=\"card-subtitle\">é€šè¿‡ç®€å•çš„è¿›åº¦æ¡å¿«é€Ÿæ„ŸçŸ¥æœ¬å‘¨æ•´ä½“æƒ…å†µã€‚</p>\n            </div>\n          </div>\n\n          <div class=\"trend-list\">\n            <div class=\"trend-item\" v-for=\"item in trendItems\" :key=\"item.key\">\n              <div class=\"trend-item-header\">\n                <span class=\"trend-item-title\">{{ item.title }}</span>\n                <span class=\"trend-item-value\">{{ item.value }}</span>\n              </div>\n              <el-progress\n                  :percentage=\"item.percent\"\n                  :stroke-width=\"8\"\n                  :status=\"item.status || 'success'\"\n                  class=\"trend-progress\"\n              />\n              <div class=\"trend-item-desc\">{{ item.desc }}</div>\n            </div>\n          </div>\n        </div>\n\n        <!-- ç³»ç»Ÿå…¬å‘Šï¼ˆåˆ—è¡¨ + ç®¡ç†ï¼‰ -->\n        <div class=\"card notice-card\">\n          <div class=\"card-header-row\">\n            <div>\n              <h3 class=\"card-title\">ç³»ç»Ÿå…¬å‘Šç®¡ç†</h3>\n              <p class=\"card-subtitle\">\n                æ”¯æŒæŸ¥çœ‹å…¬å‘Šåˆ—è¡¨ä¸è¯¦æƒ…ï¼›å¯æ–°å¢ã€ç¼–è¾‘ï¼ˆé‡æ–°å‘å¸ƒï¼‰ä¸åˆ é™¤ï¼Œå­¦ç”Ÿç«¯å°†åŒæ­¥æ›´æ–°ã€‚\n              </p>\n            </div>\n\n            <div class=\"admin-notice-head-actions\">\n              <el-button size=\"small\" @click=\"openAdminNoticeAll\">æŸ¥çœ‹å…¨éƒ¨</el-button>\n              <el-button size=\"small\" type=\"primary\" plain @click=\"openAdminNoticeCreate\">å‘å¸ƒæ–°å…¬å‘Š</el-button>\n            </div>\n          </div>\n\n          <div v-if=\"adminNoticeHomeLoading\" class=\"admin-notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\n          <div v-else-if=\"!adminHomeNotices.length\" class=\"admin-notice-empty\">æš‚æ— å…¬å‘Š</div>\n\n          <ul v-else class=\"admin-notice-home-list\">\n            <li\n                v-for=\"item in adminHomeNotices\"\n                :key=\"item.id\"\n                class=\"admin-notice-home-item\"\n                @click=\"openAdminNoticeDetail(item, 'home')\"\n            >\n              <div class=\"admin-notice-badges\">\n                <div class=\"admin-notice-pill admin-type\" :class=\"'type-' + item.type\">\n                  <span class=\"admin-notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\n                  <span>{{ noticeTypeText(item.type) }}</span>\n                </div>\n\n                <div class=\"admin-notice-pill admin-level\" :class=\"'level-' + item.level\">\n                  {{ noticeLevelText(item.level) }}\n                </div>\n\n                <div v-if=\"Number(item.isTop) === 1\" class=\"admin-notice-pill admin-top\">ç½®é¡¶</div>\n              </div>\n\n              <div class=\"admin-notice-main\">\n                <div class=\"admin-notice-title\" :title=\"item.title\">{{ item.title }}</div>\n                <div v-if=\"item.summary\" class=\"admin-notice-snippet\" :title=\"item.summary\">{{ item.summary }}</div>\n                <div class=\"admin-notice-meta\">\n                  <span>{{ formatNoticeTime(item.publishTime, true) }}</span>\n                  <span class=\"admin-dot\">Â·</span>\n                  <span>{{ item.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span>\n                </div>\n              </div>\n\n              <div class=\"admin-notice-right\"><span class=\"admin-notice-arrow\">â€º</span></div>\n            </li>\n          </ul>\n        </div>\n\n      </div>\n\n      <!-- è¡¥å……ä¸€è¡Œï¼šæœ€è¿‘é¢„çº¦åŠ¨æ€ï¼ˆæ•´è¡Œ + ä¸¤åˆ—å±•ç¤ºï¼‰ -->\n      <div class=\"dashboard-row\">\n        <div class=\"card dashboard-card dashboard-card-full\">\n          <h3 class=\"card-title\">æœ€è¿‘é¢„çº¦åŠ¨æ€</h3>\n\n          <div class=\"activity-two-col\">\n            <!-- å·¦åˆ— -->\n            <ul class=\"timeline-list activity-col\">\n              <li v-for=\"item in latestActivitiesLeft\" :key=\"item.id\" class=\"timeline-item\">\n                <div class=\"timeline-main\">\n                  <span class=\"timeline-text\">{{ item.text }}</span>\n                  <span class=\"timeline-tag\" :class=\"'tag-' + item.type\">\n              {{ item.typeLabel }}\n            </span>\n                </div>\n                <div class=\"timeline-time\">{{ item.time }}</div>\n              </li>\n            </ul>\n\n            <!-- ä¸­é—´ç«–çº¿ -->\n            <div v-if=\"latestActivitiesRight.length\" class=\"activity-divider\"></div>\n\n            <!-- å³åˆ— -->\n            <ul v-if=\"latestActivitiesRight.length\" class=\"timeline-list activity-col\">\n              <li v-for=\"item in latestActivitiesRight\" :key=\"item.id\" class=\"timeline-item\">\n                <div class=\"timeline-main\">\n                  <span class=\"timeline-text\">{{ item.text }}</span>\n                  <span class=\"timeline-tag\" :class=\"'tag-' + item.type\">\n              {{ item.typeLabel }}\n            </span>\n                </div>\n                <div class=\"timeline-time\">{{ item.time }}</div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <!-- å¾…åŠäº‹é¡¹ / å¿«é€Ÿå…¥å£ -->\n      <div class=\"card todo-card\">\n        <div class=\"card-header-row\">\n          <div>\n            <h3 class=\"card-title\">å¾…åŠäº‹é¡¹</h3>\n            <p class=\"card-subtitle\">\n              è¿™é‡Œæ±‡æ€»äº†ä½ è¿‘æœŸéœ€è¦å¤„ç†çš„å…³é”®äº‹é¡¹ï¼Œæ¯”å¦‚æŠ•è¯‰ã€å¼‚å¸¸è®°å½•å’Œè§„åˆ™é…ç½®ã€‚\n            </p>\n          </div>\n          <el-button size=\"small\" @click=\"handleMarkAllDone\">\n            ä¸€é”®æ ‡è®°å·²è¯»ï¼ˆç¤ºä¾‹ï¼‰\n          </el-button>\n        </div>\n\n        <el-table\n            :data=\"todos\"\n            size=\"small\"\n            class=\"todo-table\"\n            border\n            stripe\n        >\n          <el-table-column prop=\"type\" label=\"ç±»å‹\" min-width=\"110\">\n            <template #default=\"scope\">\n              <el-tag size=\"small\" :type=\"getTodoTagType(scope.row.type)\">\n                {{ getTodoTypeText(scope.row.type) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"content\" label=\"å†…å®¹\" min-width=\"260\" />\n\n          <el-table-column prop=\"from\" label=\"æ¥æº\" min-width=\"120\" />\n\n          <el-table-column prop=\"time\" label=\"åˆ›å»ºæ—¶é—´\" min-width=\"150\" />\n\n          <el-table-column prop=\"priority\" label=\"ä¼˜å…ˆçº§\" min-width=\"80\">\n            <template #default=\"scope\">\n              <el-tag\n                  size=\"small\"\n                  :type=\"scope.row.priority === 'high' ? 'danger' : (scope.row.priority === 'medium' ? 'warning' : 'info')\"\n                  effect=\"plain\"\n              >\n                {{ getPriorityText(scope.row.priority) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"æ“ä½œ\" min-width=\"200\" fixed=\"right\">\n            <template #default=\"scope\">\n              <div class=\"todo-actions\">\n                <el-button size=\"small\" type=\"primary\" link @click=\"handleTodoGo(scope.row)\">\n                  å‰å¾€å¤„ç†\n                </el-button>\n                <el-button size=\"small\" type=\"success\" link @click=\"handleTodoDone(scope.row)\">\n                  æ ‡è®°å®Œæˆ\n                </el-button>\n                <el-tooltip content=\"åªæ˜¯ç¤ºä¾‹ï¼Œä¸ä¼šçœŸæ­£ä¿®æ”¹åç«¯æ•°æ®\" placement=\"top\">\n                  <el-button size=\"small\" type=\"info\" link>è¯¦æƒ…</el-button>\n                </el-tooltip>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n\n      <!-- ç®¡ç†ç«¯ï¼šå…¬å‘Šç®¡ç†ä¸­å¿ƒ -->\n      <el-dialog\n          v-model=\"adminNoticeAllVisible\"\n          title=\"å…¬å‘Šç®¡ç†ä¸­å¿ƒ\"\n          width=\"980px\"\n          align-center\n          append-to-body\n          :lock-scroll=\"false\"\n          :z-index=\"5000\"\n      >\n        <div class=\"admin-notice-toolbar\">\n          <div class=\"admin-notice-filters\">\n            <div class=\"f-item\">\n              <span class=\"f-label\">ç±»å‹</span>\n              <el-select v-model=\"adminNoticeTypeFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\n\n                <el-option v-for=\"opt in noticeTypeOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n              </el-select>\n            </div>\n\n            <div class=\"f-item\">\n              <span class=\"f-label\">é‡è¦ç¨‹åº¦</span>\n              <el-select v-model=\"adminNoticeLevelFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\n\n                <el-option v-for=\"opt in noticeLevelOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n              </el-select>\n            </div>\n\n            <div class=\"f-item\">\n              <span class=\"f-label\">é¢å‘å¯¹è±¡</span>\n              <el-select v-model=\"adminNoticeTargetFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\n\n                <el-option v-for=\"opt in noticeTargetOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n              </el-select>\n            </div>\n\n            <div class=\"f-item\">\n              <span class=\"f-label\">å…³é”®è¯</span>\n              <el-input v-model=\"adminNoticeKeyword\" size=\"small\" placeholder=\"æ ‡é¢˜/å†…å®¹\" style=\"width: 220px\" clearable />\n            </div>\n\n            <div class=\"f-item\">\n              <el-checkbox v-model=\"adminNoticeIncludeExpired\">åŒ…å«è¿‡æœŸ/æœªç”Ÿæ•ˆ</el-checkbox>\n            </div>\n\n            <div class=\"f-item\">\n              <el-button size=\"small\" type=\"primary\" plain @click=\"reloadAdminNoticePage(true)\">æŸ¥è¯¢</el-button>\n              <el-button size=\"small\" @click=\"resetAdminNoticeFilters\">é‡ç½®</el-button>\n            </div>\n          </div>\n\n          <div class=\"admin-notice-toolbar-right\">\n            <div class=\"admin-notice-count\">å…± {{ adminNoticeTotalCount }} æ¡</div>\n            <el-button size=\"small\" type=\"primary\" @click=\"openAdminNoticeCreate\">å‘å¸ƒæ–°å…¬å‘Š</el-button>\n          </div>\n        </div>\n\n        <div v-if=\"adminNoticeListLoading\" class=\"admin-notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\n        <div v-else-if=\"!adminNoticePageList.length\" class=\"admin-notice-empty\">æš‚æ— å…¬å‘Š</div>\n\n        <ul v-else class=\"admin-notice-list\">\n          <li\n              v-for=\"item in adminNoticePageList\"\n              :key=\"item.id\"\n              class=\"admin-notice-item\"\n              @click=\"openAdminNoticeDetail(item, 'list')\"\n          >\n            <div class=\"admin-notice-badges\">\n              <div class=\"admin-notice-pill admin-type\" :class=\"'type-' + item.type\">\n                <span class=\"admin-notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\n                <span>{{ noticeTypeText(item.type) }}</span>\n              </div>\n\n              <div class=\"admin-notice-pill admin-level\" :class=\"'level-' + item.level\">\n                {{ noticeLevelText(item.level) }}\n              </div>\n\n              <div v-if=\"Number(item.isTop) === 1\" class=\"admin-notice-pill admin-top\">ç½®é¡¶</div>\n            </div>\n\n            <div class=\"admin-notice-main\">\n              <div class=\"admin-notice-title\" :title=\"item.title\">{{ item.title }}</div>\n              <div v-if=\"item.summary\" class=\"admin-notice-snippet\" :title=\"item.summary\">{{ item.summary }}</div>\n              <div class=\"admin-notice-meta\">\n                <span>{{ formatNoticeTime(item.publishTime, true) }}</span>\n                <span class=\"admin-dot\">Â·</span>\n                <span>{{ item.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span>\n              </div>\n            </div>\n\n            <div class=\"admin-notice-actions\" @click.stop>\n              <el-button size=\"small\" type=\"primary\" link @click.stop=\"openAdminNoticeEdit(item)\">ç¼–è¾‘</el-button>\n              <el-button size=\"small\" type=\"danger\" link @click.stop=\"confirmAdminNoticeDelete(item)\">åˆ é™¤</el-button>\n            </div>\n          </li>\n        </ul>\n\n        <div class=\"admin-notice-pagination\">\n          <el-pagination\n              background\n              layout=\"prev, pager, next\"\n              :page-size=\"adminNoticePageSize\"\n              :current-page=\"adminNoticePageNum\"\n              :total=\"adminNoticeTotalCount\"\n              @current-change=\"onAdminNoticePageChange\"\n          />\n        </div>\n      </el-dialog>\n\n      <!-- ç®¡ç†ç«¯ï¼šå…¬å‘Šè¯¦æƒ… -->\n      <el-dialog\n          v-model=\"adminNoticeDetailVisible\"\n          title=\"å…¬å‘Šè¯¦æƒ…\"\n          width=\"860px\"\n          align-center\n          append-to-body\n          :lock-scroll=\"false\"\n          :z-index=\"5010\"\n      >\n        <div v-if=\"adminNoticeDetail\" class=\"admin-notice-detail-body\">\n          <div class=\"admin-notice-detail-actions\">\n            <el-button type=\"primary\" link @click=\"backToAdminNoticeList\">è¿”å›å…¬å‘Šåˆ—è¡¨</el-button>\n\n            <div class=\"admin-notice-detail-right\">\n              <el-button type=\"primary\" plain size=\"small\" @click=\"openAdminNoticeEdit(adminNoticeDetail)\">ç¼–è¾‘</el-button>\n              <el-button type=\"danger\" plain size=\"small\" @click=\"confirmAdminNoticeDelete(adminNoticeDetail)\">åˆ é™¤</el-button>\n            </div>\n          </div>\n\n          <div class=\"admin-notice-detail-card\">\n            <div class=\"d-title\">{{ adminNoticeDetail.title }}</div>\n\n            <div class=\"d-tags\">\n        <span class=\"d-tag\" :class=\"'type-' + adminNoticeDetail.type\">\n          {{ noticeTypeIcon(adminNoticeDetail.type) }} {{ noticeTypeText(adminNoticeDetail.type) }}\n        </span>\n              <span class=\"d-tag\" :class=\"'level-' + adminNoticeDetail.level\">\n          {{ noticeLevelText(adminNoticeDetail.level) }}\n        </span>\n              <span v-if=\"Number(adminNoticeDetail.isTop) === 1\" class=\"d-tag top\">ç½®é¡¶</span>\n            </div>\n\n            <el-divider />\n\n            <div class=\"d-info\">\n              <div class=\"d-info-item\"><span class=\"k\">å‘å¸ƒæ—¶é—´</span><span class=\"v\">{{ formatNoticeTime(adminNoticeDetail.publishTime, true) }}</span></div>\n              <div class=\"d-info-item\"><span class=\"k\">å…¬å‘Šç±»å‹</span><span class=\"v\">{{ noticeTypeText(adminNoticeDetail.type) }}</span></div>\n              <div class=\"d-info-item\"><span class=\"k\">é‡è¦ç¨‹åº¦</span><span class=\"v\">{{ noticeLevelText(adminNoticeDetail.level) }}</span></div>\n              <div class=\"d-info-item\"><span class=\"k\">é¢å‘å¯¹è±¡</span><span class=\"v\">{{ adminNoticeDetail.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span></div>\n            </div>\n\n            <el-divider />\n\n            <div class=\"d-content\">{{ adminNoticeDetail.content || 'ï¼ˆæ— å†…å®¹ï¼‰' }}</div>\n          </div>\n        </div>\n      </el-dialog>\n\n      <!-- ç®¡ç†ç«¯ï¼šå‘å¸ƒ/ç¼–è¾‘å…¬å‘Šï¼ˆç¼–è¾‘=é‡æ–°å‘å¸ƒï¼‰ -->\n      <el-dialog\n          v-model=\"adminNoticeEditVisible\"\n          :title=\"adminNoticeEditMode === 'create' ? 'å‘å¸ƒæ–°å…¬å‘Š' : 'ç¼–è¾‘å…¬å‘Šï¼ˆé‡æ–°å‘å¸ƒï¼‰'\"\n          width=\"860px\"\n          align-center\n          append-to-body\n          :lock-scroll=\"false\"\n          :z-index=\"5020\"\n      >\n        <el-form :model=\"adminNoticeForm\" label-width=\"90px\" class=\"admin-notice-form\">\n          <el-form-item label=\"å…¬å‘Šç±»å‹\">\n            <el-select v-model=\"adminNoticeForm.type\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\n\n              <el-option v-for=\"opt in noticeTypeOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"é‡è¦ç¨‹åº¦\">\n            <el-select v-model=\"adminNoticeForm.level\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\n\n              <el-option v-for=\"opt in noticeLevelOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"é¢å‘å¯¹è±¡\">\n            <el-select v-model=\"adminNoticeForm.targetRole\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\n\n              <el-option v-for=\"opt in noticeTargetOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\n\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"å¯¹è±¡è¯´æ˜\">\n            <el-input v-model=\"adminNoticeForm.targetText\" placeholder=\"ä¾‹å¦‚ï¼šå…¨ä½“å­¦ç”Ÿ / æœ¬éƒ¨å­¦ç”Ÿ / ç ”ç©¶ç”Ÿç­‰ï¼ˆå¯é€‰ï¼‰\" />\n          </el-form-item>\n\n          <el-form-item label=\"æ ‡é¢˜\">\n            <el-input v-model=\"adminNoticeForm.title\" maxlength=\"80\" show-word-limit />\n          </el-form-item>\n\n          <el-form-item label=\"å†…å®¹\">\n            <el-input v-model=\"adminNoticeForm.content\" type=\"textarea\" :rows=\"8\" maxlength=\"2000\" show-word-limit />\n          </el-form-item>\n\n          <el-form-item label=\"ç½®é¡¶\">\n            <el-switch v-model=\"adminNoticeForm.isTop\" />\n          </el-form-item>\n        </el-form>\n\n        <template #footer>\n          <el-button @click=\"adminNoticeEditVisible = false\">å–æ¶ˆ</el-button>\n          <el-button type=\"primary\" :loading=\"adminNoticeSubmitting\" @click=\"submitAdminNotice\">\n            {{ adminNoticeEditMode === 'create' ? 'å‘å¸ƒ' : 'é‡æ–°å‘å¸ƒ' }}\n          </el-button>\n        </template>\n      </el-dialog>\n    </div>\n\n    <!-- ============ é¢„çº¦ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\n    <div v-else-if=\"currentPage === 'admin-reservations'\" class=\"card reservation-card\">\n      <div class=\"card-header reservation-header\">\n        <div>\n          <h2 class=\"page-title\">é¢„çº¦ç®¡ç†</h2>\n          <p class=\"page-subtitle\">\n            æŸ¥çœ‹å’Œç®¡ç†å­¦ç”Ÿé¢„çº¦è®°å½•ï¼Œæ”¯æŒç­›é€‰ã€æ‰¹é‡æ“ä½œã€è¡¥å½•ç­¾åˆ°ä¸æ ‡è®°è¿çº¦ã€‚\n          </p>\n        </div>\n        <div class=\"reservation-header-right\">\n          <div class=\"auto-refresh\">\n            <span class=\"auto-refresh-label\">è‡ªåŠ¨åˆ·æ–°</span>\n            <el-switch v-model=\"reservationAutoRefresh\" size=\"small\" />\n          </div>\n          <el-button type=\"primary\" plain size=\"small\" @click=\"handleReservationSearch\">\n            åˆ·æ–°æ•°æ®\n          </el-button>\n        </div>\n      </div>\n\n      <div class=\"filter-bar\">\n        <el-input\n            v-model=\"reservationFilters.keyword\"\n            placeholder=\"æŒ‰å§“å / å­¦å· / é¢„çº¦ç¼–å·æœç´¢\"\n            clearable\n            class=\"filter-item filter-input\"\n        >\n          <template #prefix>\n            <span class=\"input-prefix-icon\">ğŸ”</span>\n          </template>\n        </el-input>\n\n        <el-select\n            v-model=\"reservationFilters.room\"\n            placeholder=\"é€‰æ‹©è‡ªä¹ å®¤\"\n            clearable\n            class=\"filter-item filter-select\"\n        >\n          <el-option v-for=\"room in roomOptions\" :key=\"room\" :label=\"room\" :value=\"room\" />\n        </el-select>\n\n        <el-date-picker\n            v-model=\"reservationFilters.date\"\n            type=\"date\"\n            placeholder=\"é€‰æ‹©æ—¥æœŸ\"\n            value-format=\"YYYY-MM-DD\"\n            clearable\n            class=\"filter-item filter-date\"\n        />\n\n        <el-select\n            v-model=\"reservationFilters.status\"\n            placeholder=\"é¢„çº¦çŠ¶æ€\"\n            clearable\n            class=\"filter-item filter-select\"\n        >\n          <el-option v-for=\"item in statusOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\n        </el-select>\n\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" size=\"small\" @click=\"handleReservationSearch\">\n            æŸ¥è¯¢\n          </el-button>\n          <el-button size=\"small\" @click=\"resetReservationFilters\">\n            é‡ç½®\n          </el-button>\n        </div>\n      </div>\n\n      <div class=\"reservation-stats\">\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">å½“å‰è®°å½•</div>\n          <div class=\"stat-value\">{{ reservationStats.total }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">å·²é¢„çº¦</div>\n          <div class=\"stat-value\">{{ reservationStats.booked }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">å·²ç­¾åˆ°</div>\n          <div class=\"stat-value\">{{ reservationStats.signed }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">å·²å–æ¶ˆ / è¿çº¦</div>\n          <div class=\"stat-value\">\n            {{ reservationStats.canceled }} / {{ reservationStats.violation }}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"reservation-toolbar\">\n        <div class=\"toolbar-left\">\n          <el-button\n              type=\"success\"\n              size=\"small\"\n              :disabled=\"!reservationSelection.length\"\n              @click=\"handleBatchSign\"\n          >\n            æ‰¹é‡è¡¥å½•ç­¾åˆ°\n          </el-button>\n          <el-button\n              type=\"danger\"\n              size=\"small\"\n              plain\n              :disabled=\"!reservationSelection.length\"\n              @click=\"handleBatchCancel\"\n          >\n            æ‰¹é‡å–æ¶ˆé¢„çº¦\n          </el-button>\n          <span v-if=\"reservationSelection.length\" class=\"toolbar-tip\">\n            å·²é€‰ä¸­ {{ reservationSelection.length }} æ¡è®°å½•\n          </span>\n        </div>\n        <div class=\"toolbar-right\">\n          <span class=\"toolbar-tip\">å½“å‰ä¸ºç¤ºä¾‹æ•°æ®ï¼Œåç»­å¯æ›¿æ¢ä¸ºåç«¯æ¥å£è¿”å›çš„æ•°æ®ã€‚</span>\n        </div>\n      </div>\n\n      <el-table\n          :data=\"paginatedReservations\"\n          border\n          stripe\n          size=\"small\"\n          @selection-change=\"handleSelectionChange\"\n          class=\"reservation-table\"\n      >\n        <el-table-column type=\"selection\" width=\"48\" />\n        <el-table-column prop=\"code\" label=\"é¢„çº¦ç¼–å·\" min-width=\"120\" />\n\n        <el-table-column prop=\"studentName\" label=\"å­¦ç”Ÿ\" min-width=\"110\">\n          <template #default=\"scope\">\n            <div class=\"student-cell\">\n              <div class=\"student-name\">{{ scope.row.studentName }}</div>\n              <div class=\"student-no\">{{ scope.row.studentNo }}</div>\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"room\" label=\"è‡ªä¹ å®¤\" min-width=\"130\" />\n        <el-table-column prop=\"seatNo\" label=\"åº§ä½\" min-width=\"80\" />\n        <el-table-column prop=\"date\" label=\"æ—¥æœŸ\" min-width=\"110\" />\n        <el-table-column prop=\"timeRange\" label=\"æ—¶é—´æ®µ\" min-width=\"120\" />\n\n        <el-table-column prop=\"status\" label=\"çŠ¶æ€\" min-width=\"90\">\n          <template #default=\"scope\">\n            <el-tag :type=\"getStatusTagType(scope.row.status)\" size=\"small\">\n              {{ getStatusText(scope.row.status) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"å¤‡æ³¨\" min-width=\"160\">\n          <template #default=\"scope\">\n            <span class=\"remark-text\">{{ scope.row.remark || 'â€”' }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"æ“ä½œ\" fixed=\"right\" min-width=\"200\">\n          <template #default=\"scope\">\n            <div class=\"action-buttons\">\n              <el-button\n                  v-if=\"scope.row.status === 'booked'\"\n                  type=\"primary\"\n                  link\n                  size=\"small\"\n                  @click=\"handleSign(scope.row)\"\n              >\n                è¡¥å½•ç­¾åˆ°\n              </el-button>\n\n              <el-button\n                  v-if=\"scope.row.status === 'booked'\"\n                  type=\"danger\"\n                  link\n                  size=\"small\"\n                  @click=\"handleCancel(scope.row)\"\n              >\n                å–æ¶ˆé¢„çº¦\n              </el-button>\n\n              <el-dropdown v-if=\"scope.row.status !== 'canceled'\">\n                <span class=\"el-dropdown-link\">æ›´å¤š</span>\n                <template #dropdown>\n                  <el-dropdown-menu>\n                    <el-dropdown-item @click=\"handleMarkViolation(scope.row)\">\n                      æ ‡è®°è¿çº¦\n                    </el-dropdown-item>\n                    <el-dropdown-item @click=\"handleViewDetail(scope.row)\">\n                      æŸ¥çœ‹è¯¦æƒ…\n                    </el-dropdown-item>\n                  </el-dropdown-menu>\n                </template>\n              </el-dropdown>\n\n              <span v-else class=\"disabled-text\">ä¸å¯æ“ä½œ</span>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"table-footer\">\n        <el-pagination\n            background\n            layout=\"total, prev, pager, next, sizes\"\n            :total=\"filteredReservations.length\"\n            :page-sizes=\"[5, 10, 20]\"\n            :page-size=\"reservationPageSize\"\n            :current-page=\"reservationPage\"\n            @size-change=\"handlePageSizeChange\"\n            @current-change=\"handlePageChange\"\n        />\n      </div>\n    </div>\n\n    <!-- ============ ç”¨æˆ·ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\n    <div v-else-if=\"currentPage === 'admin-users'\" class=\"card user-card\">\n      <div class=\"card-header user-header\">\n        <div>\n          <h2 class=\"page-title\">ç”¨æˆ·ç®¡ç†</h2>\n          <p class=\"page-subtitle\">\n            æŸ¥è¯¢å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ã€ä¿¡ç”¨çŠ¶æ€ä¸è¿çº¦è®°å½•ï¼Œæ”¯æŒç­›é€‰ã€æ‰¹é‡é»‘åå•ä¸é¢„è­¦ç®¡ç†ã€‚\n          </p>\n        </div>\n        <div class=\"user-header-right\">\n          <div class=\"auto-refresh\">\n            <span class=\"auto-refresh-label\">è‡ªåŠ¨åˆ·æ–°</span>\n            <el-switch v-model=\"userAutoRefresh\" size=\"small\" />\n          </div>\n          <el-button type=\"primary\" plain size=\"small\">\n            æ–°å¢ç®¡ç†å‘˜è´¦å·\n          </el-button>\n        </div>\n      </div>\n\n      <div class=\"filter-bar\">\n        <el-input\n            v-model=\"userFilters.keyword\"\n            placeholder=\"æŒ‰å§“å / å­¦å· / ä¸“ä¸šæœç´¢\"\n            clearable\n            class=\"filter-item filter-input\"\n        >\n          <template #prefix>\n            <span class=\"input-prefix-icon\">ğŸ”</span>\n          </template>\n        </el-input>\n\n        <el-select\n            v-model=\"userFilters.role\"\n            placeholder=\"ç”¨æˆ·è§’è‰²\"\n            clearable\n            class=\"filter-item filter-select\"\n        >\n          <el-option\n              v-for=\"role in userRoleOptions\"\n              :key=\"role.value\"\n              :label=\"role.label\"\n              :value=\"role.value\"\n          />\n        </el-select>\n\n        <el-select\n            v-model=\"userFilters.status\"\n            placeholder=\"ä¿¡ç”¨çŠ¶æ€\"\n            clearable\n            class=\"filter-item filter-select\"\n        >\n          <el-option\n              v-for=\"item in userStatusOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n          />\n        </el-select>\n\n        <el-checkbox v-model=\"userFilters.onlyAbnormal\" class=\"filter-item\">\n          ä»…æŸ¥çœ‹é¢„è­¦ / é»‘åå•\n        </el-checkbox>\n\n        <div class=\"filter-actions\">\n          <el-button type=\"primary\" size=\"small\" @click=\"handleUserSearch\">\n            æŸ¥è¯¢\n          </el-button>\n          <el-button size=\"small\" @click=\"resetUserFilters\">\n            é‡ç½®\n          </el-button>\n        </div>\n      </div>\n\n      <div class=\"reservation-stats user-stats\">\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">å½“å‰ç”¨æˆ·æ•°</div>\n          <div class=\"stat-value\">{{ userStats.total }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">æ­£å¸¸</div>\n          <div class=\"stat-value\">{{ userStats.normal }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">é¢„è­¦</div>\n          <div class=\"stat-value\">{{ userStats.warning }}</div>\n        </div>\n        <div class=\"stat-card\">\n          <div class=\"stat-label\">é»‘åå•</div>\n          <div class=\"stat-value\">{{ userStats.blacklist }}</div>\n        </div>\n      </div>\n\n      <div class=\"reservation-toolbar user-toolbar\">\n        <div class=\"toolbar-left\">\n          <el-button\n              type=\"warning\"\n              size=\"small\"\n              plain\n              :disabled=\"!userSelection.length\"\n              @click=\"handleBatchLock\"\n          >\n            æ‰¹é‡åŠ å…¥é»‘åå•\n          </el-button>\n          <el-button\n              type=\"success\"\n              size=\"small\"\n              plain\n              :disabled=\"!userSelection.length\"\n              @click=\"handleBatchUnlock\"\n          >\n            æ‰¹é‡è§£é™¤é»‘åå•\n          </el-button>\n          <span v-if=\"userSelection.length\" class=\"toolbar-tip\">\n            å·²é€‰ä¸­ {{ userSelection.length }} ä½ç”¨æˆ·\n          </span>\n        </div>\n        <div class=\"toolbar-right\">\n          <span class=\"toolbar-tip\">\n            è¯´æ˜ï¼šæœ¬é¡µç¤ºä¾‹æ•°æ®ä»…ç”¨äºå‰ç«¯å±•ç¤ºï¼Œåç»­å¯å¯¹æ¥å­¦ç”Ÿä¿¡æ¯ä¸ç»Ÿä¸€èº«ä»½è®¤è¯ã€‚\n          </span>\n        </div>\n      </div>\n\n      <el-table\n          :data=\"paginatedUsers\"\n          border\n          stripe\n          size=\"small\"\n          @selection-change=\"handleUserSelectionChange\"\n          class=\"user-table\"\n      >\n        <el-table-column type=\"selection\" width=\"48\" />\n        <el-table-column prop=\"studentNo\" label=\"å­¦å· / å·¥å·\" min-width=\"120\" />\n\n        <el-table-column prop=\"name\" label=\"å§“å\" min-width=\"120\">\n          <template #default=\"scope\">\n            <div class=\"user-name-cell\">\n              <div class=\"user-name-main\">\n                {{ scope.row.name }}\n                <span class=\"user-role-tag\" v-if=\"scope.row.role === 'student'\">å­¦ç”Ÿ</span>\n                <span class=\"user-role-tag teacher\" v-else-if=\"scope.row.role === 'teacher'\">æ•™å¸ˆ</span>\n                <span class=\"user-role-tag admin\" v-else-if=\"scope.row.role === 'admin'\">ç®¡ç†å‘˜</span>\n              </div>\n              <div class=\"user-extra\">{{ scope.row.major }} Â· {{ scope.row.clazz }}</div>\n            </div>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"creditScore\" label=\"ä¿¡ç”¨åˆ†\" min-width=\"90\">\n          <template #default=\"scope\">\n            <span\n                :class=\"[\n                'credit-score',\n                scope.row.creditScore <= 60 ? 'credit-low' : '',\n                scope.row.creditScore >= 95 ? 'credit-high' : ''\n              ]\"\n            >\n              {{ scope.row.creditScore }}\n            </span>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"violationCount\" label=\"è¿çº¦æ¬¡æ•°\" min-width=\"90\" />\n\n        <el-table-column prop=\"status\" label=\"çŠ¶æ€\" min-width=\"90\">\n          <template #default=\"scope\">\n            <el-tag :type=\"getUserStatusTagType(scope.row.status)\" size=\"small\">\n              {{ getUserStatusText(scope.row.status) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n\n        <el-table-column prop=\"lastLoginAt\" label=\"æœ€è¿‘ç™»å½•\" min-width=\"140\" />\n\n        <el-table-column label=\"è”ç³»æ–¹å¼\" min-width=\"130\">\n          <template #default=\"scope\">\n            <span class=\"user-extra\">{{ scope.row.phone || 'â€”' }}</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"æ“ä½œ\" fixed=\"right\" min-width=\"230\">\n          <template #default=\"scope\">\n            <div class=\"action-buttons\">\n              <el-button type=\"primary\" link size=\"small\" @click=\"handleResetPassword(scope.row)\">\n                é‡ç½®å¯†ç \n              </el-button>\n\n              <el-button\n                  v-if=\"scope.row.status !== 'blacklist'\"\n                  type=\"danger\"\n                  link\n                  size=\"small\"\n                  @click=\"handleLockUser(scope.row)\"\n              >\n                åŠ å…¥é»‘åå•\n              </el-button>\n\n              <el-button\n                  v-else\n                  type=\"success\"\n                  link\n                  size=\"small\"\n                  @click=\"handleUnlockUser(scope.row)\"\n              >\n                è§£é™¤é»‘åå•\n              </el-button>\n\n              <el-button type=\"info\" link size=\"small\" @click=\"handleViewUserDetail(scope.row)\">\n                è¯¦æƒ…\n              </el-button>\n            </div>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <div class=\"table-footer\">\n        <el-pagination\n            background\n            layout=\"total, prev, pager, next, sizes\"\n            :total=\"filteredUsers.length\"\n            :page-sizes=\"[5, 10, 20]\"\n            :page-size=\"userPageSize\"\n            :current-page=\"userPage\"\n            @size-change=\"handleUserPageSizeChange\"\n            @current-change=\"handleUserPageChange\"\n        />\n      </div>\n    </div>\n\n    <!-- ============ åº§ä½ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\n    <div v-else-if=\"currentPage === 'admin-seats'\" class=\"seat-manage\">\n      <div class=\"card seat-top-card\">\n        <div class=\"seat-top-left\">\n          <h2 class=\"page-title\">åº§ä½ç®¡ç†</h2>\n          <p class=\"page-subtitle\">\n            æŒ‰æ¥¼æ ‹ã€è‡ªä¹ å®¤é…ç½®å¼€æ”¾æ—¶é—´ä¸åº§ä½å¸ƒå±€ï¼Œæ”¯æŒå¿«é€ŸæŸ¥çœ‹ç©ºä½™åº§ä½ã€ç¦ç”¨é—®é¢˜åº§ä½ï¼Œä»¥åŠè®¾ç½®é¢„çº¦è§„åˆ™ã€‚\n          </p>\n        </div>\n        <div class=\"seat-top-right\">\n          <el-select v-model=\"currentCampus\" size=\"small\" class=\"top-select\" placeholder=\"é€‰æ‹©æ ¡åŒº\">\n            <el-option\n                v-for=\"item in campusOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n            />\n          </el-select>\n\n          <el-select v-model=\"currentBuild\" size=\"small\" class=\"top-select\" placeholder=\"é€‰æ‹©æ¥¼æ ‹\" clearable>\n            <el-option\n                v-for=\"item in buildOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n            />\n          </el-select>\n\n          <div class=\"top-switch\">\n            <span class=\"top-switch-label\">æ˜¾ç¤ºä»…å¼€æ”¾è‡ªä¹ å®¤</span>\n            <el-switch v-model=\"onlyShowOpen\" size=\"small\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"seat-layout\">\n        <div class=\"card seat-left-card\">\n          <div class=\"left-header\">\n            <div class=\"left-header-main\">\n              <h3 class=\"left-title\">è‡ªä¹ å®¤åˆ—è¡¨</h3>\n              <p class=\"left-subtitle\">æŒ‰æ¡ä»¶ç­›é€‰è‡ªä¹ å®¤ï¼ŒæŸ¥çœ‹å®¹é‡ä¸å¼€æ”¾çŠ¶æ€ã€‚</p>\n            </div>\n            <el-button size=\"small\" type=\"primary\" plain>æ–°å»ºè‡ªä¹ å®¤</el-button>\n          </div>\n\n          <div class=\"left-filter\">\n            <el-input\n                v-model=\"roomKeyword\"\n                placeholder=\"æŒ‰åç§° / æˆ¿é—´å·æœç´¢\"\n                clearable\n                size=\"small\"\n                class=\"left-filter-input\"\n            >\n              <template #prefix>\n                <span class=\"input-prefix-icon\">ğŸ”</span>\n              </template>\n            </el-input>\n\n            <el-radio-group v-model=\"roomCapacityFilter\" size=\"small\" class=\"capacity-radio\">\n              <el-radio-button label=\"all\">å…¨éƒ¨å®¹é‡</el-radio-button>\n              <el-radio-button label=\"small\">â‰¤40 äºº</el-radio-button>\n              <el-radio-button label=\"medium\">40-80 äºº</el-radio-button>\n              <el-radio-button label=\"large\">â‰¥80 äºº</el-radio-button>\n            </el-radio-group>\n          </div>\n\n          <el-table\n              :data=\"filteredRooms\"\n              highlight-current-row\n              size=\"small\"\n              class=\"room-table\"\n              @row-click=\"handleSelectRoom\"\n              :current-row-key=\"selectedRoomId\"\n              row-key=\"id\"\n          >\n            <el-table-column prop=\"name\" label=\"è‡ªä¹ å®¤\" min-width=\"140\">\n              <template #default=\"scope\">\n                <div class=\"room-name\">\n                  <div class=\"room-name-main\">{{ scope.row.name }}</div>\n                  <div class=\"room-name-sub\">{{ scope.row.building }} Â· {{ scope.row.floor }}å±‚</div>\n                </div>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"å®¹é‡\" min-width=\"80\">\n              <template #default=\"scope\">\n                <span class=\"room-capacity\">{{ scope.row.capacity }}</span>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"å·²å ç”¨\" min-width=\"90\">\n              <template #default=\"scope\">\n                <span class=\"room-used\">{{ scope.row.usedSeats }}/{{ scope.row.capacity }}</span>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"çŠ¶æ€\" min-width=\"90\">\n              <template #default=\"scope\">\n                <el-tag size=\"small\" :type=\"scope.row.status === 'open' ? 'success' : 'info'\">\n                  {{ scope.row.status === 'open' ? 'å¼€æ”¾ä¸­' : 'æœªå¼€æ”¾' }}\n                </el-tag>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"æ“ä½œ\" min-width=\"120\" fixed=\"right\">\n              <template #default=\"scope\">\n                <el-button type=\"primary\" link size=\"small\" @click.stop=\"toggleRoomOpen(scope.row)\">\n                  {{ scope.row.status === 'open' ? 'å…³é—­è‡ªä¹ å®¤' : 'å¼€æ”¾è‡ªä¹ å®¤' }}\n                </el-button>\n                <el-button type=\"info\" link size=\"small\" @click.stop=\"handleEditRoom(scope.row)\">\n                  è®¾ç½®\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n\n        <div class=\"seat-right\">\n          <div class=\"card seat-right-card\">\n            <div class=\"right-header\">\n              <div>\n                <h3 class=\"right-title\">{{ selectedRoom ? selectedRoom.name : 'è¯·é€‰æ‹©å·¦ä¾§è‡ªä¹ å®¤' }}</h3>\n                <p class=\"right-subtitle\" v-if=\"selectedRoom\">\n                  {{ selectedRoom.building }} Â· {{ selectedRoom.floor }}å±‚ Â· å…± {{ selectedRoom.capacity }} ä¸ªåº§ä½\n                </p>\n                <p class=\"right-subtitle\" v-else>\n                  åœ¨å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè‡ªä¹ å®¤å³å¯æŸ¥çœ‹åº§ä½å¸ƒå±€ä¸è§„åˆ™ã€‚\n                </p>\n              </div>\n\n              <div class=\"right-header-actions\" v-if=\"selectedRoom\">\n                <div class=\"top-switch\">\n                  <span class=\"top-switch-label\">å½“å‰è‡ªä¹ å®¤å¼€æ”¾</span>\n                  <el-switch\n                      v-model=\"selectedRoom.statusModel\"\n                      size=\"small\"\n                      @change=\"syncRoomStatus\"\n                  />\n                </div>\n                <el-button size=\"small\" plain>å¯¼å‡ºåº§ä½é…ç½®</el-button>\n              </div>\n            </div>\n\n            <template v-if=\"selectedRoom\">\n              <div class=\"seat-stats\">\n                <div class=\"stat-card\">\n                  <div class=\"stat-label\">å¯é¢„çº¦åº§ä½</div>\n                  <div class=\"stat-value\">{{ seatStats.free }}</div>\n                </div>\n                <div class=\"stat-card\">\n                  <div class=\"stat-label\">å·²å ç”¨åº§ä½</div>\n                  <div class=\"stat-value\">{{ seatStats.occupied }}</div>\n                </div>\n                <div class=\"stat-card\">\n                  <div class=\"stat-label\">ç¦ç”¨åº§ä½</div>\n                  <div class=\"stat-value\">{{ seatStats.disabled }}</div>\n                </div>\n                <div class=\"stat-card\">\n                  <div class=\"stat-label\">å°é”åŒºåŸŸ</div>\n                  <div class=\"stat-value\">{{ seatStats.blockedArea }}</div>\n                </div>\n              </div>\n\n              <el-tabs v-model=\"activeTab\" class=\"seat-tabs\">\n                <el-tab-pane label=\"åº§ä½å¸ƒå±€\" name=\"layout\">\n                  <div class=\"layout-toolbar\">\n                    <div class=\"layout-toolbar-left\">\n                      <div class=\"top-switch\">\n                        <span class=\"top-switch-label\">æ˜¾ç¤ºåº§ä½ç¼–å·</span>\n                        <el-switch v-model=\"showSeatNo\" size=\"small\" />\n                      </div>\n                      <div class=\"top-switch\">\n                        <span class=\"top-switch-label\">æ ‡è®°å ç”¨ç¤ºæ„</span>\n                        <el-switch v-model=\"showDemoOccupied\" size=\"small\" />\n                      </div>\n                    </div>\n\n                    <div class=\"layout-toolbar-right\">\n                      <el-button size=\"small\" plain @click=\"handleBatchDisable\">æ‰¹é‡ç¦ç”¨é€‰ä¸­</el-button>\n                      <el-button size=\"small\" plain @click=\"handleClearSelection\">æ¸…ç©ºé€‰æ‹©</el-button>\n                    </div>\n                  </div>\n\n                  <div class=\"seat-legend\">\n                    <div class=\"legend-item\"><span class=\"legend-box legend-free\" /> å¯é¢„çº¦</div>\n                    <div class=\"legend-item\"><span class=\"legend-box legend-occupied\" /> å·²å ç”¨</div>\n                    <div class=\"legend-item\"><span class=\"legend-box legend-disabled\" /> ç¦ç”¨</div>\n                    <div class=\"legend-item\"><span class=\"legend-box legend-selected\" /> å½“å‰é€‰æ‹©</div>\n                  </div>\n\n                  <div class=\"seat-grid\">\n                    <div v-for=\"row in seatGrid\" :key=\"row.rowIndex\" class=\"seat-row\">\n                      <div class=\"seat-row-label\">ç¬¬ {{ row.rowIndex + 1 }} è¡Œ</div>\n                      <div class=\"seat-row-seats\">\n                        <div\n                            v-for=\"seat in row.seats\"\n                            :key=\"seat.id\"\n                            class=\"seat-cell\"\n                            :class=\"seatCellClass(seat)\"\n                            @click=\"handleSeatClick(seat)\"\n                        >\n                          <span v-if=\"showSeatNo\" class=\"seat-no\">{{ seat.label }}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </el-tab-pane>\n\n                <el-tab-pane label=\"é¢„çº¦è§„åˆ™ä¸å¼€æ”¾æ—¶é—´\" name=\"rules\">\n                  <el-form\n                      :model=\"seatRule\"\n                      label-width=\"150px\"\n                      size=\"small\"\n                      class=\"rule-form\"\n                  >\n                    <el-form-item label=\"å…è®¸è·¨æ—¶æ®µé¢„çº¦\">\n                      <el-switch v-model=\"seatRule.allowCrossTime\" />\n                    </el-form-item>\n\n                    <el-form-item label=\"å•æ¬¡é¢„çº¦æœ€é•¿æ—¶é•¿\">\n                      <el-input-number v-model=\"seatRule.maxHoursPerOrder\" :min=\"1\" :max=\"8\" />\n                      <span class=\"item-desc\">å°æ—¶</span>\n                    </el-form-item>\n\n                    <el-form-item label=\"æ¯å¤©æœ€å¤šé¢„çº¦æ¬¡æ•°\">\n                      <el-input-number v-model=\"seatRule.maxOrdersPerDay\" :min=\"1\" :max=\"5\" />\n                      <span class=\"item-desc\">æ¬¡/äºº/è‡ªä¹ å®¤</span>\n                    </el-form-item>\n\n                    <el-form-item label=\"è‡ªåŠ¨é‡Šæ”¾æœªç­¾åˆ°åº§ä½\">\n                      <div class=\"inline-group\">\n                        <el-switch v-model=\"seatRule.autoReleaseNoSign\" />\n                        <span class=\"item-desc\">è¶…è¿‡</span>\n                        <el-input-number v-model=\"seatRule.releaseAfterMinutes\" :min=\"5\" :max=\"60\" />\n                        <span class=\"item-desc\">åˆ†é’Ÿè‡ªåŠ¨é‡Šæ”¾</span>\n                      </div>\n                    </el-form-item>\n\n                    <el-form-item label=\"è¿ç»­è¿çº¦å¤„ç†ç­–ç•¥\">\n                      <el-select v-model=\"seatRule.violationStrategy\" placeholder=\"é€‰æ‹©ç­–ç•¥\">\n                        <el-option label=\"ä»…æé†’ï¼Œä¸é™åˆ¶\" value=\"tip\" />\n                        <el-option label=\"3 æ¬¡è¿çº¦å½“å¤©ç¦æ­¢é¢„çº¦\" value=\"day-ban\" />\n                        <el-option label=\"è¿ç»­ 5 æ¬¡è¿çº¦ä¸€å‘¨å†…ç¦æ­¢é¢„çº¦\" value=\"week-ban\" />\n                      </el-select>\n                    </el-form-item>\n\n                    <el-form-item label=\"è§„åˆ™è¯´æ˜\">\n                      <el-input\n                          v-model=\"seatRule.description\"\n                          type=\"textarea\"\n                          :rows=\"3\"\n                          placeholder=\"ä¾‹å¦‚ï¼šæœ¬è‡ªä¹ å®¤ä¸¥æ ¼ä¿æŒå®‰é™ï¼Œè¯·æå‰ 10 åˆ†é’Ÿåˆ°åœºç­¾åˆ°ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿè§†ä¸ºè¿çº¦ç­‰ã€‚\"\n                      />\n                    </el-form-item>\n\n                    <el-form-item>\n                      <el-button type=\"primary\" size=\"small\">\n                        ä¿å­˜å½“å‰è‡ªä¹ å®¤é…ç½®ï¼ˆç¤ºä¾‹ï¼‰\n                      </el-button>\n                      <el-button size=\"small\" @click=\"resetSeatRule\">é‡ç½®ä¸ºé»˜è®¤</el-button>\n                    </el-form-item>\n                  </el-form>\n                </el-tab-pane>\n              </el-tabs>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- ============ æŠ•è¯‰å¤„ç†ï¼ˆAdmin Feedbackï¼‰ ============ -->\n    <div v-else-if=\"currentPage === 'admin-complaints'\" class=\"complaints-page\">\n      <div class=\"card complaints-head\">\n        <div class=\"complaints-head-left\">\n          <h2 class=\"page-title\">æŠ•è¯‰å¤„ç†</h2>\n          <p class=\"page-subtitle\">æŸ¥çœ‹å­¦ç”Ÿè¯„ä»·/æŠ•è¯‰/å»ºè®®ï¼Œå›å¤å¹¶è·Ÿè¸ªå¤„ç†è¿›åº¦ï¼›å¿…è¦æ—¶å¯å…³è”å¤„ç†é¢„çº¦ã€‚</p>\n        </div>\n\n        <div class=\"complaints-head-right\">\n          <div class=\"fb-stats\">\n            <div class=\"fb-stat\">\n              <div class=\"fb-stat-num\">{{ fbAdminStats.pending }}</div>\n              <div class=\"fb-stat-label\">å¾…å¤„ç†</div>\n            </div>\n            <div class=\"fb-stat\">\n              <div class=\"fb-stat-num\">{{ fbAdminStats.processing }}</div>\n              <div class=\"fb-stat-label\">å¤„ç†ä¸­</div>\n            </div>\n            <div class=\"fb-stat\">\n              <div class=\"fb-stat-num\">{{ fbAdminStats.resolved }}</div>\n              <div class=\"fb-stat-label\">å·²è§£å†³</div>\n            </div>\n          </div>\n\n          <el-button size=\"small\" @click=\"loadAdminFeedback(true)\">åˆ·æ–°</el-button>\n        </div>\n      </div>\n\n      <div class=\"card complaints-body\">\n        <div class=\"complaints-toolbar\">\n          <div class=\"tool-left\">\n            <el-checkbox v-model=\"fbAdminOnlyPending\" @change=\"onFbAdminFilterChange\">ä»…æŸ¥çœ‹å¾…å¤„ç†</el-checkbox>\n\n            <el-select\n              v-model=\"fbAdminStatusFilter\"\n              :teleported=\"false\"\n              size=\"small\"\n              clearable\n              placeholder=\"å…¨éƒ¨çŠ¶æ€\"\n              style=\"width: 150px\"\n              @change=\"onFbAdminFilterChange\"\n            >\n              <el-option label=\"å…¨éƒ¨çŠ¶æ€\" value=\"\" />\n              <el-option label=\"å¾…å¤„ç†\" value=\"pending\" />\n              <el-option label=\"å¤„ç†ä¸­\" value=\"processing\" />\n              <el-option label=\"å·²è§£å†³\" value=\"resolved\" />\n            </el-select>\n\n            <el-select\n              v-model=\"fbAdminCategoryFilter\"\n              :teleported=\"false\"\n              size=\"small\"\n              clearable\n              placeholder=\"å…¨éƒ¨ç±»å‹\"\n              style=\"width: 170px\"\n              @change=\"onFbAdminFilterChange\"\n            >\n              <el-option label=\"å…¨éƒ¨ç±»å‹\" value=\"\" />\n              <el-option label=\"ç¯å¢ƒè¯„ä»·\" value=\"env\" />\n              <el-option label=\"æœåŠ¡è¯„ä»·\" value=\"service\" />\n              <el-option label=\"å»ºè®®\" value=\"suggestion\" />\n              <el-option label=\"æŠ•è¯‰\" value=\"complaint\" />\n              <el-option label=\"ç”³è¯‰\" value=\"appeal\" />\n              <el-option label=\"å…¶ä»–\" value=\"other\" />\n            </el-select>\n          </div>\n\n          <div class=\"tool-right\">\n            <el-input\n              v-model=\"fbAdminKeyword\"\n              size=\"small\"\n              clearable\n              placeholder=\"æœç´¢ï¼šå†…å®¹/å§“å/å­¦å·/é¢„çº¦ID\"\n              style=\"width: 340px\"\n              @keyup.enter=\"loadAdminFeedback(true)\"\n            >\n              <template #append>\n                <el-button @click=\"loadAdminFeedback(true)\">æœç´¢</el-button>\n              </template>\n            </el-input>\n          </div>\n        </div>\n\n        <el-table\n          :data=\"fbAdminList\"\n          v-loading=\"fbAdminLoading\"\n          border\n          stripe\n          size=\"small\"\n          class=\"fb-admin-table\"\n        >\n          <el-table-column prop=\"id\" label=\"#\" width=\"72\" />\n\n          <el-table-column label=\"ç±»å‹\" width=\"110\">\n            <template #default=\"scope\">\n              <el-tag size=\"small\" :type=\"fbAdminCategoryTagType(scope.row.category)\">\n                {{ fbAdminCategoryText(scope.row.category) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"ç”¨æˆ·\" min-width=\"160\">\n            <template #default=\"scope\">\n              <div class=\"fb-user\">\n                <div class=\"fb-user-name\">{{ scope.row.userName || '-' }}</div>\n                <div class=\"fb-user-sub\">{{ scope.row.studentNo || '-' }}</div>\n              </div>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"å…³è”é¢„çº¦\" min-width=\"220\">\n            <template #default=\"scope\">\n              <div class=\"fb-rel\">\n                <div class=\"fb-rel-main\">{{ scope.row.roomLabel || '-' }}</div>\n                <div class=\"fb-rel-sub\">{{ scope.row.reservationLabel || (scope.row.reservationId ? ('é¢„çº¦ID ' + scope.row.reservationId) : 'æœªå…³è”é¢„çº¦') }}</div>\n              </div>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"è¯„åˆ†\" width=\"90\" align=\"center\">\n            <template #default=\"scope\">\n              <span v-if=\"scope.row.rating\">{{ scope.row.rating }}</span>\n              <span v-else class=\"fb-muted\">-</span>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"çŠ¶æ€\" width=\"110\">\n            <template #default=\"scope\">\n              <el-tag size=\"small\" :type=\"fbAdminStatusTagType(scope.row.status)\">\n                {{ fbAdminStatusText(scope.row.status) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"æäº¤æ—¶é—´\" width=\"160\">\n            <template #default=\"scope\">{{ formatYmdhm(scope.row.createTime) }}</template>\n          </el-table-column>\n\n          <el-table-column label=\"æ›´æ–°æ—¶é—´\" width=\"160\">\n            <template #default=\"scope\">{{ formatYmdhm(scope.row.updateTime) }}</template>\n          </el-table-column>\n\n          <el-table-column label=\"æ“ä½œ\" width=\"150\" fixed=\"right\">\n            <template #default=\"scope\">\n              <div class=\"fb-row-actions\">\n                <el-button size=\"small\" type=\"primary\" plain @click=\"openFbAdminDetail(scope.row)\">å¤„ç†</el-button>\n                <el-button size=\"small\" @click=\"quickResolveFb(scope.row)\">å·²è§£å†³</el-button>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <div class=\"fb-admin-pagination\">\n          <el-pagination\n            background\n            layout=\"prev, pager, next, jumper\"\n            :current-page=\"fbAdminPageNum\"\n            :page-size=\"fbAdminPageSize\"\n            :total=\"fbAdminTotal\"\n            @current-change=\"fbAdminPageChange\"\n          />\n        </div>\n      </div>\n\n      <el-drawer\n        v-model=\"fbAdminDrawerVisible\"\n        size=\"520px\"\n        :with-header=\"false\"\n        class=\"fb-admin-drawer\"\n      >\n        <div v-if=\"fbAdminDetail\" class=\"fb-drawer\">\n          <div class=\"fb-drawer-head\">\n            <div>\n              <div class=\"fb-drawer-title\">åé¦ˆ #{{ fbAdminDetail.id }}</div>\n              <div class=\"fb-drawer-sub\">\n                {{ fbAdminCategoryText(fbAdminDetail.category) }} Â· {{ fbAdminStatusText(fbAdminDetail.status) }}\n              </div>\n            </div>\n            <el-button size=\"small\" @click=\"fbAdminDrawerVisible = false\">å…³é—­</el-button>\n          </div>\n\n          <div class=\"fb-drawer-card\">\n            <div class=\"fb-kv\">\n              <div class=\"k\">ç”¨æˆ·</div>\n              <div class=\"v\">{{ fbAdminDetail.userName || '-' }}ï¼ˆ{{ fbAdminDetail.studentNo || '-' }}ï¼‰</div>\n            </div>\n            <div class=\"fb-kv\">\n              <div class=\"k\">è‡ªä¹ å®¤</div>\n              <div class=\"v\">{{ fbAdminDetail.roomLabel || '-' }}</div>\n            </div>\n            <div class=\"fb-kv\">\n              <div class=\"k\">å…³è”é¢„çº¦</div>\n              <div class=\"v\">{{ fbAdminDetail.reservationLabel || (fbAdminDetail.reservationId ? ('é¢„çº¦ID ' + fbAdminDetail.reservationId) : 'æœªå…³è”é¢„çº¦') }}</div>\n            </div>\n            <div class=\"fb-kv\">\n              <div class=\"k\">è¯„åˆ†</div>\n              <div class=\"v\">{{ fbAdminDetail.rating || '-' }}</div>\n            </div>\n            <div class=\"fb-kv\">\n              <div class=\"k\">æäº¤æ—¶é—´</div>\n              <div class=\"v\">{{ formatYmdhm(fbAdminDetail.createTime) }}</div>\n            </div>\n\n            <div class=\"fb-content\">\n              <div class=\"fb-content-title\">åé¦ˆå†…å®¹</div>\n              <div class=\"fb-content-body\">{{ fbAdminDetail.content || 'ï¼ˆç©ºï¼‰' }}</div>\n            </div>\n\n            <div v-if=\"fbAdminDetail.reply\" class=\"fb-content\">\n              <div class=\"fb-content-title\">å·²å›å¤</div>\n              <div class=\"fb-content-body\">{{ fbAdminDetail.reply }}</div>\n            </div>\n          </div>\n\n          <div class=\"fb-drawer-card\">\n            <div class=\"fb-form-title\">å¤„ç†ä¸å›å¤</div>\n\n            <el-form :model=\"fbAdminHandleForm\" label-width=\"86px\" class=\"fb-handle-form\">\n              <el-form-item label=\"å¤„ç†çŠ¶æ€\">\n                <el-radio-group v-model=\"fbAdminHandleForm.status\">\n                  <el-radio label=\"pending\">å¾…å¤„ç†</el-radio>\n                  <el-radio label=\"processing\">å¤„ç†ä¸­</el-radio>\n                  <el-radio label=\"resolved\">å·²è§£å†³</el-radio>\n                </el-radio-group>\n              </el-form-item>\n\n              <el-form-item label=\"å›å¤å†…å®¹\">\n                <el-input\n                  v-model=\"fbAdminHandleForm.reply\"\n                  type=\"textarea\"\n                  :rows=\"5\"\n                  maxlength=\"800\"\n                  show-word-limit\n                  placeholder=\"ç»™å­¦ç”Ÿçš„å›å¤ï¼ˆå¯é€‰ï¼Œä½†å»ºè®®åœ¨æ ‡è®°å·²è§£å†³æ—¶å¡«å†™ï¼‰\"\n                />\n              </el-form-item>\n\n              <el-form-item v-if=\"fbAdminDetail && fbAdminDetail.reservationId\" label=\"å…³è”é¢„çº¦\">\n                <el-checkbox v-model=\"fbAdminHandleForm.cancelReservation\">\n                  å–æ¶ˆè¯¥é¢„çº¦ï¼ˆç®¡ç†å‘˜å¼ºåˆ¶å–æ¶ˆï¼Œä»…å¯¹â€œå·²é¢„çº¦/å¾…ç­¾åˆ°â€çŠ¶æ€æœ‰æ•ˆï¼‰\n                </el-checkbox>\n              </el-form-item>\n\n              <el-form-item>\n                <div class=\"fb-handle-actions\">\n                  <el-button @click=\"fbAdminDrawerVisible = false\">å–æ¶ˆ</el-button>\n                  <el-button type=\"primary\" :loading=\"fbAdminSubmitting\" @click=\"submitFbAdminHandle\">æäº¤å¤„ç†</el-button>\n                </div>\n              </el-form-item>\n            </el-form>\n          </div>\n        </div>\n      </el-drawer>\n    </div>\n    <!-- ============ æ—¥å¿—ç»Ÿè®¡ï¼ˆå ä½é¡µï¼Œä¿ç•™å…¥å£ä¸ä¸¢åŠŸèƒ½ï¼‰ ============ -->\n    <div v-else-if=\"currentPage === 'admin-logs'\" class=\"card simple-card\">\n      <h2 class=\"page-title\">æ—¥å¿—ç»Ÿè®¡</h2>\n      <p class=\"page-subtitle\">æŸ¥çœ‹ç³»ç»Ÿæ“ä½œæ—¥å¿—ä¸ç»Ÿè®¡ä¿¡æ¯ï¼Œè¾…åŠ©æ’æŸ¥é—®é¢˜ä¸è¿½è¸ªæ“ä½œè®°å½•ã€‚</p>\n      <p class=\"simple-tip\">\n        å¯ä»¥åœ¨æ­¤æ¥å…¥æŠ˜çº¿å›¾/æŸ±çŠ¶å›¾å±•ç¤ºæ—¥é¢„çº¦é‡ã€ç­¾åˆ°ç‡ã€è¿çº¦ç‡ç­‰ç»Ÿè®¡æ•°æ®ã€‚\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ElMessage, ElMessageBox } from 'element-plus'\n\nexport default {\n  name: 'AdminHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n  data () {\n    return {\n      /* timers */\n      dashboardTimer: null,\n      reservationTimer: null,\n      userTimer: null,\n\n      /* Dashboard */\n      autoRefresh: false,\n      metrics: {\n        todayReservations: 120,\n        todayTrend: 12,\n        todaySignRate: 82,\n        openRooms: 12,\n        totalSeats: 680,\n        pendingItems: 5\n      },\n      trendItems: [\n        {\n          key: 'weekReservation',\n          title: 'æœ¬å‘¨é¢„çº¦å®Œæˆç‡',\n          value: '86%',\n          percent: 86,\n          status: 'success',\n          desc: 'é¢„çº¦å®Œæˆç‡ä¿æŒåœ¨è¾ƒé«˜æ°´å¹³ï¼Œå¯ç»§ç»­è§‚å¯Ÿå‘¨æœ«æ³¢åŠ¨ã€‚'\n        },\n        {\n          key: 'weekCheckin',\n          title: 'æœ¬å‘¨å¹³å‡ç­¾åˆ°ç‡',\n          value: '79%',\n          percent: 79,\n          status: 'success',\n          desc: 'å»ºè®®é’ˆå¯¹ä½å¹´çº§åŒå­¦å¼€å±•ä¸€æ¬¡åˆ°é¦†æé†’æ´»åŠ¨ã€‚'\n        },\n        {\n          key: 'weekViolation',\n          title: 'æœ¬å‘¨è¿çº¦ç‡',\n          value: '6%',\n          percent: 6,\n          status: 'warning',\n          desc: 'æœ‰ 8 ä½åŒå­¦å‡ºç°å¤šæ¬¡è¿çº¦ï¼Œå¯ç»“åˆä¿¡ç”¨åˆ†è§„åˆ™é‡ç‚¹å…³æ³¨ã€‚'\n        }\n      ],\n\n      /* Admin Announcement */\n      adminNoticeHomeLoading: false,\n      adminNoticeListLoading: false,\n      adminHomeNotices: [],\n\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\n      noticeTypeOptions: [\n        { label: 'è§„åˆ™', value: 'RULE' },\n        { label: 'è°ƒæ•´', value: 'ADJUSTMENT' },\n        { label: 'çªå‘', value: 'EMERGENCY' },\n        { label: 'ç»´æŠ¤', value: 'MAINTENANCE' },\n        { label: 'è€ƒè¯•', value: 'EXAM' },\n        { label: 'å…¶ä»–', value: 'OTHER' }\n      ],\n      noticeLevelOptions: [\n        { label: 'é‡è¦', value: 'IMPORTANT' },\n        { label: 'æé†’', value: 'WARNING' },\n        { label: 'é€šçŸ¥', value: 'INFO' }\n      ],\n      noticeTargetOptions: [\n        { label: 'å…¨ä½“ç®¡ç†å‘˜', value: 0 },\n        { label: 'å…¨ä½“å­¦ç”Ÿ', value: 1 },\n        { label: 'å…¨éƒ¨ç”¨æˆ·', value: 2 }\n      ],\n\n\n      adminNoticeAllVisible: false,\n      adminNoticeDetailVisible: false,\n      adminNoticeDetail: null,\n      adminNoticeDetailFrom: 'home',\n\n      adminNoticeTypeFilter: '',\n      adminNoticeLevelFilter: '',\n      adminNoticeTargetFilter: null,\n      adminNoticeKeyword: '',\n      adminNoticeIncludeExpired: false,\n\n      adminNoticePageNum: 1,\n      adminNoticePageSize: 6,\n      adminNoticeTotalCount: 0,\n      adminNoticePageList: [],\n\n      adminNoticeEditVisible: false,\n      adminNoticeEditMode: 'create', // create | edit\n      adminNoticeSubmitting: false,\n      adminNoticeForm: {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2, // 0=ç®¡ç†å‘˜ 1=å­¦ç”Ÿ 2=å…¨éƒ¨ç”¨æˆ·\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      },\n\n      /* Admin Feedbackï¼ˆæŠ•è¯‰å¤„ç†ï¼‰ */\n      fbAdminLoading: false,\n      fbAdminList: [],\n      fbAdminPageNum: 1,\n      fbAdminPageSize: 8,\n      fbAdminTotal: 0,\n      fbAdminStatusFilter: '',\n      fbAdminCategoryFilter: '',\n      fbAdminKeyword: '',\n      fbAdminOnlyPending: true,\n      fbAdminStats: { pending: 0, processing: 0, resolved: 0 },\n\n      fbAdminDrawerVisible: false,\n      fbAdminDetail: null,\n      fbAdminSubmitting: false,\n      fbAdminHandleForm: {\n        status: 'processing',\n        reply: '',\n        cancelReservation: false\n      },\n\n      todos: [\n        {\n          id: 1,\n          type: 'complaint',\n          content: 'å¤„ç† 2 æ¡å…³äºè‡ªä¹ å®¤å™ªéŸ³çš„æŠ•è¯‰è®°å½•ã€‚',\n          from: 'æŠ•è¯‰å¤„ç†',\n          time: '2025-12-10 09:20',\n          priority: 'high'\n        },\n        {\n          id: 2,\n          type: 'violation',\n          content: 'æ£€æŸ¥æœ¬å‘¨è¿ç»­è¿çº¦è¶…è¿‡ 3 æ¬¡çš„å­¦ç”Ÿåå•ã€‚',\n          from: 'æ—¥å¿—ç»Ÿè®¡',\n          time: '2025-12-10 08:50',\n          priority: 'medium'\n        },\n        {\n          id: 3,\n          type: 'rule',\n          content: 'ç¡®è®¤æœŸæœ«è€ƒè¯•å‘¨è‡ªä¹ å®¤å¼€æ”¾æ—¶é—´ä¸é¢„çº¦ä¸Šé™ã€‚',\n          from: 'åº§ä½ç®¡ç†',\n          time: '2025-12-09 16:10',\n          priority: 'medium'\n        },\n        {\n          id: 4,\n          type: 'system',\n          content: 'å¯¼å‡ºæœ¬æœˆé¢„çº¦ä¸ç­¾åˆ°æŠ¥è¡¨å­˜æ¡£ã€‚',\n          from: 'æ—¥å¿—ç»Ÿè®¡',\n          time: '2025-12-09 10:25',\n          priority: 'low'\n        }\n      ],\n      latestActivities: [\n        { id: 1, text: 'å¼ ä¸‰ é¢„çº¦äº† å›¾ä¹¦é¦† 401 Â· 10:00-12:00', type: 'book', typeLabel: 'æ–°é¢„çº¦', time: '09:15' },\n        { id: 2, text: 'æå›› åœ¨ æœ¬éƒ¨ Â· 3 æ¥¼ 301 å®Œæˆç­¾åˆ°', type: 'sign', typeLabel: 'å·²ç­¾åˆ°', time: '08:05' },\n        { id: 3, text: 'ç‹äº” å–æ¶ˆäº† æ˜æ—¥çš„é¢„çº¦ï¼ˆåŸå› ï¼šè¯¾ç¨‹è°ƒæ•´ï¼‰', type: 'cancel', typeLabel: 'å·²å–æ¶ˆ', time: '07:48' }\n      ],\n\n      /* Reservation Manage */\n      reservationFilters: {\n        keyword: '',\n        room: '',\n        date: '',\n        status: ''\n      },\n      reservationAutoRefresh: false,\n      roomOptions: ['3 æ¥¼ 301', 'å›¾ä¹¦é¦† 401', 'å›¾ä¹¦é¦† 501'],\n      statusOptions: [\n        { label: 'å·²é¢„çº¦', value: 'booked' },\n        { label: 'å·²ç­¾åˆ°', value: 'signed' },\n        { label: 'å·²å–æ¶ˆ', value: 'canceled' },\n        { label: 'è¿çº¦', value: 'violation' }\n      ],\n      reservations: [\n        {\n          id: 1,\n          code: 'Y20251204001',\n          studentNo: '20210001',\n          studentName: 'å¼ ä¸‰',\n          room: '3 æ¥¼ 301',\n          seatNo: 'A-15',\n          date: '2025-12-05',\n          timeRange: '08:00-10:00',\n          status: 'booked',\n          remark: 'è¿Ÿåˆ°éœ€äººå·¥ç¡®è®¤'\n        },\n        {\n          id: 2,\n          code: 'Y20251204002',\n          studentNo: '20210002',\n          studentName: 'æå››',\n          room: 'å›¾ä¹¦é¦† 401',\n          seatNo: 'B-08',\n          date: '2025-12-05',\n          timeRange: '10:00-12:00',\n          status: 'signed',\n          remark: 'æŒ‰æ—¶ç­¾åˆ°'\n        },\n        {\n          id: 3,\n          code: 'Y20251204003',\n          studentNo: '20210003',\n          studentName: 'ç‹äº”',\n          room: 'å›¾ä¹¦é¦† 401',\n          seatNo: 'C-07',\n          date: '2025-12-05',\n          timeRange: '14:00-16:00',\n          status: 'canceled',\n          remark: 'å­¦ç”Ÿä¸»åŠ¨å–æ¶ˆ'\n        },\n        {\n          id: 4,\n          code: 'Y20251204004',\n          studentNo: '20210004',\n          studentName: 'èµµå…­',\n          room: '3 æ¥¼ 301',\n          seatNo: 'A-01',\n          date: '2025-12-04',\n          timeRange: '18:00-20:00',\n          status: 'violation',\n          remark: 'æœªåˆ°åœºä¸”æœªå–æ¶ˆ'\n        }\n      ],\n      reservationSelection: [],\n      reservationPage: 1,\n      reservationPageSize: 10,\n\n      /* User Manage */\n      userFilters: {\n        keyword: '',\n        role: '',\n        status: '',\n        onlyAbnormal: false\n      },\n      userAutoRefresh: false,\n      userRoleOptions: [\n        { label: 'å­¦ç”Ÿ', value: 'student' },\n        { label: 'æ•™å¸ˆ', value: 'teacher' },\n        { label: 'ç®¡ç†å‘˜', value: 'admin' }\n      ],\n      userStatusOptions: [\n        { label: 'æ­£å¸¸', value: 'normal' },\n        { label: 'é¢„è­¦', value: 'warning' },\n        { label: 'é»‘åå•', value: 'blacklist' }\n      ],\n      users: [\n        {\n          id: 1,\n          studentNo: '20210001',\n          name: 'å¼ ä¸‰',\n          role: 'student',\n          major: 'è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯',\n          clazz: '3ç­',\n          creditScore: 100,\n          violationCount: 0,\n          status: 'normal',\n          lastLoginAt: '2025-12-05 08:10',\n          phone: '138****0001'\n        },\n        {\n          id: 2,\n          studentNo: '20210002',\n          name: 'æå››',\n          role: 'student',\n          major: 'è½¯ä»¶å·¥ç¨‹',\n          clazz: '2ç­',\n          creditScore: 78,\n          violationCount: 1,\n          status: 'warning',\n          lastLoginAt: '2025-12-05 09:05',\n          phone: '138****0002'\n        },\n        {\n          id: 3,\n          studentNo: '20210003',\n          name: 'ç‹äº”',\n          role: 'student',\n          major: 'äººå·¥æ™ºèƒ½',\n          clazz: '1ç­',\n          creditScore: 55,\n          violationCount: 3,\n          status: 'blacklist',\n          lastLoginAt: '2025-12-03 19:20',\n          phone: '138****0003'\n        },\n        {\n          id: 4,\n          studentNo: 'T00001',\n          name: 'èµµè€å¸ˆ',\n          role: 'teacher',\n          major: 'ä¿¡æ¯å­¦é™¢',\n          clazz: 'è¾…å¯¼å‘˜',\n          creditScore: 100,\n          violationCount: 0,\n          status: 'normal',\n          lastLoginAt: '2025-12-05 07:40',\n          phone: '139****8888'\n        },\n        {\n          id: 5,\n          studentNo: 'A00001',\n          name: 'ç³»ç»Ÿç®¡ç†å‘˜',\n          role: 'admin',\n          major: 'ä¿¡æ¯ä¸­å¿ƒ',\n          clazz: 'åå°ç®¡ç†',\n          creditScore: 100,\n          violationCount: 0,\n          status: 'normal',\n          lastLoginAt: '2025-12-05 08:00',\n          phone: 'â€”'\n        }\n      ],\n      userSelection: [],\n      userPage: 1,\n      userPageSize: 10,\n\n      /* Seat Manage */\n      currentCampus: 'main',\n      campusOptions: [\n        { label: 'æœ¬éƒ¨æ ¡åŒº', value: 'main' },\n        { label: 'ä¸œæ ¡åŒº', value: 'east' }\n      ],\n      currentBuild: '',\n      buildOptions: [\n        { label: '3 å·æ•™å­¦æ¥¼', value: '3F' },\n        { label: 'å›¾ä¹¦é¦†', value: 'LIB' }\n      ],\n      onlyShowOpen: true,\n\n      roomKeyword: '',\n      roomCapacityFilter: 'all',\n      rooms: [\n        {\n          id: 1,\n          name: '3 æ¥¼ 301 è‡ªä¹ å®¤',\n          campus: 'main',\n          building: '3 å·æ•™å­¦æ¥¼',\n          buildingCode: '3F',\n          floor: 3,\n          capacity: 60,\n          usedSeats: 32,\n          status: 'open'\n        },\n        {\n          id: 2,\n          name: '3 æ¥¼ 302 è‡ªä¹ å®¤',\n          campus: 'main',\n          building: '3 å·æ•™å­¦æ¥¼',\n          buildingCode: '3F',\n          floor: 3,\n          capacity: 40,\n          usedSeats: 12,\n          status: 'open'\n        },\n        {\n          id: 3,\n          name: 'å›¾ä¹¦é¦† 401 è‡ªä¹ åŒº',\n          campus: 'main',\n          building: 'å›¾ä¹¦é¦†',\n          buildingCode: 'LIB',\n          floor: 4,\n          capacity: 90,\n          usedSeats: 76,\n          status: 'open'\n        },\n        {\n          id: 4,\n          name: 'å›¾ä¹¦é¦† 501 ç ”è®¨åŒº',\n          campus: 'main',\n          building: 'å›¾ä¹¦é¦†',\n          buildingCode: 'LIB',\n          floor: 5,\n          capacity: 30,\n          usedSeats: 5,\n          status: 'closed'\n        }\n      ],\n      selectedRoomId: 1,\n\n      activeTab: 'layout',\n      showSeatNo: true,\n      showDemoOccupied: true,\n      seatGrid: [],\n\n      seatRule: {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      }\n    }\n  },\n  computed: {\n    todayText () {\n      const d = new Date()\n      const y = d.getFullYear()\n      const m = String(d.getMonth() + 1).padStart(2, '0')\n      const day = String(d.getDate()).padStart(2, '0')\n      return `${y}-${m}-${day}`\n    },\n\n    /* reservation computed */\n    filteredReservations () {\n      const { keyword, room, date, status } = this.reservationFilters\n      return this.reservations.filter(item => {\n        let ok = true\n        if (keyword && keyword.trim()) {\n          const k = keyword.trim()\n          ok = ok && (item.studentName.includes(k) || item.studentNo.includes(k) || item.code.includes(k))\n        }\n        if (room) ok = ok && item.room === room\n        if (date) ok = ok && item.date === date\n        if (status) ok = ok && item.status === status\n        return ok\n      })\n    },\n    paginatedReservations () {\n      const start = (this.reservationPage - 1) * this.reservationPageSize\n      return this.filteredReservations.slice(start, start + this.reservationPageSize)\n    },\n    reservationStats () {\n      const stats = { total: 0, booked: 0, signed: 0, canceled: 0, violation: 0 }\n      stats.total = this.filteredReservations.length\n      this.filteredReservations.forEach(item => {\n        if (item.status === 'booked') stats.booked++\n        else if (item.status === 'signed') stats.signed++\n        else if (item.status === 'canceled') stats.canceled++\n        else if (item.status === 'violation') stats.violation++\n      })\n      return stats\n    },\n\n    /* user computed */\n    filteredUsers () {\n      const { keyword, role, status, onlyAbnormal } = this.userFilters\n      return this.users.filter(user => {\n        let ok = true\n        if (keyword && keyword.trim()) {\n          const k = keyword.trim()\n          ok = ok && (user.name.includes(k) || user.studentNo.includes(k) || (user.major && user.major.includes(k)))\n        }\n        if (role) ok = ok && user.role === role\n        if (status) ok = ok && user.status === status\n        if (onlyAbnormal) ok = ok && (user.status === 'warning' || user.status === 'blacklist')\n        return ok\n      })\n    },\n    paginatedUsers () {\n      const start = (this.userPage - 1) * this.userPageSize\n      return this.filteredUsers.slice(start, start + this.userPageSize)\n    },\n    userStats () {\n      const stats = { total: 0, normal: 0, warning: 0, blacklist: 0 }\n      stats.total = this.filteredUsers.length\n      this.filteredUsers.forEach(user => {\n        if (user.status === 'normal') stats.normal++\n        else if (user.status === 'warning') stats.warning++\n        else if (user.status === 'blacklist') stats.blacklist++\n      })\n      return stats\n    },\n\n    /* seat computed */\n    filteredRooms () {\n      return this.rooms.filter(room => {\n        let ok = true\n        if (this.currentCampus) ok = ok && room.campus === this.currentCampus\n        if (this.currentBuild) ok = ok && room.buildingCode === this.currentBuild\n        if (this.onlyShowOpen) ok = ok && room.status === 'open'\n        if (this.roomKeyword && this.roomKeyword.trim()) {\n          const k = this.roomKeyword.trim()\n          ok = ok && (room.name.includes(k) || String(room.floor).includes(k) || room.building.includes(k))\n        }\n        if (this.roomCapacityFilter === 'small') ok = ok && room.capacity <= 40\n        if (this.roomCapacityFilter === 'medium') ok = ok && room.capacity > 40 && room.capacity < 80\n        if (this.roomCapacityFilter === 'large') ok = ok && room.capacity >= 80\n        return ok\n      })\n    },\n    selectedRoom () {\n      const room = this.rooms.find(r => r.id === this.selectedRoomId)\n      if (!room) return null\n      return { ...room, statusModel: room.status === 'open' }\n    },\n    seatStats () {\n      const stats = { free: 0, occupied: 0, disabled: 0, blockedArea: 1 }\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => {\n          if (seat.status === 'free') stats.free++\n          else if (seat.status === 'occupied') stats.occupied++\n          else if (seat.status === 'disabled') stats.disabled++\n        })\n      })\n      return stats\n    },\n    latestActivitiesLeft () {\n      const mid = Math.ceil(this.latestActivities.length / 2)\n      return this.latestActivities.slice(0, mid)\n    },\n    latestActivitiesRight () {\n      const mid = Math.ceil(this.latestActivities.length / 2)\n      return this.latestActivities.slice(mid)\n    },\n    lastLoginIp () {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\n      const u = s ? JSON.parse(s) : {}\n      return u.lastLoginIp || 'æœªçŸ¥'\n    }\n  },\n  watch: {\n    currentPage (val) {\n      if (val !== 'admin-home') this.stopDashboardTimer()\n      else if (this.autoRefresh) this.startDashboardTimer()\n\n      if (val === 'admin-home') this.loadAdminNoticeHome()\n      if (val !== 'admin-reservations') this.stopReservationTimer()\n      else if (this.reservationAutoRefresh) this.startReservationTimer()\n\n      if (val !== 'admin-users') this.stopUserTimer()\n      else if (this.userAutoRefresh) this.startUserTimer()\n\n      if (val === 'admin-complaints') {\n        this.loadAdminFeedback(true)\n        this.loadAdminFeedbackStats()\n      }\n    },\n    autoRefresh (val) {\n      if (val && this.currentPage === 'admin-home') this.startDashboardTimer()\n      else this.stopDashboardTimer()\n    },\n    reservationAutoRefresh (val) {\n      if (val && this.currentPage === 'admin-reservations') this.startReservationTimer()\n      else this.stopReservationTimer()\n    },\n    userAutoRefresh (val) {\n      if (val && this.currentPage === 'admin-users') this.startUserTimer()\n      else this.stopUserTimer()\n    }\n  },\n  created () {\n    this.initSeatGrid()\n    this.loadAdminNoticeHome()\n  },\n  beforeUnmount () {\n    this.stopDashboardTimer()\n    this.stopReservationTimer()\n    this.stopUserTimer()\n  },\n  methods: {\n    emitChange (page) {\n      this.$emit('change-page', page)\n    },\n\n    /* ---------- dashboard timers ---------- */\n    startDashboardTimer () {\n      this.stopDashboardTimer()\n      this.dashboardTimer = setInterval(() => {\n        this.refreshDashboardMetrics()\n      }, 8000)\n    },\n    stopDashboardTimer () {\n      if (this.dashboardTimer) {\n        clearInterval(this.dashboardTimer)\n        this.dashboardTimer = null\n      }\n    },\n    refreshDashboardMetrics () {\n      // çº¯å‰ç«¯æ¼”ç¤ºï¼šè½»å¾®æ³¢åŠ¨ä¸€ä¸‹æ•°å€¼ï¼Œä½“ç°â€œè‡ªåŠ¨åˆ·æ–°â€ç¡®å®åœ¨åŠ¨\n      const jitter = (n, min, max) => Math.min(max, Math.max(min, n))\n      this.metrics.todayReservations = jitter(this.metrics.todayReservations + (Math.random() < 0.5 ? -1 : 1) * Math.floor(Math.random() * 3), 80, 200)\n      this.metrics.todaySignRate = jitter(this.metrics.todaySignRate + (Math.random() < 0.5 ? -1 : 1) * Math.floor(Math.random() * 2), 60, 98)\n      this.metrics.pendingItems = jitter(this.metrics.pendingItems + (Math.random() < 0.5 ? -1 : 1), 0, 20)\n    },\n\n    /* ---------- admin announcement ---------- */\n    noticeTypeText (t) {\n      if (t === 'RULE') return 'è§„åˆ™'\n      if (t === 'ADJUSTMENT') return 'è°ƒæ•´'\n      if (t === 'EMERGENCY') return 'çªå‘'\n      if (t === 'MAINTENANCE') return 'ç»´æŠ¤'\n      if (t === 'EXAM') return 'è€ƒè¯•'\n      return 'å…¶ä»–'\n    },\n    noticeTypeIcon (t) {\n      if (t === 'RULE') return 'ğŸ“Œ'\n      if (t === 'ADJUSTMENT') return 'ğŸ§­'\n      if (t === 'EMERGENCY') return 'ğŸš¨'\n      if (t === 'MAINTENANCE') return 'ğŸ§°'\n      if (t === 'EXAM') return 'ğŸ“'\n      return 'ğŸ“£'\n    },\n    noticeLevelText (l) {\n      if (l === 'IMPORTANT') return 'é‡è¦'\n      if (l === 'WARNING') return 'æé†’'\n      return 'é€šçŸ¥'\n    },\n    formatNoticeTime (timeStr, withTime) {\n      if (!timeStr) return 'â€”'\n      const d = new Date(timeStr)\n      if (Number.isNaN(d.getTime())) return String(timeStr)\n      const pad = (n) => String(n).padStart(2, '0')\n      const y = d.getFullYear()\n      const m = pad(d.getMonth() + 1)\n      const day = pad(d.getDate())\n      if (!withTime) return `${y}-${m}-${day}`\n      const hh = pad(d.getHours())\n      const mm = pad(d.getMinutes())\n      return `${y}-${m}-${day} ${hh}:${mm}`\n    },\n    makeNoticeSummary (content, maxLen = 42) {\n      if (!content) return ''\n      const s = String(content).replace(/\\s+/g, ' ').trim()\n      if (!s) return ''\n      return s.length > maxLen ? s.slice(0, maxLen) + 'â€¦' : s\n    },\n    normalizeNoticeItem (item) {\n      const it = item || {}\n      return {\n        ...it,\n        summary: it.summary || this.makeNoticeSummary(it.content)\n      }\n    },\n    getCurrentUser () {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\n      try { return s ? JSON.parse(s) : {} } catch (e) { return {} }\n    },\n    getCurrentUserId () {\n      const u = this.getCurrentUser()\n      const id = u && (u.id ?? u.userId)\n      const n = Number(id)\n      return Number.isFinite(n) ? n : null\n    },\n\n    async loadAdminNoticeHome (silent = false) {\n      if (!silent) this.adminNoticeHomeLoading = true\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: { pageNum: 1, pageSize: 3, includeExpired: 0 }\n        })\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : []\n          this.adminHomeNotices = list.map(this.normalizeNoticeItem)\n        } else {\n          this.adminHomeNotices = []\n        }\n      } catch (e) {\n        this.adminHomeNotices = []\n      } finally {\n        if (!silent) this.adminNoticeHomeLoading = false\n      }\n    },\n\n    openAdminNoticeAll () {\n      this.adminNoticeAllVisible = true\n      this.reloadAdminNoticePage(true)\n    },\n    async reloadAdminNoticePage (resetPage) {\n      if (resetPage) this.adminNoticePageNum = 1\n      this.adminNoticeListLoading = true\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: {\n            pageNum: this.adminNoticePageNum,\n            pageSize: this.adminNoticePageSize,\n            type: this.adminNoticeTypeFilter || undefined,\n            level: this.adminNoticeLevelFilter || undefined,\n            targetRole: (this.adminNoticeTargetFilter === null || this.adminNoticeTargetFilter === '' || this.adminNoticeTargetFilter === undefined)\n                ? undefined\n                : Number(this.adminNoticeTargetFilter),\n            keyword: this.adminNoticeKeyword || undefined,\n            includeExpired: this.adminNoticeIncludeExpired ? 1 : 0\n          }\n        })\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : []\n          this.adminNoticePageList = list.map(this.normalizeNoticeItem)\n          this.adminNoticeTotalCount = Number(res.total || 0)\n        } else {\n          this.adminNoticePageList = []\n          this.adminNoticeTotalCount = 0\n          ElMessage.error(res?.msg || 'åŠ è½½å…¬å‘Šå¤±è´¥')\n        }\n      } catch (e) {\n        this.adminNoticePageList = []\n        this.adminNoticeTotalCount = 0\n        ElMessage.error('åŠ è½½å…¬å‘Šå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\n      } finally {\n        this.adminNoticeListLoading = false\n      }\n    },\n    onAdminNoticePageChange (p) {\n      this.adminNoticePageNum = p\n      this.reloadAdminNoticePage(false)\n    },\n    resetAdminNoticeFilters () {\n      this.adminNoticeTypeFilter = ''\n      this.adminNoticeLevelFilter = ''\n      this.adminNoticeTargetFilter = null\n      this.adminNoticeKeyword = ''\n      this.adminNoticeIncludeExpired = false\n      this.reloadAdminNoticePage(true)\n    },\n\n    async openAdminNoticeDetail (item, from) {\n      this.adminNoticeDetailFrom = from || 'home'\n      // å…ˆå±•ç¤ºï¼ˆæ›´ä¸æ»‘ï¼‰ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°è¯¦æƒ…\n      this.adminNoticeDetail = this.normalizeNoticeItem(item)\n      this.adminNoticeDetailVisible = true\n      try {\n        const res = await this.$axios.get('/announcement/admin/detail', { params: { id: item.id } })\n        if (res && Number(res.code) === 200 && res.data) {\n          this.adminNoticeDetail = this.normalizeNoticeItem(res.data)\n        }\n      } catch (e) {\n        // é™é»˜ï¼šå·²æœ‰åˆ—è¡¨æ•°æ®å¯å±•ç¤º\n      }\n    },\n    backToAdminNoticeList () {\n      this.adminNoticeDetailVisible = false\n      if (this.adminNoticeDetailFrom === 'list') {\n        this.adminNoticeAllVisible = true\n      }\n    },\n\n    openAdminNoticeCreate () {\n      this.adminNoticeEditMode = 'create'\n      this.adminNoticeForm = {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2,\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      }\n      this.adminNoticeEditVisible = true\n    },\n    openAdminNoticeEdit (item) {\n      const it = item || {}\n      this.adminNoticeEditMode = 'edit'\n      this.adminNoticeForm = {\n        id: it.id,\n        type: it.type || 'RULE',\n        level: it.level || 'INFO',\n        targetRole: typeof it.targetRole === 'number' ? it.targetRole : Number(it.targetRole ?? 2),\n        targetText: it.targetText || '',\n        title: it.title || '',\n        content: it.content || '',\n        isTop: Number(it.isTop) === 1\n      }\n      this.adminNoticeEditVisible = true\n    },\n\n    async submitAdminNotice () {\n      const f = this.adminNoticeForm || {}\n      const title = String(f.title || '').trim()\n      const content = String(f.content || '').trim()\n      const type = String(f.type || '').trim()\n      const level = String(f.level || '').trim()\n      const targetRole = f.targetRole\n\n      if (!title) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šæ ‡é¢˜')\n      if (!content) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šå†…å®¹')\n      if (!type) return ElMessage.warning('è¯·é€‰æ‹©å…¬å‘Šç±»å‹')\n      if (!level) return ElMessage.warning('è¯·é€‰æ‹©é‡è¦ç¨‹åº¦')\n      if (targetRole === null || targetRole === undefined || targetRole === '') return ElMessage.warning('è¯·é€‰æ‹©é¢å‘å¯¹è±¡')\n\n      const payload = {\n        id: this.adminNoticeEditMode === 'edit' ? f.id : undefined,\n        title,\n        content,\n        type,\n        level,\n        targetRole: Number(targetRole),\n        targetText: String(f.targetText || '').trim(),\n        isTop: f.isTop ? 1 : 0,\n        createdBy: this.getCurrentUserId()\n      }\n\n      this.adminNoticeSubmitting = true\n      try {\n        const api = this.adminNoticeEditMode === 'create' ? '/announcement/admin/create' : '/announcement/admin/republish'\n        const res = await this.$axios.post(api, payload)\n\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(this.adminNoticeEditMode === 'create' ? 'å‘å¸ƒæˆåŠŸ' : 'é‡æ–°å‘å¸ƒæˆåŠŸ')\n          this.adminNoticeEditVisible = false\n          this.adminNoticeDetailVisible = false\n\n          // åˆ·æ–°ï¼šä¸»é¡µ + åˆ—è¡¨ï¼ˆå¦‚æœæ‰“å¼€ï¼‰\n          this.loadAdminNoticeHome(true)\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true)\n        } else {\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥')\n        }\n      } catch (e) {\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\n      } finally {\n        this.adminNoticeSubmitting = false\n      }\n    },\n\n    async confirmAdminNoticeDelete (item) {\n      const it = item || {}\n      try {\n        await ElMessageBox.confirm(\n            `ç¡®å®šåˆ é™¤å…¬å‘Šã€Œ${it.title || 'ï¼ˆæ— æ ‡é¢˜ï¼‰'}ã€å—ï¼Ÿåˆ é™¤åå­¦ç”Ÿç«¯ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚`,\n            'åˆ é™¤ç¡®è®¤',\n            { type: 'warning', confirmButtonText: 'åˆ é™¤', cancelButtonText: 'å–æ¶ˆ' }\n        )\n      } catch (e) {\n        return\n      }\n\n      this.adminNoticeListLoading = true\n      try {\n        const res = await this.$axios.delete('/announcement/admin/delete', { params: { id: it.id } })\n        if (res && Number(res.code) === 200) {\n          ElMessage.success('åˆ é™¤æˆåŠŸ')\n          this.adminNoticeDetailVisible = false\n\n          this.loadAdminNoticeHome(true)\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true)\n        } else {\n          ElMessage.error(res?.msg || 'åˆ é™¤å¤±è´¥')\n        }\n      } catch (e) {\n        ElMessage.error('åˆ é™¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\n      } finally {\n        this.adminNoticeListLoading = false\n      }\n    },\n\n    getTodoTagType (type) {\n      if (type === 'complaint') return 'danger'\n      if (type === 'violation') return 'warning'\n      if (type === 'rule') return 'success'\n      return 'info'\n    },\n    getTodoTypeText (type) {\n      if (type === 'complaint') return 'æŠ•è¯‰'\n      if (type === 'violation') return 'è¿çº¦'\n      if (type === 'rule') return 'è§„åˆ™é…ç½®'\n      if (type === 'system') return 'ç³»ç»Ÿ'\n      return 'å…¶ä»–'\n    },\n    getPriorityText (p) {\n      if (p === 'high') return 'é«˜'\n      if (p === 'medium') return 'ä¸­'\n      return 'ä½'\n    },\n    handleTodoGo (row) {\n      // è®©â€œå‰å¾€å¤„ç†â€çœŸçš„èƒ½è·³é¡µï¼ˆæ•´åˆåå¯ç”¨ï¼‰\n      if (row.type === 'complaint') return this.emitChange('admin-complaints')\n      if (row.type === 'rule') return this.emitChange('admin-seats')\n      // violation / system ç»Ÿä¸€å¼•å¯¼åˆ°æ—¥å¿—ç»Ÿè®¡\n      return this.emitChange('admin-logs')\n    },\n    handleTodoDone (row) {\n      this.todos = this.todos.filter(t => t.id !== row.id)\n    },\n    handleMarkAllDone () {\n      this.todos = []\n    },\n\n    /* ---------- reservation timers ---------- */\n    startReservationTimer () {\n      this.stopReservationTimer()\n      this.reservationTimer = setInterval(() => {\n        this.handleReservationSearch()\n      }, 8000)\n    },\n    stopReservationTimer () {\n      if (this.reservationTimer) {\n        clearInterval(this.reservationTimer)\n        this.reservationTimer = null\n      }\n    },\n\n    /* reservation methods */\n    handleReservationSearch () {\n      this.reservationPage = 1\n    },\n    resetReservationFilters () {\n      this.reservationFilters = { keyword: '', room: '', date: '', status: '' }\n      this.reservationPage = 1\n    },\n    handleSelectionChange (val) {\n      this.reservationSelection = val || []\n    },\n    handlePageChange (page) {\n      this.reservationPage = page\n    },\n    handlePageSizeChange (size) {\n      this.reservationPageSize = size\n      this.reservationPage = 1\n    },\n    getStatusTagType (status) {\n      if (status === 'booked') return 'info'\n      if (status === 'signed') return 'success'\n      if (status === 'canceled') return 'warning'\n      if (status === 'violation') return 'danger'\n      return ''\n    },\n    getStatusText (status) {\n      if (status === 'booked') return 'å·²é¢„çº¦'\n      if (status === 'signed') return 'å·²ç­¾åˆ°'\n      if (status === 'canceled') return 'å·²å–æ¶ˆ'\n      if (status === 'violation') return 'è¿çº¦'\n      return status\n    },\n    handleSign (row) {\n      row.status = 'signed'\n    },\n    handleCancel (row) {\n      row.status = 'canceled'\n    },\n    handleMarkViolation (row) {\n      row.status = 'violation'\n    },\n    handleViewDetail (row) {\n      console.log('æŸ¥çœ‹é¢„çº¦è¯¦æƒ…', row)\n    },\n    handleBatchSign () {\n      this.reservationSelection.forEach(item => {\n        if (item.status === 'booked') item.status = 'signed'\n      })\n      this.reservationSelection = []\n    },\n    handleBatchCancel () {\n      this.reservationSelection.forEach(item => {\n        if (item.status === 'booked') item.status = 'canceled'\n      })\n      this.reservationSelection = []\n    },\n\n    /* ---------- user timers ---------- */\n    startUserTimer () {\n      this.stopUserTimer()\n      this.userTimer = setInterval(() => {\n        this.handleUserSearch()\n      }, 8000)\n    },\n    stopUserTimer () {\n      if (this.userTimer) {\n        clearInterval(this.userTimer)\n        this.userTimer = null\n      }\n    },\n\n    /* user methods */\n    handleUserSearch () {\n      this.userPage = 1\n    },\n    resetUserFilters () {\n      this.userFilters = { keyword: '', role: '', status: '', onlyAbnormal: false }\n      this.userPage = 1\n    },\n    handleUserSelectionChange (val) {\n      this.userSelection = val || []\n    },\n    handleUserPageChange (page) {\n      this.userPage = page\n    },\n    handleUserPageSizeChange (size) {\n      this.userPageSize = size\n      this.userPage = 1\n    },\n    getUserStatusTagType (status) {\n      if (status === 'normal') return 'success'\n      if (status === 'warning') return 'warning'\n      if (status === 'blacklist') return 'danger'\n      return ''\n    },\n    getUserStatusText (status) {\n      if (status === 'normal') return 'æ­£å¸¸'\n      if (status === 'warning') return 'é¢„è­¦'\n      if (status === 'blacklist') return 'é»‘åå•'\n      return status\n    },\n    handleLockUser (row) {\n      row.status = 'blacklist'\n      if (row.creditScore > 60) row.creditScore = 60\n    },\n    handleUnlockUser (row) {\n      row.status = 'normal'\n      if (row.creditScore < 80) row.creditScore = 80\n    },\n    handleResetPassword (row) {\n      console.log('é‡ç½®å¯†ç ', row)\n    },\n    handleViewUserDetail (row) {\n      console.log('æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ…', row)\n    },\n    handleBatchLock () {\n      this.userSelection.forEach(user => {\n        user.status = 'blacklist'\n        if (user.creditScore > 60) user.creditScore = 60\n      })\n      this.userSelection = []\n    },\n    handleBatchUnlock () {\n      this.userSelection.forEach(user => {\n        user.status = 'normal'\n        if (user.creditScore < 80) user.creditScore = 80\n      })\n      this.userSelection = []\n    },\n\n    /* seat methods */\n    initSeatGrid () {\n      const rows = 6\n      const cols = 8\n      const grid = []\n      let id = 1\n      for (let r = 0; r < rows; r++) {\n        const row = { rowIndex: r, seats: [] }\n        for (let c = 0; c < cols; c++) {\n          row.seats.push({\n            id: id++,\n            row: r,\n            col: c,\n            label: `${r + 1}-${c + 1}`,\n            status: 'free',\n            selected: false\n          })\n        }\n        grid.push(row)\n      }\n      grid[0].seats[0].status = 'occupied'\n      grid[0].seats[1].status = 'occupied'\n      grid[2].seats[3].status = 'disabled'\n      grid[3].seats[4].status = 'disabled'\n      this.seatGrid = grid\n    },\n    handleSelectRoom (row) {\n      this.selectedRoomId = row.id\n    },\n    toggleRoomOpen (row) {\n      row.status = row.status === 'open' ? 'closed' : 'open'\n    },\n    handleEditRoom (row) {\n      console.log('ç¼–è¾‘è‡ªä¹ å®¤é…ç½®ï¼ˆå¼¹çª—é¢„ç•™ï¼‰', row)\n    },\n    syncRoomStatus (val) {\n      const room = this.rooms.find(r => r.id === this.selectedRoomId)\n      if (room) room.status = val ? 'open' : 'closed'\n    },\n    seatCellClass (seat) {\n      return [`seat-status-${seat.status}`, seat.selected ? 'seat-selected' : '']\n    },\n    handleSeatClick (seat) {\n      seat.selected = !seat.selected\n      if (this.showDemoOccupied && seat.status === 'free' && Math.random() < 0.05) {\n        seat.status = 'occupied'\n      }\n    },\n    handleBatchDisable () {\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => {\n          if (seat.selected) {\n            seat.status = 'disabled'\n            seat.selected = false\n          }\n        })\n      })\n    },\n    handleClearSelection () {\n      this.seatGrid.forEach(row => {\n        row.seats.forEach(seat => { seat.selected = false })\n      })\n    },\n\n    /* ---------- admin feedback/complaints ---------- */\n    onFbAdminFilterChange () {\n      this.fbAdminPageNum = 1\n      this.loadAdminFeedback(false)\n      this.loadAdminFeedbackStats()\n    },\n    fbAdminPageChange (p) {\n      this.fbAdminPageNum = Number(p || 1)\n      this.loadAdminFeedback(false)\n    },\n    fbAdminStatusText (s) {\n      const v = String(s || '')\n      if (v === 'pending') return 'å¾…å¤„ç†'\n      if (v === 'processing') return 'å¤„ç†ä¸­'\n      if (v === 'resolved') return 'å·²è§£å†³'\n      return v || '-'\n    },\n    fbAdminStatusTagType (s) {\n      const v = String(s || '')\n      if (v === 'pending') return 'warning'\n      if (v === 'processing') return 'info'\n      if (v === 'resolved') return 'success'\n      return ''\n    },\n    fbAdminCategoryText (c) {\n      const v = String(c || '')\n      if (v === 'env') return 'ç¯å¢ƒè¯„ä»·'\n      if (v === 'service') return 'æœåŠ¡è¯„ä»·'\n      if (v === 'suggestion') return 'å»ºè®®'\n      if (v === 'complaint') return 'æŠ•è¯‰'\n      if (v === 'appeal') return 'ç”³è¯‰'\n      if (v === 'other') return 'å…¶ä»–'\n      return v || '-'\n    },\n    fbAdminCategoryTagType (c) {\n      const v = String(c || '')\n      if (v === 'complaint') return 'danger'\n      if (v === 'appeal') return 'warning'\n      if (v === 'suggestion') return 'success'\n      if (v === 'env' || v === 'service') return 'info'\n      return ''\n    },\n    formatYmdhm (dtStr) {\n      if (!dtStr) return '-'\n      const s = String(dtStr).replace('T', ' ')\n      const parts = s.split(' ')\n      const d = parts[0] || ''\n      const t = (parts[1] || '').slice(0, 5)\n      if (!d) return s\n      const ds = d.split('-')\n      if (ds.length >= 3) {\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`\n        return t ? `${mmdd} ${t}` : mmdd\n      }\n      return s\n    },\n    async loadAdminFeedbackStats () {\n      try {\n        const res = await this.$axios.get('/feedback/admin/stats')\n        if (res && res.code === 200) {\n          const d = res.data || {}\n          this.fbAdminStats = {\n            pending: Number(d.pending || 0),\n            processing: Number(d.processing || 0),\n            resolved: Number(d.resolved || 0)\n          }\n          // åŒæ­¥ Dashboard å¾…åŠæ•°é‡ï¼ˆå¯é€‰ï¼‰\n          this.metrics.pendingItems = this.fbAdminStats.pending + this.fbAdminStats.processing\n        }\n      } catch (e) {\n        console.error(e)\n      }\n    },\n    async loadAdminFeedback (resetPage = false) {\n      if (resetPage) this.fbAdminPageNum = 1\n      this.fbAdminLoading = true\n      try {\n        const params = {\n          pageNum: this.fbAdminPageNum,\n          pageSize: this.fbAdminPageSize\n        }\n        if (this.fbAdminOnlyPending) params.onlyPending = true\n        if (this.fbAdminStatusFilter) params.status = this.fbAdminStatusFilter\n        if (this.fbAdminCategoryFilter) params.category = this.fbAdminCategoryFilter\n        if (this.fbAdminKeyword) params.keyword = this.fbAdminKeyword\n\n        const res = await this.$axios.get('/feedback/admin/page', { params })\n        if (res && res.code === 200) {\n          this.fbAdminList = Array.isArray(res.data) ? res.data : []\n          this.fbAdminTotal = Number(res.total || 0)\n        } else {\n          this.fbAdminList = []\n          this.fbAdminTotal = 0\n        }\n      } catch (e) {\n        console.error(e)\n        this.fbAdminList = []\n        this.fbAdminTotal = 0\n      } finally {\n        this.fbAdminLoading = false\n      }\n    },\n    openFbAdminDetail (row) {\n      this.fbAdminDetail = row ? { ...row } : null\n      const currentStatus = String((row && row.status) || 'pending')\n      this.fbAdminHandleForm = {\n        status: currentStatus === 'resolved' ? 'resolved' : 'processing',\n        reply: (row && row.reply) ? String(row.reply) : '',\n        cancelReservation: false\n      }\n      this.fbAdminDrawerVisible = true\n    },\n    async quickResolveFb (row) {\n      if (!row || !row.id) return\n      try {\n        await ElMessageBox.confirm('ç¡®è®¤å°†è¯¥åé¦ˆæ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Ÿ', 'æç¤º', {\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ',\n          type: 'warning'\n        })\n      } catch (_) {\n        return\n      }\n\n      this.fbAdminSubmitting = true\n      try {\n        const payload = {\n          feedbackId: Number(row.id),\n          status: 'resolved',\n          reply: (row && row.reply) ? String(row.reply) : ''\n        }\n        const res = await this.$axios.post('/feedback/admin/handle', payload)\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'å·²æ ‡è®°ä¸ºå·²è§£å†³')\n          this.loadAdminFeedback(false)\n          this.loadAdminFeedbackStats()\n        } else {\n          ElMessage.error((res && res.msg) || 'æ“ä½œå¤±è´¥')\n        }\n      } catch (e) {\n        console.error(e)\n        ElMessage.error('è¯·æ±‚å¤±è´¥')\n      } finally {\n        this.fbAdminSubmitting = false\n      }\n    },\n    async submitFbAdminHandle () {\n      if (!this.fbAdminDetail || !this.fbAdminDetail.id) return\n      if (String(this.fbAdminHandleForm.status) === 'resolved' && !String(this.fbAdminHandleForm.reply || '').trim()) {\n        try {\n          await ElMessageBox.confirm('ä½ å°†æ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Œä½†å›å¤å†…å®¹ä¸ºç©ºã€‚ç»§ç»­æäº¤ï¼Ÿ', 'æç¤º', {\n            confirmButtonText: 'ç»§ç»­',\n            cancelButtonText: 'è¿”å›å¡«å†™',\n            type: 'warning'\n          })\n        } catch (_) {\n          return\n        }\n      }\n\n      this.fbAdminSubmitting = true\n      try {\n        const payload = {\n          feedbackId: Number(this.fbAdminDetail.id),\n          status: this.fbAdminHandleForm.status,\n          reply: this.fbAdminHandleForm.reply,\n          cancelReservation: !!this.fbAdminHandleForm.cancelReservation\n        }\n        const res = await this.$axios.post('/feedback/admin/handle', payload)\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'æäº¤æˆåŠŸ')\n          this.fbAdminDrawerVisible = false\n          this.fbAdminDetail = null\n          this.loadAdminFeedback(false)\n          this.loadAdminFeedbackStats()\n        } else {\n          ElMessage.error((res && res.msg) || 'æäº¤å¤±è´¥')\n        }\n      } catch (e) {\n        console.error(e)\n        ElMessage.error('è¯·æ±‚å¤±è´¥')\n      } finally {\n        this.fbAdminSubmitting = false\n      }\n    },\n\n    resetSeatRule () {\n      this.seatRule = {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n/* é€šç”¨å¡ç‰‡ */\n.card {\n  background-color: #ffffff;\n  border-radius: 16px;\n  padding: 20px 24px;\n  box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);\n  box-sizing: border-box;\n}\n\n.page-title {\n  margin: 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.page-subtitle {\n  margin: 4px 0 0;\n  font-size: 13px;\n  color: #6b7280;\n}\n\n/* ============ Dashboard styles ============ */\n.dashboard-page {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.welcome-card {\n  display: flex;\n  justify-content: space-between;\n  gap: 18px;\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  color: #ffffff;\n  border: none;\n}\n\n.welcome-left, .welcome-right { flex: 1.1; }\n\n.welcome-title-row {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.welcome-title {\n  margin: 0;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.welcome-subtitle {\n  margin: 6px 0 8px;\n  font-size: 13px;\n  opacity: 0.95;\n}\n\n.welcome-meta {\n  font-size: 12px;\n  opacity: 0.95;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.meta-separator { opacity: 0.7; }\n\n.metric-grid {\n  display: grid;\n  grid-template-columns: repeat(4, minmax(0, 1fr));\n  gap: 10px;\n}\n\n.metric-item {\n  background: rgba(15, 23, 42, 0.16);\n  border-radius: 12px;\n  padding: 10px 12px;\n}\n\n.metric-label {\n  font-size: 12px;\n  opacity: 0.95;\n}\n\n.metric-value {\n  margin-top: 4px;\n  font-size: 20px;\n  font-weight: 600;\n}\n\n.metric-value.warning { color: #fee2e2; }\n\n.metric-unit { font-size: 12px; margin-left: 2px; }\n\n.metric-desc {\n  margin-top: 4px;\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.metric-progress { margin-top: 4px; }\n\n.middle-row {\n  display: flex;\n  gap: 14px;\n  align-items: stretch;\n}\n\n.trend-card { flex: 1.2; }\n.notice-card { flex: 1; }\n\n.card-header-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.card-title {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #111827;\n}\n\n.card-subtitle {\n  margin: 4px 0 0;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.trend-extra {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #4b5563;\n}\n\n.trend-list {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.trend-item {\n  padding: 6px 0;\n  border-bottom: 1px dashed #e5e7eb;\n}\n\n.trend-item:last-child { border-bottom: none; }\n\n.trend-item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.trend-item-title { font-size: 13px; color: #111827; }\n.trend-item-value { font-size: 13px; font-weight: 600; color: #111827; }\n.trend-progress { margin: 4px 0; }\n.trend-item-desc { font-size: 12px; color: #6b7280; }\n\n.notice-carousel { margin-top: 4px; }\n.notice-item { display: flex; flex-direction: column; justify-content: center; }\n\n.notice-tag-wrapper { display: flex; align-items: center; gap: 8px; }\n.notice-time { font-size: 12px; color: #9ca3af; }\n\n.notice-title { margin-top: 4px; font-size: 14px; font-weight: 600; color: #111827; }\n.notice-desc { margin-top: 2px; font-size: 12px; color: #4b5563; }\n\n.notice-footer {\n  margin-top: 8px;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.notice-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 999px;\n  background-color: #22c55e;\n}\n\n.todo-table { margin-top: 4px; }\n\n.todo-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.dashboard-row {\n  display: flex;\n  gap: 14px;\n  flex-wrap: wrap;\n}\n\n.dashboard-card { flex: 1; min-width: 280px; }\n\n/* timeline */\n.timeline-list { list-style: none; padding: 0; margin: 4px 0 0; }\n.timeline-item { padding: 10px 0; border-bottom: 1px dashed #e5e7eb; }\n.timeline-item:last-child { border-bottom: none; }\n\n.timeline-main { display: flex; justify-content: space-between; align-items: center; gap: 8px; }\n.timeline-text { font-size: 13px; color: #111827; }\n.timeline-tag { font-size: 12px; padding: 2px 8px; border-radius: 999px; }\n.tag-book { background-color: #eff6ff; color: #1d4ed8; }\n.tag-sign { background-color: #ecfdf3; color: #15803d; }\n.tag-cancel { background-color: #fef3c7; color: #b45309; }\n.timeline-time { margin-top: 4px; font-size: 12px; color: #6b7280; }\n\n/* quick actions */\n.quick-actions { display: flex; flex-wrap: wrap; gap: 8px; }\n.quick-tip { margin-top: 8px; font-size: 12px; color: #6b7280; }\n\n/* ============ Reservation/User shared styles ============ */\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.reservation-header-right,\n.user-header-right {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.auto-refresh {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #4b5563;\n}\n\n.filter-bar {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n\n.filter-item { min-width: 180px; }\n.filter-input { flex: 2; }\n.filter-select, .filter-date { flex: 1; }\n\n.filter-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.input-prefix-icon { font-size: 14px; }\n\n.reservation-stats {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  margin: 8px 0 12px;\n}\n\n.stat-card {\n  flex: 1;\n  min-width: 140px;\n  border-radius: 12px;\n  background-color: #f9fafb;\n  padding: 10px 12px;\n}\n\n.stat-label { font-size: 12px; color: #6b7280; }\n.stat-value { margin-top: 4px; font-size: 18px; font-weight: 600; color: #111827; }\n\n.reservation-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 4px 0 12px;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.toolbar-left {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.toolbar-right { font-size: 12px; color: #6b7280; }\n.toolbar-tip { font-size: 12px; color: #4b5563; }\n\n.reservation-table, .user-table { width: 100%; }\n\n.student-cell { display: flex; flex-direction: column; }\n.student-name { font-size: 13px; color: #111827; }\n.student-no { font-size: 12px; color: #6b7280; }\n\n.remark-text { font-size: 12px; color: #4b5563; }\n\n.action-buttons {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n.el-dropdown-link { font-size: 13px; color: #2563eb; cursor: pointer; }\n.disabled-text { font-size: 12px; color: #9ca3af; }\n\n.table-footer {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 12px;\n}\n\n/* user special */\n.user-name-cell { display: flex; flex-direction: column; }\n.user-name-main { font-size: 13px; color: #111827; }\n\n.user-role-tag {\n  margin-left: 4px;\n  padding: 1px 6px;\n  border-radius: 999px;\n  font-size: 11px;\n  background-color: #eff6ff;\n  color: #1d4ed8;\n}\n\n.user-role-tag.teacher { background-color: #ecfdf3; color: #15803d; }\n.user-role-tag.admin { background-color: #fef3c7; color: #b45309; }\n\n.user-extra { font-size: 12px; color: #6b7280; }\n\n.credit-score { font-size: 13px; font-weight: 600; color: #111827; }\n.credit-low { color: #b91c1c; }\n.credit-high { color: #15803d; }\n\n/* ============ Seat Manage styles ============ */\n.seat-manage {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.seat-top-card {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n}\n\n.seat-top-right {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.top-select { min-width: 140px; }\n\n.top-switch {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.top-switch-label {\n  font-size: 12px;\n  color: #4b5563;\n}\n\n.seat-layout {\n  display: flex;\n  gap: 14px;\n  align-items: flex-start;\n}\n\n.seat-left-card {\n  flex: 0 0 40%;\n  max-width: 420px;\n}\n\n.left-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.left-title { margin: 0; font-size: 15px; font-weight: 600; color: #111827; }\n.left-subtitle { margin: 4px 0 0; font-size: 12px; color: #6b7280; }\n\n.left-filter {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 10px;\n}\n\n.room-table { width: 100%; }\n\n.room-name { display: flex; flex-direction: column; }\n.room-name-main { font-size: 13px; color: #111827; }\n.room-name-sub { font-size: 12px; color: #6b7280; }\n\n.seat-right { flex: 1; }\n.seat-right-card { width: 100%; }\n\n.right-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n  gap: 16px;\n}\n\n.right-title { margin: 0; font-size: 16px; font-weight: 600; color: #111827; }\n.right-subtitle { margin: 4px 0 0; font-size: 12px; color: #6b7280; }\n\n.right-header-actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.seat-stats {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 12px;\n}\n\n.seat-tabs { margin-top: 4px; }\n\n.layout-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 6px 0 8px;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.layout-toolbar-left {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.layout-toolbar-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.seat-legend {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  margin-bottom: 6px;\n  flex-wrap: wrap;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 12px;\n  color: #4b5563;\n}\n\n.legend-box {\n  width: 14px;\n  height: 14px;\n  border-radius: 4px;\n}\n\n.legend-free { background-color: #e0f2fe; }\n.legend-occupied { background-color: #fee2e2; }\n.legend-disabled { background-color: #e5e7eb; }\n.legend-selected { background-color: #ddd6fe; }\n\n.seat-grid {\n  width: 100%;\n  border-radius: 12px;\n  background: linear-gradient(135deg, #f3f4f6, #f9fafb);\n  padding: 12px;\n  box-sizing: border-box;\n}\n\n.seat-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 6px;\n}\n\n.seat-row:last-child { margin-bottom: 0; }\n\n.seat-row-label {\n  width: 70px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.seat-row-seats {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(8, minmax(0, 1fr));\n  gap: 6px;\n}\n\n.seat-cell {\n  height: 26px;\n  border-radius: 6px;\n  box-sizing: border-box;\n  cursor: pointer;\n  position: relative;\n  transition: transform 0.1s ease, box-shadow 0.1s ease;\n}\n\n.seat-cell:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(15, 23, 42, 0.12);\n}\n\n.seat-status-free { background-color: #e0f2fe; border: 1px solid #bfdbfe; }\n.seat-status-occupied { background-color: #fee2e2; border: 1px solid #fecaca; }\n.seat-status-disabled { background-color: #e5e7eb; border: 1px solid #d1d5db; }\n\n.seat-selected { box-shadow: 0 0 0 2px #a855f7; }\n\n.seat-no {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 11px;\n  color: #0f172a;\n}\n\n.rule-form { margin-top: 6px; }\n\n.item-desc {\n  margin-left: 6px;\n  font-size: 12px;\n  color: #6b7280;\n}\n\n.inline-group {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n}\n\n/* simple page */\n.simple-tip { margin-top: 12px; font-size: 13px; color: #4b5563; }\n\n/* responsive */\n@media (max-width: 1024px) {\n  .welcome-card { flex-direction: column; }\n  .metric-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }\n  .middle-row { flex-direction: column; }\n}\n\n@media (max-width: 980px) {\n  .seat-layout { flex-direction: column; }\n  .seat-left-card { flex: 1; max-width: 100%; }\n}\n\n@media (max-width: 900px) {\n  .card-header { flex-direction: column; align-items: flex-start; gap: 8px; }\n  .reservation-header-right, .user-header-right { width: 100%; justify-content: flex-start; }\n  .filter-bar { flex-direction: column; }\n  .filter-item, .filter-input, .filter-select, .filter-date { width: 100%; }\n  .reservation-toolbar { flex-direction: column; align-items: flex-start; }\n  .table-footer { justify-content: center; }\n}\n\n@media (max-width: 780px) {\n  .seat-top-card { flex-direction: column; align-items: flex-start; }\n  .seat-top-right { flex-wrap: wrap; }\n  .right-header { flex-direction: column; align-items: flex-start; }\n  .layout-toolbar { flex-direction: column; align-items: flex-start; }\n}\n\n.dashboard-card-full { flex: 1 1 100%; }\n\n.activity-two-col {\n  display: flex;\n  align-items: stretch;\n  margin-top: 4px;\n}\n\n.activity-col { flex: 1; }\n\n.activity-divider {\n  width: 1px;\n  background-color: #e5e7eb;\n  margin: 0 14px;\n}\n\n@media (max-width: 960px) {\n  .activity-two-col { flex-direction: column; }\n  .activity-divider { display: none; }\n}\n\n\n/* -------------------- admin notice (announcement) -------------------- */\n.admin-notice-head-actions { display: flex; gap: 10px; align-items: center; }\n\n.admin-notice-loading,\n.admin-notice-empty {\n  padding: 14px 10px;\n  color: #6b7280;\n  font-size: 13px;\n}\n\n.admin-notice-home-list { list-style: none; padding: 0; margin: 8px 0 0; display: flex; flex-direction: column; gap: 10px; }\n.admin-notice-home-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 12px;\n  border: 1px solid #eef2f7;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease;\n  background: #fff;\n}\n.admin-notice-home-item:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06); background: #fbfdff; }\n\n.admin-notice-badges { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; min-width: 240px; }\n.admin-notice-pill {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 3px 10px;\n  border-radius: 999px;\n  font-size: 12px;\n  border: 1px solid #e5e7eb;\n  color: #374151;\n  background: #ffffff;\n}\n.admin-notice-pill.admin-top { border-color: #fde68a; background: #fffbeb; color: #92400e; }\n.admin-notice-icon { font-size: 13px; }\n\n.admin-notice-pill.type-RULE { border-color: #dbeafe; background: #eff6ff; color: #1d4ed8; }\n.admin-notice-pill.type-ADJUSTMENT { border-color: #e0f2fe; background: #f0f9ff; color: #0369a1; }\n.admin-notice-pill.type-EMERGENCY { border-color: #fee2e2; background: #fff1f2; color: #b91c1c; }\n.admin-notice-pill.type-MAINTENANCE { border-color: #ede9fe; background: #f5f3ff; color: #6d28d9; }\n.admin-notice-pill.type-EXAM { border-color: #dcfce7; background: #f0fdf4; color: #15803d; }\n.admin-notice-pill.type-OTHER { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\n\n.admin-notice-pill.level-IMPORTANT { border-color: #fecaca; background: #fff1f2; color: #b91c1c; }\n.admin-notice-pill.level-WARNING { border-color: #fde68a; background: #fffbeb; color: #92400e; }\n.admin-notice-pill.level-INFO { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\n\n.admin-notice-main { flex: 1; min-width: 0; }\n.admin-notice-title { font-size: 14px; font-weight: 700; color: #111827; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\n.admin-notice-snippet { margin-top: 4px; font-size: 12px; color: #6b7280; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\n.admin-notice-meta { margin-top: 6px; font-size: 12px; color: #9ca3af; display: flex; align-items: center; gap: 8px; }\n.admin-dot { opacity: .8; }\n.admin-notice-right { color: #9ca3af; font-size: 22px; padding-left: 8px; }\n\n.admin-notice-toolbar { display: flex; justify-content: space-between; gap: 14px; margin-bottom: 12px; flex-wrap: wrap; }\n.admin-notice-filters { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }\n.f-item { display: inline-flex; align-items: center; gap: 8px; }\n.f-label { color: #6b7280; font-size: 12px; }\n.admin-notice-toolbar-right { display: flex; align-items: center; gap: 12px; }\n.admin-notice-count { font-size: 12px; color: #6b7280; }\n\n.admin-notice-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }\n.admin-notice-item {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 12px;\n  border: 1px solid #eef2f7;\n  border-radius: 12px;\n  cursor: pointer;\n  background: #fff;\n}\n.admin-notice-item:hover { background: #fbfdff; }\n\n.admin-notice-actions { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }\n\n.admin-notice-pagination { margin-top: 14px; display: flex; justify-content: flex-end; }\n\n.admin-notice-detail-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\n.admin-notice-detail-right { display: flex; gap: 10px; }\n\n.admin-notice-detail-card {\n  border: 1px solid #eef2f7;\n  border-radius: 14px;\n  padding: 14px 14px;\n  background: #fff;\n}\n\n.d-title { font-size: 18px; font-weight: 800; color: #111827; line-height: 1.35; }\n.d-tags { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }\n.d-tag {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 4px 10px;\n  border-radius: 999px;\n  font-size: 12px;\n  border: 1px solid #e5e7eb;\n  color: #374151;\n  background: #fff;\n}\n.d-tag.top { border-color: #fde68a; background: #fffbeb; color: #92400e; }\n.d-tag.type-RULE { border-color: #dbeafe; background: #eff6ff; color: #1d4ed8; }\n.d-tag.type-ADJUSTMENT { border-color: #e0f2fe; background: #f0f9ff; color: #0369a1; }\n.d-tag.type-EMERGENCY { border-color: #fee2e2; background: #fff1f2; color: #b91c1c; }\n.d-tag.type-MAINTENANCE { border-color: #ede9fe; background: #f5f3ff; color: #6d28d9; }\n.d-tag.type-EXAM { border-color: #dcfce7; background: #f0fdf4; color: #15803d; }\n.d-tag.type-OTHER { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\n.d-tag.level-IMPORTANT { border-color: #fecaca; background: #fff1f2; color: #b91c1c; }\n.d-tag.level-WARNING { border-color: #fde68a; background: #fffbeb; color: #92400e; }\n.d-tag.level-INFO { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\n\n.d-info { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px 16px; }\n.d-info-item { display: flex; gap: 10px; font-size: 13px; }\n.d-info-item .k { color: #6b7280; min-width: 64px; }\n.d-info-item .v { color: #111827; font-weight: 600; }\n\n.d-content { white-space: pre-wrap; font-size: 14px; line-height: 1.7; color: #111827; }\n\n.admin-notice-form :deep(.el-form-item) { margin-bottom: 14px; }\n\n@media (max-width: 980px) {\n  .admin-notice-badges { min-width: 200px; }\n  .d-info { grid-template-columns: 1fr; }\n}\n\n\n\n/* ====== Admin Complaints ====== */\n.complaints-page{display:flex;flex-direction:column;gap:14px;}\n.complaints-head{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;}\n.complaints-head-left .page-title{margin:0;}\n.complaints-head-left .page-subtitle{margin-top:6px;}\n\n.complaints-head-right{display:flex;align-items:center;gap:12px;}\n.fb-stats{display:flex;gap:10px;}\n.fb-stat{min-width:72px;border:1px solid #eef2f7;background:#fff;border-radius:12px;padding:8px 10px;text-align:center;}\n.fb-stat-num{font-size:18px;font-weight:800;color:#111827;line-height:1;}\n.fb-stat-label{font-size:12px;color:#6b7280;margin-top:6px;}\n\n.complaints-body{padding-top:14px;}\n.complaints-toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;}\n.tool-left{display:flex;align-items:center;gap:10px;flex-wrap:wrap;}\n.tool-right{display:flex;align-items:center;gap:10px;}\n\n.fb-admin-table :deep(.el-table__cell){vertical-align:top;}\n.fb-user-name{font-weight:700;color:#111827;line-height:1.2;}\n.fb-user-sub{font-size:12px;color:#6b7280;margin-top:3px;}\n.fb-rel-main{font-weight:700;color:#111827;line-height:1.2;}\n.fb-rel-sub{font-size:12px;color:#6b7280;margin-top:3px;}\n.fb-muted{color:#9ca3af;}\n.fb-row-actions{display:flex;gap:8px;justify-content:flex-end;}\n\n.fb-admin-pagination{margin-top:12px;display:flex;justify-content:flex-end;}\n\n.fb-admin-drawer :deep(.el-drawer__body){padding:16px;}\n.fb-drawer{display:flex;flex-direction:column;gap:12px;}\n.fb-drawer-head{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;}\n.fb-drawer-title{font-size:16px;font-weight:900;color:#111827;}\n.fb-drawer-sub{font-size:12px;color:#6b7280;margin-top:4px;}\n\n.fb-drawer-card{border:1px solid #eef2f7;border-radius:14px;background:#fff;padding:12px;}\n.fb-kv{display:grid;grid-template-columns:76px 1fr;gap:10px;padding:6px 0;border-bottom:1px dashed #eef2f7;}\n.fb-kv:last-child{border-bottom:none;}\n.fb-kv .k{font-size:12px;color:#6b7280;}\n.fb-kv .v{font-size:13px;color:#111827;font-weight:600;}\n\n.fb-content{margin-top:10px;}\n.fb-content-title{font-size:12px;color:#6b7280;margin-bottom:6px;}\n.fb-content-body{white-space:pre-wrap;font-size:13px;line-height:1.7;color:#111827;}\n\n.fb-form-title{font-size:14px;font-weight:900;color:#111827;margin-bottom:8px;}\n.fb-handle-actions{display:flex;gap:10px;justify-content:flex-end;}\n\n@media (max-width: 980px){\n  .complaints-head{flex-direction:column;align-items:stretch;}\n  .complaints-head-right{justify-content:space-between;}\n  .fb-stats{flex:1;justify-content:space-between;}\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}