{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  name: 'AdminHome',\n  props: {\n    currentPage: {\n      type: String,\n      required: true\n    }\n  },\n  emits: ['change-page'],\n  data() {\n    return {\n      /* timers */\n      dashboardTimer: null,\n      reservationTimer: null,\n      /* Dashboard */\n      autoRefresh: false,\n      metrics: {\n        todayReservations: 120,\n        todayTrend: 12,\n        todaySignRate: 82,\n        openRooms: 12,\n        totalSeats: 680,\n        pendingItems: 5\n      },\n      trendItems: [{\n        key: 'weekReservation',\n        title: 'æœ¬å‘¨é¢„çº¦å®Œæˆç‡',\n        value: '86%',\n        percent: 86,\n        status: 'success',\n        desc: 'é¢„çº¦å®Œæˆç‡ä¿æŒåœ¨è¾ƒé«˜æ°´å¹³ï¼Œå¯ç»§ç»­è§‚å¯Ÿå‘¨æœ«æ³¢åŠ¨ã€‚'\n      }, {\n        key: 'weekCheckin',\n        title: 'æœ¬å‘¨å¹³å‡ç­¾åˆ°ç‡',\n        value: '79%',\n        percent: 79,\n        status: 'success',\n        desc: 'å»ºè®®é’ˆå¯¹ä½å¹´çº§åŒå­¦å¼€å±•ä¸€æ¬¡åˆ°é¦†æé†’æ´»åŠ¨ã€‚'\n      }, {\n        key: 'weekViolation',\n        title: 'æœ¬å‘¨è¿çº¦ç‡',\n        value: '6%',\n        percent: 6,\n        status: 'warning',\n        desc: 'æœ‰ 8 ä½åŒå­¦å‡ºç°å¤šæ¬¡è¿çº¦ï¼Œå¯ç»“åˆä¿¡ç”¨åˆ†è§„åˆ™é‡ç‚¹å…³æ³¨ã€‚'\n      }],\n      /* Admin Announcement */\n      adminNoticeHomeLoading: false,\n      adminNoticeListLoading: false,\n      adminHomeNotices: [],\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\n      noticeTypeOptions: [{\n        label: 'è§„åˆ™',\n        value: 'RULE'\n      }, {\n        label: 'è°ƒæ•´',\n        value: 'ADJUSTMENT'\n      }, {\n        label: 'çªå‘',\n        value: 'EMERGENCY'\n      }, {\n        label: 'ç»´æŠ¤',\n        value: 'MAINTENANCE'\n      }, {\n        label: 'è€ƒè¯•',\n        value: 'EXAM'\n      }, {\n        label: 'å…¶ä»–',\n        value: 'OTHER'\n      }],\n      noticeLevelOptions: [{\n        label: 'é‡è¦',\n        value: 'IMPORTANT'\n      }, {\n        label: 'æé†’',\n        value: 'WARNING'\n      }, {\n        label: 'é€šçŸ¥',\n        value: 'INFO'\n      }],\n      noticeTargetOptions: [{\n        label: 'å…¨ä½“ç®¡ç†å‘˜',\n        value: 0\n      }, {\n        label: 'å…¨ä½“å­¦ç”Ÿ',\n        value: 1\n      }, {\n        label: 'å…¨éƒ¨ç”¨æˆ·',\n        value: 2\n      }],\n      adminNoticeAllVisible: false,\n      adminNoticeDetailVisible: false,\n      adminNoticeDetail: null,\n      adminNoticeDetailFrom: 'home',\n      adminNoticeTypeFilter: '',\n      adminNoticeLevelFilter: '',\n      adminNoticeTargetFilter: null,\n      adminNoticeKeyword: '',\n      adminNoticeIncludeExpired: false,\n      adminNoticePageNum: 1,\n      adminNoticePageSize: 6,\n      adminNoticeTotalCount: 0,\n      adminNoticePageList: [],\n      adminNoticeEditVisible: false,\n      adminNoticeEditMode: 'create',\n      // create | edit\n      adminNoticeSubmitting: false,\n      adminNoticeForm: {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2,\n        // 0=ç®¡ç†å‘˜ 1=å­¦ç”Ÿ 2=å…¨éƒ¨ç”¨æˆ·\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      },\n      /* Admin Feedbackï¼ˆæŠ•è¯‰å¤„ç†ï¼‰ */\n      fbAdminLoading: false,\n      fbAdminList: [],\n      fbAdminPageNum: 1,\n      fbAdminPageSize: 8,\n      fbAdminTotal: 0,\n      fbAdminStatusFilter: '',\n      fbAdminCategoryFilter: '',\n      fbAdminKeyword: '',\n      fbAdminOnlyPending: true,\n      fbAdminStats: {\n        pending: 0,\n        processing: 0,\n        resolved: 0\n      },\n      fbAdminDrawerVisible: false,\n      fbAdminDetail: null,\n      fbAdminSubmitting: false,\n      fbAdminHandleForm: {\n        status: 'processing',\n        reply: '',\n        cancelReservation: false\n      },\n      todos: [{\n        id: 1,\n        type: 'complaint',\n        content: 'å¤„ç† 2 æ¡å…³äºè‡ªä¹ å®¤å™ªéŸ³çš„æŠ•è¯‰è®°å½•ã€‚',\n        from: 'æŠ•è¯‰å¤„ç†',\n        time: '2025-12-10 09:20',\n        priority: 'high'\n      }, {\n        id: 2,\n        type: 'violation',\n        content: 'æ£€æŸ¥æœ¬å‘¨è¿ç»­è¿çº¦è¶…è¿‡ 3 æ¬¡çš„å­¦ç”Ÿåå•ã€‚',\n        from: 'æ—¥å¿—ç»Ÿè®¡',\n        time: '2025-12-10 08:50',\n        priority: 'medium'\n      }, {\n        id: 3,\n        type: 'rule',\n        content: 'ç¡®è®¤æœŸæœ«è€ƒè¯•å‘¨è‡ªä¹ å®¤å¼€æ”¾æ—¶é—´ä¸é¢„çº¦ä¸Šé™ã€‚',\n        from: 'åº§ä½ç®¡ç†',\n        time: '2025-12-09 16:10',\n        priority: 'medium'\n      }, {\n        id: 4,\n        type: 'system',\n        content: 'å¯¼å‡ºæœ¬æœˆé¢„çº¦ä¸ç­¾åˆ°æŠ¥è¡¨å­˜æ¡£ã€‚',\n        from: 'æ—¥å¿—ç»Ÿè®¡',\n        time: '2025-12-09 10:25',\n        priority: 'low'\n      }],\n      latestActivities: [{\n        id: 1,\n        text: 'å¼ ä¸‰ é¢„çº¦äº† å›¾ä¹¦é¦† 401 Â· 10:00-12:00',\n        type: 'book',\n        typeLabel: 'æ–°é¢„çº¦',\n        time: '09:15'\n      }, {\n        id: 2,\n        text: 'æå›› åœ¨ æœ¬éƒ¨ Â· 3 æ¥¼ 301 å®Œæˆç­¾åˆ°',\n        type: 'sign',\n        typeLabel: 'å·²ç­¾åˆ°',\n        time: '08:05'\n      }, {\n        id: 3,\n        text: 'ç‹äº” å–æ¶ˆäº† æ˜æ—¥çš„é¢„çº¦ï¼ˆåŸå› ï¼šè¯¾ç¨‹è°ƒæ•´ï¼‰',\n        type: 'cancel',\n        typeLabel: 'å·²å–æ¶ˆ',\n        time: '07:48'\n      }],\n      /* Reservation Manage */\n      reservationFilters: {\n        keyword: '',\n        roomId: null,\n        date: '',\n        status: ''\n      },\n      reservationRoomOptions: [],\n      statusOptions: [{\n        label: 'å·²é¢„çº¦',\n        value: 'reserved'\n      }, {\n        label: 'å·²ç­¾åˆ°',\n        value: 'checked_in'\n      }, {\n        label: 'å·²å–æ¶ˆ',\n        value: 'cancelled'\n      }, {\n        label: 'è¿çº¦',\n        value: 'violation'\n      }],\n      reservationLoading: false,\n      reservations: [],\n      reservationTotal: 0,\n      reservationStats: {\n        total: 0,\n        booked: 0,\n        signed: 0,\n        canceled: 0,\n        violation: 0\n      },\n      reservationSelection: [],\n      reservationPage: 1,\n      reservationPageSize: 8,\n      /* User Manage */\n\n      /* User Manage */\n      userLoading: false,\n      userFilters: {\n        keyword: '',\n        roleId: '',\n        status: '',\n        onlyAbnormal: false\n      },\n      userRoleOptions: [{\n        label: 'ç”¨æˆ·',\n        value: 1\n      }, {\n        label: 'ç®¡ç†å‘˜',\n        value: 0\n      }],\n      userStatusOptions: [{\n        label: 'æ­£å¸¸',\n        value: 0\n      }, {\n        label: 'é¢„è­¦',\n        value: 1\n      }, {\n        label: 'é»‘åå•',\n        value: 2\n      }],\n      users: [],\n      userTotal: 0,\n      userStats: {\n        total: 0,\n        normal: 0,\n        warning: 0,\n        blacklist: 0\n      },\n      userSelection: [],\n      userPage: 1,\n      userPageSize: 8,\n      userDetailVisible: false,\n      userDetailLoading: false,\n      userDetail: {\n        user: null,\n        violationCount: 0,\n        recentViolations: []\n      },\n      createAdminVisible: false,\n      createAdminLoading: false,\n      createAdminForm: {\n        account: '',\n        name: '',\n        password: ''\n      },\n      createAdminRules: {\n        account: [{\n          required: true,\n          message: 'è¯·è¾“å…¥è´¦å·',\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: 'è¯·è¾“å…¥å§“å',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: 'è¯·è¾“å…¥å¯†ç ',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: 'å¯†ç è‡³å°‘ 6 ä½',\n          trigger: 'blur'\n        }]\n      },\n      /* Seat Manage */\n      seatLoading: false,\n      currentCampus: '',\n      campusOptions: [],\n      currentBuild: '',\n      buildOptions: [],\n      onlyShowOpen: true,\n      roomKeyword: '',\n      roomCapacityFilter: 'all',\n      rooms: [],\n      selectedRoomId: null,\n      activeTab: 'layout',\n      showSeatNo: true,\n      showDemoOccupied: true,\n      seatGrid: [],\n      seatSelectedIds: new Set(),\n      createRoomVisible: false,\n      createRoomLoading: false,\n      createRoomBuildingOptions: [],\n      createRoomForm: {\n        campus: '',\n        building: '',\n        roomName: '',\n        totalSeats: 80,\n        openSeats: 80\n      },\n      createRoomRules: {\n        campus: [{\n          required: true,\n          message: 'è¯·é€‰æ‹©æ ¡åŒº',\n          trigger: 'change'\n        }],\n        building: [{\n          required: true,\n          message: 'è¯·é€‰æ‹©æ¥¼æ ‹',\n          trigger: 'change'\n        }],\n        roomName: [{\n          required: true,\n          message: 'è¯·è¾“å…¥æˆ¿é—´å·',\n          trigger: 'blur'\n        }],\n        totalSeats: [{\n          required: true,\n          message: 'è¯·è¾“å…¥åº§ä½æ•°',\n          trigger: 'change'\n        }],\n        openSeats: [{\n          required: true,\n          message: 'è¯·è¾“å…¥å¼€æ”¾åº§ä½æ•°',\n          trigger: 'change'\n        }]\n      },\n      seatRule: {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      }\n    };\n  },\n  computed: {\n    todayText() {\n      const d = new Date();\n      const y = d.getFullYear();\n      const m = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${y}-${m}-${day}`;\n    },\n    /* seat computed */\n    filteredRooms() {\n      return (this.rooms || []).filter(room => {\n        let ok = true;\n        if (this.onlyShowOpen) ok = ok && room.status === 'open';\n        if (this.roomKeyword && this.roomKeyword.trim()) {\n          const k = this.roomKeyword.trim();\n          ok = ok && (String(room.name || '').includes(k) || String(room.roomName || '').includes(k) || String(room.building || '').includes(k) || String(room.campus || '').includes(k) || String(room.floor || '').includes(k));\n        }\n        if (this.roomCapacityFilter === 'small') ok = ok && Number(room.capacity) <= 40;\n        if (this.roomCapacityFilter === 'medium') ok = ok && Number(room.capacity) > 40 && Number(room.capacity) < 80;\n        if (this.roomCapacityFilter === 'large') ok = ok && Number(room.capacity) >= 80;\n        return ok;\n      });\n    },\n    selectedRoom() {\n      const room = (this.rooms || []).find(r => r.id === this.selectedRoomId);\n      return room || null;\n    },\n    seatStats() {\n      const stats = {\n        free: 0,\n        occupied: 0,\n        disabled: 0,\n        blockedArea: 0\n      };\n      (this.seatGrid || []).forEach(row => {\n        (row.seats || []).forEach(seat => {\n          if (seat.status === 'free') stats.free++;else if (seat.status === 'occupied') stats.occupied++;else if (seat.status === 'disabled') stats.disabled++;\n        });\n      });\n      return stats;\n    },\n    latestActivitiesLeft() {\n      const mid = Math.ceil(this.latestActivities.length / 2);\n      return this.latestActivities.slice(0, mid);\n    },\n    latestActivitiesRight() {\n      const mid = Math.ceil(this.latestActivities.length / 2);\n      return this.latestActivities.slice(mid);\n    },\n    lastLoginIp() {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n      const u = s ? JSON.parse(s) : {};\n      return u.lastLoginIp || 'æœªçŸ¥';\n    },\n    // é¢„çº¦ç®¡ç†ï¼šæ‰¹é‡æ“ä½œå¯ç”¨æ€§ï¼ˆä¸¥æ ¼éµå®ˆä¸šåŠ¡è§„åˆ™ï¼‰\n    canBatchCheckin() {\n      return (this.reservationSelection || []).length > 0 && (this.reservationSelection || []).every(r => r && (r.status === 'no_show' || r.status === 'late'));\n    },\n    canBatchCancel() {\n      return (this.reservationSelection || []).length > 0 && (this.reservationSelection || []).every(r => r && r.status === 'reserved');\n    }\n  },\n  watch: {\n    currentPage(val) {\n      if (val !== 'admin-home') this.stopDashboardTimer();else if (this.autoRefresh) this.startDashboardTimer();\n      if (val === 'admin-home') this.loadAdminNoticeHome();\n      if (val === 'admin-home') this.loadAdminDashboardHome();\n      if (val === 'admin-reservations') {\n        this.loadReservationRoomOptions();\n        this.loadAdminReservations(true);\n      }\n      if (val === 'admin-users') {\n        this.loadAdminUsers(true);\n      }\n      if (val === 'admin-complaints') {\n        this.loadAdminFeedback(true);\n        this.loadAdminFeedbackStats();\n      }\n      if (val === 'admin-seats') {\n        this.initSeatData();\n      }\n    },\n    autoRefresh(val) {\n      if (val && this.currentPage === 'admin-home') this.startDashboardTimer();else this.stopDashboardTimer();\n    }\n  },\n  created() {\n    this.initSeatData();\n    this.loadAdminNoticeHome();\n    if (this.currentPage === 'admin-home') this.loadAdminDashboardHome();\n    if (this.currentPage === 'admin-reservations') {\n      this.loadReservationRoomOptions();\n      this.loadAdminReservations(true);\n    }\n    if (this.currentPage === 'admin-users') {\n      this.loadAdminUsers(true);\n    }\n  },\n  beforeUnmount() {\n    this.stopDashboardTimer();\n  },\n  methods: {\n    emitChange(page) {\n      this.$emit('change-page', page);\n    },\n    /* ---------- dashboard timers ---------- */\n    startDashboardTimer() {\n      this.stopDashboardTimer();\n      this.dashboardTimer = setInterval(() => {\n        this.refreshDashboardMetrics();\n      }, 8000);\n    },\n    stopDashboardTimer() {\n      if (this.dashboardTimer) {\n        clearInterval(this.dashboardTimer);\n        this.dashboardTimer = null;\n      }\n    },\n    refreshDashboardMetrics() {\n      // æ¥å…¥åç«¯ï¼šå®šæ—¶åˆ·æ–°ç®¡ç†å‘˜é¦–é¡µçœ‹æ¿æ•°æ®\n      this.loadAdminDashboardHome(true);\n    },\n    async loadAdminDashboardHome(silent = false) {\n      try {\n        const res = await this.$axios.get('/dashboard/admin/home', {\n          params: {\n            recentLimit: 6\n          }\n        });\n        if (res && Number(res.code) === 200 && res.data) {\n          const d = res.data || {};\n          const m = d.metrics || {};\n\n          // é¡¶éƒ¨æ¦‚è§ˆï¼ˆä¸‰é¡¹æ¥åç«¯ï¼šä»Šæ—¥é¢„çº¦æ€»æ•° / ä»Šæ—¥ç­¾åˆ°ç‡ / å½“å‰å¼€æ”¾è‡ªä¹ å®¤ï¼‰\n          this.metrics.todayReservations = Number(m.todayReservations ?? 0);\n          this.metrics.todayTrend = Number(m.todayTrend ?? 0);\n          this.metrics.todaySignRate = Number(m.todaySignRate ?? 0);\n          this.metrics.openRooms = Number(m.openRooms ?? 0);\n          this.metrics.totalSeats = Number(m.totalSeats ?? 0);\n\n          // æœ¬å‘¨è¿è¡Œæ¦‚è§ˆï¼ˆä¸‰é¡¹ + è¿›åº¦æ¡ï¼‰\n          const w = d.weekly || {};\n          const weekReservation = Number(w.weekReservationRate ?? 0);\n          const weekCheckin = Number(w.weekAvgCheckinRate ?? 0);\n          const weekViolation = Number(w.weekViolationRate ?? 0);\n          const setTrend = (key, percent) => {\n            const item = this.trendItems.find(x => x.key === key);\n            if (!item) return;\n            const p = Math.max(0, Math.min(100, Number(percent ?? 0)));\n            item.percent = p;\n            item.value = `${p}%`;\n\n            // statusï¼šè¿çº¦ç‡é«˜ä¸€äº›å°±ç»™ warningï¼Œå…¶ä½™é»˜è®¤ success\n            if (key === 'weekViolation') {\n              item.status = p >= 10 ? 'exception' : p >= 5 ? 'warning' : 'success';\n            } else {\n              item.status = p >= 60 ? 'success' : p >= 40 ? 'warning' : 'exception';\n            }\n          };\n          setTrend('weekReservation', weekReservation);\n          setTrend('weekCheckin', weekCheckin);\n          setTrend('weekViolation', weekViolation);\n\n          // æœ€è¿‘é¢„çº¦åŠ¨æ€\n          const acts = Array.isArray(d.latestActivities) ? d.latestActivities : [];\n          this.latestActivities = acts.map(it => ({\n            id: it.id,\n            text: it.text,\n            type: it.type,\n            typeLabel: it.typeLabel,\n            time: it.time\n          }));\n        }\n      } catch (e) {\n        if (!silent) ElMessage.error('ç®¡ç†å‘˜é¦–é¡µçœ‹æ¿æ•°æ®åŠ è½½å¤±è´¥');\n        // silent æ¨¡å¼åªåœ¨æ§åˆ¶å°è®°å½•\n        console.error('loadAdminDashboardHome failed:', e);\n      }\n    },\n    /* ---------- admin announcement ---------- */\n    noticeTypeText(t) {\n      if (t === 'RULE') return 'è§„åˆ™';\n      if (t === 'ADJUSTMENT') return 'è°ƒæ•´';\n      if (t === 'EMERGENCY') return 'çªå‘';\n      if (t === 'MAINTENANCE') return 'ç»´æŠ¤';\n      if (t === 'EXAM') return 'è€ƒè¯•';\n      return 'å…¶ä»–';\n    },\n    noticeTypeIcon(t) {\n      if (t === 'RULE') return 'ğŸ“Œ';\n      if (t === 'ADJUSTMENT') return 'ğŸ§­';\n      if (t === 'EMERGENCY') return 'ğŸš¨';\n      if (t === 'MAINTENANCE') return 'ğŸ§°';\n      if (t === 'EXAM') return 'ğŸ“';\n      return 'ğŸ“£';\n    },\n    noticeLevelText(l) {\n      if (l === 'IMPORTANT') return 'é‡è¦';\n      if (l === 'WARNING') return 'æé†’';\n      return 'é€šçŸ¥';\n    },\n    formatNoticeTime(timeStr, withTime) {\n      if (!timeStr) return 'â€”';\n      const d = new Date(timeStr);\n      if (Number.isNaN(d.getTime())) return String(timeStr);\n      const pad = n => String(n).padStart(2, '0');\n      const y = d.getFullYear();\n      const m = pad(d.getMonth() + 1);\n      const day = pad(d.getDate());\n      if (!withTime) return `${y}-${m}-${day}`;\n      const hh = pad(d.getHours());\n      const mm = pad(d.getMinutes());\n      return `${y}-${m}-${day} ${hh}:${mm}`;\n    },\n    makeNoticeSummary(content, maxLen = 42) {\n      if (!content) return '';\n      const s = String(content).replace(/\\s+/g, ' ').trim();\n      if (!s) return '';\n      return s.length > maxLen ? s.slice(0, maxLen) + 'â€¦' : s;\n    },\n    normalizeNoticeItem(item) {\n      const it = item || {};\n      return {\n        ...it,\n        summary: it.summary || this.makeNoticeSummary(it.content)\n      };\n    },\n    getCurrentUser() {\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n      try {\n        return s ? JSON.parse(s) : {};\n      } catch (e) {\n        return {};\n      }\n    },\n    getCurrentUserId() {\n      const u = this.getCurrentUser();\n      const id = u && (u.id ?? u.userId);\n      const n = Number(id);\n      return Number.isFinite(n) ? n : null;\n    },\n    async loadAdminNoticeHome(silent = false) {\n      if (!silent) this.adminNoticeHomeLoading = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: {\n            pageNum: 1,\n            pageSize: 3,\n            includeExpired: 0\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : [];\n          this.adminHomeNotices = list.map(this.normalizeNoticeItem);\n        } else {\n          this.adminHomeNotices = [];\n        }\n      } catch (e) {\n        this.adminHomeNotices = [];\n      } finally {\n        if (!silent) this.adminNoticeHomeLoading = false;\n      }\n    },\n    openAdminNoticeAll() {\n      this.adminNoticeAllVisible = true;\n      this.reloadAdminNoticePage(true);\n    },\n    async reloadAdminNoticePage(resetPage) {\n      if (resetPage) this.adminNoticePageNum = 1;\n      this.adminNoticeListLoading = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/page', {\n          params: {\n            pageNum: this.adminNoticePageNum,\n            pageSize: this.adminNoticePageSize,\n            type: this.adminNoticeTypeFilter || undefined,\n            level: this.adminNoticeLevelFilter || undefined,\n            targetRole: this.adminNoticeTargetFilter === null || this.adminNoticeTargetFilter === '' || this.adminNoticeTargetFilter === undefined ? undefined : Number(this.adminNoticeTargetFilter),\n            keyword: this.adminNoticeKeyword || undefined,\n            includeExpired: this.adminNoticeIncludeExpired ? 1 : 0\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          const list = Array.isArray(res.data) ? res.data : [];\n          this.adminNoticePageList = list.map(this.normalizeNoticeItem);\n          this.adminNoticeTotalCount = Number(res.total || 0);\n        } else {\n          this.adminNoticePageList = [];\n          this.adminNoticeTotalCount = 0;\n          ElMessage.error(res?.msg || 'åŠ è½½å…¬å‘Šå¤±è´¥');\n        }\n      } catch (e) {\n        this.adminNoticePageList = [];\n        this.adminNoticeTotalCount = 0;\n        ElMessage.error('åŠ è½½å…¬å‘Šå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeListLoading = false;\n      }\n    },\n    onAdminNoticePageChange(p) {\n      this.adminNoticePageNum = p;\n      this.reloadAdminNoticePage(false);\n    },\n    resetAdminNoticeFilters() {\n      this.adminNoticeTypeFilter = '';\n      this.adminNoticeLevelFilter = '';\n      this.adminNoticeTargetFilter = null;\n      this.adminNoticeKeyword = '';\n      this.adminNoticeIncludeExpired = false;\n      this.reloadAdminNoticePage(true);\n    },\n    async openAdminNoticeDetail(item, from) {\n      this.adminNoticeDetailFrom = from || 'home';\n      // å…ˆå±•ç¤ºï¼ˆæ›´ä¸æ»‘ï¼‰ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°è¯¦æƒ…\n      this.adminNoticeDetail = this.normalizeNoticeItem(item);\n      this.adminNoticeDetailVisible = true;\n      try {\n        const res = await this.$axios.get('/announcement/admin/detail', {\n          params: {\n            id: item.id\n          }\n        });\n        if (res && Number(res.code) === 200 && res.data) {\n          this.adminNoticeDetail = this.normalizeNoticeItem(res.data);\n        }\n      } catch (e) {\n        // é™é»˜ï¼šå·²æœ‰åˆ—è¡¨æ•°æ®å¯å±•ç¤º\n      }\n    },\n    backToAdminNoticeList() {\n      this.adminNoticeDetailVisible = false;\n      if (this.adminNoticeDetailFrom === 'list') {\n        this.adminNoticeAllVisible = true;\n      }\n    },\n    openAdminNoticeCreate() {\n      this.adminNoticeEditMode = 'create';\n      this.adminNoticeForm = {\n        id: null,\n        type: 'RULE',\n        level: 'INFO',\n        targetRole: 2,\n        targetText: '',\n        title: '',\n        content: '',\n        isTop: false\n      };\n      this.adminNoticeEditVisible = true;\n    },\n    openAdminNoticeEdit(item) {\n      const it = item || {};\n      this.adminNoticeEditMode = 'edit';\n      this.adminNoticeForm = {\n        id: it.id,\n        type: it.type || 'RULE',\n        level: it.level || 'INFO',\n        targetRole: typeof it.targetRole === 'number' ? it.targetRole : Number(it.targetRole ?? 2),\n        targetText: it.targetText || '',\n        title: it.title || '',\n        content: it.content || '',\n        isTop: Number(it.isTop) === 1\n      };\n      this.adminNoticeEditVisible = true;\n    },\n    async submitAdminNotice() {\n      const f = this.adminNoticeForm || {};\n      const title = String(f.title || '').trim();\n      const content = String(f.content || '').trim();\n      const type = String(f.type || '').trim();\n      const level = String(f.level || '').trim();\n      const targetRole = f.targetRole;\n      if (!title) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šæ ‡é¢˜');\n      if (!content) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šå†…å®¹');\n      if (!type) return ElMessage.warning('è¯·é€‰æ‹©å…¬å‘Šç±»å‹');\n      if (!level) return ElMessage.warning('è¯·é€‰æ‹©é‡è¦ç¨‹åº¦');\n      if (targetRole === null || targetRole === undefined || targetRole === '') return ElMessage.warning('è¯·é€‰æ‹©é¢å‘å¯¹è±¡');\n      const payload = {\n        id: this.adminNoticeEditMode === 'edit' ? f.id : undefined,\n        title,\n        content,\n        type,\n        level,\n        targetRole: Number(targetRole),\n        targetText: String(f.targetText || '').trim(),\n        isTop: f.isTop ? 1 : 0,\n        createdBy: this.getCurrentUserId()\n      };\n      this.adminNoticeSubmitting = true;\n      try {\n        const api = this.adminNoticeEditMode === 'create' ? '/announcement/admin/create' : '/announcement/admin/republish';\n        const res = await this.$axios.post(api, payload);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(this.adminNoticeEditMode === 'create' ? 'å‘å¸ƒæˆåŠŸ' : 'é‡æ–°å‘å¸ƒæˆåŠŸ');\n          this.adminNoticeEditVisible = false;\n          this.adminNoticeDetailVisible = false;\n\n          // åˆ·æ–°ï¼šä¸»é¡µ + åˆ—è¡¨ï¼ˆå¦‚æœæ‰“å¼€ï¼‰\n          this.loadAdminNoticeHome(true);\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true);\n        } else {\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeSubmitting = false;\n      }\n    },\n    async confirmAdminNoticeDelete(item) {\n      const it = item || {};\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šåˆ é™¤å…¬å‘Šã€Œ${it.title || 'ï¼ˆæ— æ ‡é¢˜ï¼‰'}ã€å—ï¼Ÿåˆ é™¤åå­¦ç”Ÿç«¯ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚`, 'åˆ é™¤ç¡®è®¤', {\n          type: 'warning',\n          confirmButtonText: 'åˆ é™¤',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      this.adminNoticeListLoading = true;\n      try {\n        const res = await this.$axios.delete('/announcement/admin/delete', {\n          params: {\n            id: it.id\n          }\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success('åˆ é™¤æˆåŠŸ');\n          this.adminNoticeDetailVisible = false;\n          this.loadAdminNoticeHome(true);\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true);\n        } else {\n          ElMessage.error(res?.msg || 'åˆ é™¤å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('åˆ é™¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.adminNoticeListLoading = false;\n      }\n    },\n    getTodoTagType(type) {\n      if (type === 'complaint') return 'danger';\n      if (type === 'violation') return 'warning';\n      if (type === 'rule') return 'success';\n      return 'info';\n    },\n    getTodoTypeText(type) {\n      if (type === 'complaint') return 'æŠ•è¯‰';\n      if (type === 'violation') return 'è¿çº¦';\n      if (type === 'rule') return 'è§„åˆ™é…ç½®';\n      if (type === 'system') return 'ç³»ç»Ÿ';\n      return 'å…¶ä»–';\n    },\n    getPriorityText(p) {\n      if (p === 'high') return 'é«˜';\n      if (p === 'medium') return 'ä¸­';\n      return 'ä½';\n    },\n    handleTodoGo(row) {\n      // è®©â€œå‰å¾€å¤„ç†â€çœŸçš„èƒ½è·³é¡µï¼ˆæ•´åˆåå¯ç”¨ï¼‰\n      if (row.type === 'complaint') return this.emitChange('admin-complaints');\n      if (row.type === 'rule') return this.emitChange('admin-seats');\n      // violation / system ç»Ÿä¸€å¼•å¯¼åˆ°æ—¥å¿—ç»Ÿè®¡\n      return this.emitChange('admin-logs');\n    },\n    handleTodoDone(row) {\n      this.todos = this.todos.filter(t => t.id !== row.id);\n    },\n    handleMarkAllDone() {\n      this.todos = [];\n    },\n    /* ---------- Reservation (admin) ---------- */\n    async loadReservationRoomOptions() {\n      try {\n        const res = await this.$axios.get('/room/all');\n        if (res && Number(res.code) === 200 && Array.isArray(res.data)) {\n          this.reservationRoomOptions = res.data.map(r => ({\n            id: r.id,\n            label: `${r.campus} Â· ${r.building} ${r.roomName}`\n          }));\n        }\n      } catch (e) {\n        console.error('loadReservationRoomOptions failed:', e);\n      }\n    },\n    async loadAdminReservations(resetPage = false) {\n      if (resetPage) this.reservationPage = 1;\n      this.reservationLoading = true;\n      try {\n        const keyword = (this.reservationFilters.keyword || '').trim();\n        const params = {\n          keyword: keyword || undefined,\n          roomId: this.reservationFilters.roomId || undefined,\n          date: this.reservationFilters.date || undefined,\n          status: this.reservationFilters.status || undefined,\n          page: this.reservationPage,\n          size: this.reservationPageSize\n        };\n        const res = await this.$axios.get('/reservation/admin/page', {\n          params\n        });\n        if (res && Number(res.code) === 200) {\n          const payload = res.data || {};\n          this.reservations = Array.isArray(payload.records) ? payload.records : [];\n          this.reservationStats = payload.stats || {\n            total: 0,\n            booked: 0,\n            signed: 0,\n            canceled: 0,\n            violation: 0\n          };\n          this.reservationTotal = Number(res.total ?? this.reservations.length);\n          this.reservationSelection = [];\n        } else {\n          ElMessage.error(res?.msg || 'é¢„çº¦æ•°æ®åŠ è½½å¤±è´¥');\n        }\n      } catch (e) {\n        console.error('loadAdminReservations failed:', e);\n        ElMessage.error('é¢„çº¦æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.reservationLoading = false;\n      }\n    },\n    handleReservationRefresh() {\n      // ä¸é‡ç½®åˆ†é¡µï¼Œåªåšä¸€æ¬¡åˆ·æ–°\n      this.loadAdminReservations(false);\n    },\n    handleReservationSearch() {\n      // æŸ¥è¯¢ï¼šå›åˆ°ç¬¬ä¸€é¡µ\n      this.loadAdminReservations(true);\n    },\n    resetReservationFilters() {\n      this.reservationFilters = {\n        keyword: '',\n        roomId: null,\n        date: '',\n        status: ''\n      };\n      this.loadAdminReservations(true);\n    },\n    handleSelectionChange(val) {\n      this.reservationSelection = val || [];\n    },\n    handlePageChange(page) {\n      this.reservationPage = page;\n      this.loadAdminReservations(false);\n    },\n    handlePageSizeChange(size) {\n      this.reservationPageSize = size;\n      this.reservationPage = 1;\n      this.loadAdminReservations(false);\n    },\n    isCancelledStatus(status) {\n      return status === 'cancelled' || status === 'cancel_overdue';\n    },\n    getStatusTagType(status) {\n      if (status === 'reserved') return 'info';\n      if (status === 'checked_in') return 'success';\n      if (status === 'late') return 'warning';\n      if (status === 'no_show') return 'danger';\n      if (status === 'cancelled' || status === 'cancel_overdue') return 'warning';\n      return '';\n    },\n    getStatusText(status) {\n      if (status === 'reserved') return 'å·²é¢„çº¦';\n      if (status === 'checked_in') return 'å·²ç­¾åˆ°';\n      if (status === 'late') return 'è¿Ÿåˆ°';\n      if (status === 'no_show') return 'æœªç­¾åˆ°';\n      if (status === 'cancelled') return 'å·²å–æ¶ˆ';\n      if (status === 'cancel_overdue') return 'é€¾æœŸå–æ¶ˆ';\n      return status;\n    },\n    async handleSign(row) {\n      const it = row || {};\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id');\n      if (it.status !== 'no_show' && it.status !== 'late') {\n        return ElMessage.error('ä»…æ”¯æŒå¯¹ã€æœªç­¾åˆ°/è¿Ÿåˆ°ã€‘è®°å½•è¡¥å½•ç­¾åˆ°');\n      }\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šä¸ºé¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€è¡¥å½•ç­¾åˆ°å—ï¼Ÿ`, 'ç¡®è®¤è¡¥å½•ç­¾åˆ°', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/reservation/admin/checkin/${it.id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'è¡¥å½•ç­¾åˆ°æˆåŠŸ');\n          await this.loadAdminReservations(false);\n        } else {\n          ElMessage.error(res?.msg || 'è¡¥å½•ç­¾åˆ°å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('è¡¥å½•ç­¾åˆ°å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleCancel(row) {\n      const it = row || {};\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šå–æ¶ˆé¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€å—ï¼Ÿ`, 'ç¡®è®¤å–æ¶ˆé¢„çº¦', {\n          type: 'warning',\n          confirmButtonText: 'å–æ¶ˆé¢„çº¦',\n          cancelButtonText: 'è¿”å›'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/reservation/admin/cancel/${it.id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'å–æ¶ˆæˆåŠŸ');\n          await this.loadAdminReservations(false);\n        } else {\n          ElMessage.error(res?.msg || 'å–æ¶ˆå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('å–æ¶ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleMarkViolation(row) {\n      const it = row || {};\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šå°†é¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€æ ‡è®°ä¸ºè¿çº¦å—ï¼Ÿ`, 'ç¡®è®¤æ ‡è®°è¿çº¦', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/reservation/admin/markViolation/${it.id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'æ ‡è®°è¿çº¦æˆåŠŸ');\n          await this.loadAdminReservations(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ ‡è®°è¿çº¦å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ ‡è®°è¿çº¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    handleViewDetail(row) {\n      const it = row || {};\n      const rmk = it && (it['remark'] ?? it['note'] ?? it['comment']) || 'â€”';\n      const lines = [`é¢„çº¦ç¼–å·ï¼š${it.code || it.reservationNo || 'â€”'}`, `å­¦ç”Ÿï¼š${it.studentName || 'â€”'}ï¼ˆ${it.studentNo || 'â€”'}ï¼‰`, `è‡ªä¹ å®¤ï¼š${it.room || 'â€”'}`, `åº§ä½ï¼š${it.seatNo || 'â€”'}`, `æ—¥æœŸï¼š${it.date || 'â€”'}`, `æ—¶é—´æ®µï¼š${it.timeRange || 'â€”'}`, `çŠ¶æ€ï¼š${this.getStatusText(it.status)}`, `å¤‡æ³¨ï¼š${rmk}`];\n      ElMessageBox.alert(lines.join('<br/>'), 'é¢„çº¦è¯¦æƒ…', {\n        dangerouslyUseHTMLString: true,\n        confirmButtonText: 'å…³é—­'\n      });\n    },\n    async handleBatchSign() {\n      const ids = (this.reservationSelection || []).map(x => x.id).filter(Boolean);\n      if (!ids.length) return;\n      if (!this.canBatchCheckin) return ElMessage.error('è¯·ä»…é€‰æ‹©ã€æœªç­¾åˆ°/è¿Ÿåˆ°ã€‘è®°å½•è¿›è¡Œæ‰¹é‡è¡¥å½•ç­¾åˆ°');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡è¡¥å½•ç­¾åˆ°ï¼ˆ${ids.length} æ¡ï¼‰å—ï¼Ÿ`, 'æ‰¹é‡è¡¥å½•ç­¾åˆ°', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post('/reservation/admin/batchCheckin', {\n          ids\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'æ‰¹é‡è¡¥å½•ç­¾åˆ°å®Œæˆ');\n          await this.loadAdminReservations(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ‰¹é‡è¡¥å½•ç­¾åˆ°å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ‰¹é‡è¡¥å½•ç­¾åˆ°å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleBatchCancel() {\n      const ids = (this.reservationSelection || []).map(x => x.id).filter(Boolean);\n      if (!ids.length) return;\n      if (!this.canBatchCancel) return ElMessage.error('è¯·ä»…é€‰æ‹©ã€å·²é¢„çº¦ã€‘è®°å½•è¿›è¡Œæ‰¹é‡å–æ¶ˆ');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡å–æ¶ˆé¢„çº¦ï¼ˆ${ids.length} æ¡ï¼‰å—ï¼Ÿ`, 'æ‰¹é‡å–æ¶ˆé¢„çº¦', {\n          type: 'warning',\n          confirmButtonText: 'å–æ¶ˆé¢„çº¦',\n          cancelButtonText: 'è¿”å›'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post('/reservation/admin/batchCancel', {\n          ids\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'æ‰¹é‡å–æ¶ˆå®Œæˆ');\n          await this.loadAdminReservations(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ‰¹é‡å–æ¶ˆå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ‰¹é‡å–æ¶ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    /* user methods */\n    async loadAdminUsers(resetPage = false) {\n      if (resetPage) this.userPage = 1;\n      const params = {\n        page: this.userPage,\n        size: this.userPageSize\n      };\n      const k = (this.userFilters.keyword || '').trim();\n      if (k) params.keyword = k;\n      if (this.userFilters.roleId !== '' && this.userFilters.roleId !== null && this.userFilters.roleId !== undefined) {\n        params.roleId = this.userFilters.roleId;\n      }\n      if (this.userFilters.status !== '' && this.userFilters.status !== null && this.userFilters.status !== undefined) {\n        params.status = this.userFilters.status;\n      }\n      if (this.userFilters.onlyAbnormal) {\n        params.onlyAbnormal = true;\n      }\n      this.userLoading = true;\n      try {\n        const res = await this.$axios.get('/user/admin/page', {\n          params\n        });\n        if (res && Number(res.code) === 200) {\n          const data = res.data || {};\n          this.users = Array.isArray(data.records) ? data.records : [];\n          this.userStats = data.stats || {\n            total: 0,\n            normal: 0,\n            warning: 0,\n            blacklist: 0\n          };\n          const total = res.total ?? data.total;\n          this.userTotal = Number.isFinite(Number(total)) ? Number(total) : this.users.length;\n        } else {\n          ElMessage.error(res?.msg || 'ç”¨æˆ·æ•°æ®åŠ è½½å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('ç”¨æˆ·æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.userLoading = false;\n      }\n    },\n    handleUserSearch() {\n      this.loadAdminUsers(true);\n    },\n    resetUserFilters() {\n      this.userFilters = {\n        keyword: '',\n        roleId: '',\n        status: '',\n        onlyAbnormal: false\n      };\n      this.loadAdminUsers(true);\n    },\n    handleUserSelectionChange(val) {\n      this.userSelection = val || [];\n    },\n    handleUserPageChange(page) {\n      this.userPage = page;\n      this.loadAdminUsers(false);\n    },\n    handleUserPageSizeChange(size) {\n      this.userPageSize = size;\n      this.loadAdminUsers(true);\n    },\n    getUserStatusTagType(status) {\n      const s = Number(status);\n      if (s === 0) return 'success';\n      if (s === 1) return 'warning';\n      if (s === 2) return 'danger';\n      return '';\n    },\n    getUserStatusText(status) {\n      const s = Number(status);\n      if (s === 0) return 'æ­£å¸¸';\n      if (s === 1) return 'é¢„è­¦';\n      if (s === 2) return 'é»‘åå•';\n      return String(status);\n    },\n    userRowSelectable(row) {\n      // ç®¡ç†å‘˜ä¸å…è®¸åŠ å…¥/è§£é™¤é»‘åå•ï¼Œä¹Ÿä¸å‚ä¸æ‰¹é‡æ“ä½œ\n      return Number(row?.roleId) !== 0;\n    },\n    getViolationTypeText(vType) {\n      if (vType === 'no_show') return 'æœªç­¾åˆ°';\n      if (vType === 'late') return 'è¿Ÿåˆ°';\n      if (vType === 'cancel') return 'å–æ¶ˆ';\n      return vType || 'â€”';\n    },\n    openCreateAdminDialog() {\n      this.createAdminVisible = true;\n      this.$nextTick(() => {\n        try {\n          this.$refs.createAdminFormRef && this.$refs.createAdminFormRef.clearValidate && this.$refs.createAdminFormRef.clearValidate();\n        } catch (e) {\n          //\n        }\n      });\n    },\n    async submitCreateAdmin() {\n      const formRef = this.$refs.createAdminFormRef;\n      if (!formRef) return;\n      try {\n        await formRef.validate();\n      } catch (e) {\n        return;\n      }\n      this.createAdminLoading = true;\n      try {\n        const payload = {\n          account: (this.createAdminForm.account || '').trim(),\n          name: (this.createAdminForm.name || '').trim(),\n          password: this.createAdminForm.password\n        };\n        const res = await this.$axios.post('/user/admin/createAdmin', payload);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'åˆ›å»ºæˆåŠŸ');\n          this.createAdminVisible = false;\n          this.createAdminForm = {\n            account: '',\n            name: '',\n            password: ''\n          };\n          await this.loadAdminUsers(false);\n        } else {\n          ElMessage.error(res?.msg || 'åˆ›å»ºå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.createAdminLoading = false;\n      }\n    },\n    async handleLockUser(row) {\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒåŠ å…¥é»‘åå•');\n      const id = row && row.id;\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šå°†ã€Œ${row.name || row.studentNo || id}ã€åŠ å…¥é»‘åå•å—ï¼Ÿ`, 'åŠ å…¥é»‘åå•', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/user/admin/blacklist/${id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'å·²åŠ å…¥é»‘åå•');\n          await this.loadAdminUsers(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleUnlockUser(row) {\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒè§£é™¤é»‘åå•');\n      const id = row && row.id;\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šè§£é™¤ã€Œ${row.name || row.studentNo || id}ã€çš„é»‘åå•å—ï¼Ÿè§£é™¤åå°†æ ¹æ®å½“å‰ä¿¡ç”¨åˆ†è‡ªåŠ¨åˆ¤å®šæ˜¯å¦ä¸ºé¢„è­¦ã€‚`, 'è§£é™¤é»‘åå•', {\n          type: 'warning',\n          confirmButtonText: 'è§£é™¤',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/user/admin/unblacklist/${id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'å·²è§£é™¤é»‘åå•');\n          await this.loadAdminUsers(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleResetPassword(row) {\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒé‡ç½®å¯†ç ');\n      const id = row && row.id;\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šé‡ç½®ã€Œ${row.name || row.studentNo || id}ã€çš„å¯†ç å—ï¼Ÿé‡ç½®åé»˜è®¤å¯†ç ä¸º 123456ã€‚`, 'é‡ç½®å¯†ç ', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post(`/user/admin/resetPassword/${id}`);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'å¯†ç å·²é‡ç½®ä¸º 123456');\n        } else {\n          ElMessage.error(res?.msg || 'é‡ç½®å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('é‡ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleViewUserDetail(row) {\n      const id = row && row.id;\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id');\n      this.userDetailVisible = true;\n      this.userDetailLoading = true;\n      this.userDetail = {\n        user: null,\n        violationCount: 0,\n        recentViolations: []\n      };\n      try {\n        const res = await this.$axios.get(`/user/admin/detail/${id}`);\n        if (res && Number(res.code) === 200) {\n          const d = res.data || {};\n          this.userDetail = {\n            user: d.user || null,\n            violationCount: d.violationCount || 0,\n            recentViolations: d.recentViolations || []\n          };\n        } else {\n          ElMessage.error(res?.msg || 'è·å–è¯¦æƒ…å¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('è·å–è¯¦æƒ…å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.userDetailLoading = false;\n      }\n    },\n    async handleBatchLock() {\n      const ids = (this.userSelection || []).filter(x => Number(x?.roleId) !== 0).map(x => x.id).filter(Boolean);\n      if (!ids.length) return;\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡åŠ å…¥é»‘åå•ï¼ˆ${ids.length} äººï¼‰å—ï¼Ÿ`, 'æ‰¹é‡åŠ å…¥é»‘åå•', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post('/user/admin/batchBlacklist', {\n          ids\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'æ‰¹é‡åŠ å…¥é»‘åå•å®Œæˆ');\n          this.userSelection = [];\n          await this.loadAdminUsers(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ‰¹é‡æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ‰¹é‡æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    async handleBatchUnlock() {\n      const ids = (this.userSelection || []).filter(x => Number(x?.roleId) !== 0).map(x => x.id).filter(Boolean);\n      if (!ids.length) return;\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡è§£é™¤é»‘åå•ï¼ˆ${ids.length} äººï¼‰å—ï¼Ÿè§£é™¤åå°†æ ¹æ®å½“å‰ä¿¡ç”¨åˆ†è‡ªåŠ¨åˆ¤å®šæ˜¯å¦ä¸ºé¢„è­¦ã€‚`, 'æ‰¹é‡è§£é™¤é»‘åå•', {\n          type: 'warning',\n          confirmButtonText: 'è§£é™¤',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      try {\n        const res = await this.$axios.post('/user/admin/batchUnblacklist', {\n          ids\n        });\n        if (res && Number(res.code) === 200) {\n          ElMessage.success(res?.msg || 'æ‰¹é‡è§£é™¤å®Œæˆ');\n          this.userSelection = [];\n          await this.loadAdminUsers(false);\n        } else {\n          ElMessage.error(res?.msg || 'æ‰¹é‡æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('æ‰¹é‡æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      }\n    },\n    /* seat methods */\n    async initSeatData() {\n      // ä»…åœ¨è¿›å…¥â€œåº§ä½ç®¡ç†â€æ—¶åˆå§‹åŒ–ï¼Œé¿å…å½±å“å…¶å®ƒé¡µé¢åŠ è½½\n      if (this.currentPage && this.currentPage !== 'admin-seats') return;\n      this.seatLoading = true;\n      try {\n        await this.loadSeatCampuses();\n        // é»˜è®¤é€‰æ‹©ï¼šä¼˜å…ˆå·²æœ‰é€‰æ‹©ï¼Œå…¶æ¬¡ç¬¬ä¸€é¡¹\n        if (!this.currentCampus) {\n          const first = (this.campusOptions || [])[0];\n          this.currentCampus = first ? first.value : '';\n        }\n        await this.loadSeatBuildings();\n        if (!this.currentBuild) {\n          const firstB = (this.buildOptions || [])[0];\n          this.currentBuild = firstB ? firstB.value : '';\n        }\n        await this.loadSeatRooms(true);\n      } finally {\n        this.seatLoading = false;\n      }\n    },\n    campusLabel(v) {\n      const it = (this.campusOptions || []).find(x => x.value === v);\n      return it ? it.label : v || '';\n    },\n    buildLabel(v) {\n      const it = (this.buildOptions || []).find(x => x.value === v);\n      return it ? it.label : v || '';\n    },\n    async loadSeatCampuses() {\n      const res = await this.$axios.get('/room/admin/campuses', {\n        params: {\n          onlyOpen: this.onlyShowOpen ? 1 : 0\n        }\n      });\n      if (res && Number(res.code) === 200) {\n        const arr = res.data || [];\n        this.campusOptions = arr.map(x => ({\n          value: x,\n          label: x\n        }));\n      } else {\n        this.campusOptions = [];\n      }\n    },\n    async loadSeatBuildings() {\n      const params = {\n        onlyOpen: this.onlyShowOpen ? 1 : 0\n      };\n      if (this.currentCampus) params.campus = this.currentCampus;\n      const res = await this.$axios.get('/room/admin/buildings', {\n        params\n      });\n      if (res && Number(res.code) === 200) {\n        const arr = res.data || [];\n        this.buildOptions = arr.map(x => ({\n          value: x,\n          label: x\n        }));\n      } else {\n        this.buildOptions = [];\n      }\n    },\n    async loadSeatRooms(autoSelect = false) {\n      const params = {\n        onlyOpen: this.onlyShowOpen ? 1 : 0,\n        campus: this.currentCampus || '',\n        building: this.currentBuild || '',\n        keyword: (this.roomKeyword || '').trim()\n      };\n      const res = await this.$axios.get('/room/admin/list', {\n        params\n      });\n      if (res && Number(res.code) === 200) {\n        this.rooms = res.data || [];\n        if (autoSelect) {\n          if (!this.selectedRoomId && this.rooms.length) this.selectedRoomId = this.rooms[0].id;\n          const exists = this.rooms.some(r => r.id === this.selectedRoomId);\n          if (!exists && this.rooms.length) this.selectedRoomId = this.rooms[0].id;\n          if (this.selectedRoomId) await this.loadSeatLayout(this.selectedRoomId);\n        }\n      } else {\n        this.rooms = [];\n      }\n    },\n    async loadSeatLayout(roomId) {\n      if (!roomId) return;\n      const res = await this.$axios.get('/seat/admin/layout', {\n        params: {\n          roomId\n        }\n      });\n      if (res && Number(res.code) === 200 && res.data) {\n        const d = res.data || {};\n        const rows = d.rows || [];\n        this.seatGrid = rows.map(r => ({\n          rowNo: r.rowNo,\n          seats: (r.seats || []).map(seat => ({\n            id: seat.id,\n            seatNo: seat.seatNo,\n            label: seat.displayNo || seat.seatNo,\n            status: seat.status,\n            selected: false\n          }))\n        }));\n        this.seatSelectedIds = new Set();\n      } else {\n        this.seatGrid = [];\n        this.seatSelectedIds = new Set();\n      }\n    },\n    handleSeatCampusChange() {\n      // æ ¡åŒºå˜åŒ– => é‡æ–°åŠ è½½æ¥¼æ ‹+æˆ¿é—´\n      this.currentBuild = '';\n      this.loadSeatBuildings().then(() => {\n        const firstB = (this.buildOptions || [])[0];\n        this.currentBuild = firstB ? firstB.value : '';\n        this.loadSeatRooms(true);\n      });\n    },\n    handleSeatBuildChange() {\n      this.loadSeatRooms(true);\n    },\n    handleOnlyShowOpenChange() {\n      // åªæ˜¾ç¤ºå¼€æ”¾å˜åŒ– => options + list\n      this.loadSeatCampuses().then(() => {\n        // è‹¥å½“å‰æ ¡åŒºä¸åœ¨åˆ—è¡¨é‡Œï¼Œåˆ‡åˆ°ç¬¬ä¸€ä¸ª\n        if (this.currentCampus && !(this.campusOptions || []).some(x => x.value === this.currentCampus)) {\n          const first = (this.campusOptions || [])[0];\n          this.currentCampus = first ? first.value : '';\n        }\n        return this.loadSeatBuildings();\n      }).then(() => {\n        if (this.currentBuild && !(this.buildOptions || []).some(x => x.value === this.currentBuild)) {\n          const firstB = (this.buildOptions || [])[0];\n          this.currentBuild = firstB ? firstB.value : '';\n        }\n        return this.loadSeatRooms(true);\n      });\n    },\n    handleSeatKeywordInput() {\n      clearTimeout(this._seatKeywordTimer);\n      this._seatKeywordTimer = setTimeout(() => {\n        this.loadSeatRooms(true);\n      }, 300);\n    },\n    handleSelectRoom(room) {\n      if (!room || !room.id) return;\n      this.selectedRoomId = room.id;\n      this.loadSeatLayout(room.id);\n    },\n    async toggleRoomOpen(room) {\n      if (!room || !room.id) return;\n      const toStatus = room.status === 'open' ? 'closed' : 'open';\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šå°†â€œ${room.name}â€è®¾ç½®ä¸º${toStatus === 'open' ? 'å¼€æ”¾' : 'å…³é—­'}å—ï¼Ÿ`, 'ç¡®è®¤æ“ä½œ', {\n          type: 'warning',\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      const res = await this.$axios.put('/room/admin/status', {\n        roomId: room.id,\n        status: toStatus\n      });\n      if (res && Number(res.code) === 200) {\n        ElMessage.success('æ›´æ–°æˆåŠŸ');\n        await this.loadSeatRooms(true);\n      } else {\n        ElMessage.error(res?.msg || 'æ›´æ–°å¤±è´¥');\n      }\n    },\n    handleEditRoom(room) {\n      // é¢„ç•™ï¼šåç»­æ‰©å±•ï¼ˆç¼–è¾‘å¼€æ”¾åº§ä½æ•°ã€å¤‡æ³¨ã€è§„åˆ™ç­‰ï¼‰\n      console.log('TODO: edit room', room);\n    },\n    seatCellClass(seat) {\n      return [`seat-status-${seat.status}`, seat.selected ? 'seat-selected' : ''];\n    },\n    seatRowStyle(row) {\n      const n = row && row.seats ? row.seats.length : 0;\n      // æ¯è¡Œç”¨ gridï¼ŒæŒ‰è¯¥è¡Œåº§ä½æ•°å¹³åˆ†å®½åº¦ï¼ˆå¡«æ»¡ã€ä¸ç•™ç©ºï¼‰\n      return {\n        gridTemplateColumns: `repeat(${Math.max(n, 1)}, minmax(0, 1fr))`\n      };\n    },\n    handleSeatClick(seat) {\n      if (!seat) return;\n      // å·²å ç”¨çš„ä¸å…è®¸é€‰ä¸­ç¦ç”¨ï¼ˆé¿å…æŠŠæ­£åœ¨ç”¨çš„åº§ä½ç¦æ‰ï¼‰\n      if (seat.status === 'occupied') return;\n      seat.selected = !seat.selected;\n      if (seat.selected) this.seatSelectedIds.add(seat.id);else this.seatSelectedIds.delete(seat.id);\n    },\n    async handleBatchDisable() {\n      const ids = Array.from(this.seatSelectedIds || []);\n      if (!ids.length) return ElMessage.warning('è¯·å…ˆé€‰ä¸­è¦ç¦ç”¨çš„åº§ä½');\n      try {\n        await ElMessageBox.confirm(`ç¡®å®šç¦ç”¨é€‰ä¸­çš„ ${ids.length} ä¸ªåº§ä½å—ï¼Ÿ`, 'æ‰¹é‡ç¦ç”¨', {\n          type: 'warning',\n          confirmButtonText: 'ç¦ç”¨',\n          cancelButtonText: 'å–æ¶ˆ'\n        });\n      } catch (e) {\n        return;\n      }\n      const res = await this.$axios.post('/seat/admin/disable', {\n        seatIds: ids\n      });\n      if (res && Number(res.code) === 200) {\n        ElMessage.success('å·²ç¦ç”¨');\n        await this.loadSeatLayout(this.selectedRoomId);\n      } else {\n        ElMessage.error(res?.msg || 'ç¦ç”¨å¤±è´¥');\n      }\n    },\n    handleClearSelection() {\n      (this.seatGrid || []).forEach(row => {\n        (row.seats || []).forEach(seat => {\n          seat.selected = false;\n        });\n      });\n      this.seatSelectedIds = new Set();\n    },\n    async exportGlobalConfig() {\n      try {\n        const blobRes = await this.$axios.get('/room/admin/export/global', {\n          responseType: 'blob'\n        });\n        this.downloadBlob(blobRes, `rooms_global_${Date.now()}.csv`);\n      } catch (e) {\n        ElMessage.error('å¯¼å‡ºå¤±è´¥');\n      }\n    },\n    async exportRoomSeatConfig() {\n      if (!this.selectedRoomId) return ElMessage.warning('è¯·å…ˆé€‰æ‹©è‡ªä¹ å®¤');\n      try {\n        const blobRes = await this.$axios.get('/room/admin/export/roomSeats', {\n          params: {\n            roomId: this.selectedRoomId\n          },\n          responseType: 'blob'\n        });\n        this.downloadBlob(blobRes, `room_${this.selectedRoomId}_seats_${Date.now()}.csv`);\n      } catch (e) {\n        ElMessage.error('å¯¼å‡ºå¤±è´¥');\n      }\n    },\n    downloadBlob(resp, filename) {\n      // axios æ‹¦æˆªå™¨å¯èƒ½ç›´æ¥è¿”å› Blobï¼Œè¿™é‡Œå…¼å®¹ä¸¤ç§\n      const blob = resp instanceof Blob ? resp : resp && resp.data instanceof Blob ? resp.data : null;\n      if (!blob) return;\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    },\n    openCreateRoomDialog() {\n      this.createRoomVisible = true;\n      // åˆå§‹åŒ–é»˜è®¤å€¼\n      const c = this.currentCampus || ((this.campusOptions || [])[0] || {}).value || '';\n      this.createRoomForm.campus = c;\n      this.createRoomForm.roomName = '';\n      this.createRoomForm.totalSeats = 80;\n      this.createRoomForm.openSeats = 80;\n      this.handleCreateRoomCampusChange(c);\n    },\n    async handleCreateRoomCampusChange(campusVal) {\n      const campus = campusVal || this.createRoomForm.campus;\n      const res = await this.$axios.get('/room/admin/buildings', {\n        params: {\n          campus,\n          onlyOpen: 0\n        }\n      });\n      if (res && Number(res.code) === 200) {\n        const arr = res.data || [];\n        this.createRoomBuildingOptions = arr.map(x => ({\n          value: x,\n          label: x\n        }));\n        if (!this.createRoomForm.building) {\n          this.createRoomForm.building = (this.createRoomBuildingOptions[0] || {}).value || '';\n        }\n      } else {\n        this.createRoomBuildingOptions = [];\n        this.createRoomForm.building = '';\n      }\n    },\n    syncOpenSeats() {\n      // å½“å‰ç‰ˆæœ¬ï¼šå¼€æ”¾åº§ä½æ•°é»˜è®¤=åº§ä½æ•°\n      this.createRoomForm.openSeats = this.createRoomForm.totalSeats;\n    },\n    async submitCreateRoom() {\n      const form = this.$refs.createRoomFormRef;\n      if (form && form.validate) {\n        try {\n          await form.validate();\n        } catch (e) {\n          return;\n        }\n      }\n      this.createRoomLoading = true;\n      try {\n        const payload = {\n          ...this.createRoomForm\n        };\n        // ç®€åŒ–ï¼šå¼€æ”¾åº§ä½æ•°=åº§ä½æ•°\n        payload.openSeats = payload.totalSeats;\n        const res = await this.$axios.post('/room/admin/create', payload);\n        if (res && Number(res.code) === 200) {\n          ElMessage.success('åˆ›å»ºæˆåŠŸ');\n          this.createRoomVisible = false;\n          // è®©ç­›é€‰åˆ‡åˆ°æ–°åˆ›å»ºçš„æ ¡åŒº/æ¥¼æ ‹\n          this.currentCampus = payload.campus;\n          this.currentBuild = payload.building;\n          await this.loadSeatBuildings();\n          await this.loadSeatRooms(true);\n        } else {\n          ElMessage.error(res?.msg || 'åˆ›å»ºå¤±è´¥');\n        }\n      } catch (e) {\n        ElMessage.error('åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥');\n      } finally {\n        this.createRoomLoading = false;\n      }\n    },\n    /* ---------- admin feedback/complaints ---------- */\n    onFbAdminFilterChange() {\n      this.fbAdminPageNum = 1;\n      this.loadAdminFeedback(false);\n      this.loadAdminFeedbackStats();\n    },\n    fbAdminPageChange(p) {\n      this.fbAdminPageNum = Number(p || 1);\n      this.loadAdminFeedback(false);\n    },\n    fbAdminStatusText(s) {\n      const v = String(s || '');\n      if (v === 'pending') return 'å¾…å¤„ç†';\n      if (v === 'processing') return 'å¤„ç†ä¸­';\n      if (v === 'resolved') return 'å·²è§£å†³';\n      return v || '-';\n    },\n    fbAdminStatusTagType(s) {\n      const v = String(s || '');\n      if (v === 'pending') return 'warning';\n      if (v === 'processing') return 'info';\n      if (v === 'resolved') return 'success';\n      return '';\n    },\n    fbAdminCategoryText(c) {\n      const v = String(c || '');\n      if (v === 'env') return 'ç¯å¢ƒè¯„ä»·';\n      if (v === 'service') return 'æœåŠ¡è¯„ä»·';\n      if (v === 'suggestion') return 'å»ºè®®';\n      if (v === 'complaint') return 'æŠ•è¯‰';\n      if (v === 'appeal') return 'ç”³è¯‰';\n      if (v === 'other') return 'å…¶ä»–';\n      return v || '-';\n    },\n    fbAdminCategoryTagType(c) {\n      const v = String(c || '');\n      if (v === 'complaint') return 'danger';\n      if (v === 'appeal') return 'warning';\n      if (v === 'suggestion') return 'success';\n      if (v === 'env' || v === 'service') return 'info';\n      return '';\n    },\n    formatYmdhm(dtStr) {\n      if (!dtStr) return '-';\n      const s = String(dtStr).replace('T', ' ');\n      const parts = s.split(' ');\n      const d = parts[0] || '';\n      const t = (parts[1] || '').slice(0, 5);\n      if (!d) return s;\n      const ds = d.split('-');\n      if (ds.length >= 3) {\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`;\n        return t ? `${mmdd} ${t}` : mmdd;\n      }\n      return s;\n    },\n    async loadAdminFeedbackStats() {\n      try {\n        const res = await this.$axios.get('/feedback/admin/stats');\n        if (res && res.code === 200) {\n          const d = res.data || {};\n          this.fbAdminStats = {\n            pending: Number(d.pending || 0),\n            processing: Number(d.processing || 0),\n            resolved: Number(d.resolved || 0)\n          };\n          // åŒæ­¥ Dashboard å¾…åŠæ•°é‡ï¼ˆå¯é€‰ï¼‰\n          this.metrics.pendingItems = this.fbAdminStats.pending + this.fbAdminStats.processing;\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    async loadAdminFeedback(resetPage = false) {\n      if (resetPage) this.fbAdminPageNum = 1;\n      this.fbAdminLoading = true;\n      try {\n        const params = {\n          pageNum: this.fbAdminPageNum,\n          pageSize: this.fbAdminPageSize\n        };\n        if (this.fbAdminOnlyPending) params.onlyPending = true;\n        if (this.fbAdminStatusFilter) params.status = this.fbAdminStatusFilter;\n        if (this.fbAdminCategoryFilter) params.category = this.fbAdminCategoryFilter;\n        if (this.fbAdminKeyword) params.keyword = this.fbAdminKeyword;\n        const res = await this.$axios.get('/feedback/admin/page', {\n          params\n        });\n        if (res && res.code === 200) {\n          this.fbAdminList = Array.isArray(res.data) ? res.data : [];\n          this.fbAdminTotal = Number(res.total || 0);\n        } else {\n          this.fbAdminList = [];\n          this.fbAdminTotal = 0;\n        }\n      } catch (e) {\n        console.error(e);\n        this.fbAdminList = [];\n        this.fbAdminTotal = 0;\n      } finally {\n        this.fbAdminLoading = false;\n      }\n    },\n    openFbAdminDetail(row) {\n      this.fbAdminDetail = row ? {\n        ...row\n      } : null;\n      const currentStatus = String(row && row.status || 'pending');\n      this.fbAdminHandleForm = {\n        status: currentStatus === 'resolved' ? 'resolved' : 'processing',\n        reply: row && row.reply ? String(row.reply) : '',\n        cancelReservation: false\n      };\n      this.fbAdminDrawerVisible = true;\n    },\n    async quickResolveFb(row) {\n      if (!row || !row.id) return;\n      try {\n        await ElMessageBox.confirm('ç¡®è®¤å°†è¯¥åé¦ˆæ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Ÿ', 'æç¤º', {\n          confirmButtonText: 'ç¡®å®š',\n          cancelButtonText: 'å–æ¶ˆ',\n          type: 'warning'\n        });\n      } catch (_) {\n        return;\n      }\n      this.fbAdminSubmitting = true;\n      try {\n        const payload = {\n          id: Number(row.id),\n          status: 'resolved',\n          reply: row && row.reply ? String(row.reply) : ''\n        };\n        const res = await this.$axios.post('/feedback/admin/handle', payload);\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'å·²æ ‡è®°ä¸ºå·²è§£å†³');\n          this.loadAdminFeedback(false);\n          this.loadAdminFeedbackStats();\n        } else {\n          ElMessage.error(res && res.msg || 'æ“ä½œå¤±è´¥');\n        }\n      } catch (e) {\n        console.error(e);\n        ElMessage.error('è¯·æ±‚å¤±è´¥');\n      } finally {\n        this.fbAdminSubmitting = false;\n      }\n    },\n    async submitFbAdminHandle() {\n      if (!this.fbAdminDetail || !this.fbAdminDetail.id) return;\n      if (String(this.fbAdminHandleForm.status) === 'resolved' && !String(this.fbAdminHandleForm.reply || '').trim()) {\n        try {\n          await ElMessageBox.confirm('ä½ å°†æ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Œä½†å›å¤å†…å®¹ä¸ºç©ºã€‚ç»§ç»­æäº¤ï¼Ÿ', 'æç¤º', {\n            confirmButtonText: 'ç»§ç»­',\n            cancelButtonText: 'è¿”å›å¡«å†™',\n            type: 'warning'\n          });\n        } catch (_) {\n          return;\n        }\n      }\n      this.fbAdminSubmitting = true;\n      try {\n        const payload = {\n          id: Number(this.fbAdminDetail.id),\n          status: this.fbAdminHandleForm.status,\n          reply: this.fbAdminHandleForm.reply,\n          cancelReservation: !!this.fbAdminHandleForm.cancelReservation\n        };\n        const res = await this.$axios.post('/feedback/admin/handle', payload);\n        if (res && res.code === 200) {\n          ElMessage.success(res.msg || 'æäº¤æˆåŠŸ');\n          this.fbAdminDrawerVisible = false;\n          this.fbAdminDetail = null;\n          this.loadAdminFeedback(false);\n          this.loadAdminFeedbackStats();\n        } else {\n          ElMessage.error(res && res.msg || 'æäº¤å¤±è´¥');\n        }\n      } catch (e) {\n        console.error(e);\n        ElMessage.error('è¯·æ±‚å¤±è´¥');\n      } finally {\n        this.fbAdminSubmitting = false;\n      }\n    },\n    resetSeatRule() {\n      this.seatRule = {\n        allowCrossTime: false,\n        maxHoursPerOrder: 4,\n        maxOrdersPerDay: 2,\n        autoReleaseNoSign: true,\n        releaseAfterMinutes: 20,\n        violationStrategy: 'day-ban',\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\n      };\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","ElMessageBox","name","props","currentPage","type","String","required","emits","data","dashboardTimer","reservationTimer","autoRefresh","metrics","todayReservations","todayTrend","todaySignRate","openRooms","totalSeats","pendingItems","trendItems","key","title","value","percent","status","desc","adminNoticeHomeLoading","adminNoticeListLoading","adminHomeNotices","noticeTypeOptions","label","noticeLevelOptions","noticeTargetOptions","adminNoticeAllVisible","adminNoticeDetailVisible","adminNoticeDetail","adminNoticeDetailFrom","adminNoticeTypeFilter","adminNoticeLevelFilter","adminNoticeTargetFilter","adminNoticeKeyword","adminNoticeIncludeExpired","adminNoticePageNum","adminNoticePageSize","adminNoticeTotalCount","adminNoticePageList","adminNoticeEditVisible","adminNoticeEditMode","adminNoticeSubmitting","adminNoticeForm","id","level","targetRole","targetText","content","isTop","fbAdminLoading","fbAdminList","fbAdminPageNum","fbAdminPageSize","fbAdminTotal","fbAdminStatusFilter","fbAdminCategoryFilter","fbAdminKeyword","fbAdminOnlyPending","fbAdminStats","pending","processing","resolved","fbAdminDrawerVisible","fbAdminDetail","fbAdminSubmitting","fbAdminHandleForm","reply","cancelReservation","todos","from","time","priority","latestActivities","text","typeLabel","reservationFilters","keyword","roomId","date","reservationRoomOptions","statusOptions","reservationLoading","reservations","reservationTotal","reservationStats","total","booked","signed","canceled","violation","reservationSelection","reservationPage","reservationPageSize","userLoading","userFilters","roleId","onlyAbnormal","userRoleOptions","userStatusOptions","users","userTotal","userStats","normal","warning","blacklist","userSelection","userPage","userPageSize","userDetailVisible","userDetailLoading","userDetail","user","violationCount","recentViolations","createAdminVisible","createAdminLoading","createAdminForm","account","password","createAdminRules","message","trigger","min","seatLoading","currentCampus","campusOptions","currentBuild","buildOptions","onlyShowOpen","roomKeyword","roomCapacityFilter","rooms","selectedRoomId","activeTab","showSeatNo","showDemoOccupied","seatGrid","seatSelectedIds","Set","createRoomVisible","createRoomLoading","createRoomBuildingOptions","createRoomForm","campus","building","roomName","openSeats","createRoomRules","seatRule","allowCrossTime","maxHoursPerOrder","maxOrdersPerDay","autoReleaseNoSign","releaseAfterMinutes","violationStrategy","description","computed","todayText","d","Date","y","getFullYear","m","getMonth","padStart","day","getDate","filteredRooms","filter","room","ok","trim","k","includes","floor","Number","capacity","selectedRoom","find","r","seatStats","stats","free","occupied","disabled","blockedArea","forEach","row","seats","seat","latestActivitiesLeft","mid","Math","ceil","length","slice","latestActivitiesRight","lastLoginIp","s","localStorage","getItem","sessionStorage","u","JSON","parse","canBatchCheckin","every","canBatchCancel","watch","val","stopDashboardTimer","startDashboardTimer","loadAdminNoticeHome","loadAdminDashboardHome","loadReservationRoomOptions","loadAdminReservations","loadAdminUsers","loadAdminFeedback","loadAdminFeedbackStats","initSeatData","created","beforeUnmount","methods","emitChange","page","$emit","setInterval","refreshDashboardMetrics","clearInterval","silent","res","$axios","get","params","recentLimit","code","w","weekly","weekReservation","weekReservationRate","weekCheckin","weekAvgCheckinRate","weekViolation","weekViolationRate","setTrend","item","x","p","max","acts","Array","isArray","map","it","e","error","console","noticeTypeText","t","noticeTypeIcon","noticeLevelText","l","formatNoticeTime","timeStr","withTime","isNaN","getTime","pad","n","hh","getHours","mm","getMinutes","makeNoticeSummary","maxLen","replace","normalizeNoticeItem","summary","getCurrentUser","getCurrentUserId","userId","isFinite","pageNum","pageSize","includeExpired","list","openAdminNoticeAll","reloadAdminNoticePage","resetPage","undefined","msg","onAdminNoticePageChange","resetAdminNoticeFilters","openAdminNoticeDetail","backToAdminNoticeList","openAdminNoticeCreate","openAdminNoticeEdit","submitAdminNotice","f","payload","createdBy","api","post","success","confirmAdminNoticeDelete","confirm","confirmButtonText","cancelButtonText","delete","getTodoTagType","getTodoTypeText","getPriorityText","handleTodoGo","handleTodoDone","handleMarkAllDone","size","records","handleReservationRefresh","handleReservationSearch","resetReservationFilters","handleSelectionChange","handlePageChange","handlePageSizeChange","isCancelledStatus","getStatusTagType","getStatusText","handleSign","reservationNo","handleCancel","handleMarkViolation","handleViewDetail","rmk","lines","studentName","studentNo","seatNo","timeRange","alert","join","dangerouslyUseHTMLString","handleBatchSign","ids","Boolean","handleBatchCancel","handleUserSearch","resetUserFilters","handleUserSelectionChange","handleUserPageChange","handleUserPageSizeChange","getUserStatusTagType","getUserStatusText","userRowSelectable","getViolationTypeText","vType","openCreateAdminDialog","$nextTick","$refs","createAdminFormRef","clearValidate","submitCreateAdmin","formRef","validate","handleLockUser","handleUnlockUser","handleResetPassword","handleViewUserDetail","handleBatchLock","handleBatchUnlock","loadSeatCampuses","first","loadSeatBuildings","firstB","loadSeatRooms","campusLabel","v","buildLabel","onlyOpen","arr","autoSelect","exists","some","loadSeatLayout","rows","rowNo","displayNo","selected","handleSeatCampusChange","then","handleSeatBuildChange","handleOnlyShowOpenChange","handleSeatKeywordInput","clearTimeout","_seatKeywordTimer","setTimeout","handleSelectRoom","toggleRoomOpen","toStatus","put","handleEditRoom","log","seatCellClass","seatRowStyle","gridTemplateColumns","handleSeatClick","add","handleBatchDisable","seatIds","handleClearSelection","exportGlobalConfig","blobRes","responseType","downloadBlob","now","exportRoomSeatConfig","resp","filename","blob","Blob","url","window","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","openCreateRoomDialog","c","handleCreateRoomCampusChange","campusVal","syncOpenSeats","submitCreateRoom","form","createRoomFormRef","onFbAdminFilterChange","fbAdminPageChange","fbAdminStatusText","fbAdminStatusTagType","fbAdminCategoryText","fbAdminCategoryTagType","formatYmdhm","dtStr","parts","split","ds","mmdd","onlyPending","category","openFbAdminDetail","currentStatus","quickResolveFb","_","submitFbAdminHandle","resetSeatRule"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\AdminHome.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <!-- ============ åå°é¦–é¡µï¼ˆDashboard æ•´åˆç‰ˆï¼‰ ============ -->\r\n    <div v-if=\"currentPage === 'admin-home'\" class=\"dashboard-page\">\r\n      <!-- é¡¶éƒ¨æ¬¢è¿ + ä»Šæ—¥æ¦‚è§ˆ -->\r\n      <div class=\"card welcome-card\">\r\n        <div class=\"welcome-left\">\r\n          <div class=\"welcome-title-row\">\r\n            <h2 class=\"welcome-title\">è‡ªä¹ å®¤é¢„çº¦ç³»ç»Ÿ Â· ç®¡ç†åå°</h2>\r\n            <el-tag size=\"small\" type=\"success\">è¿è¡Œæ­£å¸¸</el-tag>\r\n          </div>\r\n          <p class=\"welcome-subtitle\">\r\n            æ¬¢è¿å›æ¥ï¼Œç®¡ç†å‘˜ã€‚åŒä¸€æ—¶é—´å¯ä»¥åœ¨è¿™é‡Œæ€»è§ˆé¢„çº¦æƒ…å†µã€ç­¾åˆ°ç‡å’Œå¼‚å¸¸æé†’ï¼Œå¿«é€Ÿè¿›å…¥å„ä¸ªç®¡ç†æ¨¡å—ã€‚\r\n          </p>\r\n\r\n          <div class=\"welcome-meta\">\r\n            <span class=\"meta-item\">ä»Šå¤©ï¼š{{ todayText }}</span>\r\n            <span class=\"meta-separator\">Â·</span>\r\n            <span class=\"meta-item\">æœ€è¿‘ç™»å½• IPï¼š{{ lastLoginIp }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"welcome-right\">\r\n          <div class=\"metric-grid\">\r\n            <div class=\"metric-item\">\r\n              <div class=\"metric-label\">ä»Šæ—¥é¢„çº¦æ€»æ•°</div>\r\n              <div class=\"metric-value\">{{ metrics.todayReservations }}</div>\r\n              <div class=\"metric-desc\">è¾ƒæ˜¨æ—¥ {{ metrics.todayTrend }}%</div>\r\n            </div>\r\n\r\n            <div class=\"metric-item\">\r\n              <div class=\"metric-label\">ä»Šæ—¥ç­¾åˆ°ç‡</div>\r\n              <div class=\"metric-value\">\r\n                {{ metrics.todaySignRate }}<span class=\"metric-unit\">%</span>\r\n              </div>\r\n              <el-progress\r\n                  :percentage=\"metrics.todaySignRate\"\r\n                  :stroke-width=\"6\"\r\n                  status=\"success\"\r\n                  class=\"metric-progress\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"metric-item\">\r\n              <div class=\"metric-label\">å½“å‰å¼€æ”¾è‡ªä¹ å®¤</div>\r\n              <div class=\"metric-value\">{{ metrics.openRooms }}</div>\r\n              <div class=\"metric-desc\">è¦†ç›– {{ metrics.totalSeats }} ä¸ªåº§ä½</div>\r\n            </div>\r\n\r\n            <div class=\"metric-item\">\r\n              <div class=\"metric-label\">å¾…å¤„ç†äº‹é¡¹</div>\r\n              <div class=\"metric-value warning\">{{ metrics.pendingItems }}</div>\r\n              <div class=\"metric-desc\">æŠ•è¯‰ / å¼‚å¸¸ / å®¡æ ¸ ç­‰</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ä¸­é—´ä¸¤åˆ—ï¼šè¶‹åŠ¿é¢„è§ˆ + æ»šåŠ¨å…¬å‘Š -->\r\n      <div class=\"middle-row\">\r\n        <!-- è¶‹åŠ¿é¢„è§ˆ -->\r\n        <div class=\"card trend-card\">\r\n          <div class=\"card-header-row\">\r\n            <div>\r\n              <h3 class=\"card-title\">æœ¬å‘¨è¿è¡Œæ¦‚è§ˆ</h3>\r\n              <p class=\"card-subtitle\">é€šè¿‡ç®€å•çš„è¿›åº¦æ¡å¿«é€Ÿæ„ŸçŸ¥æœ¬å‘¨æ•´ä½“æƒ…å†µã€‚</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"trend-list\">\r\n            <div class=\"trend-item\" v-for=\"item in trendItems\" :key=\"item.key\">\r\n              <div class=\"trend-item-header\">\r\n                <span class=\"trend-item-title\">{{ item.title }}</span>\r\n                <span class=\"trend-item-value\">{{ item.value }}</span>\r\n              </div>\r\n              <el-progress\r\n                  :percentage=\"item.percent\"\r\n                  :stroke-width=\"8\"\r\n                  :status=\"item.status || 'success'\"\r\n                  class=\"trend-progress\"\r\n              />\r\n              <div class=\"trend-item-desc\">{{ item.desc }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ç³»ç»Ÿå…¬å‘Šï¼ˆåˆ—è¡¨ + ç®¡ç†ï¼‰ -->\r\n        <div class=\"card notice-card\">\r\n          <div class=\"card-header-row\">\r\n            <div>\r\n              <h3 class=\"card-title\">ç³»ç»Ÿå…¬å‘Šç®¡ç†</h3>\r\n              <p class=\"card-subtitle\">\r\n                æ”¯æŒæŸ¥çœ‹å…¬å‘Šåˆ—è¡¨ä¸è¯¦æƒ…ï¼›å¯æ–°å¢ã€ç¼–è¾‘ï¼ˆé‡æ–°å‘å¸ƒï¼‰ä¸åˆ é™¤ï¼Œå­¦ç”Ÿç«¯å°†åŒæ­¥æ›´æ–°ã€‚\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"admin-notice-head-actions\">\r\n              <el-button size=\"small\" @click=\"openAdminNoticeAll\">æŸ¥çœ‹å…¨éƒ¨</el-button>\r\n              <el-button size=\"small\" type=\"primary\" plain @click=\"openAdminNoticeCreate\">å‘å¸ƒæ–°å…¬å‘Š</el-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div v-if=\"adminNoticeHomeLoading\" class=\"admin-notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\r\n          <div v-else-if=\"!adminHomeNotices.length\" class=\"admin-notice-empty\">æš‚æ— å…¬å‘Š</div>\r\n\r\n          <ul v-else class=\"admin-notice-home-list\">\r\n            <li\r\n                v-for=\"item in adminHomeNotices\"\r\n                :key=\"item.id\"\r\n                class=\"admin-notice-home-item\"\r\n                @click=\"openAdminNoticeDetail(item, 'home')\"\r\n            >\r\n              <div class=\"admin-notice-badges\">\r\n                <div class=\"admin-notice-pill admin-type\" :class=\"'type-' + item.type\">\r\n                  <span class=\"admin-notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\r\n                  <span>{{ noticeTypeText(item.type) }}</span>\r\n                </div>\r\n\r\n                <div class=\"admin-notice-pill admin-level\" :class=\"'level-' + item.level\">\r\n                  {{ noticeLevelText(item.level) }}\r\n                </div>\r\n\r\n                <div v-if=\"Number(item.isTop) === 1\" class=\"admin-notice-pill admin-top\">ç½®é¡¶</div>\r\n              </div>\r\n\r\n              <div class=\"admin-notice-main\">\r\n                <div class=\"admin-notice-title\" :title=\"item.title\">{{ item.title }}</div>\r\n                <div v-if=\"item.summary\" class=\"admin-notice-snippet\" :title=\"item.summary\">{{ item.summary }}</div>\r\n                <div class=\"admin-notice-meta\">\r\n                  <span>{{ formatNoticeTime(item.publishTime, true) }}</span>\r\n                  <span class=\"admin-dot\">Â·</span>\r\n                  <span>{{ item.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"admin-notice-right\"><span class=\"admin-notice-arrow\">â€º</span></div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <!-- è¡¥å……ä¸€è¡Œï¼šæœ€è¿‘é¢„çº¦åŠ¨æ€ï¼ˆæ•´è¡Œ + ä¸¤åˆ—å±•ç¤ºï¼‰ -->\r\n      <div class=\"dashboard-row\">\r\n        <div class=\"card dashboard-card dashboard-card-full\">\r\n          <h3 class=\"card-title\">æœ€è¿‘é¢„çº¦åŠ¨æ€</h3>\r\n\r\n          <div class=\"activity-two-col\">\r\n            <!-- å·¦åˆ— -->\r\n            <ul class=\"timeline-list activity-col\">\r\n              <li v-for=\"item in latestActivitiesLeft\" :key=\"item.id\" class=\"timeline-item\">\r\n                <div class=\"timeline-main\">\r\n                  <span class=\"timeline-text\">{{ item.text }}</span>\r\n                  <span class=\"timeline-tag\" :class=\"'tag-' + item.type\">\r\n              {{ item.typeLabel }}\r\n            </span>\r\n                </div>\r\n                <div class=\"timeline-time\">{{ item.time }}</div>\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- ä¸­é—´ç«–çº¿ -->\r\n            <div v-if=\"latestActivitiesRight.length\" class=\"activity-divider\"></div>\r\n\r\n            <!-- å³åˆ— -->\r\n            <ul v-if=\"latestActivitiesRight.length\" class=\"timeline-list activity-col\">\r\n              <li v-for=\"item in latestActivitiesRight\" :key=\"item.id\" class=\"timeline-item\">\r\n                <div class=\"timeline-main\">\r\n                  <span class=\"timeline-text\">{{ item.text }}</span>\r\n                  <span class=\"timeline-tag\" :class=\"'tag-' + item.type\">\r\n              {{ item.typeLabel }}\r\n            </span>\r\n                </div>\r\n                <div class=\"timeline-time\">{{ item.time }}</div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- å¾…åŠäº‹é¡¹ / å¿«é€Ÿå…¥å£ -->\r\n      <div class=\"card todo-card\">\r\n        <div class=\"card-header-row\">\r\n          <div>\r\n            <h3 class=\"card-title\">å¾…åŠäº‹é¡¹</h3>\r\n            <p class=\"card-subtitle\">\r\n              è¿™é‡Œæ±‡æ€»äº†ä½ è¿‘æœŸéœ€è¦å¤„ç†çš„å…³é”®äº‹é¡¹ï¼Œæ¯”å¦‚æŠ•è¯‰ã€å¼‚å¸¸è®°å½•å’Œè§„åˆ™é…ç½®ã€‚\r\n            </p>\r\n          </div>\r\n          <el-button size=\"small\" @click=\"handleMarkAllDone\">\r\n            ä¸€é”®æ ‡è®°å·²è¯»ï¼ˆç¤ºä¾‹ï¼‰\r\n          </el-button>\r\n        </div>\r\n\r\n        <el-table\r\n            :data=\"todos\"\r\n            size=\"small\"\r\n            class=\"todo-table\"\r\n            border\r\n            stripe\r\n        >\r\n          <el-table-column prop=\"type\" label=\"ç±»å‹\" min-width=\"110\">\r\n            <template #default=\"scope\">\r\n              <el-tag size=\"small\" :type=\"getTodoTagType(scope.row.type)\">\r\n                {{ getTodoTypeText(scope.row.type) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column prop=\"content\" label=\"å†…å®¹\" min-width=\"260\" />\r\n\r\n          <el-table-column prop=\"from\" label=\"æ¥æº\" min-width=\"120\" />\r\n\r\n          <el-table-column prop=\"time\" label=\"åˆ›å»ºæ—¶é—´\" min-width=\"150\" />\r\n\r\n          <el-table-column prop=\"priority\" label=\"ä¼˜å…ˆçº§\" min-width=\"80\">\r\n            <template #default=\"scope\">\r\n              <el-tag\r\n                  size=\"small\"\r\n                  :type=\"scope.row.priority === 'high' ? 'danger' : (scope.row.priority === 'medium' ? 'warning' : 'info')\"\r\n                  effect=\"plain\"\r\n              >\r\n                {{ getPriorityText(scope.row.priority) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"æ“ä½œ\" min-width=\"200\" fixed=\"right\">\r\n            <template #default=\"scope\">\r\n              <div class=\"todo-actions\">\r\n                <el-button size=\"small\" type=\"primary\" link @click=\"handleTodoGo(scope.row)\">\r\n                  å‰å¾€å¤„ç†\r\n                </el-button>\r\n                <el-button size=\"small\" type=\"success\" link @click=\"handleTodoDone(scope.row)\">\r\n                  æ ‡è®°å®Œæˆ\r\n                </el-button>\r\n                <el-tooltip content=\"åªæ˜¯ç¤ºä¾‹ï¼Œä¸ä¼šçœŸæ­£ä¿®æ”¹åç«¯æ•°æ®\" placement=\"top\">\r\n                  <el-button size=\"small\" type=\"info\" link>è¯¦æƒ…</el-button>\r\n                </el-tooltip>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <!-- ç®¡ç†ç«¯ï¼šå…¬å‘Šç®¡ç†ä¸­å¿ƒ -->\r\n      <el-dialog\r\n          v-model=\"adminNoticeAllVisible\"\r\n          title=\"å…¬å‘Šç®¡ç†ä¸­å¿ƒ\"\r\n          width=\"980px\"\r\n          align-center\r\n          append-to-body\r\n          :lock-scroll=\"false\"\r\n          :z-index=\"5000\"\r\n      >\r\n        <div class=\"admin-notice-toolbar\">\r\n          <div class=\"admin-notice-filters\">\r\n            <div class=\"f-item\">\r\n              <span class=\"f-label\">ç±»å‹</span>\r\n              <el-select v-model=\"adminNoticeTypeFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\r\n\r\n                <el-option v-for=\"opt in noticeTypeOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n              </el-select>\r\n            </div>\r\n\r\n            <div class=\"f-item\">\r\n              <span class=\"f-label\">é‡è¦ç¨‹åº¦</span>\r\n              <el-select v-model=\"adminNoticeLevelFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\r\n\r\n                <el-option v-for=\"opt in noticeLevelOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n              </el-select>\r\n            </div>\r\n\r\n            <div class=\"f-item\">\r\n              <span class=\"f-label\">é¢å‘å¯¹è±¡</span>\r\n              <el-select v-model=\"adminNoticeTargetFilter\" :teleported=\"false\" size=\"small\" clearable placeholder=\"å…¨éƒ¨\" style=\"width: 150px\">\r\n\r\n                <el-option v-for=\"opt in noticeTargetOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n              </el-select>\r\n            </div>\r\n\r\n            <div class=\"f-item\">\r\n              <span class=\"f-label\">å…³é”®è¯</span>\r\n              <el-input v-model=\"adminNoticeKeyword\" size=\"small\" placeholder=\"æ ‡é¢˜/å†…å®¹\" style=\"width: 220px\" clearable />\r\n            </div>\r\n\r\n            <div class=\"f-item\">\r\n              <el-checkbox v-model=\"adminNoticeIncludeExpired\">åŒ…å«è¿‡æœŸ/æœªç”Ÿæ•ˆ</el-checkbox>\r\n            </div>\r\n\r\n            <div class=\"f-item\">\r\n              <el-button size=\"small\" type=\"primary\" plain @click=\"reloadAdminNoticePage(true)\">æŸ¥è¯¢</el-button>\r\n              <el-button size=\"small\" @click=\"resetAdminNoticeFilters\">é‡ç½®</el-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"admin-notice-toolbar-right\">\r\n            <div class=\"admin-notice-count\">å…± {{ adminNoticeTotalCount }} æ¡</div>\r\n            <el-button size=\"small\" type=\"primary\" @click=\"openAdminNoticeCreate\">å‘å¸ƒæ–°å…¬å‘Š</el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"adminNoticeListLoading\" class=\"admin-notice-loading\">æ­£åœ¨åŠ è½½å…¬å‘Šâ€¦</div>\r\n        <div v-else-if=\"!adminNoticePageList.length\" class=\"admin-notice-empty\">æš‚æ— å…¬å‘Š</div>\r\n\r\n        <ul v-else class=\"admin-notice-list\">\r\n          <li\r\n              v-for=\"item in adminNoticePageList\"\r\n              :key=\"item.id\"\r\n              class=\"admin-notice-item\"\r\n              @click=\"openAdminNoticeDetail(item, 'list')\"\r\n          >\r\n            <div class=\"admin-notice-badges\">\r\n              <div class=\"admin-notice-pill admin-type\" :class=\"'type-' + item.type\">\r\n                <span class=\"admin-notice-icon\">{{ noticeTypeIcon(item.type) }}</span>\r\n                <span>{{ noticeTypeText(item.type) }}</span>\r\n              </div>\r\n\r\n              <div class=\"admin-notice-pill admin-level\" :class=\"'level-' + item.level\">\r\n                {{ noticeLevelText(item.level) }}\r\n              </div>\r\n\r\n              <div v-if=\"Number(item.isTop) === 1\" class=\"admin-notice-pill admin-top\">ç½®é¡¶</div>\r\n            </div>\r\n\r\n            <div class=\"admin-notice-main\">\r\n              <div class=\"admin-notice-title\" :title=\"item.title\">{{ item.title }}</div>\r\n              <div v-if=\"item.summary\" class=\"admin-notice-snippet\" :title=\"item.summary\">{{ item.summary }}</div>\r\n              <div class=\"admin-notice-meta\">\r\n                <span>{{ formatNoticeTime(item.publishTime, true) }}</span>\r\n                <span class=\"admin-dot\">Â·</span>\r\n                <span>{{ item.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"admin-notice-actions\" @click.stop>\r\n              <el-button size=\"small\" type=\"primary\" link @click.stop=\"openAdminNoticeEdit(item)\">ç¼–è¾‘</el-button>\r\n              <el-button size=\"small\" type=\"danger\" link @click.stop=\"confirmAdminNoticeDelete(item)\">åˆ é™¤</el-button>\r\n            </div>\r\n          </li>\r\n        </ul>\r\n\r\n        <div class=\"admin-notice-pagination\">\r\n          <el-pagination\r\n              background\r\n              layout=\"prev, pager, next\"\r\n              :page-size=\"adminNoticePageSize\"\r\n              :current-page=\"adminNoticePageNum\"\r\n              :total=\"adminNoticeTotalCount\"\r\n              @current-change=\"onAdminNoticePageChange\"\r\n          />\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- ç®¡ç†ç«¯ï¼šå…¬å‘Šè¯¦æƒ… -->\r\n      <el-dialog\r\n          v-model=\"adminNoticeDetailVisible\"\r\n          title=\"å…¬å‘Šè¯¦æƒ…\"\r\n          width=\"860px\"\r\n          align-center\r\n          append-to-body\r\n          :lock-scroll=\"false\"\r\n          :z-index=\"5010\"\r\n      >\r\n        <div v-if=\"adminNoticeDetail\" class=\"admin-notice-detail-body\">\r\n          <div class=\"admin-notice-detail-actions\">\r\n            <el-button type=\"primary\" link @click=\"backToAdminNoticeList\">è¿”å›å…¬å‘Šåˆ—è¡¨</el-button>\r\n\r\n            <div class=\"admin-notice-detail-right\">\r\n              <el-button type=\"primary\" plain size=\"small\" @click=\"openAdminNoticeEdit(adminNoticeDetail)\">ç¼–è¾‘</el-button>\r\n              <el-button type=\"danger\" plain size=\"small\" @click=\"confirmAdminNoticeDelete(adminNoticeDetail)\">åˆ é™¤</el-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"admin-notice-detail-card\">\r\n            <div class=\"d-title\">{{ adminNoticeDetail.title }}</div>\r\n\r\n            <div class=\"d-tags\">\r\n        <span class=\"d-tag\" :class=\"'type-' + adminNoticeDetail.type\">\r\n          {{ noticeTypeIcon(adminNoticeDetail.type) }} {{ noticeTypeText(adminNoticeDetail.type) }}\r\n        </span>\r\n              <span class=\"d-tag\" :class=\"'level-' + adminNoticeDetail.level\">\r\n          {{ noticeLevelText(adminNoticeDetail.level) }}\r\n        </span>\r\n              <span v-if=\"Number(adminNoticeDetail.isTop) === 1\" class=\"d-tag top\">ç½®é¡¶</span>\r\n            </div>\r\n\r\n            <el-divider />\r\n\r\n            <div class=\"d-info\">\r\n              <div class=\"d-info-item\"><span class=\"k\">å‘å¸ƒæ—¶é—´</span><span class=\"v\">{{ formatNoticeTime(adminNoticeDetail.publishTime, true) }}</span></div>\r\n              <div class=\"d-info-item\"><span class=\"k\">å…¬å‘Šç±»å‹</span><span class=\"v\">{{ noticeTypeText(adminNoticeDetail.type) }}</span></div>\r\n              <div class=\"d-info-item\"><span class=\"k\">é‡è¦ç¨‹åº¦</span><span class=\"v\">{{ noticeLevelText(adminNoticeDetail.level) }}</span></div>\r\n              <div class=\"d-info-item\"><span class=\"k\">é¢å‘å¯¹è±¡</span><span class=\"v\">{{ adminNoticeDetail.targetText || 'å…¨éƒ¨ç”¨æˆ·' }}</span></div>\r\n            </div>\r\n\r\n            <el-divider />\r\n\r\n            <div class=\"d-content\">{{ adminNoticeDetail.content || 'ï¼ˆæ— å†…å®¹ï¼‰' }}</div>\r\n          </div>\r\n        </div>\r\n      </el-dialog>\r\n\r\n      <!-- ç®¡ç†ç«¯ï¼šå‘å¸ƒ/ç¼–è¾‘å…¬å‘Šï¼ˆç¼–è¾‘=é‡æ–°å‘å¸ƒï¼‰ -->\r\n      <el-dialog\r\n          v-model=\"adminNoticeEditVisible\"\r\n          :title=\"adminNoticeEditMode === 'create' ? 'å‘å¸ƒæ–°å…¬å‘Š' : 'ç¼–è¾‘å…¬å‘Šï¼ˆé‡æ–°å‘å¸ƒï¼‰'\"\r\n          width=\"860px\"\r\n          align-center\r\n          append-to-body\r\n          :lock-scroll=\"false\"\r\n          :z-index=\"5020\"\r\n      >\r\n        <el-form :model=\"adminNoticeForm\" label-width=\"90px\" class=\"admin-notice-form\">\r\n          <el-form-item label=\"å…¬å‘Šç±»å‹\">\r\n            <el-select v-model=\"adminNoticeForm.type\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\r\n\r\n              <el-option v-for=\"opt in noticeTypeOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"é‡è¦ç¨‹åº¦\">\r\n            <el-select v-model=\"adminNoticeForm.level\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\r\n\r\n              <el-option v-for=\"opt in noticeLevelOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"é¢å‘å¯¹è±¡\">\r\n            <el-select v-model=\"adminNoticeForm.targetRole\" :teleported=\"false\" placeholder=\"è¯·é€‰æ‹©\" style=\"width: 240px\">\r\n\r\n              <el-option v-for=\"opt in noticeTargetOptions\" :key=\"opt.value\" :label=\"opt.label\" :value=\"opt.value\" />\r\n\r\n            </el-select>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"å¯¹è±¡è¯´æ˜\">\r\n            <el-input v-model=\"adminNoticeForm.targetText\" placeholder=\"ä¾‹å¦‚ï¼šå…¨ä½“å­¦ç”Ÿ / æœ¬éƒ¨å­¦ç”Ÿ / ç ”ç©¶ç”Ÿç­‰ï¼ˆå¯é€‰ï¼‰\" />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"æ ‡é¢˜\">\r\n            <el-input v-model=\"adminNoticeForm.title\" maxlength=\"80\" show-word-limit />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"å†…å®¹\">\r\n            <el-input v-model=\"adminNoticeForm.content\" type=\"textarea\" :rows=\"8\" maxlength=\"2000\" show-word-limit />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"ç½®é¡¶\">\r\n            <el-switch v-model=\"adminNoticeForm.isTop\" />\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <template #footer>\r\n          <el-button @click=\"adminNoticeEditVisible = false\">å–æ¶ˆ</el-button>\r\n          <el-button type=\"primary\" :loading=\"adminNoticeSubmitting\" @click=\"submitAdminNotice\">\r\n            {{ adminNoticeEditMode === 'create' ? 'å‘å¸ƒ' : 'é‡æ–°å‘å¸ƒ' }}\r\n          </el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n\r\n    <!-- ============ é¢„çº¦ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\r\n    <div v-else-if=\"currentPage === 'admin-reservations'\" class=\"card reservation-card\">\r\n      <div class=\"card-header reservation-header\">\r\n        <div>\r\n          <h2 class=\"page-title\">é¢„çº¦ç®¡ç†</h2>\r\n          <p class=\"page-subtitle\">\r\n            æŸ¥çœ‹å’Œç®¡ç†å­¦ç”Ÿé¢„çº¦è®°å½•ï¼Œæ”¯æŒç­›é€‰ã€æ‰¹é‡æ“ä½œã€è¡¥å½•ç­¾åˆ°ä¸æ ‡è®°è¿çº¦ã€‚\r\n          </p>\r\n        </div>\r\n        <div class=\"reservation-header-right\">\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"handleReservationRefresh\">\r\n            åˆ·æ–°\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"filter-bar\">\r\n        <el-input\r\n            v-model=\"reservationFilters.keyword\"\r\n            placeholder=\"æŒ‰å§“å / å­¦å· / é¢„çº¦ç¼–å·æœç´¢\"\r\n            clearable\r\n            class=\"filter-item filter-input\"\r\n        >\r\n          <template #prefix>\r\n            <span class=\"input-prefix-icon\">ğŸ”</span>\r\n          </template>\r\n        </el-input>\r\n\r\n        <el-select\r\n            v-model=\"reservationFilters.roomId\"\r\n            placeholder=\"é€‰æ‹©è‡ªä¹ å®¤\"\r\n            clearable\r\n            class=\"filter-item filter-select\"\r\n        >\r\n          <el-option v-for=\"room in reservationRoomOptions\" :key=\"room.id\" :label=\"room.label\" :value=\"room.id\" />\r\n        </el-select>\r\n\r\n        <el-date-picker\r\n            v-model=\"reservationFilters.date\"\r\n            type=\"date\"\r\n            placeholder=\"é€‰æ‹©æ—¥æœŸ\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            clearable\r\n            class=\"filter-item filter-date\"\r\n        />\r\n\r\n        <el-select\r\n            v-model=\"reservationFilters.status\"\r\n            placeholder=\"é¢„çº¦çŠ¶æ€\"\r\n            clearable\r\n            class=\"filter-item filter-select\"\r\n        >\r\n          <el-option v-for=\"item in statusOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n        </el-select>\r\n\r\n        <div class=\"filter-actions\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"handleReservationSearch\">\r\n            æŸ¥è¯¢\r\n          </el-button>\r\n          <el-button size=\"small\" @click=\"resetReservationFilters\">\r\n            é‡ç½®\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"reservation-stats\">\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">å½“å‰è®°å½•</div>\r\n          <div class=\"stat-value\">{{ reservationStats.total }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">å·²é¢„çº¦</div>\r\n          <div class=\"stat-value\">{{ reservationStats.booked }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">å·²ç­¾åˆ°</div>\r\n          <div class=\"stat-value\">{{ reservationStats.signed }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">å·²å–æ¶ˆ / è¿çº¦</div>\r\n          <div class=\"stat-value\">\r\n            {{ reservationStats.canceled }} / {{ reservationStats.violation }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"reservation-toolbar\">\r\n        <div class=\"toolbar-left\">\r\n          <el-button\r\n              type=\"success\"\r\n              size=\"small\"\r\n              :disabled=\"!canBatchCheckin\"\r\n              @click=\"handleBatchSign\"\r\n          >\r\n            æ‰¹é‡è¡¥å½•ç­¾åˆ°\r\n          </el-button>\r\n          <el-button\r\n              type=\"danger\"\r\n              size=\"small\"\r\n              plain\r\n              :disabled=\"!canBatchCancel\"\r\n              @click=\"handleBatchCancel\"\r\n          >\r\n            æ‰¹é‡å–æ¶ˆé¢„çº¦\r\n          </el-button>\r\n          <span v-if=\"reservationSelection.length\" class=\"toolbar-tip\">\r\n            å·²é€‰ä¸­ {{ reservationSelection.length }} æ¡è®°å½•\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <el-table\r\n          :data=\"reservations\"\r\n          border\r\n          stripe\r\n          size=\"small\"\r\n          @selection-change=\"handleSelectionChange\"\r\n          class=\"reservation-table\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"48\" />\r\n        <el-table-column prop=\"code\" label=\"é¢„çº¦ç¼–å·\" min-width=\"120\" />\r\n\r\n        <el-table-column prop=\"studentName\" label=\"å­¦ç”Ÿ\" min-width=\"110\">\r\n          <template #default=\"scope\">\r\n            <div class=\"student-cell\">\r\n              <div class=\"student-name\">{{ scope.row.studentName }}</div>\r\n              <div class=\"student-no\">{{ scope.row.studentNo }}</div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"room\" label=\"è‡ªä¹ å®¤\" min-width=\"130\" />\r\n        <el-table-column prop=\"seatNo\" label=\"åº§ä½\" min-width=\"80\" />\r\n        <el-table-column prop=\"date\" label=\"æ—¥æœŸ\" min-width=\"110\" />\r\n        <el-table-column prop=\"timeRange\" label=\"æ—¶é—´æ®µ\" min-width=\"120\" />\r\n\r\n        <el-table-column prop=\"status\" label=\"çŠ¶æ€\" min-width=\"90\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"getStatusTagType(scope.row.status)\" size=\"small\">\r\n              {{ getStatusText(scope.row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"å¤‡æ³¨\" min-width=\"160\">\r\n          <template #default=\"scope\">\r\n            <span class=\"remark-text\">{{ scope.row.remark || 'â€”' }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"æ“ä½œ\" fixed=\"right\" min-width=\"200\">\r\n          <template #default=\"scope\">\r\n            <div class=\"action-buttons\">\r\n              <!-- 1) å·²é¢„çº¦ï¼šåªèƒ½å–æ¶ˆ + è¯¦æƒ… -->\r\n              <template v-if=\"scope.row.status === 'reserved'\">\r\n                <el-button type=\"danger\" link size=\"small\" @click=\"handleCancel(scope.row)\">\r\n                  å–æ¶ˆé¢„çº¦\r\n                </el-button>\r\n                <el-button type=\"info\" link size=\"small\" @click=\"handleViewDetail(scope.row)\">\r\n                  æŸ¥çœ‹è¯¦æƒ…\r\n                </el-button>\r\n              </template>\r\n\r\n              <!-- 2) æœªç­¾åˆ° / è¿Ÿåˆ°ï¼šå¯è¡¥å½•ç­¾åˆ° + è¯¦æƒ… -->\r\n              <template v-else-if=\"scope.row.status === 'no_show' || scope.row.status === 'late'\">\r\n                <el-button type=\"primary\" link size=\"small\" @click=\"handleSign(scope.row)\">\r\n                  è¡¥å½•ç­¾åˆ°\r\n                </el-button>\r\n                <el-button type=\"info\" link size=\"small\" @click=\"handleViewDetail(scope.row)\">\r\n                  æŸ¥çœ‹è¯¦æƒ…\r\n                </el-button>\r\n              </template>\r\n\r\n              <!-- 3) å·²ç­¾åˆ°ï¼šå¯æ ‡è®°è¿è§„ + è¯¦æƒ… -->\r\n              <template v-else-if=\"scope.row.status === 'checked_in'\">\r\n                <el-button type=\"warning\" link size=\"small\" @click=\"handleMarkViolation(scope.row)\">\r\n                  æ ‡è®°è¿è§„\r\n                </el-button>\r\n                <el-button type=\"info\" link size=\"small\" @click=\"handleViewDetail(scope.row)\">\r\n                  æŸ¥çœ‹è¯¦æƒ…\r\n                </el-button>\r\n              </template>\r\n\r\n              <!-- 4) å·²å–æ¶ˆ / é€¾æœŸå–æ¶ˆï¼šä»…è¯¦æƒ… -->\r\n              <template v-else>\r\n                <el-button type=\"info\" link size=\"small\" @click=\"handleViewDetail(scope.row)\">\r\n                  æŸ¥çœ‹è¯¦æƒ…\r\n                </el-button>\r\n              </template>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div class=\"table-footer\">\r\n        <el-pagination\r\n            background\r\n            layout=\"total, prev, pager, next, sizes\"\r\n            :total=\"reservationTotal\"\r\n            :page-sizes=\"[8, 16, 24]\"\r\n            :page-size=\"reservationPageSize\"\r\n            :current-page=\"reservationPage\"\r\n            @size-change=\"handlePageSizeChange\"\r\n            @current-change=\"handlePageChange\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ============ ç”¨æˆ·ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\r\n    <div v-else-if=\"currentPage === 'admin-users'\" class=\"card user-card\">\r\n      <div class=\"card-header user-header\">\r\n        <div>\r\n          <h2 class=\"page-title\">ç”¨æˆ·ç®¡ç†</h2>\r\n          <p class=\"page-subtitle\">\r\n            æŸ¥è¯¢å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ã€ä¿¡ç”¨çŠ¶æ€ä¸è¿çº¦è®°å½•ï¼Œæ”¯æŒç­›é€‰ã€æ‰¹é‡é»‘åå•ä¸é¢„è­¦ç®¡ç†ã€‚\r\n          </p>\r\n        </div>\r\n        <div class=\"user-header-right\">\r\n          <el-button type=\"primary\" plain size=\"small\" @click=\"openCreateAdminDialog\">\r\n            æ–°å¢ç®¡ç†å‘˜è´¦å·\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"filter-bar\">\r\n        <el-input\r\n            v-model=\"userFilters.keyword\"\r\n            placeholder=\"æŒ‰å§“å / å­¦å·æœç´¢\"\r\n            clearable\r\n            class=\"filter-item filter-input\"\r\n        >\r\n          <template #prefix>\r\n            <span class=\"input-prefix-icon\">ğŸ”</span>\r\n          </template>\r\n        </el-input>\r\n\r\n        <el-select\r\n            v-model=\"userFilters.roleId\"\r\n            placeholder=\"ç”¨æˆ·è§’è‰²\"\r\n            clearable\r\n            class=\"filter-item filter-select\"\r\n        >\r\n          <el-option\r\n              v-for=\"role in userRoleOptions\"\r\n              :key=\"role.value\"\r\n              :label=\"role.label\"\r\n              :value=\"role.value\"\r\n          />\r\n        </el-select>\r\n\r\n        <el-select\r\n            v-model=\"userFilters.status\"\r\n            placeholder=\"ä¿¡ç”¨çŠ¶æ€\"\r\n            clearable\r\n            class=\"filter-item filter-select\"\r\n        >\r\n          <el-option\r\n              v-for=\"item in userStatusOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n\r\n        <el-checkbox v-model=\"userFilters.onlyAbnormal\" class=\"filter-item\">\r\n          ä»…æŸ¥çœ‹é¢„è­¦ / é»‘åå•\r\n        </el-checkbox>\r\n\r\n        <div class=\"filter-actions\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"handleUserSearch\">\r\n            æŸ¥è¯¢\r\n          </el-button>\r\n          <el-button size=\"small\" @click=\"resetUserFilters\">\r\n            é‡ç½®\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"reservation-stats user-stats\">\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">å½“å‰ç”¨æˆ·æ•°</div>\r\n          <div class=\"stat-value\">{{ userStats.total }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">æ­£å¸¸</div>\r\n          <div class=\"stat-value\">{{ userStats.normal }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">é¢„è­¦</div>\r\n          <div class=\"stat-value\">{{ userStats.warning }}</div>\r\n        </div>\r\n        <div class=\"stat-card\">\r\n          <div class=\"stat-label\">é»‘åå•</div>\r\n          <div class=\"stat-value\">{{ userStats.blacklist }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"reservation-toolbar user-toolbar\">\r\n        <div class=\"toolbar-left\">\r\n          <template v-if=\"String(userFilters.roleId) !== '0'\">\r\n            <el-button\r\n                type=\"warning\"\r\n                size=\"small\"\r\n                plain\r\n                :disabled=\"!userSelection.length\"\r\n                @click=\"handleBatchLock\"\r\n            >\r\n              æ‰¹é‡åŠ å…¥é»‘åå•\r\n            </el-button>\r\n            <el-button\r\n                type=\"success\"\r\n                size=\"small\"\r\n                plain\r\n                :disabled=\"!userSelection.length\"\r\n                @click=\"handleBatchUnlock\"\r\n            >\r\n              æ‰¹é‡è§£é™¤é»‘åå•\r\n            </el-button>\r\n            <span v-if=\"userSelection.length\" class=\"toolbar-tip\">\r\n              å·²é€‰ä¸­ {{ userSelection.length }} ä½ç”¨æˆ·\r\n            </span>\r\n          </template>\r\n        </div>\r\n        <div class=\"toolbar-right\">\r\n          <span class=\"toolbar-tip\">\r\n            è¯´æ˜ï¼šé¢„è­¦çŠ¶æ€ç”±ç³»ç»Ÿæ ¹æ®ä¿¡ç”¨åˆ†è‡ªåŠ¨åˆ¤å®šï¼ˆ&lt;80 åˆ†ä¸ºé¢„è­¦ï¼‰ï¼Œé»‘åå•ä»…ç®¡ç†å‘˜å¯æ‰‹åŠ¨è®¾ç½®/è§£é™¤ã€‚\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <el-table\r\n          v-loading=\"userLoading\"\r\n          :data=\"users\"\r\n          border\r\n          stripe\r\n          size=\"small\"\r\n          @selection-change=\"handleUserSelectionChange\"\r\n          class=\"user-table\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"48\" :selectable=\"userRowSelectable\" />\r\n        <el-table-column prop=\"studentNo\" label=\"å­¦å· / å·¥å·\" min-width=\"120\" />\r\n\r\n        <el-table-column prop=\"name\" label=\"å§“å\" min-width=\"120\">\r\n          <template #default=\"scope\">\r\n            <div class=\"user-name-cell\">\r\n              <div class=\"user-name-main\">\r\n                {{ scope.row.name }}\r\n                <span class=\"user-role-tag\" v-if=\"Number(scope.row.roleId) === 1\">ç”¨æˆ·</span>\r\n                <span class=\"user-role-tag admin\" v-else-if=\"Number(scope.row.roleId) === 0\">ç®¡ç†å‘˜</span>\r\n              </div>\r\n              <div class=\"user-extra\">{{ scope.row.college || 'â€”' }} Â· {{ scope.row.gradeClass || 'â€”' }}</div>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"creditScore\" label=\"ä¿¡ç”¨åˆ†\" min-width=\"90\">\r\n          <template #default=\"scope\">\r\n            <span\r\n                :class=\"[\r\n                'credit-score',\r\n                scope.row.creditScore <= 60 ? 'credit-low' : '',\r\n                scope.row.creditScore >= 95 ? 'credit-high' : ''\r\n              ]\"\r\n            >\r\n              {{ scope.row.creditScore }}\r\n            </span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"violationCount\" label=\"è¿çº¦æ¬¡æ•°\" min-width=\"90\" />\r\n\r\n        <el-table-column prop=\"status\" label=\"çŠ¶æ€\" min-width=\"90\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"getUserStatusTagType(scope.row.status)\" size=\"small\">\r\n              {{ getUserStatusText(scope.row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"lastLoginTime\" label=\"æœ€è¿‘ç™»å½•\" min-width=\"140\" />\r\n\r\n        <el-table-column label=\"è”ç³»æ–¹å¼\" min-width=\"130\">\r\n          <template #default=\"scope\">\r\n            <span class=\"user-extra\">{{ scope.row.phone || 'â€”' }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"æ“ä½œ\" fixed=\"right\" min-width=\"230\">\r\n          <template #default=\"scope\">\r\n            <div class=\"action-buttons\">\r\n              <template v-if=\"Number(scope.row.roleId) !== 0\">\r\n                <el-button type=\"primary\" link size=\"small\" @click=\"handleResetPassword(scope.row)\">\r\n                  é‡ç½®å¯†ç \r\n                </el-button>\r\n\r\n                <el-button\r\n                    v-if=\"Number(scope.row.status) !== 2\"\r\n                    type=\"danger\"\r\n                    link\r\n                    size=\"small\"\r\n                    @click=\"handleLockUser(scope.row)\"\r\n                >\r\n                  åŠ å…¥é»‘åå•\r\n                </el-button>\r\n\r\n                <el-button\r\n                    v-else\r\n                    type=\"success\"\r\n                    link\r\n                    size=\"small\"\r\n                    @click=\"handleUnlockUser(scope.row)\"\r\n                >\r\n                  è§£é™¤é»‘åå•\r\n                </el-button>\r\n              </template>\r\n\r\n              <el-button type=\"info\" link size=\"small\" @click=\"handleViewUserDetail(scope.row)\">\r\n                è¯¦æƒ…\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div class=\"table-footer\">\r\n        <el-pagination\r\n            background\r\n            layout=\"total, prev, pager, next, sizes\"\r\n            :total=\"userTotal\"\r\n            :page-sizes=\"[8, 16, 24]\"\r\n            :page-size=\"userPageSize\"\r\n            :current-page=\"userPage\"\r\n            @size-change=\"handleUserPageSizeChange\"\r\n            @current-change=\"handleUserPageChange\"\r\n        />\r\n      </div>\r\n\r\n      <!-- ç”¨æˆ·è¯¦æƒ…ï¼ˆæŠ½å±‰ï¼‰ -->\r\n      <el-drawer\r\n          v-model=\"userDetailVisible\"\r\n          :with-header=\"false\"\r\n          size=\"520px\"\r\n          append-to-body\r\n          class=\"user-detail-drawer\"\r\n      >\r\n        <div class=\"user-detail\" v-loading=\"userDetailLoading\">\r\n          <div class=\"ud-head\">\r\n            <div class=\"ud-avatar\">{{ (userDetail.user?.name || 'U').slice(0, 1) }}</div>\r\n            <div class=\"ud-meta\">\r\n              <div class=\"ud-name-line\">\r\n                <span class=\"ud-name\">{{ userDetail.user?.name || 'â€”' }}</span>\r\n                <el-tag size=\"small\" :type=\"Number(userDetail.user?.roleId) === 0 ? 'info' : 'primary'\" class=\"ud-tag\">\r\n                  {{ Number(userDetail.user?.roleId) === 0 ? 'ç®¡ç†å‘˜' : 'ç”¨æˆ·' }}\r\n                </el-tag>\r\n                <el-tag size=\"small\" :type=\"getUserStatusTagType(userDetail.user?.status)\" class=\"ud-tag\">\r\n                  {{ getUserStatusText(userDetail.user?.status) }}\r\n                </el-tag>\r\n              </div>\r\n              <div class=\"ud-sub\">\r\n                <span>è´¦å·ï¼š{{ userDetail.user?.account || 'â€”' }}</span>\r\n                <span class=\"dot\">Â·</span>\r\n                <span>å­¦å·/å·¥å·ï¼š{{ userDetail.user?.studentNo || 'â€”' }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"ud-stats\">\r\n            <div class=\"ud-stat\">\r\n              <div class=\"k\">ä¿¡ç”¨åˆ†</div>\r\n              <div class=\"v\">{{ userDetail.user?.creditScore ?? 'â€”' }}</div>\r\n            </div>\r\n            <div class=\"ud-stat\">\r\n              <div class=\"k\">è¿çº¦æ¬¡æ•°</div>\r\n              <div class=\"v\">{{ userDetail.violationCount ?? 0 }}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <el-divider />\r\n\r\n          <el-descriptions border size=\"small\" :column=\"1\" class=\"ud-desc\">\r\n            <el-descriptions-item label=\"å­¦é™¢\">{{ userDetail.user?.college || 'â€”' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"ç­çº§\">{{ userDetail.user?.gradeClass || 'â€”' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"æ‰‹æœºå·\">{{ userDetail.user?.phone || 'â€”' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"é‚®ç®±\">{{ userDetail.user?.email || 'â€”' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"æœ€è¿‘ç™»å½•\">\r\n              {{ userDetail.user?.lastLoginTime || 'â€”' }}\r\n              <span class=\"ud-muted\" v-if=\"userDetail.user?.lastLoginIp\">ï¼ˆ{{ userDetail.user?.lastLoginIp }}ï¼‰</span>\r\n            </el-descriptions-item>\r\n            <el-descriptions-item label=\"åˆ›å»ºæ—¶é—´\">{{ userDetail.user?.createTime || 'â€”' }}</el-descriptions-item>\r\n            <el-descriptions-item label=\"å¤‡æ³¨\">{{ userDetail.user?.profileRemark || 'â€”' }}</el-descriptions-item>\r\n          </el-descriptions>\r\n\r\n          <el-divider />\r\n\r\n          <div class=\"ud-section\">\r\n            <div class=\"ud-section-title\">æœ€è¿‘è¿çº¦è®°å½•</div>\r\n            <el-table\r\n                :data=\"userDetail.recentViolations || []\"\r\n                size=\"small\"\r\n                border\r\n                class=\"ud-table\"\r\n                empty-text=\"æš‚æ— è¿çº¦è®°å½•\"\r\n            >\r\n              <el-table-column prop=\"vDate\" label=\"æ—¥æœŸ\" min-width=\"110\" />\r\n              <el-table-column prop=\"vType\" label=\"ç±»å‹\" min-width=\"90\">\r\n                <template #default=\"scope\">\r\n                  <el-tag size=\"small\" :type=\"scope.row.vType === 'no_show' ? 'danger' : 'warning'\">\r\n                    {{ getViolationTypeText(scope.row.vType) }}\r\n                  </el-tag>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column prop=\"penaltyScore\" label=\"æ‰£åˆ†\" min-width=\"70\" />\r\n              <el-table-column prop=\"description\" label=\"è¯´æ˜\" min-width=\"180\" show-overflow-tooltip />\r\n              <el-table-column prop=\"createTime\" label=\"è®°å½•æ—¶é—´\" min-width=\"160\" />\r\n            </el-table>\r\n          </div>\r\n        </div>\r\n      </el-drawer>\r\n\r\n      <!-- æ–°å¢ç®¡ç†å‘˜è´¦å·ï¼ˆå¼¹çª—ï¼‰ -->\r\n      <el-dialog\r\n          v-model=\"createAdminVisible\"\r\n          title=\"æ–°å¢ç®¡ç†å‘˜è´¦å·\"\r\n          width=\"420px\"\r\n          top=\"25vh\"\r\n          align-center\r\n          :close-on-click-modal=\"false\"\r\n      >\r\n        <el-form\r\n            ref=\"createAdminFormRef\"\r\n            :model=\"createAdminForm\"\r\n            :rules=\"createAdminRules\"\r\n            label-width=\"70px\"\r\n        >\r\n          <el-form-item label=\"è´¦å·\" prop=\"account\">\r\n            <el-input v-model=\"createAdminForm.account\" placeholder=\"ç”¨äºç™»å½•\" clearable />\r\n          </el-form-item>\r\n          <el-form-item label=\"å§“å\" prop=\"name\">\r\n            <el-input v-model=\"createAdminForm.name\" placeholder=\"ç®¡ç†å‘˜å§“å\" clearable />\r\n          </el-form-item>\r\n          <el-form-item label=\"å¯†ç \" prop=\"password\">\r\n            <el-input v-model=\"createAdminForm.password\" type=\"password\" show-password placeholder=\"è‡³å°‘ 6 ä½\" />\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <template #footer>\r\n          <el-button @click=\"createAdminVisible = false\">å–æ¶ˆ</el-button>\r\n          <el-button type=\"primary\" :loading=\"createAdminLoading\" @click=\"submitCreateAdmin\">åˆ›å»º</el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </div>\r\n\r\n    <!-- ============ åº§ä½ç®¡ç†ï¼ˆæ•´åˆç‰ˆï¼‰ ============ -->\r\n    <div v-else-if=\"currentPage === 'admin-seats'\" class=\"seat-manage\">\r\n      <!-- é¡¶éƒ¨ï¼šæ ‡é¢˜ + å½“å‰é€‰æ‹© -->\r\n      <div class=\"card seat-head-card\">\r\n        <div class=\"seat-head-row\">\r\n          <div class=\"seat-head-left\">\r\n            <h2 class=\"page-title\">åº§ä½ç®¡ç†</h2>\r\n            <p class=\"page-subtitle\">\r\n              æŒ‰æ¥¼æ ‹ã€è‡ªä¹ å®¤é…ç½®å¼€æ”¾çŠ¶æ€ä¸åº§ä½å¸ƒå±€ï¼Œæ”¯æŒå¿«é€Ÿç¦ç”¨é—®é¢˜åº§ä½ï¼Œå¹¶è®¾ç½®é¢„çº¦è§„åˆ™ä¸å¼€æ”¾æ—¶é—´ã€‚\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"seat-filter-row\">\r\n          <div class=\"seat-filter-left\">\r\n            <el-select v-model=\"currentCampus\" size=\"small\" class=\"top-select\" placeholder=\"é€‰æ‹©æ ¡åŒº\" :teleported=\"false\">\r\n              <el-option v-for=\"item in campusOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n            </el-select>\r\n\r\n            <el-select v-model=\"currentBuild\" size=\"small\" class=\"top-select\" placeholder=\"é€‰æ‹©æ¥¼æ ‹\" clearable :teleported=\"false\">\r\n              <el-option v-for=\"item in buildOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n            </el-select>\r\n\r\n            <label class=\"seat-filter-switch\">\r\n              <span>ä»…æ˜¾ç¤ºå¼€æ”¾</span>\r\n              <el-switch v-model=\"onlyShowOpen\" size=\"small\" @change=\"handleOnlyShowOpenChange\" />\r\n            </label>\r\n\r\n            <div class=\"seat-filter-actions\">\r\n              <el-button size=\"small\" type=\"primary\" plain @click=\"openCreateRoomDialog\">æ–°å»ºè‡ªä¹ å®¤</el-button>\r\n              <el-button size=\"small\" plain @click=\"exportGlobalConfig\">å¯¼å‡ºå…¨å±€é…ç½®</el-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"seat-summary-box seat-summary-inline\">\r\n            <div class=\"summary-title\">\r\n              <span class=\"summary-dot\"></span>\r\n              <span>å½“å‰é€‰æ‹©</span>\r\n            </div>\r\n            <div class=\"summary-grid\">\r\n              <div class=\"summary-item\">\r\n                <div class=\"summary-label\">æ ¡åŒº</div>\r\n                <div class=\"summary-value\">\r\n                  {{ currentCampus ? campusLabel(currentCampus) : 'å…¨éƒ¨æ ¡åŒº' }}\r\n                </div>\r\n              </div>\r\n              <div class=\"summary-item\">\r\n                <div class=\"summary-label\">æ¥¼æ ‹</div>\r\n                <div class=\"summary-value\">\r\n                  {{ currentBuild ? buildLabel(currentBuild) : 'å…¨éƒ¨æ¥¼æ ‹' }}\r\n                </div>\r\n              </div>\r\n              <div class=\"summary-item\">\r\n                <div class=\"summary-label\">è‡ªä¹ å®¤</div>\r\n                <div class=\"summary-value\">{{ selectedRoom ? selectedRoom.name : 'æœªé€‰æ‹©' }}</div>\r\n              </div>\r\n              <div class=\"summary-item\">\r\n                <div class=\"summary-label\">ç­›é€‰</div>\r\n                <div class=\"summary-value\">\r\n                  <span class=\"mini-pill\" :class=\"{ on: onlyShowOpen }\">{{ onlyShowOpen ? 'ä»…å¼€æ”¾' : 'å…¨éƒ¨' }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ä¸»ä½“ï¼šå·¦ä¾§è‡ªä¹ å®¤åˆ—è¡¨ + å³ä¾§å¸ƒå±€/è§„åˆ™ -->\r\n      <div class=\"seat-layout\">\r\n        <div class=\"card seat-left-card\">\r\n          <div class=\"left-header\">\r\n            <div class=\"left-header-main\">\r\n              <h3 class=\"left-title\">è‡ªä¹ å®¤åˆ—è¡¨</h3>\r\n              <p class=\"left-subtitle\">æ”¯æŒå…³é”®è¯ä¸å®¹é‡ç­›é€‰ï¼Œç‚¹å‡»æŸ¥çœ‹åº§ä½å¸ƒå±€ã€‚</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"left-filter\">\r\n            <el-input v-model=\"roomKeyword\" placeholder=\"æŒ‰åç§° / æ¥¼å±‚ / æ¥¼æ ‹æœç´¢\" clearable size=\"small\" class=\"left-filter-input\" @input=\"handleSeatKeywordInput\">\r\n              <template #prefix><span class=\"input-prefix-icon\">ğŸ”</span></template>\r\n            </el-input>\r\n\r\n            <el-radio-group v-model=\"roomCapacityFilter\" size=\"small\" class=\"capacity-radio\">\r\n              <el-radio-button label=\"all\">å…¨éƒ¨å®¹é‡</el-radio-button>\r\n              <el-radio-button label=\"small\">â‰¤40 äºº</el-radio-button>\r\n              <el-radio-button label=\"medium\">40-80 äºº</el-radio-button>\r\n              <el-radio-button label=\"large\">â‰¥80 äºº</el-radio-button>\r\n            </el-radio-group>\r\n          </div>\r\n\r\n          <div class=\"room-list-wrap\">\r\n            <el-scrollbar height=\"520px\" class=\"room-scroll\">\r\n              <div class=\"room-list\">\r\n                <div\r\n                    v-for=\"room in filteredRooms\"\r\n                    :key=\"room.id\"\r\n                    class=\"room-item\"\r\n                    :class=\"{ active: room.id === selectedRoomId, closed: room.status !== 'open' }\"\r\n                    @click=\"handleSelectRoom(room)\"\r\n                >\r\n                  <div class=\"room-item-main\">\r\n                    <div class=\"room-item-title\">{{ room.name }}</div>\r\n                    <div class=\"room-item-sub\">{{ room.building }} Â· {{ room.floor }}å±‚ Â· å®¹é‡ {{ room.capacity }}</div>\r\n                  </div>\r\n\r\n                  <div class=\"room-item-meta\">\r\n                    <div class=\"room-item-usage\">{{ room.usedSeats }}/{{ room.capacity }}</div>\r\n                    <el-tag size=\"small\" :type=\"room.status === 'open' ? 'success' : 'info'\">\r\n                      {{ room.status === 'open' ? 'å¼€æ”¾ä¸­' : 'æœªå¼€æ”¾' }}\r\n                    </el-tag>\r\n                  </div>\r\n\r\n                  <div class=\"room-item-actions\">\r\n                    <el-button type=\"primary\" link size=\"small\" @click.stop=\"toggleRoomOpen(room)\">\r\n                      {{ room.status === 'open' ? 'å…³é—­' : 'å¼€æ”¾' }}\r\n                    </el-button>\r\n                    <el-button type=\"info\" link size=\"small\" @click.stop=\"handleEditRoom(room)\">è®¾ç½®</el-button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div v-if=\"!filteredRooms.length\" class=\"room-empty\">\r\n                  æš‚æ— åŒ¹é…è‡ªä¹ å®¤\r\n                </div>\r\n              </div>\r\n            </el-scrollbar>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"seat-right\">\r\n          <div class=\"card seat-right-card\">\r\n            <div class=\"right-header\">\r\n              <div>\r\n                <h3 class=\"right-title\">{{ selectedRoom ? selectedRoom.name : 'è¯·é€‰æ‹©å·¦ä¾§è‡ªä¹ å®¤' }}</h3>\r\n                <p class=\"right-subtitle\" v-if=\"selectedRoom\">\r\n                  {{ selectedRoom.building }} Â· {{ selectedRoom.floor }}å±‚ Â· å…± {{ selectedRoom.capacity }} ä¸ªåº§ä½\r\n                </p>\r\n                <p class=\"right-subtitle\" v-else>åœ¨å·¦ä¾§é€‰æ‹©ä¸€ä¸ªè‡ªä¹ å®¤å³å¯ç¼–è¾‘åº§ä½å¸ƒå±€ä¸é¢„çº¦è§„åˆ™ã€‚</p>\r\n              </div>\r\n\r\n              <div class=\"right-header-actions\" v-if=\"selectedRoom\">\r\n                <el-button size=\"small\" plain @click=\"exportRoomSeatConfig\">å¯¼å‡ºåº§ä½é…ç½®</el-button>\r\n              </div>\r\n            </div>\r\n\r\n            <template v-if=\"selectedRoom\">\r\n              <div class=\"seat-stats seat-stats-compact\">\r\n                <div class=\"stat-card\">\r\n                  <div class=\"stat-label\">å¯é¢„çº¦</div>\r\n                  <div class=\"stat-value\">{{ seatStats.free }}</div>\r\n                </div>\r\n                <div class=\"stat-card\">\r\n                  <div class=\"stat-label\">å·²å ç”¨</div>\r\n                  <div class=\"stat-value\">{{ seatStats.occupied }}</div>\r\n                </div>\r\n                <div class=\"stat-card\">\r\n                  <div class=\"stat-label\">ç¦ç”¨</div>\r\n                  <div class=\"stat-value\">{{ seatStats.disabled }}</div>\r\n                </div>\r\n                <div class=\"stat-card\">\r\n                  <div class=\"stat-label\">å°é”åŒºåŸŸ</div>\r\n                  <div class=\"stat-value\">{{ seatStats.blockedArea }}</div>\r\n                </div>\r\n              </div>\r\n\r\n              <el-tabs v-model=\"activeTab\" class=\"seat-tabs\">\r\n                <el-tab-pane label=\"åº§ä½å¸ƒå±€\" name=\"layout\">\r\n                  <div class=\"layout-toolbar\">\r\n                    <div class=\"layout-toolbar-left\">\r\n                      <label class=\"seat-filter-switch\">\r\n                        <span>æ˜¾ç¤ºåº§ä½ç¼–å·</span>\r\n                        <el-switch v-model=\"showSeatNo\" size=\"small\" />\r\n                      </label>\r\n                      <label class=\"seat-filter-switch\">\r\n                        <span>å ç”¨ç¤ºæ„</span>\r\n                        <el-switch v-model=\"showDemoOccupied\" size=\"small\" />\r\n                      </label>\r\n                    </div>\r\n\r\n                    <div class=\"layout-toolbar-right\">\r\n                      <el-button size=\"small\" plain @click=\"handleBatchDisable\">æ‰¹é‡ç¦ç”¨é€‰ä¸­</el-button>\r\n                      <el-button size=\"small\" plain @click=\"handleClearSelection\">æ¸…ç©ºé€‰æ‹©</el-button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"seat-legend\">\r\n                    <div class=\"legend-item\"><span class=\"legend-dot legend-free\" /> å¯é¢„çº¦</div>\r\n                    <div class=\"legend-item\"><span class=\"legend-dot legend-occupied\" /> å·²å ç”¨</div>\r\n                    <div class=\"legend-item\"><span class=\"legend-dot legend-disabled\" /> ç¦ç”¨</div>\r\n                    <div class=\"legend-item\"><span class=\"legend-dot legend-selected\" /> å½“å‰é€‰æ‹©</div>\r\n                  </div>\r\n\r\n                  <div class=\"seat-grid\">\r\n                    <div v-for=\"row in seatGrid\" :key=\"row.rowNo\" class=\"seat-row\">\r\n                      <div class=\"seat-row-label\">ç¬¬ {{ row.rowNo }} è¡Œ</div>\r\n                      <div class=\"seat-row-seats\" :style=\"seatRowStyle(row)\">\r\n                        <button\r\n                            v-for=\"seat in row.seats\"\r\n                            :key=\"seat.id\"\r\n                            type=\"button\"\r\n                            class=\"seat-cell\"\r\n                            :class=\"seatCellClass(seat)\"\r\n                            @click=\"handleSeatClick(seat)\"\r\n                        >\r\n                          <span class=\"seat-no\" v-if=\"showSeatNo\">{{ seat.label }}</span>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"seat-hint\">\r\n                    ç‚¹å‡»åº§ä½å¯é€‰ä¸­/å–æ¶ˆé€‰ä¸­ï¼›â€œæ‰¹é‡ç¦ç”¨â€ä¼šå°†é€‰ä¸­åº§ä½ç½®ä¸ºç¦ç”¨çŠ¶æ€ã€‚\r\n                  </div>\r\n                </el-tab-pane>\r\n\r\n                <el-tab-pane label=\"é¢„çº¦è§„åˆ™ä¸å¼€æ”¾æ—¶é—´\" name=\"rules\">\r\n                  <el-form :model=\"seatRule\" label-width=\"150px\" size=\"small\" class=\"rule-form\">\r\n                    <el-form-item label=\"æ˜¯å¦å…è®¸è·¨æ—¶æ®µé¢„çº¦\">\r\n                      <el-switch v-model=\"seatRule.allowCrossTime\" />\r\n                      <span class=\"item-desc\">å¼€å¯åå¯ä¸€æ¬¡é¢„çº¦å¤šä¸ªè¿ç»­æ—¶æ®µ</span>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"å•æ¬¡æœ€é•¿é¢„çº¦æ—¶é•¿\">\r\n                      <div class=\"inline-group\">\r\n                        <el-input-number v-model=\"seatRule.maxHoursPerOrder\" :min=\"1\" :max=\"12\" />\r\n                        <span class=\"item-desc\">å°æ—¶</span>\r\n                      </div>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"æ¯æ—¥æœ€å¤šé¢„çº¦æ¬¡æ•°\">\r\n                      <el-input-number v-model=\"seatRule.maxOrdersPerDay\" :min=\"1\" :max=\"6\" />\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"æœªç­¾åˆ°è‡ªåŠ¨é‡Šæ”¾\">\r\n                      <el-switch v-model=\"seatRule.autoReleaseNoSign\" />\r\n                      <span class=\"item-desc\">å¼€å¯åå°†è‡ªåŠ¨å–æ¶ˆæœªæŒ‰æ—¶ç­¾åˆ°é¢„çº¦</span>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"é‡Šæ”¾é˜ˆå€¼ï¼ˆåˆ†é’Ÿï¼‰\" v-if=\"seatRule.autoReleaseNoSign\">\r\n                      <el-input-number v-model=\"seatRule.releaseAfterMinutes\" :min=\"5\" :max=\"60\" />\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"è¿çº¦å¤„ç†ç­–ç•¥\">\r\n                      <el-select v-model=\"seatRule.violationStrategy\" placeholder=\"è¯·é€‰æ‹©\" :teleported=\"false\">\r\n                        <el-option label=\"å½“å¤©ç¦æ­¢å†æ¬¡é¢„çº¦\" value=\"day-ban\" />\r\n                        <el-option label=\"æ‰£é™¤ä¿¡ç”¨åˆ†\" value=\"score\" />\r\n                        <el-option label=\"åŠ å…¥é¢„è­¦åå•\" value=\"warn\" />\r\n                      </el-select>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"è‡ªä¹ å®¤è¯´æ˜\">\r\n                      <el-input v-model=\"seatRule.description\" type=\"textarea\" :rows=\"4\" maxlength=\"200\" show-word-limit placeholder=\"å¡«å†™è‡ªä¹ å®¤å¼€æ”¾è¯´æ˜ã€æ³¨æ„äº‹é¡¹ç­‰\" />\r\n                    </el-form-item>\r\n\r\n                    <el-form-item>\r\n                      <el-button type=\"primary\">ä¿å­˜è§„åˆ™é…ç½®</el-button>\r\n                      <el-button>é‡ç½®</el-button>\r\n                    </el-form-item>\r\n                  </el-form>\r\n                </el-tab-pane>\r\n              </el-tabs>\r\n            </template>\r\n\r\n            <div v-else class=\"seat-empty-state\">\r\n              <div class=\"empty-title\">è¿˜æ²¡æœ‰é€‰ä¸­è‡ªä¹ å®¤</div>\r\n              <div class=\"empty-desc\">ä»å·¦ä¾§åˆ—è¡¨é€‰æ‹©ä¸€ä¸ªè‡ªä¹ å®¤åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºåº§ä½å¸ƒå±€ä¸é¢„çº¦è§„åˆ™é…ç½®ã€‚</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <!-- æ–°å»ºè‡ªä¹ å®¤å¼¹çª— -->\r\n    <el-dialog v-model=\"createRoomVisible\" title=\"æ–°å»ºè‡ªä¹ å®¤\" width=\"520px\" :close-on-click-modal=\"false\" class=\"create-room-dialog\">\r\n      <el-form :model=\"createRoomForm\" :rules=\"createRoomRules\" ref=\"createRoomFormRef\" label-width=\"92px\">\r\n        <el-form-item label=\"æ ¡åŒº\" prop=\"campus\">\r\n          <el-select v-model=\"createRoomForm.campus\" placeholder=\"è¯·é€‰æ‹©æ ¡åŒº\" :teleported=\"false\" style=\"width:100%\" @change=\"handleCreateRoomCampusChange\">\r\n            <el-option v-for=\"c in campusOptions\" :key=\"c.value\" :label=\"c.label\" :value=\"c.value\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"æ¥¼æ ‹\" prop=\"building\">\r\n          <el-select v-model=\"createRoomForm.building\" placeholder=\"è¯·é€‰æ‹©æ¥¼æ ‹\" :teleported=\"false\" style=\"width:100%\">\r\n            <el-option v-for=\"b in createRoomBuildingOptions\" :key=\"b.value\" :label=\"b.label\" :value=\"b.value\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"æˆ¿é—´å·\" prop=\"roomName\">\r\n          <el-input v-model=\"createRoomForm.roomName\" placeholder=\"å¦‚ 301 / 401\" maxlength=\"20\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"åº§ä½æ•°\" prop=\"totalSeats\">\r\n          <el-input-number v-model=\"createRoomForm.totalSeats\" :min=\"1\" :max=\"300\" style=\"width: 180px\" @change=\"syncOpenSeats\" />\r\n          <span class=\"form-tip\">é»˜è®¤æŒ‰ 8 åˆ—è‡ªåŠ¨æ’å¸ƒ</span>\r\n        </el-form-item>\r\n        <el-form-item label=\"å¼€æ”¾åº§ä½\" prop=\"openSeats\">\r\n          <el-input-number v-model=\"createRoomForm.openSeats\" :min=\"1\" :max=\"300\" style=\"width: 180px\" />\r\n          <span class=\"form-tip\">å½“å‰ç‰ˆæœ¬ä¼šè‡ªåŠ¨ç­‰äºåº§ä½æ•°</span>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"createRoomVisible=false\">å–æ¶ˆ</el-button>\r\n        <el-button type=\"primary\" :loading=\"createRoomLoading\" @click=\"submitCreateRoom\">åˆ›å»º</el-button>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!-- ============ æŠ•è¯‰å¤„ç†ï¼ˆAdmin Feedbackï¼‰ ============ -->\r\n    <div v-if=\"currentPage === 'admin-complaints'\" class=\"complaints-page\">\r\n      <div class=\"card complaints-head\">\r\n        <div class=\"complaints-head-left\">\r\n          <h2 class=\"page-title\">æŠ•è¯‰å¤„ç†</h2>\r\n          <p class=\"page-subtitle\">æŸ¥çœ‹å­¦ç”Ÿè¯„ä»·/æŠ•è¯‰/å»ºè®®ï¼Œå›å¤å¹¶è·Ÿè¸ªå¤„ç†è¿›åº¦ï¼›å¿…è¦æ—¶å¯å…³è”å¤„ç†é¢„çº¦ã€‚</p>\r\n        </div>\r\n\r\n        <div class=\"complaints-head-right\">\r\n          <div class=\"fb-stats\">\r\n            <div class=\"fb-stat\">\r\n              <div class=\"fb-stat-num\">{{ fbAdminStats.pending }}</div>\r\n              <div class=\"fb-stat-label\">å¾…å¤„ç†</div>\r\n            </div>\r\n            <div class=\"fb-stat\">\r\n              <div class=\"fb-stat-num\">{{ fbAdminStats.processing }}</div>\r\n              <div class=\"fb-stat-label\">å¤„ç†ä¸­</div>\r\n            </div>\r\n            <div class=\"fb-stat\">\r\n              <div class=\"fb-stat-num\">{{ fbAdminStats.resolved }}</div>\r\n              <div class=\"fb-stat-label\">å·²è§£å†³</div>\r\n            </div>\r\n          </div>\r\n\r\n          <el-button size=\"small\" @click=\"loadAdminFeedback(true)\">åˆ·æ–°</el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card complaints-body\">\r\n        <div class=\"complaints-toolbar\">\r\n          <div class=\"tool-left\">\r\n            <el-checkbox v-model=\"fbAdminOnlyPending\" @change=\"onFbAdminFilterChange\">ä»…æŸ¥çœ‹å¾…å¤„ç†</el-checkbox>\r\n\r\n            <el-select\r\n                v-model=\"fbAdminStatusFilter\"\r\n                :teleported=\"false\"\r\n                size=\"small\"\r\n                clearable\r\n                placeholder=\"å…¨éƒ¨çŠ¶æ€\"\r\n                style=\"width: 150px\"\r\n                @change=\"onFbAdminFilterChange\"\r\n            >\r\n              <el-option label=\"å…¨éƒ¨çŠ¶æ€\" value=\"\" />\r\n              <el-option label=\"å¾…å¤„ç†\" value=\"pending\" />\r\n              <el-option label=\"å¤„ç†ä¸­\" value=\"processing\" />\r\n              <el-option label=\"å·²è§£å†³\" value=\"resolved\" />\r\n            </el-select>\r\n\r\n            <el-select\r\n                v-model=\"fbAdminCategoryFilter\"\r\n                :teleported=\"false\"\r\n                size=\"small\"\r\n                clearable\r\n                placeholder=\"å…¨éƒ¨ç±»å‹\"\r\n                style=\"width: 170px\"\r\n                @change=\"onFbAdminFilterChange\"\r\n            >\r\n              <el-option label=\"å…¨éƒ¨ç±»å‹\" value=\"\" />\r\n              <el-option label=\"ç¯å¢ƒè¯„ä»·\" value=\"env\" />\r\n              <el-option label=\"æœåŠ¡è¯„ä»·\" value=\"service\" />\r\n              <el-option label=\"å»ºè®®\" value=\"suggestion\" />\r\n              <el-option label=\"æŠ•è¯‰\" value=\"complaint\" />\r\n              <el-option label=\"ç”³è¯‰\" value=\"appeal\" />\r\n              <el-option label=\"å…¶ä»–\" value=\"other\" />\r\n            </el-select>\r\n          </div>\r\n\r\n          <div class=\"tool-right\">\r\n            <el-input\r\n                v-model=\"fbAdminKeyword\"\r\n                size=\"small\"\r\n                clearable\r\n                placeholder=\"æœç´¢ï¼šå†…å®¹/å§“å/å­¦å·/é¢„çº¦ID\"\r\n                style=\"width: 340px\"\r\n                @keyup.enter=\"loadAdminFeedback(true)\"\r\n            >\r\n              <template #append>\r\n                <el-button @click=\"loadAdminFeedback(true)\">æœç´¢</el-button>\r\n              </template>\r\n            </el-input>\r\n          </div>\r\n        </div>\r\n\r\n        <el-table\r\n            :data=\"fbAdminList\"\r\n            v-loading=\"fbAdminLoading\"\r\n            border\r\n            stripe\r\n            size=\"small\"\r\n            class=\"fb-admin-table\"\r\n        >\r\n          <el-table-column prop=\"id\" label=\"#\" width=\"72\" />\r\n\r\n          <el-table-column label=\"ç±»å‹\" width=\"110\">\r\n            <template #default=\"scope\">\r\n              <el-tag size=\"small\" :type=\"fbAdminCategoryTagType(scope.row.category)\">\r\n                {{ fbAdminCategoryText(scope.row.category) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"ç”¨æˆ·\" min-width=\"160\">\r\n            <template #default=\"scope\">\r\n              <div class=\"fb-user\">\r\n                <div class=\"fb-user-name\">{{ scope.row.userName || '-' }}</div>\r\n                <div class=\"fb-user-sub\">{{ scope.row.studentNo || '-' }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"å…³è”é¢„çº¦\" min-width=\"220\">\r\n            <template #default=\"scope\">\r\n              <div class=\"fb-rel\">\r\n                <div class=\"fb-rel-main\">{{ scope.row.roomLabel || '-' }}</div>\r\n                <div class=\"fb-rel-sub\">{{ scope.row.reservationLabel || (scope.row.reservationId ? ('é¢„çº¦ID ' + scope.row.reservationId) : 'æœªå…³è”é¢„çº¦') }}</div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"è¯„åˆ†\" width=\"90\" align=\"center\">\r\n            <template #default=\"scope\">\r\n              <span v-if=\"scope.row.rating\">{{ scope.row.rating }}</span>\r\n              <span v-else class=\"fb-muted\">-</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"çŠ¶æ€\" width=\"110\">\r\n            <template #default=\"scope\">\r\n              <el-tag size=\"small\" :type=\"fbAdminStatusTagType(scope.row.status)\">\r\n                {{ fbAdminStatusText(scope.row.status) }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"æäº¤æ—¶é—´\" width=\"160\">\r\n            <template #default=\"scope\">{{ formatYmdhm(scope.row.createTime) }}</template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"æ›´æ–°æ—¶é—´\" width=\"160\">\r\n            <template #default=\"scope\">{{ formatYmdhm(scope.row.updateTime) }}</template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"æ“ä½œ\" width=\"150\" fixed=\"right\">\r\n            <template #default=\"scope\">\r\n              <div class=\"fb-row-actions\">\r\n                <el-button size=\"small\" type=\"primary\" plain @click=\"openFbAdminDetail(scope.row)\">å¤„ç†</el-button>\r\n                <el-button size=\"small\" @click=\"quickResolveFb(scope.row)\">å·²è§£å†³</el-button>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <div class=\"fb-admin-pagination\">\r\n          <el-pagination\r\n              background\r\n              layout=\"prev, pager, next, jumper\"\r\n              :current-page=\"fbAdminPageNum\"\r\n              :page-size=\"fbAdminPageSize\"\r\n              :total=\"fbAdminTotal\"\r\n              @current-change=\"fbAdminPageChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <el-drawer\r\n          v-model=\"fbAdminDrawerVisible\"\r\n          size=\"520px\"\r\n          :with-header=\"false\"\r\n          class=\"fb-admin-drawer\"\r\n      >\r\n        <div v-if=\"fbAdminDetail\" class=\"fb-drawer\">\r\n          <div class=\"fb-drawer-head\">\r\n            <div>\r\n              <div class=\"fb-drawer-title\">åé¦ˆ #{{ fbAdminDetail.id }}</div>\r\n              <div class=\"fb-drawer-sub\">\r\n                {{ fbAdminCategoryText(fbAdminDetail.category) }} Â· {{ fbAdminStatusText(fbAdminDetail.status) }}\r\n              </div>\r\n            </div>\r\n            <el-button size=\"small\" @click=\"fbAdminDrawerVisible = false\">å…³é—­</el-button>\r\n          </div>\r\n\r\n          <div class=\"fb-drawer-card\">\r\n            <div class=\"fb-kv\">\r\n              <div class=\"k\">ç”¨æˆ·</div>\r\n              <div class=\"v\">{{ fbAdminDetail.userName || '-' }}ï¼ˆ{{ fbAdminDetail.studentNo || '-' }}ï¼‰</div>\r\n            </div>\r\n            <div class=\"fb-kv\">\r\n              <div class=\"k\">è‡ªä¹ å®¤</div>\r\n              <div class=\"v\">{{ fbAdminDetail.roomLabel || '-' }}</div>\r\n            </div>\r\n            <div class=\"fb-kv\">\r\n              <div class=\"k\">å…³è”é¢„çº¦</div>\r\n              <div class=\"v\">{{ fbAdminDetail.reservationLabel || (fbAdminDetail.reservationId ? ('é¢„çº¦ID ' + fbAdminDetail.reservationId) : 'æœªå…³è”é¢„çº¦') }}</div>\r\n            </div>\r\n            <div class=\"fb-kv\">\r\n              <div class=\"k\">è¯„åˆ†</div>\r\n              <div class=\"v\">{{ fbAdminDetail.rating || '-' }}</div>\r\n            </div>\r\n            <div class=\"fb-kv\">\r\n              <div class=\"k\">æäº¤æ—¶é—´</div>\r\n              <div class=\"v\">{{ formatYmdhm(fbAdminDetail.createTime) }}</div>\r\n            </div>\r\n\r\n            <div class=\"fb-content\">\r\n              <div class=\"fb-content-title\">åé¦ˆå†…å®¹</div>\r\n              <div class=\"fb-content-body\">{{ fbAdminDetail.content || 'ï¼ˆç©ºï¼‰' }}</div>\r\n            </div>\r\n\r\n            <div v-if=\"fbAdminDetail.reply\" class=\"fb-content\">\r\n              <div class=\"fb-content-title\">å·²å›å¤</div>\r\n              <div class=\"fb-content-body\">{{ fbAdminDetail.reply }}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"fb-drawer-card\">\r\n            <div class=\"fb-form-title\">å¤„ç†ä¸å›å¤</div>\r\n\r\n            <el-form :model=\"fbAdminHandleForm\" label-width=\"86px\" class=\"fb-handle-form\">\r\n              <el-form-item label=\"å¤„ç†çŠ¶æ€\">\r\n                <el-radio-group v-model=\"fbAdminHandleForm.status\">\r\n                  <el-radio label=\"pending\">å¾…å¤„ç†</el-radio>\r\n                  <el-radio label=\"processing\">å¤„ç†ä¸­</el-radio>\r\n                  <el-radio label=\"resolved\">å·²è§£å†³</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n\r\n              <el-form-item label=\"å›å¤å†…å®¹\">\r\n                <el-input\r\n                    v-model=\"fbAdminHandleForm.reply\"\r\n                    type=\"textarea\"\r\n                    :rows=\"5\"\r\n                    maxlength=\"800\"\r\n                    show-word-limit\r\n                    placeholder=\"ç»™å­¦ç”Ÿçš„å›å¤ï¼ˆå¯é€‰ï¼Œä½†å»ºè®®åœ¨æ ‡è®°å·²è§£å†³æ—¶å¡«å†™ï¼‰\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item v-if=\"fbAdminDetail && fbAdminDetail.reservationId\" label=\"å…³è”é¢„çº¦\">\r\n                <el-checkbox v-model=\"fbAdminHandleForm.cancelReservation\">\r\n                  å–æ¶ˆè¯¥é¢„çº¦ï¼ˆç®¡ç†å‘˜å¼ºåˆ¶å–æ¶ˆï¼Œä»…å¯¹â€œå·²é¢„çº¦/å¾…ç­¾åˆ°â€çŠ¶æ€æœ‰æ•ˆï¼‰\r\n                </el-checkbox>\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n                <div class=\"fb-handle-actions\">\r\n                  <el-button @click=\"fbAdminDrawerVisible = false\">å–æ¶ˆ</el-button>\r\n                  <el-button type=\"primary\" :loading=\"fbAdminSubmitting\" @click=\"submitFbAdminHandle\">æäº¤å¤„ç†</el-button>\r\n                </div>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n        </div>\r\n      </el-drawer>\r\n    </div>\r\n    <!-- ============ æ—¥å¿—ç»Ÿè®¡ï¼ˆå ä½é¡µï¼Œä¿ç•™å…¥å£ä¸ä¸¢åŠŸèƒ½ï¼‰ ============ -->\r\n    <div v-if=\"currentPage === 'admin-logs'\" class=\"card simple-card\">\r\n      <h2 class=\"page-title\">æ—¥å¿—ç»Ÿè®¡</h2>\r\n      <p class=\"page-subtitle\">æŸ¥çœ‹ç³»ç»Ÿæ“ä½œæ—¥å¿—ä¸ç»Ÿè®¡ä¿¡æ¯ï¼Œè¾…åŠ©æ’æŸ¥é—®é¢˜ä¸è¿½è¸ªæ“ä½œè®°å½•ã€‚</p>\r\n      <p class=\"simple-tip\">\r\n        å¯ä»¥åœ¨æ­¤æ¥å…¥æŠ˜çº¿å›¾/æŸ±çŠ¶å›¾å±•ç¤ºæ—¥é¢„çº¦é‡ã€ç­¾åˆ°ç‡ã€è¿çº¦ç‡ç­‰ç»Ÿè®¡æ•°æ®ã€‚\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'AdminHome',\r\n  props: {\r\n    currentPage: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  emits: ['change-page'],\r\n  data () {\r\n    return {\r\n      /* timers */\r\n      dashboardTimer: null,\r\n      reservationTimer: null,\r\n      /* Dashboard */\r\n      autoRefresh: false,\r\n      metrics: {\r\n        todayReservations: 120,\r\n        todayTrend: 12,\r\n        todaySignRate: 82,\r\n        openRooms: 12,\r\n        totalSeats: 680,\r\n        pendingItems: 5\r\n      },\r\n      trendItems: [\r\n        {\r\n          key: 'weekReservation',\r\n          title: 'æœ¬å‘¨é¢„çº¦å®Œæˆç‡',\r\n          value: '86%',\r\n          percent: 86,\r\n          status: 'success',\r\n          desc: 'é¢„çº¦å®Œæˆç‡ä¿æŒåœ¨è¾ƒé«˜æ°´å¹³ï¼Œå¯ç»§ç»­è§‚å¯Ÿå‘¨æœ«æ³¢åŠ¨ã€‚'\r\n        },\r\n        {\r\n          key: 'weekCheckin',\r\n          title: 'æœ¬å‘¨å¹³å‡ç­¾åˆ°ç‡',\r\n          value: '79%',\r\n          percent: 79,\r\n          status: 'success',\r\n          desc: 'å»ºè®®é’ˆå¯¹ä½å¹´çº§åŒå­¦å¼€å±•ä¸€æ¬¡åˆ°é¦†æé†’æ´»åŠ¨ã€‚'\r\n        },\r\n        {\r\n          key: 'weekViolation',\r\n          title: 'æœ¬å‘¨è¿çº¦ç‡',\r\n          value: '6%',\r\n          percent: 6,\r\n          status: 'warning',\r\n          desc: 'æœ‰ 8 ä½åŒå­¦å‡ºç°å¤šæ¬¡è¿çº¦ï¼Œå¯ç»“åˆä¿¡ç”¨åˆ†è§„åˆ™é‡ç‚¹å…³æ³¨ã€‚'\r\n        }\r\n      ],\r\n\r\n      /* Admin Announcement */\r\n      adminNoticeHomeLoading: false,\r\n      adminNoticeListLoading: false,\r\n      adminHomeNotices: [],\r\n\r\n      // å…¬å‘Šæšä¸¾ï¼ˆä¸ announcement è¡¨å­—æ®µå«ä¹‰ä¿æŒä¸€è‡´ï¼‰\r\n      noticeTypeOptions: [\r\n        { label: 'è§„åˆ™', value: 'RULE' },\r\n        { label: 'è°ƒæ•´', value: 'ADJUSTMENT' },\r\n        { label: 'çªå‘', value: 'EMERGENCY' },\r\n        { label: 'ç»´æŠ¤', value: 'MAINTENANCE' },\r\n        { label: 'è€ƒè¯•', value: 'EXAM' },\r\n        { label: 'å…¶ä»–', value: 'OTHER' }\r\n      ],\r\n      noticeLevelOptions: [\r\n        { label: 'é‡è¦', value: 'IMPORTANT' },\r\n        { label: 'æé†’', value: 'WARNING' },\r\n        { label: 'é€šçŸ¥', value: 'INFO' }\r\n      ],\r\n      noticeTargetOptions: [\r\n        { label: 'å…¨ä½“ç®¡ç†å‘˜', value: 0 },\r\n        { label: 'å…¨ä½“å­¦ç”Ÿ', value: 1 },\r\n        { label: 'å…¨éƒ¨ç”¨æˆ·', value: 2 }\r\n      ],\r\n\r\n\r\n      adminNoticeAllVisible: false,\r\n      adminNoticeDetailVisible: false,\r\n      adminNoticeDetail: null,\r\n      adminNoticeDetailFrom: 'home',\r\n\r\n      adminNoticeTypeFilter: '',\r\n      adminNoticeLevelFilter: '',\r\n      adminNoticeTargetFilter: null,\r\n      adminNoticeKeyword: '',\r\n      adminNoticeIncludeExpired: false,\r\n\r\n      adminNoticePageNum: 1,\r\n      adminNoticePageSize: 6,\r\n      adminNoticeTotalCount: 0,\r\n      adminNoticePageList: [],\r\n\r\n      adminNoticeEditVisible: false,\r\n      adminNoticeEditMode: 'create', // create | edit\r\n      adminNoticeSubmitting: false,\r\n      adminNoticeForm: {\r\n        id: null,\r\n        type: 'RULE',\r\n        level: 'INFO',\r\n        targetRole: 2, // 0=ç®¡ç†å‘˜ 1=å­¦ç”Ÿ 2=å…¨éƒ¨ç”¨æˆ·\r\n        targetText: '',\r\n        title: '',\r\n        content: '',\r\n        isTop: false\r\n      },\r\n\r\n      /* Admin Feedbackï¼ˆæŠ•è¯‰å¤„ç†ï¼‰ */\r\n      fbAdminLoading: false,\r\n      fbAdminList: [],\r\n      fbAdminPageNum: 1,\r\n      fbAdminPageSize: 8,\r\n      fbAdminTotal: 0,\r\n      fbAdminStatusFilter: '',\r\n      fbAdminCategoryFilter: '',\r\n      fbAdminKeyword: '',\r\n      fbAdminOnlyPending: true,\r\n      fbAdminStats: { pending: 0, processing: 0, resolved: 0 },\r\n\r\n      fbAdminDrawerVisible: false,\r\n      fbAdminDetail: null,\r\n      fbAdminSubmitting: false,\r\n      fbAdminHandleForm: {\r\n        status: 'processing',\r\n        reply: '',\r\n        cancelReservation: false\r\n      },\r\n\r\n      todos: [\r\n        {\r\n          id: 1,\r\n          type: 'complaint',\r\n          content: 'å¤„ç† 2 æ¡å…³äºè‡ªä¹ å®¤å™ªéŸ³çš„æŠ•è¯‰è®°å½•ã€‚',\r\n          from: 'æŠ•è¯‰å¤„ç†',\r\n          time: '2025-12-10 09:20',\r\n          priority: 'high'\r\n        },\r\n        {\r\n          id: 2,\r\n          type: 'violation',\r\n          content: 'æ£€æŸ¥æœ¬å‘¨è¿ç»­è¿çº¦è¶…è¿‡ 3 æ¬¡çš„å­¦ç”Ÿåå•ã€‚',\r\n          from: 'æ—¥å¿—ç»Ÿè®¡',\r\n          time: '2025-12-10 08:50',\r\n          priority: 'medium'\r\n        },\r\n        {\r\n          id: 3,\r\n          type: 'rule',\r\n          content: 'ç¡®è®¤æœŸæœ«è€ƒè¯•å‘¨è‡ªä¹ å®¤å¼€æ”¾æ—¶é—´ä¸é¢„çº¦ä¸Šé™ã€‚',\r\n          from: 'åº§ä½ç®¡ç†',\r\n          time: '2025-12-09 16:10',\r\n          priority: 'medium'\r\n        },\r\n        {\r\n          id: 4,\r\n          type: 'system',\r\n          content: 'å¯¼å‡ºæœ¬æœˆé¢„çº¦ä¸ç­¾åˆ°æŠ¥è¡¨å­˜æ¡£ã€‚',\r\n          from: 'æ—¥å¿—ç»Ÿè®¡',\r\n          time: '2025-12-09 10:25',\r\n          priority: 'low'\r\n        }\r\n      ],\r\n      latestActivities: [\r\n        { id: 1, text: 'å¼ ä¸‰ é¢„çº¦äº† å›¾ä¹¦é¦† 401 Â· 10:00-12:00', type: 'book', typeLabel: 'æ–°é¢„çº¦', time: '09:15' },\r\n        { id: 2, text: 'æå›› åœ¨ æœ¬éƒ¨ Â· 3 æ¥¼ 301 å®Œæˆç­¾åˆ°', type: 'sign', typeLabel: 'å·²ç­¾åˆ°', time: '08:05' },\r\n        { id: 3, text: 'ç‹äº” å–æ¶ˆäº† æ˜æ—¥çš„é¢„çº¦ï¼ˆåŸå› ï¼šè¯¾ç¨‹è°ƒæ•´ï¼‰', type: 'cancel', typeLabel: 'å·²å–æ¶ˆ', time: '07:48' }\r\n      ],\r\n\r\n      /* Reservation Manage */\r\n      reservationFilters: {\r\n        keyword: '',\r\n        roomId: null,\r\n        date: '',\r\n        status: ''\r\n      },\r\n      reservationRoomOptions: [],\r\n      statusOptions: [\r\n        { label: 'å·²é¢„çº¦', value: 'reserved' },\r\n        { label: 'å·²ç­¾åˆ°', value: 'checked_in' },\r\n        { label: 'å·²å–æ¶ˆ', value: 'cancelled' },\r\n        { label: 'è¿çº¦', value: 'violation' }\r\n      ],\r\n      reservationLoading: false,\r\n      reservations: [],\r\n      reservationTotal: 0,\r\n      reservationStats: { total: 0, booked: 0, signed: 0, canceled: 0, violation: 0 },\r\n      reservationSelection: [],\r\n      reservationPage: 1,\r\n      reservationPageSize: 8,\r\n\r\n      /* User Manage */\r\n\r\n      /* User Manage */\r\n      userLoading: false,\r\n      userFilters: {\r\n        keyword: '',\r\n        roleId: '',\r\n        status: '',\r\n        onlyAbnormal: false\r\n      },\r\n      userRoleOptions: [\r\n        { label: 'ç”¨æˆ·', value: 1 },\r\n        { label: 'ç®¡ç†å‘˜', value: 0 }\r\n      ],\r\n      userStatusOptions: [\r\n        { label: 'æ­£å¸¸', value: 0 },\r\n        { label: 'é¢„è­¦', value: 1 },\r\n        { label: 'é»‘åå•', value: 2 }\r\n      ],\r\n      users: [],\r\n      userTotal: 0,\r\n      userStats: { total: 0, normal: 0, warning: 0, blacklist: 0 },\r\n      userSelection: [],\r\n      userPage: 1,\r\n      userPageSize: 8,\r\n\r\n      userDetailVisible: false,\r\n      userDetailLoading: false,\r\n      userDetail: { user: null, violationCount: 0, recentViolations: [] },\r\n\r\n      createAdminVisible: false,\r\n      createAdminLoading: false,\r\n      createAdminForm: { account: '', name: '', password: '' },\r\n      createAdminRules: {\r\n        account: [{ required: true, message: 'è¯·è¾“å…¥è´¦å·', trigger: 'blur' }],\r\n        name: [{ required: true, message: 'è¯·è¾“å…¥å§“å', trigger: 'blur' }],\r\n        password: [\r\n          { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },\r\n          { min: 6, message: 'å¯†ç è‡³å°‘ 6 ä½', trigger: 'blur' }\r\n        ]\r\n      },\r\n\r\n      /* Seat Manage */\r\n      seatLoading: false,\r\n      currentCampus: '',\r\n      campusOptions: [],\r\n      currentBuild: '',\r\n      buildOptions: [],\r\n      onlyShowOpen: true,\r\n      roomKeyword: '',\r\n      roomCapacityFilter: 'all',\r\n      rooms: [],\r\n      selectedRoomId: null,\r\n      activeTab: 'layout',\r\n      showSeatNo: true,\r\n      showDemoOccupied: true,\r\n      seatGrid: [],\r\n      seatSelectedIds: new Set(),\r\n      createRoomVisible: false,\r\n      createRoomLoading: false,\r\n      createRoomBuildingOptions: [],\r\n      createRoomForm: {\r\n        campus: '',\r\n        building: '',\r\n        roomName: '',\r\n        totalSeats: 80,\r\n        openSeats: 80\r\n      },\r\n      createRoomRules: {\r\n        campus: [{ required: true, message: 'è¯·é€‰æ‹©æ ¡åŒº', trigger: 'change' }],\r\n        building: [{ required: true, message: 'è¯·é€‰æ‹©æ¥¼æ ‹', trigger: 'change' }],\r\n        roomName: [{ required: true, message: 'è¯·è¾“å…¥æˆ¿é—´å·', trigger: 'blur' }],\r\n        totalSeats: [{ required: true, message: 'è¯·è¾“å…¥åº§ä½æ•°', trigger: 'change' }],\r\n        openSeats: [{ required: true, message: 'è¯·è¾“å…¥å¼€æ”¾åº§ä½æ•°', trigger: 'change' }]\r\n      },\r\n\r\n      seatRule: {\r\n        allowCrossTime: false,\r\n        maxHoursPerOrder: 4,\r\n        maxOrdersPerDay: 2,\r\n        autoReleaseNoSign: true,\r\n        releaseAfterMinutes: 20,\r\n        violationStrategy: 'day-ban',\r\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    todayText () {\r\n      const d = new Date()\r\n      const y = d.getFullYear()\r\n      const m = String(d.getMonth() + 1).padStart(2, '0')\r\n      const day = String(d.getDate()).padStart(2, '0')\r\n      return `${y}-${m}-${day}`\r\n    },\r\n\r\n\r\n\r\n\r\n    /* seat computed */\r\n    filteredRooms () {\r\n      return (this.rooms || []).filter(room => {\r\n        let ok = true\r\n        if (this.onlyShowOpen) ok = ok && room.status === 'open'\r\n        if (this.roomKeyword && this.roomKeyword.trim()) {\r\n          const k = this.roomKeyword.trim()\r\n          ok = ok && (String(room.name || '').includes(k) || String(room.roomName || '').includes(k) || String(room.building || '').includes(k) || String(room.campus || '').includes(k) || String(room.floor || '').includes(k))\r\n        }\r\n        if (this.roomCapacityFilter === 'small') ok = ok && Number(room.capacity) <= 40\r\n        if (this.roomCapacityFilter === 'medium') ok = ok && Number(room.capacity) > 40 && Number(room.capacity) < 80\r\n        if (this.roomCapacityFilter === 'large') ok = ok && Number(room.capacity) >= 80\r\n        return ok\r\n      })\r\n    },\r\n    selectedRoom () {\r\n      const room = (this.rooms || []).find(r => r.id === this.selectedRoomId)\r\n      return room || null\r\n    },\r\n    seatStats () {\r\n      const stats = { free: 0, occupied: 0, disabled: 0, blockedArea: 0 };\r\n      (this.seatGrid || []).forEach(row => {\r\n        (row.seats || []).forEach(seat => {\r\n          if (seat.status === 'free') stats.free++\r\n          else if (seat.status === 'occupied') stats.occupied++\r\n          else if (seat.status === 'disabled') stats.disabled++\r\n        })\r\n      })\r\n      return stats\r\n    },\r\n    latestActivitiesLeft () {\r\n      const mid = Math.ceil(this.latestActivities.length / 2)\r\n      return this.latestActivities.slice(0, mid)\r\n    },\r\n    latestActivitiesRight () {\r\n      const mid = Math.ceil(this.latestActivities.length / 2)\r\n      return this.latestActivities.slice(mid)\r\n    },\r\n    lastLoginIp () {\r\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\r\n      const u = s ? JSON.parse(s) : {}\r\n      return u.lastLoginIp || 'æœªçŸ¥'\r\n    }\r\n\r\n    ,\r\n\r\n    // é¢„çº¦ç®¡ç†ï¼šæ‰¹é‡æ“ä½œå¯ç”¨æ€§ï¼ˆä¸¥æ ¼éµå®ˆä¸šåŠ¡è§„åˆ™ï¼‰\r\n    canBatchCheckin () {\r\n      return (this.reservationSelection || []).length > 0 &&\r\n          (this.reservationSelection || []).every(r => r && (r.status === 'no_show' || r.status === 'late'))\r\n    },\r\n    canBatchCancel () {\r\n      return (this.reservationSelection || []).length > 0 &&\r\n          (this.reservationSelection || []).every(r => r && r.status === 'reserved')\r\n    }},\r\n  watch: {\r\n    currentPage (val) {\r\n      if (val !== 'admin-home') this.stopDashboardTimer()\r\n      else if (this.autoRefresh) this.startDashboardTimer()\r\n\r\n      if (val === 'admin-home') this.loadAdminNoticeHome()\r\n      if (val === 'admin-home') this.loadAdminDashboardHome()\r\n      if (val === 'admin-reservations') {\r\n        this.loadReservationRoomOptions()\r\n        this.loadAdminReservations(true)\r\n      }\r\n\r\n      if (val === 'admin-users') {\r\n        this.loadAdminUsers(true)\r\n      }\r\n\r\n      if (val === 'admin-complaints') {\r\n        this.loadAdminFeedback(true)\r\n        this.loadAdminFeedbackStats()\r\n      }\r\n      if (val === 'admin-seats') {\r\n        this.initSeatData()\r\n      }\r\n    },\r\n    autoRefresh (val) {\r\n      if (val && this.currentPage === 'admin-home') this.startDashboardTimer()\r\n      else this.stopDashboardTimer()\r\n    },\r\n  },\r\n  created () {\r\n    this.initSeatData()\r\n    this.loadAdminNoticeHome()\r\n    if (this.currentPage === 'admin-home') this.loadAdminDashboardHome()\r\n    if (this.currentPage === 'admin-reservations') {\r\n      this.loadReservationRoomOptions()\r\n      this.loadAdminReservations(true)\r\n    }\r\n    if (this.currentPage === 'admin-users') {\r\n      this.loadAdminUsers(true)\r\n    }\r\n  },\r\n  beforeUnmount () {\r\n    this.stopDashboardTimer()\r\n  },\r\n  methods: {\r\n    emitChange (page) {\r\n      this.$emit('change-page', page)\r\n    },\r\n\r\n    /* ---------- dashboard timers ---------- */\r\n    startDashboardTimer () {\r\n      this.stopDashboardTimer()\r\n      this.dashboardTimer = setInterval(() => {\r\n        this.refreshDashboardMetrics()\r\n      }, 8000)\r\n    },\r\n    stopDashboardTimer () {\r\n      if (this.dashboardTimer) {\r\n        clearInterval(this.dashboardTimer)\r\n        this.dashboardTimer = null\r\n      }\r\n    },\r\n    refreshDashboardMetrics () {\r\n      // æ¥å…¥åç«¯ï¼šå®šæ—¶åˆ·æ–°ç®¡ç†å‘˜é¦–é¡µçœ‹æ¿æ•°æ®\r\n      this.loadAdminDashboardHome(true)\r\n    },\r\n\r\n    async loadAdminDashboardHome (silent = false) {\r\n      try {\r\n        const res = await this.$axios.get('/dashboard/admin/home', { params: { recentLimit: 6 } })\r\n        if (res && Number(res.code) === 200 && res.data) {\r\n          const d = res.data || {}\r\n          const m = d.metrics || {}\r\n\r\n          // é¡¶éƒ¨æ¦‚è§ˆï¼ˆä¸‰é¡¹æ¥åç«¯ï¼šä»Šæ—¥é¢„çº¦æ€»æ•° / ä»Šæ—¥ç­¾åˆ°ç‡ / å½“å‰å¼€æ”¾è‡ªä¹ å®¤ï¼‰\r\n          this.metrics.todayReservations = Number(m.todayReservations ?? 0)\r\n          this.metrics.todayTrend = Number(m.todayTrend ?? 0)\r\n          this.metrics.todaySignRate = Number(m.todaySignRate ?? 0)\r\n          this.metrics.openRooms = Number(m.openRooms ?? 0)\r\n          this.metrics.totalSeats = Number(m.totalSeats ?? 0)\r\n\r\n          // æœ¬å‘¨è¿è¡Œæ¦‚è§ˆï¼ˆä¸‰é¡¹ + è¿›åº¦æ¡ï¼‰\r\n          const w = d.weekly || {}\r\n          const weekReservation = Number(w.weekReservationRate ?? 0)\r\n          const weekCheckin = Number(w.weekAvgCheckinRate ?? 0)\r\n          const weekViolation = Number(w.weekViolationRate ?? 0)\r\n\r\n          const setTrend = (key, percent) => {\r\n            const item = this.trendItems.find(x => x.key === key)\r\n            if (!item) return\r\n            const p = Math.max(0, Math.min(100, Number(percent ?? 0)))\r\n            item.percent = p\r\n            item.value = `${p}%`\r\n\r\n            // statusï¼šè¿çº¦ç‡é«˜ä¸€äº›å°±ç»™ warningï¼Œå…¶ä½™é»˜è®¤ success\r\n            if (key === 'weekViolation') {\r\n              item.status = p >= 10 ? 'exception' : (p >= 5 ? 'warning' : 'success')\r\n            } else {\r\n              item.status = p >= 60 ? 'success' : (p >= 40 ? 'warning' : 'exception')\r\n            }\r\n          }\r\n\r\n          setTrend('weekReservation', weekReservation)\r\n          setTrend('weekCheckin', weekCheckin)\r\n          setTrend('weekViolation', weekViolation)\r\n\r\n          // æœ€è¿‘é¢„çº¦åŠ¨æ€\r\n          const acts = Array.isArray(d.latestActivities) ? d.latestActivities : []\r\n          this.latestActivities = acts.map(it => ({\r\n            id: it.id,\r\n            text: it.text,\r\n            type: it.type,\r\n            typeLabel: it.typeLabel,\r\n            time: it.time\r\n          }))\r\n        }\r\n      } catch (e) {\r\n        if (!silent) ElMessage.error('ç®¡ç†å‘˜é¦–é¡µçœ‹æ¿æ•°æ®åŠ è½½å¤±è´¥')\r\n        // silent æ¨¡å¼åªåœ¨æ§åˆ¶å°è®°å½•\r\n        console.error('loadAdminDashboardHome failed:', e)\r\n      }\r\n    },\r\n\r\n\r\n    /* ---------- admin announcement ---------- */\r\n    noticeTypeText (t) {\r\n      if (t === 'RULE') return 'è§„åˆ™'\r\n      if (t === 'ADJUSTMENT') return 'è°ƒæ•´'\r\n      if (t === 'EMERGENCY') return 'çªå‘'\r\n      if (t === 'MAINTENANCE') return 'ç»´æŠ¤'\r\n      if (t === 'EXAM') return 'è€ƒè¯•'\r\n      return 'å…¶ä»–'\r\n    },\r\n    noticeTypeIcon (t) {\r\n      if (t === 'RULE') return 'ğŸ“Œ'\r\n      if (t === 'ADJUSTMENT') return 'ğŸ§­'\r\n      if (t === 'EMERGENCY') return 'ğŸš¨'\r\n      if (t === 'MAINTENANCE') return 'ğŸ§°'\r\n      if (t === 'EXAM') return 'ğŸ“'\r\n      return 'ğŸ“£'\r\n    },\r\n    noticeLevelText (l) {\r\n      if (l === 'IMPORTANT') return 'é‡è¦'\r\n      if (l === 'WARNING') return 'æé†’'\r\n      return 'é€šçŸ¥'\r\n    },\r\n    formatNoticeTime (timeStr, withTime) {\r\n      if (!timeStr) return 'â€”'\r\n      const d = new Date(timeStr)\r\n      if (Number.isNaN(d.getTime())) return String(timeStr)\r\n      const pad = (n) => String(n).padStart(2, '0')\r\n      const y = d.getFullYear()\r\n      const m = pad(d.getMonth() + 1)\r\n      const day = pad(d.getDate())\r\n      if (!withTime) return `${y}-${m}-${day}`\r\n      const hh = pad(d.getHours())\r\n      const mm = pad(d.getMinutes())\r\n      return `${y}-${m}-${day} ${hh}:${mm}`\r\n    },\r\n    makeNoticeSummary (content, maxLen = 42) {\r\n      if (!content) return ''\r\n      const s = String(content).replace(/\\s+/g, ' ').trim()\r\n      if (!s) return ''\r\n      return s.length > maxLen ? s.slice(0, maxLen) + 'â€¦' : s\r\n    },\r\n    normalizeNoticeItem (item) {\r\n      const it = item || {}\r\n      return {\r\n        ...it,\r\n        summary: it.summary || this.makeNoticeSummary(it.content)\r\n      }\r\n    },\r\n    getCurrentUser () {\r\n      const s = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\r\n      try { return s ? JSON.parse(s) : {} } catch (e) { return {} }\r\n    },\r\n    getCurrentUserId () {\r\n      const u = this.getCurrentUser()\r\n      const id = u && (u.id ?? u.userId)\r\n      const n = Number(id)\r\n      return Number.isFinite(n) ? n : null\r\n    },\r\n\r\n    async loadAdminNoticeHome (silent = false) {\r\n      if (!silent) this.adminNoticeHomeLoading = true\r\n      try {\r\n        const res = await this.$axios.get('/announcement/admin/page', {\r\n          params: { pageNum: 1, pageSize: 3, includeExpired: 0 }\r\n        })\r\n        if (res && Number(res.code) === 200) {\r\n          const list = Array.isArray(res.data) ? res.data : []\r\n          this.adminHomeNotices = list.map(this.normalizeNoticeItem)\r\n        } else {\r\n          this.adminHomeNotices = []\r\n        }\r\n      } catch (e) {\r\n        this.adminHomeNotices = []\r\n      } finally {\r\n        if (!silent) this.adminNoticeHomeLoading = false\r\n      }\r\n    },\r\n\r\n    openAdminNoticeAll () {\r\n      this.adminNoticeAllVisible = true\r\n      this.reloadAdminNoticePage(true)\r\n    },\r\n    async reloadAdminNoticePage (resetPage) {\r\n      if (resetPage) this.adminNoticePageNum = 1\r\n      this.adminNoticeListLoading = true\r\n      try {\r\n        const res = await this.$axios.get('/announcement/admin/page', {\r\n          params: {\r\n            pageNum: this.adminNoticePageNum,\r\n            pageSize: this.adminNoticePageSize,\r\n            type: this.adminNoticeTypeFilter || undefined,\r\n            level: this.adminNoticeLevelFilter || undefined,\r\n            targetRole: (this.adminNoticeTargetFilter === null || this.adminNoticeTargetFilter === '' || this.adminNoticeTargetFilter === undefined)\r\n                ? undefined\r\n                : Number(this.adminNoticeTargetFilter),\r\n            keyword: this.adminNoticeKeyword || undefined,\r\n            includeExpired: this.adminNoticeIncludeExpired ? 1 : 0\r\n          }\r\n        })\r\n        if (res && Number(res.code) === 200) {\r\n          const list = Array.isArray(res.data) ? res.data : []\r\n          this.adminNoticePageList = list.map(this.normalizeNoticeItem)\r\n          this.adminNoticeTotalCount = Number(res.total || 0)\r\n        } else {\r\n          this.adminNoticePageList = []\r\n          this.adminNoticeTotalCount = 0\r\n          ElMessage.error(res?.msg || 'åŠ è½½å…¬å‘Šå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        this.adminNoticePageList = []\r\n        this.adminNoticeTotalCount = 0\r\n        ElMessage.error('åŠ è½½å…¬å‘Šå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.adminNoticeListLoading = false\r\n      }\r\n    },\r\n    onAdminNoticePageChange (p) {\r\n      this.adminNoticePageNum = p\r\n      this.reloadAdminNoticePage(false)\r\n    },\r\n    resetAdminNoticeFilters () {\r\n      this.adminNoticeTypeFilter = ''\r\n      this.adminNoticeLevelFilter = ''\r\n      this.adminNoticeTargetFilter = null\r\n      this.adminNoticeKeyword = ''\r\n      this.adminNoticeIncludeExpired = false\r\n      this.reloadAdminNoticePage(true)\r\n    },\r\n\r\n    async openAdminNoticeDetail (item, from) {\r\n      this.adminNoticeDetailFrom = from || 'home'\r\n      // å…ˆå±•ç¤ºï¼ˆæ›´ä¸æ»‘ï¼‰ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°è¯¦æƒ…\r\n      this.adminNoticeDetail = this.normalizeNoticeItem(item)\r\n      this.adminNoticeDetailVisible = true\r\n      try {\r\n        const res = await this.$axios.get('/announcement/admin/detail', { params: { id: item.id } })\r\n        if (res && Number(res.code) === 200 && res.data) {\r\n          this.adminNoticeDetail = this.normalizeNoticeItem(res.data)\r\n        }\r\n      } catch (e) {\r\n        // é™é»˜ï¼šå·²æœ‰åˆ—è¡¨æ•°æ®å¯å±•ç¤º\r\n      }\r\n    },\r\n    backToAdminNoticeList () {\r\n      this.adminNoticeDetailVisible = false\r\n      if (this.adminNoticeDetailFrom === 'list') {\r\n        this.adminNoticeAllVisible = true\r\n      }\r\n    },\r\n\r\n    openAdminNoticeCreate () {\r\n      this.adminNoticeEditMode = 'create'\r\n      this.adminNoticeForm = {\r\n        id: null,\r\n        type: 'RULE',\r\n        level: 'INFO',\r\n        targetRole: 2,\r\n        targetText: '',\r\n        title: '',\r\n        content: '',\r\n        isTop: false\r\n      }\r\n      this.adminNoticeEditVisible = true\r\n    },\r\n    openAdminNoticeEdit (item) {\r\n      const it = item || {}\r\n      this.adminNoticeEditMode = 'edit'\r\n      this.adminNoticeForm = {\r\n        id: it.id,\r\n        type: it.type || 'RULE',\r\n        level: it.level || 'INFO',\r\n        targetRole: typeof it.targetRole === 'number' ? it.targetRole : Number(it.targetRole ?? 2),\r\n        targetText: it.targetText || '',\r\n        title: it.title || '',\r\n        content: it.content || '',\r\n        isTop: Number(it.isTop) === 1\r\n      }\r\n      this.adminNoticeEditVisible = true\r\n    },\r\n\r\n    async submitAdminNotice () {\r\n      const f = this.adminNoticeForm || {}\r\n      const title = String(f.title || '').trim()\r\n      const content = String(f.content || '').trim()\r\n      const type = String(f.type || '').trim()\r\n      const level = String(f.level || '').trim()\r\n      const targetRole = f.targetRole\r\n\r\n      if (!title) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šæ ‡é¢˜')\r\n      if (!content) return ElMessage.warning('è¯·å¡«å†™å…¬å‘Šå†…å®¹')\r\n      if (!type) return ElMessage.warning('è¯·é€‰æ‹©å…¬å‘Šç±»å‹')\r\n      if (!level) return ElMessage.warning('è¯·é€‰æ‹©é‡è¦ç¨‹åº¦')\r\n      if (targetRole === null || targetRole === undefined || targetRole === '') return ElMessage.warning('è¯·é€‰æ‹©é¢å‘å¯¹è±¡')\r\n\r\n      const payload = {\r\n        id: this.adminNoticeEditMode === 'edit' ? f.id : undefined,\r\n        title,\r\n        content,\r\n        type,\r\n        level,\r\n        targetRole: Number(targetRole),\r\n        targetText: String(f.targetText || '').trim(),\r\n        isTop: f.isTop ? 1 : 0,\r\n        createdBy: this.getCurrentUserId()\r\n      }\r\n\r\n      this.adminNoticeSubmitting = true\r\n      try {\r\n        const api = this.adminNoticeEditMode === 'create' ? '/announcement/admin/create' : '/announcement/admin/republish'\r\n        const res = await this.$axios.post(api, payload)\r\n\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(this.adminNoticeEditMode === 'create' ? 'å‘å¸ƒæˆåŠŸ' : 'é‡æ–°å‘å¸ƒæˆåŠŸ')\r\n          this.adminNoticeEditVisible = false\r\n          this.adminNoticeDetailVisible = false\r\n\r\n          // åˆ·æ–°ï¼šä¸»é¡µ + åˆ—è¡¨ï¼ˆå¦‚æœæ‰“å¼€ï¼‰\r\n          this.loadAdminNoticeHome(true)\r\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.adminNoticeSubmitting = false\r\n      }\r\n    },\r\n\r\n    async confirmAdminNoticeDelete (item) {\r\n      const it = item || {}\r\n      try {\r\n        await ElMessageBox.confirm(\r\n            `ç¡®å®šåˆ é™¤å…¬å‘Šã€Œ${it.title || 'ï¼ˆæ— æ ‡é¢˜ï¼‰'}ã€å—ï¼Ÿåˆ é™¤åå­¦ç”Ÿç«¯ä¹Ÿä¼šåŒæ­¥æ›´æ–°ã€‚`,\r\n            'åˆ é™¤ç¡®è®¤',\r\n            { type: 'warning', confirmButtonText: 'åˆ é™¤', cancelButtonText: 'å–æ¶ˆ' }\r\n        )\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      this.adminNoticeListLoading = true\r\n      try {\r\n        const res = await this.$axios.delete('/announcement/admin/delete', { params: { id: it.id } })\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success('åˆ é™¤æˆåŠŸ')\r\n          this.adminNoticeDetailVisible = false\r\n\r\n          this.loadAdminNoticeHome(true)\r\n          if (this.adminNoticeAllVisible) this.reloadAdminNoticePage(true)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'åˆ é™¤å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('åˆ é™¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.adminNoticeListLoading = false\r\n      }\r\n    },\r\n\r\n    getTodoTagType (type) {\r\n      if (type === 'complaint') return 'danger'\r\n      if (type === 'violation') return 'warning'\r\n      if (type === 'rule') return 'success'\r\n      return 'info'\r\n    },\r\n    getTodoTypeText (type) {\r\n      if (type === 'complaint') return 'æŠ•è¯‰'\r\n      if (type === 'violation') return 'è¿çº¦'\r\n      if (type === 'rule') return 'è§„åˆ™é…ç½®'\r\n      if (type === 'system') return 'ç³»ç»Ÿ'\r\n      return 'å…¶ä»–'\r\n    },\r\n    getPriorityText (p) {\r\n      if (p === 'high') return 'é«˜'\r\n      if (p === 'medium') return 'ä¸­'\r\n      return 'ä½'\r\n    },\r\n    handleTodoGo (row) {\r\n      // è®©â€œå‰å¾€å¤„ç†â€çœŸçš„èƒ½è·³é¡µï¼ˆæ•´åˆåå¯ç”¨ï¼‰\r\n      if (row.type === 'complaint') return this.emitChange('admin-complaints')\r\n      if (row.type === 'rule') return this.emitChange('admin-seats')\r\n      // violation / system ç»Ÿä¸€å¼•å¯¼åˆ°æ—¥å¿—ç»Ÿè®¡\r\n      return this.emitChange('admin-logs')\r\n    },\r\n    handleTodoDone (row) {\r\n      this.todos = this.todos.filter(t => t.id !== row.id)\r\n    },\r\n    handleMarkAllDone () {\r\n      this.todos = []\r\n    },\r\n\r\n    /* ---------- Reservation (admin) ---------- */\r\n    async loadReservationRoomOptions () {\r\n      try {\r\n        const res = await this.$axios.get('/room/all')\r\n        if (res && Number(res.code) === 200 && Array.isArray(res.data)) {\r\n          this.reservationRoomOptions = res.data.map(r => ({\r\n            id: r.id,\r\n            label: `${r.campus} Â· ${r.building} ${r.roomName}`\r\n          }))\r\n        }\r\n      } catch (e) {\r\n        console.error('loadReservationRoomOptions failed:', e)\r\n      }\r\n    },\r\n\r\n    async loadAdminReservations (resetPage = false) {\r\n      if (resetPage) this.reservationPage = 1\r\n      this.reservationLoading = true\r\n      try {\r\n        const keyword = (this.reservationFilters.keyword || '').trim()\r\n        const params = {\r\n          keyword: keyword || undefined,\r\n          roomId: this.reservationFilters.roomId || undefined,\r\n          date: this.reservationFilters.date || undefined,\r\n          status: this.reservationFilters.status || undefined,\r\n          page: this.reservationPage,\r\n          size: this.reservationPageSize\r\n        }\r\n\r\n        const res = await this.$axios.get('/reservation/admin/page', { params })\r\n        if (res && Number(res.code) === 200) {\r\n          const payload = res.data || {}\r\n          this.reservations = Array.isArray(payload.records) ? payload.records : []\r\n          this.reservationStats = payload.stats || { total: 0, booked: 0, signed: 0, canceled: 0, violation: 0 }\r\n          this.reservationTotal = Number(res.total ?? this.reservations.length)\r\n          this.reservationSelection = []\r\n        } else {\r\n          ElMessage.error(res?.msg || 'é¢„çº¦æ•°æ®åŠ è½½å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        console.error('loadAdminReservations failed:', e)\r\n        ElMessage.error('é¢„çº¦æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.reservationLoading = false\r\n      }\r\n    },\r\n\r\n    handleReservationRefresh () {\r\n      // ä¸é‡ç½®åˆ†é¡µï¼Œåªåšä¸€æ¬¡åˆ·æ–°\r\n      this.loadAdminReservations(false)\r\n    },\r\n\r\n    handleReservationSearch () {\r\n      // æŸ¥è¯¢ï¼šå›åˆ°ç¬¬ä¸€é¡µ\r\n      this.loadAdminReservations(true)\r\n    },\r\n\r\n    resetReservationFilters () {\r\n      this.reservationFilters = { keyword: '', roomId: null, date: '', status: '' }\r\n      this.loadAdminReservations(true)\r\n    },\r\n\r\n    handleSelectionChange (val) {\r\n      this.reservationSelection = val || []\r\n    },\r\n\r\n    handlePageChange (page) {\r\n      this.reservationPage = page\r\n      this.loadAdminReservations(false)\r\n    },\r\n\r\n    handlePageSizeChange (size) {\r\n      this.reservationPageSize = size\r\n      this.reservationPage = 1\r\n      this.loadAdminReservations(false)\r\n    },\r\n\r\n    isCancelledStatus (status) {\r\n      return status === 'cancelled' || status === 'cancel_overdue'\r\n    },\r\n\r\n    getStatusTagType (status) {\r\n      if (status === 'reserved') return 'info'\r\n      if (status === 'checked_in') return 'success'\r\n      if (status === 'late') return 'warning'\r\n      if (status === 'no_show') return 'danger'\r\n      if (status === 'cancelled' || status === 'cancel_overdue') return 'warning'\r\n      return ''\r\n    },\r\n\r\n    getStatusText (status) {\r\n      if (status === 'reserved') return 'å·²é¢„çº¦'\r\n      if (status === 'checked_in') return 'å·²ç­¾åˆ°'\r\n      if (status === 'late') return 'è¿Ÿåˆ°'\r\n      if (status === 'no_show') return 'æœªç­¾åˆ°'\r\n      if (status === 'cancelled') return 'å·²å–æ¶ˆ'\r\n      if (status === 'cancel_overdue') return 'é€¾æœŸå–æ¶ˆ'\r\n      return status\r\n    },\r\n\r\n    async handleSign (row) {\r\n      const it = row || {}\r\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id')\r\n      if (it.status !== 'no_show' && it.status !== 'late') {\r\n        return ElMessage.error('ä»…æ”¯æŒå¯¹ã€æœªç­¾åˆ°/è¿Ÿåˆ°ã€‘è®°å½•è¡¥å½•ç­¾åˆ°')\r\n      }\r\n\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šä¸ºé¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€è¡¥å½•ç­¾åˆ°å—ï¼Ÿ`, 'ç¡®è®¤è¡¥å½•ç­¾åˆ°', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/reservation/admin/checkin/${it.id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'è¡¥å½•ç­¾åˆ°æˆåŠŸ')\r\n          await this.loadAdminReservations(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'è¡¥å½•ç­¾åˆ°å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('è¡¥å½•ç­¾åˆ°å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    async handleCancel (row) {\r\n      const it = row || {}\r\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šå–æ¶ˆé¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€å—ï¼Ÿ`, 'ç¡®è®¤å–æ¶ˆé¢„çº¦', {\r\n          type: 'warning',\r\n          confirmButtonText: 'å–æ¶ˆé¢„çº¦',\r\n          cancelButtonText: 'è¿”å›'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/reservation/admin/cancel/${it.id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'å–æ¶ˆæˆåŠŸ')\r\n          await this.loadAdminReservations(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'å–æ¶ˆå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('å–æ¶ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    async handleMarkViolation (row) {\r\n      const it = row || {}\r\n      if (!it.id) return ElMessage.error('ç¼ºå°‘é¢„çº¦ id')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šå°†é¢„çº¦ã€Œ${it.code || it.reservationNo || it.id}ã€æ ‡è®°ä¸ºè¿çº¦å—ï¼Ÿ`, 'ç¡®è®¤æ ‡è®°è¿çº¦', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/reservation/admin/markViolation/${it.id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'æ ‡è®°è¿çº¦æˆåŠŸ')\r\n          await this.loadAdminReservations(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ ‡è®°è¿çº¦å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ ‡è®°è¿çº¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    handleViewDetail (row) {\r\n      const it = row || {}\r\n      const rmk = (it && (it['remark'] ?? it['note'] ?? it['comment'])) || 'â€”'\r\n      const lines = [\r\n        `é¢„çº¦ç¼–å·ï¼š${it.code || it.reservationNo || 'â€”'}`,\r\n        `å­¦ç”Ÿï¼š${it.studentName || 'â€”'}ï¼ˆ${it.studentNo || 'â€”'}ï¼‰`,\r\n        `è‡ªä¹ å®¤ï¼š${it.room || 'â€”'}`,\r\n        `åº§ä½ï¼š${it.seatNo || 'â€”'}`,\r\n        `æ—¥æœŸï¼š${it.date || 'â€”'}`,\r\n        `æ—¶é—´æ®µï¼š${it.timeRange || 'â€”'}`,\r\n        `çŠ¶æ€ï¼š${this.getStatusText(it.status)}`,\r\n        `å¤‡æ³¨ï¼š${rmk}`\r\n      ]\r\n\r\n      ElMessageBox.alert(lines.join('<br/>'), 'é¢„çº¦è¯¦æƒ…', {\r\n        dangerouslyUseHTMLString: true,\r\n        confirmButtonText: 'å…³é—­'\r\n      })\r\n    },\r\n\r\n    async handleBatchSign () {\r\n      const ids = (this.reservationSelection || []).map(x => x.id).filter(Boolean)\r\n      if (!ids.length) return\r\n      if (!this.canBatchCheckin) return ElMessage.error('è¯·ä»…é€‰æ‹©ã€æœªç­¾åˆ°/è¿Ÿåˆ°ã€‘è®°å½•è¿›è¡Œæ‰¹é‡è¡¥å½•ç­¾åˆ°')\r\n\r\n\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡è¡¥å½•ç­¾åˆ°ï¼ˆ${ids.length} æ¡ï¼‰å—ï¼Ÿ`, 'æ‰¹é‡è¡¥å½•ç­¾åˆ°', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post('/reservation/admin/batchCheckin', { ids })\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'æ‰¹é‡è¡¥å½•ç­¾åˆ°å®Œæˆ')\r\n          await this.loadAdminReservations(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ‰¹é‡è¡¥å½•ç­¾åˆ°å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ‰¹é‡è¡¥å½•ç­¾åˆ°å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    async handleBatchCancel () {\r\n      const ids = (this.reservationSelection || []).map(x => x.id).filter(Boolean)\r\n      if (!ids.length) return\r\n      if (!this.canBatchCancel) return ElMessage.error('è¯·ä»…é€‰æ‹©ã€å·²é¢„çº¦ã€‘è®°å½•è¿›è¡Œæ‰¹é‡å–æ¶ˆ')\r\n\r\n\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡å–æ¶ˆé¢„çº¦ï¼ˆ${ids.length} æ¡ï¼‰å—ï¼Ÿ`, 'æ‰¹é‡å–æ¶ˆé¢„çº¦', {\r\n          type: 'warning',\r\n          confirmButtonText: 'å–æ¶ˆé¢„çº¦',\r\n          cancelButtonText: 'è¿”å›'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post('/reservation/admin/batchCancel', { ids })\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'æ‰¹é‡å–æ¶ˆå®Œæˆ')\r\n          await this.loadAdminReservations(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ‰¹é‡å–æ¶ˆå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ‰¹é‡å–æ¶ˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    /* user methods */\r\n    async loadAdminUsers (resetPage = false) {\r\n      if (resetPage) this.userPage = 1\r\n\r\n      const params = {\r\n        page: this.userPage,\r\n        size: this.userPageSize\r\n      }\r\n      const k = (this.userFilters.keyword || '').trim()\r\n      if (k) params.keyword = k\r\n      if (this.userFilters.roleId !== '' && this.userFilters.roleId !== null && this.userFilters.roleId !== undefined) {\r\n        params.roleId = this.userFilters.roleId\r\n      }\r\n      if (this.userFilters.status !== '' && this.userFilters.status !== null && this.userFilters.status !== undefined) {\r\n        params.status = this.userFilters.status\r\n      }\r\n      if (this.userFilters.onlyAbnormal) {\r\n        params.onlyAbnormal = true\r\n      }\r\n\r\n      this.userLoading = true\r\n      try {\r\n        const res = await this.$axios.get('/user/admin/page', { params })\r\n        if (res && Number(res.code) === 200) {\r\n          const data = res.data || {}\r\n          this.users = Array.isArray(data.records) ? data.records : []\r\n          this.userStats = data.stats || { total: 0, normal: 0, warning: 0, blacklist: 0 }\r\n          const total = (res.total ?? data.total)\r\n          this.userTotal = Number.isFinite(Number(total)) ? Number(total) : this.users.length\r\n        } else {\r\n          ElMessage.error(res?.msg || 'ç”¨æˆ·æ•°æ®åŠ è½½å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('ç”¨æˆ·æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.userLoading = false\r\n      }\r\n    },\r\n\r\n    handleUserSearch () {\r\n      this.loadAdminUsers(true)\r\n    },\r\n    resetUserFilters () {\r\n      this.userFilters = { keyword: '', roleId: '', status: '', onlyAbnormal: false }\r\n      this.loadAdminUsers(true)\r\n    },\r\n    handleUserSelectionChange (val) {\r\n      this.userSelection = val || []\r\n    },\r\n    handleUserPageChange (page) {\r\n      this.userPage = page\r\n      this.loadAdminUsers(false)\r\n    },\r\n    handleUserPageSizeChange (size) {\r\n      this.userPageSize = size\r\n      this.loadAdminUsers(true)\r\n    },\r\n    getUserStatusTagType (status) {\r\n      const s = Number(status)\r\n      if (s === 0) return 'success'\r\n      if (s === 1) return 'warning'\r\n      if (s === 2) return 'danger'\r\n      return ''\r\n    },\r\n    getUserStatusText (status) {\r\n      const s = Number(status)\r\n      if (s === 0) return 'æ­£å¸¸'\r\n      if (s === 1) return 'é¢„è­¦'\r\n      if (s === 2) return 'é»‘åå•'\r\n      return String(status)\r\n    },\r\n\r\n    userRowSelectable (row) {\r\n      // ç®¡ç†å‘˜ä¸å…è®¸åŠ å…¥/è§£é™¤é»‘åå•ï¼Œä¹Ÿä¸å‚ä¸æ‰¹é‡æ“ä½œ\r\n      return Number(row?.roleId) !== 0\r\n    },\r\n\r\n    getViolationTypeText (vType) {\r\n      if (vType === 'no_show') return 'æœªç­¾åˆ°'\r\n      if (vType === 'late') return 'è¿Ÿåˆ°'\r\n      if (vType === 'cancel') return 'å–æ¶ˆ'\r\n      return vType || 'â€”'\r\n    },\r\n\r\n    openCreateAdminDialog () {\r\n      this.createAdminVisible = true\r\n      this.$nextTick(() => {\r\n        try {\r\n          this.$refs.createAdminFormRef && this.$refs.createAdminFormRef.clearValidate && this.$refs.createAdminFormRef.clearValidate()\r\n        } catch (e) {\r\n          //\r\n        }\r\n      })\r\n    },\r\n\r\n    async submitCreateAdmin () {\r\n      const formRef = this.$refs.createAdminFormRef\r\n      if (!formRef) return\r\n      try {\r\n        await formRef.validate()\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      this.createAdminLoading = true\r\n      try {\r\n        const payload = {\r\n          account: (this.createAdminForm.account || '').trim(),\r\n          name: (this.createAdminForm.name || '').trim(),\r\n          password: this.createAdminForm.password\r\n        }\r\n        const res = await this.$axios.post('/user/admin/createAdmin', payload)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'åˆ›å»ºæˆåŠŸ')\r\n          this.createAdminVisible = false\r\n          this.createAdminForm = { account: '', name: '', password: '' }\r\n          await this.loadAdminUsers(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'åˆ›å»ºå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.createAdminLoading = false\r\n      }\r\n    },\r\n    async handleLockUser (row) {\r\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒåŠ å…¥é»‘åå•')\r\n      const id = row && row.id\r\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šå°†ã€Œ${row.name || row.studentNo || id}ã€åŠ å…¥é»‘åå•å—ï¼Ÿ`, 'åŠ å…¥é»‘åå•', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/user/admin/blacklist/${id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'å·²åŠ å…¥é»‘åå•')\r\n          await this.loadAdminUsers(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n    async handleUnlockUser (row) {\r\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒè§£é™¤é»‘åå•')\r\n      const id = row && row.id\r\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šè§£é™¤ã€Œ${row.name || row.studentNo || id}ã€çš„é»‘åå•å—ï¼Ÿè§£é™¤åå°†æ ¹æ®å½“å‰ä¿¡ç”¨åˆ†è‡ªåŠ¨åˆ¤å®šæ˜¯å¦ä¸ºé¢„è­¦ã€‚`, 'è§£é™¤é»‘åå•', {\r\n          type: 'warning',\r\n          confirmButtonText: 'è§£é™¤',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/user/admin/unblacklist/${id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'å·²è§£é™¤é»‘åå•')\r\n          await this.loadAdminUsers(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n    async handleResetPassword (row) {\r\n      if (Number(row?.roleId) === 0) return ElMessage.warning('ç®¡ç†å‘˜è´¦å·ä¸æ”¯æŒé‡ç½®å¯†ç ')\r\n\r\n      const id = row && row.id\r\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šé‡ç½®ã€Œ${row.name || row.studentNo || id}ã€çš„å¯†ç å—ï¼Ÿé‡ç½®åé»˜è®¤å¯†ç ä¸º 123456ã€‚`, 'é‡ç½®å¯†ç ', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post(`/user/admin/resetPassword/${id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'å¯†ç å·²é‡ç½®ä¸º 123456')\r\n        } else {\r\n          ElMessage.error(res?.msg || 'é‡ç½®å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('é‡ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n    async handleViewUserDetail (row) {\r\n      const id = row && row.id\r\n      if (!id) return ElMessage.error('ç¼ºå°‘ç”¨æˆ· id')\r\n      this.userDetailVisible = true\r\n      this.userDetailLoading = true\r\n      this.userDetail = { user: null, violationCount: 0, recentViolations: [] }\r\n      try {\r\n        const res = await this.$axios.get(`/user/admin/detail/${id}`)\r\n        if (res && Number(res.code) === 200) {\r\n          const d = res.data || {}\r\n          this.userDetail = {\r\n            user: d.user || null,\r\n            violationCount: d.violationCount || 0,\r\n            recentViolations: d.recentViolations || []\r\n          }\r\n        } else {\r\n          ElMessage.error(res?.msg || 'è·å–è¯¦æƒ…å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('è·å–è¯¦æƒ…å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.userDetailLoading = false\r\n      }\r\n    },\r\n    async handleBatchLock () {\r\n      const ids = (this.userSelection || []).filter(x => Number(x?.roleId) !== 0).map(x => x.id).filter(Boolean)\r\n      if (!ids.length) return\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡åŠ å…¥é»‘åå•ï¼ˆ${ids.length} äººï¼‰å—ï¼Ÿ`, 'æ‰¹é‡åŠ å…¥é»‘åå•', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post('/user/admin/batchBlacklist', { ids })\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'æ‰¹é‡åŠ å…¥é»‘åå•å®Œæˆ')\r\n          this.userSelection = []\r\n          await this.loadAdminUsers(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ‰¹é‡æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ‰¹é‡æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n    async handleBatchUnlock () {\r\n      const ids = (this.userSelection || []).filter(x => Number(x?.roleId) !== 0).map(x => x.id).filter(Boolean)\r\n      if (!ids.length) return\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šæ‰¹é‡è§£é™¤é»‘åå•ï¼ˆ${ids.length} äººï¼‰å—ï¼Ÿè§£é™¤åå°†æ ¹æ®å½“å‰ä¿¡ç”¨åˆ†è‡ªåŠ¨åˆ¤å®šæ˜¯å¦ä¸ºé¢„è­¦ã€‚`, 'æ‰¹é‡è§£é™¤é»‘åå•', {\r\n          type: 'warning',\r\n          confirmButtonText: 'è§£é™¤',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n\r\n      try {\r\n        const res = await this.$axios.post('/user/admin/batchUnblacklist', { ids })\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success(res?.msg || 'æ‰¹é‡è§£é™¤å®Œæˆ')\r\n          this.userSelection = []\r\n          await this.loadAdminUsers(false)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'æ‰¹é‡æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('æ‰¹é‡æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      }\r\n    },\r\n\r\n    /* seat methods */\r\n    async initSeatData () {\r\n      // ä»…åœ¨è¿›å…¥â€œåº§ä½ç®¡ç†â€æ—¶åˆå§‹åŒ–ï¼Œé¿å…å½±å“å…¶å®ƒé¡µé¢åŠ è½½\r\n      if (this.currentPage && this.currentPage !== 'admin-seats') return\r\n      this.seatLoading = true\r\n      try {\r\n        await this.loadSeatCampuses()\r\n        // é»˜è®¤é€‰æ‹©ï¼šä¼˜å…ˆå·²æœ‰é€‰æ‹©ï¼Œå…¶æ¬¡ç¬¬ä¸€é¡¹\r\n        if (!this.currentCampus) {\r\n          const first = (this.campusOptions || [])[0]\r\n          this.currentCampus = first ? first.value : ''\r\n        }\r\n        await this.loadSeatBuildings()\r\n        if (!this.currentBuild) {\r\n          const firstB = (this.buildOptions || [])[0]\r\n          this.currentBuild = firstB ? firstB.value : ''\r\n        }\r\n        await this.loadSeatRooms(true)\r\n      } finally {\r\n        this.seatLoading = false\r\n      }\r\n    },\r\n\r\n    campusLabel (v) {\r\n      const it = (this.campusOptions || []).find(x => x.value === v)\r\n      return it ? it.label : (v || '')\r\n    },\r\n    buildLabel (v) {\r\n      const it = (this.buildOptions || []).find(x => x.value === v)\r\n      return it ? it.label : (v || '')\r\n    },\r\n\r\n    async loadSeatCampuses () {\r\n      const res = await this.$axios.get('/room/admin/campuses', { params: { onlyOpen: this.onlyShowOpen ? 1 : 0 } })\r\n      if (res && Number(res.code) === 200) {\r\n        const arr = (res.data || [])\r\n        this.campusOptions = arr.map(x => ({ value: x, label: x }))\r\n      } else {\r\n        this.campusOptions = []\r\n      }\r\n    },\r\n    async loadSeatBuildings () {\r\n      const params = { onlyOpen: this.onlyShowOpen ? 1 : 0 }\r\n      if (this.currentCampus) params.campus = this.currentCampus\r\n      const res = await this.$axios.get('/room/admin/buildings', { params })\r\n      if (res && Number(res.code) === 200) {\r\n        const arr = (res.data || [])\r\n        this.buildOptions = arr.map(x => ({ value: x, label: x }))\r\n      } else {\r\n        this.buildOptions = []\r\n      }\r\n    },\r\n    async loadSeatRooms (autoSelect = false) {\r\n      const params = {\r\n        onlyOpen: this.onlyShowOpen ? 1 : 0,\r\n        campus: this.currentCampus || '',\r\n        building: this.currentBuild || '',\r\n        keyword: (this.roomKeyword || '').trim()\r\n      }\r\n      const res = await this.$axios.get('/room/admin/list', { params })\r\n      if (res && Number(res.code) === 200) {\r\n        this.rooms = (res.data || [])\r\n        if (autoSelect) {\r\n          if (!this.selectedRoomId && this.rooms.length) this.selectedRoomId = this.rooms[0].id\r\n          const exists = this.rooms.some(r => r.id === this.selectedRoomId)\r\n          if (!exists && this.rooms.length) this.selectedRoomId = this.rooms[0].id\r\n          if (this.selectedRoomId) await this.loadSeatLayout(this.selectedRoomId)\r\n        }\r\n      } else {\r\n        this.rooms = []\r\n      }\r\n    },\r\n    async loadSeatLayout (roomId) {\r\n      if (!roomId) return\r\n      const res = await this.$axios.get('/seat/admin/layout', { params: { roomId } })\r\n      if (res && Number(res.code) === 200 && res.data) {\r\n        const d = res.data || {}\r\n        const rows = d.rows || []\r\n        this.seatGrid = rows.map(r => ({\r\n          rowNo: r.rowNo,\r\n          seats: (r.seats || []).map(seat => ({\r\n            id: seat.id,\r\n            seatNo: seat.seatNo,\r\n            label: seat.displayNo || seat.seatNo,\r\n            status: seat.status,\r\n            selected: false\r\n          }))\r\n        }))\r\n        this.seatSelectedIds = new Set()\r\n      } else {\r\n        this.seatGrid = []\r\n        this.seatSelectedIds = new Set()\r\n      }\r\n    },\r\n\r\n    handleSeatCampusChange () {\r\n      // æ ¡åŒºå˜åŒ– => é‡æ–°åŠ è½½æ¥¼æ ‹+æˆ¿é—´\r\n      this.currentBuild = ''\r\n      this.loadSeatBuildings().then(() => {\r\n        const firstB = (this.buildOptions || [])[0]\r\n        this.currentBuild = firstB ? firstB.value : ''\r\n        this.loadSeatRooms(true)\r\n      })\r\n    },\r\n    handleSeatBuildChange () {\r\n      this.loadSeatRooms(true)\r\n    },\r\n    handleOnlyShowOpenChange () {\r\n      // åªæ˜¾ç¤ºå¼€æ”¾å˜åŒ– => options + list\r\n      this.loadSeatCampuses().then(() => {\r\n        // è‹¥å½“å‰æ ¡åŒºä¸åœ¨åˆ—è¡¨é‡Œï¼Œåˆ‡åˆ°ç¬¬ä¸€ä¸ª\r\n        if (this.currentCampus && !(this.campusOptions || []).some(x => x.value === this.currentCampus)) {\r\n          const first = (this.campusOptions || [])[0]\r\n          this.currentCampus = first ? first.value : ''\r\n        }\r\n        return this.loadSeatBuildings()\r\n      }).then(() => {\r\n        if (this.currentBuild && !(this.buildOptions || []).some(x => x.value === this.currentBuild)) {\r\n          const firstB = (this.buildOptions || [])[0]\r\n          this.currentBuild = firstB ? firstB.value : ''\r\n        }\r\n        return this.loadSeatRooms(true)\r\n      })\r\n    },\r\n    handleSeatKeywordInput () {\r\n      clearTimeout(this._seatKeywordTimer)\r\n      this._seatKeywordTimer = setTimeout(() => {\r\n        this.loadSeatRooms(true)\r\n      }, 300)\r\n    },\r\n\r\n    handleSelectRoom (room) {\r\n      if (!room || !room.id) return\r\n      this.selectedRoomId = room.id\r\n      this.loadSeatLayout(room.id)\r\n    },\r\n    async toggleRoomOpen (room) {\r\n      if (!room || !room.id) return\r\n      const toStatus = room.status === 'open' ? 'closed' : 'open'\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šå°†â€œ${room.name}â€è®¾ç½®ä¸º${toStatus === 'open' ? 'å¼€æ”¾' : 'å…³é—­'}å—ï¼Ÿ`, 'ç¡®è®¤æ“ä½œ', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n      const res = await this.$axios.put('/room/admin/status', { roomId: room.id, status: toStatus })\r\n      if (res && Number(res.code) === 200) {\r\n        ElMessage.success('æ›´æ–°æˆåŠŸ')\r\n        await this.loadSeatRooms(true)\r\n      } else {\r\n        ElMessage.error(res?.msg || 'æ›´æ–°å¤±è´¥')\r\n      }\r\n    },\r\n    handleEditRoom (room) {\r\n      // é¢„ç•™ï¼šåç»­æ‰©å±•ï¼ˆç¼–è¾‘å¼€æ”¾åº§ä½æ•°ã€å¤‡æ³¨ã€è§„åˆ™ç­‰ï¼‰\r\n      console.log('TODO: edit room', room)\r\n    },\r\n\r\n    seatCellClass (seat) {\r\n      return [`seat-status-${seat.status}`, seat.selected ? 'seat-selected' : '']\r\n    },\r\n    seatRowStyle (row) {\r\n      const n = (row && row.seats) ? row.seats.length : 0\r\n      // æ¯è¡Œç”¨ gridï¼ŒæŒ‰è¯¥è¡Œåº§ä½æ•°å¹³åˆ†å®½åº¦ï¼ˆå¡«æ»¡ã€ä¸ç•™ç©ºï¼‰\r\n      return {\r\n        gridTemplateColumns: `repeat(${Math.max(n, 1)}, minmax(0, 1fr))`\r\n      }\r\n    },\r\n    handleSeatClick (seat) {\r\n      if (!seat) return\r\n      // å·²å ç”¨çš„ä¸å…è®¸é€‰ä¸­ç¦ç”¨ï¼ˆé¿å…æŠŠæ­£åœ¨ç”¨çš„åº§ä½ç¦æ‰ï¼‰\r\n      if (seat.status === 'occupied') return\r\n      seat.selected = !seat.selected\r\n      if (seat.selected) this.seatSelectedIds.add(seat.id)\r\n      else this.seatSelectedIds.delete(seat.id)\r\n    },\r\n    async handleBatchDisable () {\r\n      const ids = Array.from(this.seatSelectedIds || [])\r\n      if (!ids.length) return ElMessage.warning('è¯·å…ˆé€‰ä¸­è¦ç¦ç”¨çš„åº§ä½')\r\n      try {\r\n        await ElMessageBox.confirm(`ç¡®å®šç¦ç”¨é€‰ä¸­çš„ ${ids.length} ä¸ªåº§ä½å—ï¼Ÿ`, 'æ‰¹é‡ç¦ç”¨', {\r\n          type: 'warning',\r\n          confirmButtonText: 'ç¦ç”¨',\r\n          cancelButtonText: 'å–æ¶ˆ'\r\n        })\r\n      } catch (e) {\r\n        return\r\n      }\r\n      const res = await this.$axios.post('/seat/admin/disable', { seatIds: ids })\r\n      if (res && Number(res.code) === 200) {\r\n        ElMessage.success('å·²ç¦ç”¨')\r\n        await this.loadSeatLayout(this.selectedRoomId)\r\n      } else {\r\n        ElMessage.error(res?.msg || 'ç¦ç”¨å¤±è´¥')\r\n      }\r\n    },\r\n    handleClearSelection () {\r\n      (this.seatGrid || []).forEach(row => {\r\n        (row.seats || []).forEach(seat => { seat.selected = false })\r\n      })\r\n      this.seatSelectedIds = new Set()\r\n    },\r\n\r\n    async exportGlobalConfig () {\r\n      try {\r\n        const blobRes = await this.$axios.get('/room/admin/export/global', { responseType: 'blob' })\r\n        this.downloadBlob(blobRes, `rooms_global_${Date.now()}.csv`)\r\n      } catch (e) {\r\n        ElMessage.error('å¯¼å‡ºå¤±è´¥')\r\n      }\r\n    },\r\n    async exportRoomSeatConfig () {\r\n      if (!this.selectedRoomId) return ElMessage.warning('è¯·å…ˆé€‰æ‹©è‡ªä¹ å®¤')\r\n      try {\r\n        const blobRes = await this.$axios.get('/room/admin/export/roomSeats', { params: { roomId: this.selectedRoomId }, responseType: 'blob' })\r\n        this.downloadBlob(blobRes, `room_${this.selectedRoomId}_seats_${Date.now()}.csv`)\r\n      } catch (e) {\r\n        ElMessage.error('å¯¼å‡ºå¤±è´¥')\r\n      }\r\n    },\r\n    downloadBlob (resp, filename) {\r\n      // axios æ‹¦æˆªå™¨å¯èƒ½ç›´æ¥è¿”å› Blobï¼Œè¿™é‡Œå…¼å®¹ä¸¤ç§\r\n      const blob = resp instanceof Blob ? resp : (resp && resp.data instanceof Blob ? resp.data : null)\r\n      if (!blob) return\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = filename\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      document.body.removeChild(a)\r\n      window.URL.revokeObjectURL(url)\r\n    },\r\n\r\n    openCreateRoomDialog () {\r\n      this.createRoomVisible = true\r\n      // åˆå§‹åŒ–é»˜è®¤å€¼\r\n      const c = this.currentCampus || ((this.campusOptions || [])[0] || {}).value || ''\r\n      this.createRoomForm.campus = c\r\n      this.createRoomForm.roomName = ''\r\n      this.createRoomForm.totalSeats = 80\r\n      this.createRoomForm.openSeats = 80\r\n      this.handleCreateRoomCampusChange(c)\r\n    },\r\n    async handleCreateRoomCampusChange (campusVal) {\r\n      const campus = campusVal || this.createRoomForm.campus\r\n      const res = await this.$axios.get('/room/admin/buildings', { params: { campus, onlyOpen: 0 } })\r\n      if (res && Number(res.code) === 200) {\r\n        const arr = res.data || []\r\n        this.createRoomBuildingOptions = arr.map(x => ({ value: x, label: x }))\r\n        if (!this.createRoomForm.building) {\r\n          this.createRoomForm.building = (this.createRoomBuildingOptions[0] || {}).value || ''\r\n        }\r\n      } else {\r\n        this.createRoomBuildingOptions = []\r\n        this.createRoomForm.building = ''\r\n      }\r\n    },\r\n    syncOpenSeats () {\r\n      // å½“å‰ç‰ˆæœ¬ï¼šå¼€æ”¾åº§ä½æ•°é»˜è®¤=åº§ä½æ•°\r\n      this.createRoomForm.openSeats = this.createRoomForm.totalSeats\r\n    },\r\n    async submitCreateRoom () {\r\n      const form = this.$refs.createRoomFormRef\r\n      if (form && form.validate) {\r\n        try {\r\n          await form.validate()\r\n        } catch (e) {\r\n          return\r\n        }\r\n      }\r\n      this.createRoomLoading = true\r\n      try {\r\n        const payload = { ...this.createRoomForm }\r\n        // ç®€åŒ–ï¼šå¼€æ”¾åº§ä½æ•°=åº§ä½æ•°\r\n        payload.openSeats = payload.totalSeats\r\n        const res = await this.$axios.post('/room/admin/create', payload)\r\n        if (res && Number(res.code) === 200) {\r\n          ElMessage.success('åˆ›å»ºæˆåŠŸ')\r\n          this.createRoomVisible = false\r\n          // è®©ç­›é€‰åˆ‡åˆ°æ–°åˆ›å»ºçš„æ ¡åŒº/æ¥¼æ ‹\r\n          this.currentCampus = payload.campus\r\n          this.currentBuild = payload.building\r\n          await this.loadSeatBuildings()\r\n          await this.loadSeatRooms(true)\r\n        } else {\r\n          ElMessage.error(res?.msg || 'åˆ›å»ºå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        ElMessage.error('åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æˆ–ç½‘ç»œè¿æ¥')\r\n      } finally {\r\n        this.createRoomLoading = false\r\n      }\r\n    },\r\n\r\n\r\n    /* ---------- admin feedback/complaints ---------- */\r\n    onFbAdminFilterChange () {\r\n      this.fbAdminPageNum = 1\r\n      this.loadAdminFeedback(false)\r\n      this.loadAdminFeedbackStats()\r\n    },\r\n    fbAdminPageChange (p) {\r\n      this.fbAdminPageNum = Number(p || 1)\r\n      this.loadAdminFeedback(false)\r\n    },\r\n    fbAdminStatusText (s) {\r\n      const v = String(s || '')\r\n      if (v === 'pending') return 'å¾…å¤„ç†'\r\n      if (v === 'processing') return 'å¤„ç†ä¸­'\r\n      if (v === 'resolved') return 'å·²è§£å†³'\r\n      return v || '-'\r\n    },\r\n    fbAdminStatusTagType (s) {\r\n      const v = String(s || '')\r\n      if (v === 'pending') return 'warning'\r\n      if (v === 'processing') return 'info'\r\n      if (v === 'resolved') return 'success'\r\n      return ''\r\n    },\r\n    fbAdminCategoryText (c) {\r\n      const v = String(c || '')\r\n      if (v === 'env') return 'ç¯å¢ƒè¯„ä»·'\r\n      if (v === 'service') return 'æœåŠ¡è¯„ä»·'\r\n      if (v === 'suggestion') return 'å»ºè®®'\r\n      if (v === 'complaint') return 'æŠ•è¯‰'\r\n      if (v === 'appeal') return 'ç”³è¯‰'\r\n      if (v === 'other') return 'å…¶ä»–'\r\n      return v || '-'\r\n    },\r\n    fbAdminCategoryTagType (c) {\r\n      const v = String(c || '')\r\n      if (v === 'complaint') return 'danger'\r\n      if (v === 'appeal') return 'warning'\r\n      if (v === 'suggestion') return 'success'\r\n      if (v === 'env' || v === 'service') return 'info'\r\n      return ''\r\n    },\r\n    formatYmdhm (dtStr) {\r\n      if (!dtStr) return '-'\r\n      const s = String(dtStr).replace('T', ' ')\r\n      const parts = s.split(' ')\r\n      const d = parts[0] || ''\r\n      const t = (parts[1] || '').slice(0, 5)\r\n      if (!d) return s\r\n      const ds = d.split('-')\r\n      if (ds.length >= 3) {\r\n        const mmdd = `${String(ds[1]).padStart(2, '0')}-${String(ds[2]).padStart(2, '0')}`\r\n        return t ? `${mmdd} ${t}` : mmdd\r\n      }\r\n      return s\r\n    },\r\n    async loadAdminFeedbackStats () {\r\n      try {\r\n        const res = await this.$axios.get('/feedback/admin/stats')\r\n        if (res && res.code === 200) {\r\n          const d = res.data || {}\r\n          this.fbAdminStats = {\r\n            pending: Number(d.pending || 0),\r\n            processing: Number(d.processing || 0),\r\n            resolved: Number(d.resolved || 0)\r\n          }\r\n          // åŒæ­¥ Dashboard å¾…åŠæ•°é‡ï¼ˆå¯é€‰ï¼‰\r\n          this.metrics.pendingItems = this.fbAdminStats.pending + this.fbAdminStats.processing\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    },\r\n    async loadAdminFeedback (resetPage = false) {\r\n      if (resetPage) this.fbAdminPageNum = 1\r\n      this.fbAdminLoading = true\r\n      try {\r\n        const params = {\r\n          pageNum: this.fbAdminPageNum,\r\n          pageSize: this.fbAdminPageSize\r\n        }\r\n        if (this.fbAdminOnlyPending) params.onlyPending = true\r\n        if (this.fbAdminStatusFilter) params.status = this.fbAdminStatusFilter\r\n        if (this.fbAdminCategoryFilter) params.category = this.fbAdminCategoryFilter\r\n        if (this.fbAdminKeyword) params.keyword = this.fbAdminKeyword\r\n\r\n        const res = await this.$axios.get('/feedback/admin/page', { params })\r\n        if (res && res.code === 200) {\r\n          this.fbAdminList = Array.isArray(res.data) ? res.data : []\r\n          this.fbAdminTotal = Number(res.total || 0)\r\n        } else {\r\n          this.fbAdminList = []\r\n          this.fbAdminTotal = 0\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n        this.fbAdminList = []\r\n        this.fbAdminTotal = 0\r\n      } finally {\r\n        this.fbAdminLoading = false\r\n      }\r\n    },\r\n    openFbAdminDetail (row) {\r\n      this.fbAdminDetail = row ? { ...row } : null\r\n      const currentStatus = String((row && row.status) || 'pending')\r\n      this.fbAdminHandleForm = {\r\n        status: currentStatus === 'resolved' ? 'resolved' : 'processing',\r\n        reply: (row && row.reply) ? String(row.reply) : '',\r\n        cancelReservation: false\r\n      }\r\n      this.fbAdminDrawerVisible = true\r\n    },\r\n    async quickResolveFb (row) {\r\n      if (!row || !row.id) return\r\n      try {\r\n        await ElMessageBox.confirm('ç¡®è®¤å°†è¯¥åé¦ˆæ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Ÿ', 'æç¤º', {\r\n          confirmButtonText: 'ç¡®å®š',\r\n          cancelButtonText: 'å–æ¶ˆ',\r\n          type: 'warning'\r\n        })\r\n      } catch (_) {\r\n        return\r\n      }\r\n\r\n      this.fbAdminSubmitting = true\r\n      try {\r\n        const payload = {\r\n          id: Number(row.id),\r\n          status: 'resolved',\r\n          reply: (row && row.reply) ? String(row.reply) : ''\r\n        }\r\n        const res = await this.$axios.post('/feedback/admin/handle', payload)\r\n        if (res && res.code === 200) {\r\n          ElMessage.success(res.msg || 'å·²æ ‡è®°ä¸ºå·²è§£å†³')\r\n          this.loadAdminFeedback(false)\r\n          this.loadAdminFeedbackStats()\r\n        } else {\r\n          ElMessage.error((res && res.msg) || 'æ“ä½œå¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n        ElMessage.error('è¯·æ±‚å¤±è´¥')\r\n      } finally {\r\n        this.fbAdminSubmitting = false\r\n      }\r\n    },\r\n    async submitFbAdminHandle () {\r\n      if (!this.fbAdminDetail || !this.fbAdminDetail.id) return\r\n      if (String(this.fbAdminHandleForm.status) === 'resolved' && !String(this.fbAdminHandleForm.reply || '').trim()) {\r\n        try {\r\n          await ElMessageBox.confirm('ä½ å°†æ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Œä½†å›å¤å†…å®¹ä¸ºç©ºã€‚ç»§ç»­æäº¤ï¼Ÿ', 'æç¤º', {\r\n            confirmButtonText: 'ç»§ç»­',\r\n            cancelButtonText: 'è¿”å›å¡«å†™',\r\n            type: 'warning'\r\n          })\r\n        } catch (_) {\r\n          return\r\n        }\r\n      }\r\n\r\n      this.fbAdminSubmitting = true\r\n      try {\r\n        const payload = {\r\n          id: Number(this.fbAdminDetail.id),\r\n          status: this.fbAdminHandleForm.status,\r\n          reply: this.fbAdminHandleForm.reply,\r\n          cancelReservation: !!this.fbAdminHandleForm.cancelReservation\r\n        }\r\n        const res = await this.$axios.post('/feedback/admin/handle', payload)\r\n        if (res && res.code === 200) {\r\n          ElMessage.success(res.msg || 'æäº¤æˆåŠŸ')\r\n          this.fbAdminDrawerVisible = false\r\n          this.fbAdminDetail = null\r\n          this.loadAdminFeedback(false)\r\n          this.loadAdminFeedbackStats()\r\n        } else {\r\n          ElMessage.error((res && res.msg) || 'æäº¤å¤±è´¥')\r\n        }\r\n      } catch (e) {\r\n        console.error(e)\r\n        ElMessage.error('è¯·æ±‚å¤±è´¥')\r\n      } finally {\r\n        this.fbAdminSubmitting = false\r\n      }\r\n    },\r\n\r\n    resetSeatRule () {\r\n      this.seatRule = {\r\n        allowCrossTime: false,\r\n        maxHoursPerOrder: 4,\r\n        maxOrdersPerDay: 2,\r\n        autoReleaseNoSign: true,\r\n        releaseAfterMinutes: 20,\r\n        violationStrategy: 'day-ban',\r\n        description: 'æœ¬è‡ªä¹ å®¤éœ€ä¿æŒå®‰é™ï¼Œè¿Ÿåˆ°è¶…è¿‡ 20 åˆ†é’Ÿç³»ç»Ÿå°†è‡ªåŠ¨é‡Šæ”¾åº§ä½ã€‚'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.main {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* é€šç”¨å¡ç‰‡ */\r\n.card {\r\n  background-color: #ffffff;\r\n  border-radius: 16px;\r\n  padding: 20px 24px;\r\n  box-shadow: 0 8px 24px rgba(15, 23, 42, 0.06);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.page-title {\r\n  margin: 0;\r\n  font-size: 18px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.page-subtitle {\r\n  margin: 4px 0 0;\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n}\r\n\r\n/* ============ Dashboard styles ============ */\r\n.dashboard-page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 14px;\r\n}\r\n\r\n.welcome-card {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 18px;\r\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\r\n  color: #ffffff;\r\n  border: none;\r\n}\r\n\r\n.welcome-left, .welcome-right { flex: 1.1; }\r\n\r\n.welcome-title-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.welcome-title {\r\n  margin: 0;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.welcome-subtitle {\r\n  margin: 6px 0 8px;\r\n  font-size: 13px;\r\n  opacity: 0.95;\r\n}\r\n\r\n.welcome-meta {\r\n  font-size: 12px;\r\n  opacity: 0.95;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.meta-separator { opacity: 0.7; }\r\n\r\n.metric-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, minmax(0, 1fr));\r\n  gap: 10px;\r\n}\r\n\r\n.metric-item {\r\n  background: rgba(15, 23, 42, 0.16);\r\n  border-radius: 12px;\r\n  padding: 10px 12px;\r\n}\r\n\r\n.metric-label {\r\n  font-size: 12px;\r\n  opacity: 0.95;\r\n}\r\n\r\n.metric-value {\r\n  margin-top: 4px;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.metric-value.warning { color: #fee2e2; }\r\n\r\n.metric-unit { font-size: 12px; margin-left: 2px; }\r\n\r\n.metric-desc {\r\n  margin-top: 4px;\r\n  font-size: 12px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.metric-progress { margin-top: 4px; }\r\n\r\n.middle-row {\r\n  display: flex;\r\n  gap: 14px;\r\n  align-items: stretch;\r\n}\r\n\r\n.trend-card { flex: 1.2; }\r\n.notice-card { flex: 1; }\r\n\r\n.card-header-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.card-title {\r\n  margin: 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.card-subtitle {\r\n  margin: 4px 0 0;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.trend-extra {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n  color: #4b5563;\r\n}\r\n\r\n.trend-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.trend-item {\r\n  padding: 6px 0;\r\n  border-bottom: 1px dashed #e5e7eb;\r\n}\r\n\r\n.trend-item:last-child { border-bottom: none; }\r\n\r\n.trend-item-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.trend-item-title { font-size: 13px; color: #111827; }\r\n.trend-item-value { font-size: 13px; font-weight: 600; color: #111827; }\r\n.trend-progress { margin: 4px 0; }\r\n.trend-item-desc { font-size: 12px; color: #6b7280; }\r\n\r\n.notice-carousel { margin-top: 4px; }\r\n.notice-item { display: flex; flex-direction: column; justify-content: center; }\r\n\r\n.notice-tag-wrapper { display: flex; align-items: center; gap: 8px; }\r\n.notice-time { font-size: 12px; color: #9ca3af; }\r\n\r\n.notice-title { margin-top: 4px; font-size: 14px; font-weight: 600; color: #111827; }\r\n.notice-desc { margin-top: 2px; font-size: 12px; color: #4b5563; }\r\n\r\n.notice-footer {\r\n  margin-top: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.notice-dot {\r\n  width: 6px;\r\n  height: 6px;\r\n  border-radius: 999px;\r\n  background-color: #22c55e;\r\n}\r\n\r\n.todo-table { margin-top: 4px; }\r\n\r\n.todo-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.dashboard-row {\r\n  display: flex;\r\n  gap: 14px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.dashboard-card { flex: 1; min-width: 280px; }\r\n\r\n/* timeline */\r\n.timeline-list { list-style: none; padding: 0; margin: 4px 0 0; }\r\n.timeline-item { padding: 10px 0; border-bottom: 1px dashed #e5e7eb; }\r\n.timeline-item:last-child { border-bottom: none; }\r\n\r\n.timeline-main { display: flex; justify-content: space-between; align-items: center; gap: 8px; }\r\n.timeline-text { font-size: 13px; color: #111827; }\r\n.timeline-tag { font-size: 12px; padding: 2px 8px; border-radius: 999px; }\r\n.tag-book { background-color: #eff6ff; color: #1d4ed8; }\r\n.tag-sign { background-color: #ecfdf3; color: #15803d; }\r\n.tag-cancel { background-color: #fef3c7; color: #b45309; }\r\n.timeline-time { margin-top: 4px; font-size: 12px; color: #6b7280; }\r\n\r\n/* quick actions */\r\n.quick-actions { display: flex; flex-wrap: wrap; gap: 8px; }\r\n.quick-tip { margin-top: 8px; font-size: 12px; color: #6b7280; }\r\n\r\n/* ============ Reservation/User shared styles ============ */\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.reservation-header-right,\r\n.user-header-right {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.auto-refresh {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n  color: #4b5563;\r\n}\r\n\r\n.filter-bar {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.filter-item { min-width: 180px; }\r\n.filter-input { flex: 2; }\r\n.filter-select, .filter-date { flex: 1; }\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.input-prefix-icon { font-size: 14px; }\r\n\r\n.reservation-stats {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12px;\r\n  margin: 8px 0 12px;\r\n}\r\n\r\n.stat-card {\r\n  flex: 1;\r\n  min-width: 140px;\r\n  border-radius: 12px;\r\n  background-color: #f9fafb;\r\n  padding: 10px 12px;\r\n}\r\n\r\n.stat-label { font-size: 12px; color: #6b7280; }\r\n.stat-value { margin-top: 4px; font-size: 18px; font-weight: 600; color: #111827; }\r\n\r\n.reservation-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 4px 0 12px;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.toolbar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.toolbar-right { font-size: 12px; color: #6b7280; }\r\n.toolbar-tip { font-size: 12px; color: #4b5563; }\r\n\r\n.reservation-table, .user-table { width: 100%; }\r\n\r\n.student-cell { display: flex; flex-direction: column; }\r\n.student-name { font-size: 13px; color: #111827; }\r\n.student-no { font-size: 12px; color: #6b7280; }\r\n\r\n.remark-text { font-size: 12px; color: #4b5563; }\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.el-dropdown-link { font-size: 13px; color: #2563eb; cursor: pointer; }\r\n.disabled-text { font-size: 12px; color: #9ca3af; }\r\n\r\n.table-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 12px;\r\n}\r\n\r\n/* user special */\r\n.user-name-cell { display: flex; flex-direction: column; }\r\n.user-name-main { font-size: 13px; color: #111827; }\r\n\r\n.user-role-tag {\r\n  margin-left: 4px;\r\n  padding: 1px 6px;\r\n  border-radius: 999px;\r\n  font-size: 11px;\r\n  background-color: #eff6ff;\r\n  color: #1d4ed8;\r\n}\r\n\r\n.user-role-tag.teacher { background-color: #ecfdf3; color: #15803d; }\r\n.user-role-tag.admin { background-color: #fef3c7; color: #b45309; }\r\n\r\n.user-extra { font-size: 12px; color: #6b7280; }\r\n\r\n.credit-score { font-size: 13px; font-weight: 600; color: #111827; }\r\n.credit-low { color: #b91c1c; }\r\n.credit-high { color: #15803d; }\r\n\r\n/* ============ Seat Manage styles ============ */\r\n.seat-manage {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n\r\n.seat-head-card {\r\n  padding: 14px 18px;\r\n}\r\n\r\n\r\n.seat-head-row {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: space-between;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n.seat-head-left {\r\n  flex: 1;\r\n  min-width: 260px;\r\n}\r\n\r\n.seat-summary-box {\r\n  border-radius: 16px;\r\n  padding: 12px 14px;\r\n  background: linear-gradient(135deg, #eef6ff, #ffffff);\r\n  border: 1px solid #e6eef9;\r\n  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.05);\r\n}\r\n\r\n.seat-summary-inline {\r\n  width: 420px;\r\n  padding: 12px 14px;\r\n  margin-left: auto;\r\n}\r\n.summary-dot {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 999px;\r\n  background: linear-gradient(135deg, #60a5fa, #a78bfa);\r\n  box-shadow: 0 6px 14px rgba(59, 130, 246, 0.25);\r\n}\r\n\r\n.summary-title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 13px;\r\n  font-weight: 700;\r\n  color: #0f172a;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.summary-main { display: flex; flex-direction: column; gap: 6px; }\r\n\r\n.summary-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 8px 12px;\r\n}\r\n\r\n.summary-item {\r\n  min-width: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n}\r\n\r\n\r\n.summary-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  gap: 10px;\r\n}\r\n\r\n.summary-label {\r\n  font-size: 11px;\r\n  color: #64748b;\r\n}\r\n\r\n.summary-value {\r\n  font-size: 13px;\r\n  color: #0f172a;\r\n  font-weight: 700;\r\n  text-align: right;\r\n  line-height: 1.2;\r\n}\r\n\r\n.mini-pill {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 2px 8px;\r\n  border-radius: 999px;\r\n  font-size: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  background: #f9fafb;\r\n  color: #374151;\r\n}\r\n\r\n.mini-pill.on {\r\n  border-color: #bfdbfe;\r\n  background: #eff6ff;\r\n  color: #1d4ed8;\r\n}\r\n\r\n.seat-filter-row {\r\n  margin-top: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.seat-filter-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.seat-filter-right {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.seat-filter-actions {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n.top-select { min-width: 180px; }\r\n\r\n.seat-filter-switch {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  font-size: 12px;\r\n  color: #475569;\r\n  padding: 4px 10px;\r\n  border-radius: 999px;\r\n  background: #f8fafc;\r\n  border: 1px solid #e5e7eb;\r\n}\r\n\r\n.seat-layout {\r\n  display: flex;\r\n  gap: 14px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.seat-left-card {\r\n  flex: 0 0 40%;\r\n  max-width: 440px;\r\n}\r\n\r\n.left-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.left-title { margin: 0; font-size: 15px; font-weight: 700; color: #111827; }\r\n.left-subtitle { margin: 4px 0 0; font-size: 12px; color: #6b7280; }\r\n\r\n.left-filter {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.capacity-radio { width: 100%; }\r\n\r\n.room-list-wrap {\r\n  border-radius: 14px;\r\n  border: 1px solid #eef2f7;\r\n  background: linear-gradient(135deg, #ffffff, #fbfdff);\r\n  overflow: hidden;\r\n}\r\n\r\n.room-list {\r\n  padding: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.room-item {\r\n  border: 1px solid #eef2f7;\r\n  border-radius: 14px;\r\n  padding: 12px 12px;\r\n  background: #ffffff;\r\n  display: grid;\r\n  grid-template-columns: 1fr auto;\r\n  gap: 10px 12px;\r\n  cursor: pointer;\r\n  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;\r\n}\r\n\r\n.room-item:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.06);\r\n  border-color: #dbeafe;\r\n}\r\n\r\n.room-item.active {\r\n  border-color: #c7d2fe;\r\n  box-shadow: 0 12px 26px rgba(99, 102, 241, 0.10);\r\n  background: linear-gradient(135deg, #ffffff, #eef2ff);\r\n}\r\n\r\n.room-item.closed {\r\n  opacity: 0.88;\r\n}\r\n\r\n.room-item-main { min-width: 0; }\r\n.room-item-title { font-size: 14px; font-weight: 700; color: #111827; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\r\n.room-item-sub { margin-top: 4px; font-size: 12px; color: #6b7280; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\r\n\r\n.room-item-meta {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  justify-content: flex-end;\r\n  white-space: nowrap;\r\n}\r\n\r\n.room-item-usage {\r\n  font-size: 12px;\r\n  color: #111827;\r\n  font-weight: 700;\r\n  padding: 2px 8px;\r\n  border-radius: 999px;\r\n  background: #f3f4f6;\r\n}\r\n\r\n.room-item-actions {\r\n  grid-column: 1 / -1;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n\r\n.room-empty {\r\n  padding: 18px 10px;\r\n  text-align: center;\r\n  color: #6b7280;\r\n  font-size: 13px;\r\n}\r\n\r\n.seat-right { flex: 1; }\r\n.seat-right-card { width: 100%; }\r\n\r\n.right-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 6px;\r\n  gap: 16px;\r\n}\r\n\r\n.right-title { margin: 0; font-size: 16px; font-weight: 800; color: #111827; }\r\n.right-subtitle { margin: 6px 0 0; font-size: 12px; color: #6b7280; }\r\n\r\n.right-header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.seat-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(4, minmax(0, 1fr));\r\n  gap: 10px;\r\n  margin: 10px 0 12px;\r\n}\r\n\r\n.seat-stats .stat-card {\r\n  min-width: 0;\r\n  padding: 10px 12px;\r\n  background: linear-gradient(135deg, #ffffff, #f8fafc);\r\n  border: 1px solid #eef2f7;\r\n}\r\n\r\n@media (max-width: 1100px) {\r\n  .seat-stats {\r\n    grid-template-columns: repeat(2, minmax(0, 1fr));\r\n  }\r\n  .seat-summary-inline {\r\n    width: 100%;\r\n    margin-left: 0;\r\n  }\r\n}\r\n\r\n@media (max-width: 520px) {\r\n  .seat-stats {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n.seat-stats-compact { margin-bottom: 6px; }\r\n\r\n.seat-tabs { margin-top: 4px; }\r\n\r\n.layout-toolbar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 4px 0 8px;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.layout-toolbar-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.layout-toolbar-right {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.seat-legend {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 14px;\r\n  margin: 4px 0 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  font-size: 12px;\r\n  color: #4b5563;\r\n}\r\n\r\n.legend-dot {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 999px;\r\n  display: inline-block;\r\n}\r\n\r\n.legend-free { background-color: #60a5fa; }\r\n.legend-occupied { background-color: #f87171; }\r\n.legend-disabled { background-color: #9ca3af; }\r\n.legend-selected { background-color: #a78bfa; }\r\n\r\n.seat-grid {\r\n  width: 100%;\r\n  border-radius: 16px;\r\n  background: linear-gradient(135deg, #f3f4f6, #fbfdff);\r\n  padding: 12px;\r\n  box-sizing: border-box;\r\n  border: 1px solid #eef2f7;\r\n}\r\n\r\n.seat-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n  gap: 10px;\r\n}\r\n\r\n.seat-row:last-child { margin-bottom: 0; }\r\n\r\n.seat-row-label {\r\n  width: 76px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.seat-row-seats {\r\n  flex: 1;\r\n  display: grid;\r\n  grid-template-columns: repeat(8, minmax(0, 1fr));\r\n  gap: 8px;\r\n}\r\n\r\n.seat-cell {\r\n  height: 34px;\r\n  border-radius: 12px;\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n  position: relative;\r\n  transition: transform .1s ease, box-shadow .12s ease, background-color .12s ease;\r\n  border: 1px solid #e5e7eb;\r\n  background: #ffffff;\r\n  padding: 0;\r\n}\r\n\r\n.seat-cell:hover {\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 10px 20px rgba(15, 23, 42, 0.08);\r\n}\r\n\r\n.seat-status-free { border-color: #dbeafe; background: #ffffff; }\r\n.seat-status-occupied { border-color: #fecaca; background: #fff1f2; }\r\n.seat-status-disabled { border-color: #e5e7eb; background: #f3f4f6; }\r\n\r\n.seat-selected {\r\n  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.55);\r\n  border-color: #c7d2fe;\r\n  background: #eef2ff;\r\n}\r\n\r\n.seat-no {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translate(-50%, -50%);\r\n  font-size: 12px;\r\n  font-weight: 700;\r\n  color: #0f172a;\r\n  user-select: none;\r\n}\r\n\r\n.seat-hint {\r\n  margin-top: 10px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.rule-form { margin-top: 6px; }\r\n\r\n.item-desc {\r\n  margin-left: 6px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n\r\n.inline-group {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n}\r\n\r\n.seat-empty-state {\r\n  margin-top: 18px;\r\n  border-radius: 16px;\r\n  padding: 18px 16px;\r\n  border: 1px dashed #e5e7eb;\r\n  background: #fafafa;\r\n}\r\n\r\n.empty-title {\r\n  font-size: 14px;\r\n  font-weight: 800;\r\n  color: #111827;\r\n}\r\n\r\n.empty-desc {\r\n  margin-top: 6px;\r\n  font-size: 12px;\r\n  color: #6b7280;\r\n}\r\n/* simple page */\r\n.simple-tip { margin-top: 12px; font-size: 13px; color: #4b5563; }\r\n\r\n/* responsive */\r\n@media (max-width: 1024px) {\r\n  .welcome-card { flex-direction: column; }\r\n  .metric-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }\r\n  .middle-row { flex-direction: column; }\r\n}\r\n\r\n@media (max-width: 980px) {\r\n  .seat-layout { flex-direction: column; }\r\n  .seat-left-card { flex: 1; max-width: 100%; }\r\n}\r\n\r\n@media (max-width: 900px) {\r\n  .card-header { flex-direction: column; align-items: flex-start; gap: 8px; }\r\n  .reservation-header-right, .user-header-right { width: 100%; justify-content: flex-start; }\r\n  .filter-bar { flex-direction: column; }\r\n  .filter-item, .filter-input, .filter-select, .filter-date { width: 100%; }\r\n  .reservation-toolbar { flex-direction: column; align-items: flex-start; }\r\n  .table-footer { justify-content: center; }\r\n}\r\n\r\n@media (max-width: 780px) {\r\n  .seat-top-card { flex-direction: column; align-items: flex-start; }\r\n  .seat-top-right { flex-wrap: wrap; }\r\n  .right-header { flex-direction: column; align-items: flex-start; }\r\n  .layout-toolbar { flex-direction: column; align-items: flex-start; }\r\n}\r\n\r\n.dashboard-card-full { flex: 1 1 100%; }\r\n\r\n.activity-two-col {\r\n  display: flex;\r\n  align-items: stretch;\r\n  margin-top: 4px;\r\n}\r\n\r\n.activity-col { flex: 1; }\r\n\r\n.activity-divider {\r\n  width: 1px;\r\n  background-color: #e5e7eb;\r\n  margin: 0 14px;\r\n}\r\n\r\n@media (max-width: 960px) {\r\n  .activity-two-col { flex-direction: column; }\r\n  .activity-divider { display: none; }\r\n}\r\n\r\n\r\n/* -------------------- admin notice (announcement) -------------------- */\r\n.admin-notice-head-actions { display: flex; gap: 10px; align-items: center; }\r\n\r\n.admin-notice-loading,\r\n.admin-notice-empty {\r\n  padding: 14px 10px;\r\n  color: #6b7280;\r\n  font-size: 13px;\r\n}\r\n\r\n.admin-notice-home-list { list-style: none; padding: 0; margin: 8px 0 0; display: flex; flex-direction: column; gap: 10px; }\r\n.admin-notice-home-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px 12px;\r\n  border: 1px solid #eef2f7;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease;\r\n  background: #fff;\r\n}\r\n.admin-notice-home-item:hover { transform: translateY(-1px); box-shadow: 0 8px 18px rgba(15, 23, 42, 0.06); background: #fbfdff; }\r\n\r\n.admin-notice-badges { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; min-width: 240px; }\r\n.admin-notice-pill {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  padding: 3px 10px;\r\n  border-radius: 999px;\r\n  font-size: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  color: #374151;\r\n  background: #ffffff;\r\n}\r\n.admin-notice-pill.admin-top { border-color: #fde68a; background: #fffbeb; color: #92400e; }\r\n.admin-notice-icon { font-size: 13px; }\r\n\r\n.admin-notice-pill.type-RULE { border-color: #dbeafe; background: #eff6ff; color: #1d4ed8; }\r\n.admin-notice-pill.type-ADJUSTMENT { border-color: #e0f2fe; background: #f0f9ff; color: #0369a1; }\r\n.admin-notice-pill.type-EMERGENCY { border-color: #fee2e2; background: #fff1f2; color: #b91c1c; }\r\n.admin-notice-pill.type-MAINTENANCE { border-color: #ede9fe; background: #f5f3ff; color: #6d28d9; }\r\n.admin-notice-pill.type-EXAM { border-color: #dcfce7; background: #f0fdf4; color: #15803d; }\r\n.admin-notice-pill.type-OTHER { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\r\n\r\n.admin-notice-pill.level-IMPORTANT { border-color: #fecaca; background: #fff1f2; color: #b91c1c; }\r\n.admin-notice-pill.level-WARNING { border-color: #fde68a; background: #fffbeb; color: #92400e; }\r\n.admin-notice-pill.level-INFO { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\r\n\r\n.admin-notice-main { flex: 1; min-width: 0; }\r\n.admin-notice-title { font-size: 14px; font-weight: 700; color: #111827; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\r\n.admin-notice-snippet { margin-top: 4px; font-size: 12px; color: #6b7280; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\r\n.admin-notice-meta { margin-top: 6px; font-size: 12px; color: #9ca3af; display: flex; align-items: center; gap: 8px; }\r\n.admin-dot { opacity: .8; }\r\n.admin-notice-right { color: #9ca3af; font-size: 22px; padding-left: 8px; }\r\n\r\n.admin-notice-toolbar { display: flex; justify-content: space-between; gap: 14px; margin-bottom: 12px; flex-wrap: wrap; }\r\n.admin-notice-filters { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }\r\n.f-item { display: inline-flex; align-items: center; gap: 8px; }\r\n.f-label { color: #6b7280; font-size: 12px; }\r\n.admin-notice-toolbar-right { display: flex; align-items: center; gap: 12px; }\r\n.admin-notice-count { font-size: 12px; color: #6b7280; }\r\n\r\n.admin-notice-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }\r\n.admin-notice-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  padding: 12px 12px;\r\n  border: 1px solid #eef2f7;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  background: #fff;\r\n}\r\n.admin-notice-item:hover { background: #fbfdff; }\r\n\r\n.admin-notice-actions { display: flex; align-items: center; gap: 10px; flex-shrink: 0; }\r\n\r\n.admin-notice-pagination { margin-top: 14px; display: flex; justify-content: flex-end; }\r\n\r\n.admin-notice-detail-actions { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }\r\n.admin-notice-detail-right { display: flex; gap: 10px; }\r\n\r\n.admin-notice-detail-card {\r\n  border: 1px solid #eef2f7;\r\n  border-radius: 14px;\r\n  padding: 14px 14px;\r\n  background: #fff;\r\n}\r\n\r\n.d-title { font-size: 18px; font-weight: 800; color: #111827; line-height: 1.35; }\r\n.d-tags { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }\r\n.d-tag {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 6px;\r\n  padding: 4px 10px;\r\n  border-radius: 999px;\r\n  font-size: 12px;\r\n  border: 1px solid #e5e7eb;\r\n  color: #374151;\r\n  background: #fff;\r\n}\r\n.d-tag.top { border-color: #fde68a; background: #fffbeb; color: #92400e; }\r\n.d-tag.type-RULE { border-color: #dbeafe; background: #eff6ff; color: #1d4ed8; }\r\n.d-tag.type-ADJUSTMENT { border-color: #e0f2fe; background: #f0f9ff; color: #0369a1; }\r\n.d-tag.type-EMERGENCY { border-color: #fee2e2; background: #fff1f2; color: #b91c1c; }\r\n.d-tag.type-MAINTENANCE { border-color: #ede9fe; background: #f5f3ff; color: #6d28d9; }\r\n.d-tag.type-EXAM { border-color: #dcfce7; background: #f0fdf4; color: #15803d; }\r\n.d-tag.type-OTHER { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\r\n.d-tag.level-IMPORTANT { border-color: #fecaca; background: #fff1f2; color: #b91c1c; }\r\n.d-tag.level-WARNING { border-color: #fde68a; background: #fffbeb; color: #92400e; }\r\n.d-tag.level-INFO { border-color: #e5e7eb; background: #f9fafb; color: #374151; }\r\n\r\n.d-info { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px 16px; }\r\n.d-info-item { display: flex; gap: 10px; font-size: 13px; }\r\n.d-info-item .k { color: #6b7280; min-width: 64px; }\r\n.d-info-item .v { color: #111827; font-weight: 600; }\r\n\r\n.d-content { white-space: pre-wrap; font-size: 14px; line-height: 1.7; color: #111827; }\r\n\r\n.admin-notice-form :deep(.el-form-item) { margin-bottom: 14px; }\r\n\r\n@media (max-width: 980px) {\r\n  .admin-notice-badges { min-width: 200px; }\r\n  .d-info { grid-template-columns: 1fr; }\r\n}\r\n\r\n\r\n\r\n/* ====== Admin Complaints ====== */\r\n.complaints-page{display:flex;flex-direction:column;gap:14px;}\r\n.complaints-head{display:flex;align-items:flex-start;justify-content:space-between;gap:14px;}\r\n.complaints-head-left .page-title{margin:0;}\r\n.complaints-head-left .page-subtitle{margin-top:6px;}\r\n\r\n.complaints-head-right{display:flex;align-items:center;gap:12px;}\r\n.fb-stats{display:flex;gap:10px;}\r\n.fb-stat{min-width:72px;border:1px solid #eef2f7;background:#fff;border-radius:12px;padding:8px 10px;text-align:center;}\r\n.fb-stat-num{font-size:18px;font-weight:800;color:#111827;line-height:1;}\r\n.fb-stat-label{font-size:12px;color:#6b7280;margin-top:6px;}\r\n\r\n.complaints-body{padding-top:14px;}\r\n.complaints-toolbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;}\r\n.tool-left{display:flex;align-items:center;gap:10px;flex-wrap:wrap;}\r\n.tool-right{display:flex;align-items:center;gap:10px;}\r\n\r\n.fb-admin-table :deep(.el-table__cell){vertical-align:top;}\r\n.fb-user-name{font-weight:700;color:#111827;line-height:1.2;}\r\n.fb-user-sub{font-size:12px;color:#6b7280;margin-top:3px;}\r\n.fb-rel-main{font-weight:700;color:#111827;line-height:1.2;}\r\n.fb-rel-sub{font-size:12px;color:#6b7280;margin-top:3px;}\r\n.fb-muted{color:#9ca3af;}\r\n.fb-row-actions{display:flex;gap:8px;justify-content:flex-end;}\r\n\r\n.fb-admin-pagination{margin-top:12px;display:flex;justify-content:flex-end;}\r\n\r\n.fb-admin-drawer :deep(.el-drawer__body){padding:16px;}\r\n.fb-drawer{display:flex;flex-direction:column;gap:12px;}\r\n.fb-drawer-head{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;}\r\n.fb-drawer-title{font-size:16px;font-weight:900;color:#111827;}\r\n.fb-drawer-sub{font-size:12px;color:#6b7280;margin-top:4px;}\r\n\r\n.fb-drawer-card{border:1px solid #eef2f7;border-radius:14px;background:#fff;padding:12px;}\r\n.fb-kv{display:grid;grid-template-columns:76px 1fr;gap:10px;padding:6px 0;border-bottom:1px dashed #eef2f7;}\r\n.fb-kv:last-child{border-bottom:none;}\r\n.fb-kv .k{font-size:12px;color:#6b7280;}\r\n.fb-kv .v{font-size:13px;color:#111827;font-weight:600;}\r\n\r\n.fb-content{margin-top:10px;}\r\n.fb-content-title{font-size:12px;color:#6b7280;margin-bottom:6px;}\r\n.fb-content-body{white-space:pre-wrap;font-size:13px;line-height:1.7;color:#111827;}\r\n\r\n.fb-form-title{font-size:14px;font-weight:900;color:#111827;margin-bottom:8px;}\r\n.fb-handle-actions{display:flex;gap:10px;justify-content:flex-end;}\r\n\r\n@media (max-width: 980px){\r\n  .complaints-head{flex-direction:column;align-items:stretch;}\r\n  .complaints-head-right{justify-content:space-between;}\r\n  .fb-stats{flex:1;justify-content:space-between;}\r\n}\r\n\r\n\r\n/* ===== ç”¨æˆ·è¯¦æƒ…æŠ½å±‰ / æ–°å¢ç®¡ç†å‘˜ ===== */\r\n.user-detail-drawer :deep(.el-drawer__body){padding:16px;}\r\n.user-detail{display:flex;flex-direction:column;gap:14px;}\r\n.ud-head{display:flex;gap:12px;align-items:center;}\r\n.ud-avatar{width:44px;height:44px;border-radius:14px;background:#eef2ff;color:#3730a3;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:18px;flex-shrink:0;}\r\n.ud-meta{flex:1;min-width:0;}\r\n.ud-name-line{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}\r\n.ud-name{font-size:16px;font-weight:900;color:#111827;}\r\n.ud-tag{border-radius:999px;}\r\n.ud-sub{margin-top:4px;font-size:12px;color:#6b7280;display:flex;align-items:center;gap:6px;flex-wrap:wrap;}\r\n.ud-sub .dot{color:#cbd5e1;}\r\n.ud-stats{display:grid;grid-template-columns:1fr 1fr;gap:10px;}\r\n.ud-stat{border:1px solid #eef2f7;border-radius:14px;padding:10px 12px;background:#fff;}\r\n.ud-stat .k{font-size:12px;color:#6b7280;}\r\n.ud-stat .v{margin-top:4px;font-size:18px;font-weight:900;color:#111827;}\r\n.ud-desc :deep(.el-descriptions__label){width:92px;color:#6b7280;font-size:12px;}\r\n.ud-desc :deep(.el-descriptions__content){color:#111827;font-weight:600;font-size:13px;}\r\n.ud-muted{color:#9ca3af;font-weight:500;}\r\n.ud-section-title{font-size:13px;font-weight:900;color:#111827;margin-bottom:8px;}\r\n.ud-table :deep(.el-table__cell){vertical-align:top;}\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}