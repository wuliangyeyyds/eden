{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/esnext.json.parse.js\";\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'AiAssistantLite',\n  props: {\n    // Âª∫ËÆÆ‰ªé UserHome.vue ‰º† currentUserIdÔºõ‰∏ç‰º†‰πüËÉΩ‰ªé localStorage ÈáåÂÖúÂ∫ïËØªÂèñ\n    userId: {\n      type: [Number, String],\n      default: null\n    }\n  },\n  data() {\n    return {\n      drawerVisible: false,\n      inputText: '',\n      sending: false,\n      conversationId: '',\n      messages: [],\n      quickQuestions: ['ÊÄé‰πàÈ¢ÑÁ∫¶Â∫ß‰ΩçÔºü', 'Êàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü', '‰∏∫‰ªÄ‰πàÊàëÂèòÊàêÈ¢ÑË≠¶/ÈªëÂêçÂçïÔºü', 'Â¶Ç‰ΩïÁ≠æÂà∞/Á≠æÈÄÄÔºü']\n    };\n  },\n  computed: {\n    resolvedUserId() {\n      const p = this.userId;\n      if (p !== null && p !== undefined && String(p).trim() !== '') return Number(p);\n\n      // ÂÖúÂ∫ï‰ªéÊú¨Âú∞Â≠òÂÇ®ËØªÂèñÔºà‰∏é‰Ω†ÁöÑ UserHome.vue ‰øùÊåÅ‰∏ÄËá¥Ôºâ\n      try {\n        const raw = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser');\n        if (!raw) return null;\n        const u = JSON.parse(raw);\n        const id = u.userId ?? u.id ?? null;\n        return id === null ? null : Number(id);\n      } catch (e) {\n        return null;\n      }\n    },\n    storageKey() {\n      return `ssrms_ai_lite_${this.resolvedUserId ?? 'guest'}`;\n    }\n  },\n  watch: {\n    resolvedUserId() {\n      // Áî®Êà∑ÂàáÊç¢Êó∂ÔºåÈáçÊñ∞ËΩΩÂÖ•ËØ•Áî®Êà∑ÁöÑËÅäÂ§©ËÆ∞ÂΩï\n      if (this.drawerVisible) this.loadFromStorage();\n    }\n  },\n  methods: {\n    openDrawer() {\n      this.drawerVisible = true;\n      this.loadFromStorage();\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    loadFromStorage() {\n      try {\n        const raw = localStorage.getItem(this.storageKey);\n        if (!raw) {\n          this.messages = [];\n          this.conversationId = '';\n          return;\n        }\n        const obj = JSON.parse(raw);\n        this.messages = Array.isArray(obj.messages) ? obj.messages : [];\n        this.conversationId = obj.conversationId || '';\n      } catch (e) {\n        this.messages = [];\n        this.conversationId = '';\n      }\n    },\n    saveToStorage() {\n      try {\n        localStorage.setItem(this.storageKey, JSON.stringify({\n          conversationId: this.conversationId || '',\n          messages: this.messages || []\n        }));\n      } catch (e) {}\n    },\n    clearChat() {\n      this.messages = [];\n      this.conversationId = '';\n      this.saveToStorage();\n      ElMessage.success('Â∑≤Ê∏ÖÁ©∫ÂØπËØù');\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    useQuick(q) {\n      if (this.sending) return;\n      this.inputText = q;\n      this.$nextTick(() => this.send());\n    },\n    pushMsg(role, text) {\n      const msg = {\n        id: `${Date.now()}_${Math.random().toString(16).slice(2)}`,\n        role,\n        text: String(text ?? ''),\n        ts: Date.now()\n      };\n      this.messages.push(msg);\n      this.saveToStorage();\n      this.$nextTick(() => this.scrollToBottom());\n    },\n    formatTime(ts) {\n      try {\n        const d = new Date(ts);\n        const hh = String(d.getHours()).padStart(2, '0');\n        const mm = String(d.getMinutes()).padStart(2, '0');\n        return `${hh}:${mm}`;\n      } catch (e) {\n        return '';\n      }\n    },\n    scrollToBottom() {\n      // el-scrollbar Êö¥Èú≤ÁöÑ API ‰∏çÂêåÁâàÊú¨Áï•ÊúâÂ∑ÆÂºÇÔºåËøôÈáåÂ∞ΩÈáèÂÅöÂÖºÂÆπ\n      try {\n        const el = this.$el.querySelector('.ai-body .el-scrollbar__wrap');\n        if (el) el.scrollTop = el.scrollHeight;\n      } catch (e) {}\n    },\n    async send() {\n      const text = this.inputText.trim();\n      if (!text || this.sending) return;\n      if (!this.resolvedUserId) {\n        ElMessage.warning('Êú™Ëé∑ÂèñÂà∞Áî®Êà∑‰ø°ÊÅØÔºåËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI Âä©Êâã');\n        return;\n      }\n      this.pushMsg('user', text);\n      this.inputText = '';\n      this.sending = true;\n      try {\n        const payload = {\n          userId: this.resolvedUserId,\n          message: text,\n          conversationId: this.conversationId || null\n        };\n        const res = await this.$axios.post('/ai/chat', payload);\n        const body = res && res.data ? res.data : null;\n        if (!body || Number(body.code) !== 200) {\n          throw new Error(body && body.msg ? body.msg : 'AI ËØ∑Ê±ÇÂ§±Ë¥•');\n        }\n        const data = body.data || {};\n        if (data.conversationId) this.conversationId = data.conversationId;\n        this.pushMsg('assistant', data.reply || 'ÔºàAI Êú™ËøîÂõûÂÜÖÂÆπÔºâ');\n      } catch (e) {\n        this.pushMsg('assistant', `ÔºàÂá∫Èîô‰∫ÜÔºâ${e?.message || 'AI ËØ∑Ê±ÇÂ§±Ë¥•'}`);\n      } finally {\n        this.sending = false;\n        this.saveToStorage();\n        this.$nextTick(() => this.scrollToBottom());\n      }\n    }\n  }\n};","map":{"version":3,"names":["ElMessage","name","props","userId","type","Number","String","default","data","drawerVisible","inputText","sending","conversationId","messages","quickQuestions","computed","resolvedUserId","p","undefined","trim","raw","localStorage","getItem","sessionStorage","u","JSON","parse","id","e","storageKey","watch","loadFromStorage","methods","openDrawer","$nextTick","scrollToBottom","obj","Array","isArray","saveToStorage","setItem","stringify","clearChat","success","useQuick","q","send","pushMsg","role","text","msg","Date","now","Math","random","toString","slice","ts","push","formatTime","d","hh","getHours","padStart","mm","getMinutes","el","$el","querySelector","scrollTop","scrollHeight","warning","payload","message","res","$axios","post","body","code","Error","reply"],"sources":["D:\\code\\SpringBoot-Vue-SSRMS\\ssrms-web\\src\\components\\AiAssistantLite.vue"],"sourcesContent":["<template>\n  <div class=\"ai-lite-entry\">\n    <el-button class=\"ai-float-btn\" type=\"primary\" circle @click=\"openDrawer\" title=\"AI Ëá™‰π†ÂÆ§Âä©Êâã\">\n      ü§ñ\n    </el-button>\n\n    <el-drawer\n      v-model=\"drawerVisible\"\n      :with-header=\"false\"\n      size=\"420px\"\n      class=\"ai-drawer\"\n      :append-to-body=\"true\"\n    >\n      <div class=\"ai-header\">\n        <div class=\"ai-title\">\n          <div class=\"ai-title-main\">AI Ëá™‰π†ÂÆ§Âä©Êâã</div>\n          <div class=\"ai-title-sub\">ËΩªÈáèÁâàÔºöËÅäÂ§© + Â∞ëÈáè‰∏ä‰∏ãÊñá</div>\n        </div>\n        <div class=\"ai-actions\">\n          <el-button size=\"small\" @click=\"clearChat\" :disabled=\"sending\">Ê∏ÖÁ©∫</el-button>\n          <el-button size=\"small\" @click=\"drawerVisible = false\">ÂÖ≥Èó≠</el-button>\n        </div>\n      </div>\n\n      <div class=\"ai-quick\">\n        <el-tag\n          v-for=\"q in quickQuestions\"\n          :key=\"q\"\n          class=\"ai-chip\"\n          effect=\"plain\"\n          @click=\"useQuick(q)\"\n        >\n          {{ q }}\n        </el-tag>\n      </div>\n\n      <el-scrollbar class=\"ai-body\" ref=\"scrollbarRef\">\n        <div class=\"ai-msgs\">\n          <div\n            v-for=\"m in messages\"\n            :key=\"m.id\"\n            :class=\"['ai-msg', m.role === 'user' ? 'is-user' : 'is-ai']\"\n          >\n            <div class=\"ai-bubble\">\n              <div class=\"ai-text\" v-text=\"m.text\"></div>\n              <div class=\"ai-meta\">{{ formatTime(m.ts) }}</div>\n            </div>\n          </div>\n\n          <div v-if=\"sending\" class=\"ai-msg is-ai\">\n            <div class=\"ai-bubble\">\n              <div class=\"ai-text\">Ê≠£Âú®ÊÄùËÄÉ‚Ä¶</div>\n            </div>\n          </div>\n        </div>\n      </el-scrollbar>\n\n      <div class=\"ai-input\">\n        <el-input\n          v-model=\"inputText\"\n          type=\"textarea\"\n          :autosize=\"{ minRows: 2, maxRows: 4 }\"\n          placeholder=\"ÈóÆÊàëÔºöÊÄé‰πàÈ¢ÑÁ∫¶Ôºü‰∏∫‰ªÄ‰πàÊàëÂèòÈ¢ÑË≠¶Ôºü‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü\"\n          @keydown.enter.exact.prevent=\"send\"\n        />\n        <div class=\"ai-sendbar\">\n          <div class=\"ai-hint\">Enter ÂèëÈÄÅ ¬∑ Shift+Enter Êç¢Ë°å</div>\n          <el-button\n            type=\"primary\"\n            :loading=\"sending\"\n            :disabled=\"sending || !inputText.trim()\"\n            @click=\"send\"\n          >\n            ÂèëÈÄÅ\n          </el-button>\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'AiAssistantLite',\n  props: {\n    // Âª∫ËÆÆ‰ªé UserHome.vue ‰º† currentUserIdÔºõ‰∏ç‰º†‰πüËÉΩ‰ªé localStorage ÈáåÂÖúÂ∫ïËØªÂèñ\n    userId: {\n      type: [Number, String],\n      default: null\n    }\n  },\n  data () {\n    return {\n      drawerVisible: false,\n      inputText: '',\n      sending: false,\n      conversationId: '',\n      messages: [],\n      quickQuestions: [\n        'ÊÄé‰πàÈ¢ÑÁ∫¶Â∫ß‰ΩçÔºü',\n        'Êàë‰ªäÂ§©ÊúâÂì™‰∫õÈ¢ÑÁ∫¶Ôºü',\n        '‰∏∫‰ªÄ‰πàÊàëÂèòÊàêÈ¢ÑË≠¶/ÈªëÂêçÂçïÔºü',\n        'Â¶Ç‰ΩïÁ≠æÂà∞/Á≠æÈÄÄÔºü'\n      ]\n    }\n  },\n  computed: {\n    resolvedUserId () {\n      const p = this.userId\n      if (p !== null && p !== undefined && String(p).trim() !== '') return Number(p)\n\n      // ÂÖúÂ∫ï‰ªéÊú¨Âú∞Â≠òÂÇ®ËØªÂèñÔºà‰∏é‰Ω†ÁöÑ UserHome.vue ‰øùÊåÅ‰∏ÄËá¥Ôºâ\n      try {\n        const raw = localStorage.getItem('ssrmsUser') || sessionStorage.getItem('ssrmsUser')\n        if (!raw) return null\n        const u = JSON.parse(raw)\n        const id = u.userId ?? u.id ?? null\n        return id === null ? null : Number(id)\n      } catch (e) {\n        return null\n      }\n    },\n    storageKey () {\n      return `ssrms_ai_lite_${this.resolvedUserId ?? 'guest'}`\n    }\n  },\n  watch: {\n    resolvedUserId () {\n      // Áî®Êà∑ÂàáÊç¢Êó∂ÔºåÈáçÊñ∞ËΩΩÂÖ•ËØ•Áî®Êà∑ÁöÑËÅäÂ§©ËÆ∞ÂΩï\n      if (this.drawerVisible) this.loadFromStorage()\n    }\n  },\n  methods: {\n    openDrawer () {\n      this.drawerVisible = true\n      this.loadFromStorage()\n      this.$nextTick(() => this.scrollToBottom())\n    },\n    loadFromStorage () {\n      try {\n        const raw = localStorage.getItem(this.storageKey)\n        if (!raw) {\n          this.messages = []\n          this.conversationId = ''\n          return\n        }\n        const obj = JSON.parse(raw)\n        this.messages = Array.isArray(obj.messages) ? obj.messages : []\n        this.conversationId = obj.conversationId || ''\n      } catch (e) {\n        this.messages = []\n        this.conversationId = ''\n      }\n    },\n    saveToStorage () {\n      try {\n        localStorage.setItem(this.storageKey, JSON.stringify({\n          conversationId: this.conversationId || '',\n          messages: this.messages || []\n        }))\n      } catch (e) {}\n    },\n    clearChat () {\n      this.messages = []\n      this.conversationId = ''\n      this.saveToStorage()\n      ElMessage.success('Â∑≤Ê∏ÖÁ©∫ÂØπËØù')\n      this.$nextTick(() => this.scrollToBottom())\n    },\n    useQuick (q) {\n      if (this.sending) return\n      this.inputText = q\n      this.$nextTick(() => this.send())\n    },\n    pushMsg (role, text) {\n      const msg = {\n        id: `${Date.now()}_${Math.random().toString(16).slice(2)}`,\n        role,\n        text: String(text ?? ''),\n        ts: Date.now()\n      }\n      this.messages.push(msg)\n      this.saveToStorage()\n      this.$nextTick(() => this.scrollToBottom())\n    },\n    formatTime (ts) {\n      try {\n        const d = new Date(ts)\n        const hh = String(d.getHours()).padStart(2, '0')\n        const mm = String(d.getMinutes()).padStart(2, '0')\n        return `${hh}:${mm}`\n      } catch (e) {\n        return ''\n      }\n    },\n    scrollToBottom () {\n      // el-scrollbar Êö¥Èú≤ÁöÑ API ‰∏çÂêåÁâàÊú¨Áï•ÊúâÂ∑ÆÂºÇÔºåËøôÈáåÂ∞ΩÈáèÂÅöÂÖºÂÆπ\n      try {\n        const el = this.$el.querySelector('.ai-body .el-scrollbar__wrap')\n        if (el) el.scrollTop = el.scrollHeight\n      } catch (e) {}\n    },\n    async send () {\n      const text = this.inputText.trim()\n      if (!text || this.sending) return\n\n      if (!this.resolvedUserId) {\n        ElMessage.warning('Êú™Ëé∑ÂèñÂà∞Áî®Êà∑‰ø°ÊÅØÔºåËØ∑ÂÖàÁôªÂΩïÂêéÂÜç‰ΩøÁî® AI Âä©Êâã')\n        return\n      }\n\n      this.pushMsg('user', text)\n      this.inputText = ''\n      this.sending = true\n\n      try {\n        const payload = {\n          userId: this.resolvedUserId,\n          message: text,\n          conversationId: this.conversationId || null\n        }\n\n        const res = await this.$axios.post('/ai/chat', payload)\n        const body = res && res.data ? res.data : null\n        if (!body || Number(body.code) !== 200) {\n          throw new Error((body && body.msg) ? body.msg : 'AI ËØ∑Ê±ÇÂ§±Ë¥•')\n        }\n\n        const data = body.data || {}\n        if (data.conversationId) this.conversationId = data.conversationId\n        this.pushMsg('assistant', data.reply || 'ÔºàAI Êú™ËøîÂõûÂÜÖÂÆπÔºâ')\n      } catch (e) {\n        this.pushMsg('assistant', `ÔºàÂá∫Èîô‰∫ÜÔºâ${e?.message || 'AI ËØ∑Ê±ÇÂ§±Ë¥•'}`)\n      } finally {\n        this.sending = false\n        this.saveToStorage()\n        this.$nextTick(() => this.scrollToBottom())\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ai-lite-entry {\n  position: fixed;\n  right: 22px;\n  bottom: 22px;\n  z-index: 3000;\n}\n\n.ai-float-btn {\n  width: 52px;\n  height: 52px;\n  font-size: 20px;\n  box-shadow: 0 10px 22px rgba(0,0,0,0.18);\n}\n\n.ai-drawer {\n  --ai-pad: 14px;\n}\n\n.ai-header {\n  padding: var(--ai-pad);\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 10px;\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n}\n\n.ai-title-main {\n  font-weight: 700;\n  font-size: 16px;\n  line-height: 1.2;\n}\n.ai-title-sub {\n  font-size: 12px;\n  color: rgba(0,0,0,0.55);\n  margin-top: 4px;\n}\n\n.ai-actions {\n  display: flex;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.ai-quick {\n  padding: 10px var(--ai-pad);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  border-bottom: 1px solid rgba(0,0,0,0.06);\n}\n.ai-chip {\n  cursor: pointer;\n  user-select: none;\n}\n\n.ai-body {\n  height: calc(100vh - 260px);\n  padding: 10px var(--ai-pad);\n}\n\n.ai-msgs {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.ai-msg {\n  display: flex;\n}\n.ai-msg.is-user {\n  justify-content: flex-end;\n}\n.ai-msg.is-ai {\n  justify-content: flex-start;\n}\n\n.ai-bubble {\n  max-width: 86%;\n  padding: 10px 12px;\n  border-radius: 12px;\n  box-shadow: 0 6px 16px rgba(0,0,0,0.08);\n  background: #ffffff;\n}\n\n.ai-msg.is-user .ai-bubble {\n  background: rgba(64,158,255,0.12);\n}\n\n.ai-text {\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-size: 13px;\n  line-height: 1.55;\n}\n\n.ai-meta {\n  margin-top: 6px;\n  font-size: 11px;\n  color: rgba(0,0,0,0.45);\n  text-align: right;\n}\n\n.ai-input {\n  padding: 12px var(--ai-pad) 14px;\n  border-top: 1px solid rgba(0,0,0,0.06);\n  background: #fff;\n}\n\n.ai-sendbar {\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 10px;\n}\n\n.ai-hint {\n  font-size: 12px;\n  color: rgba(0,0,0,0.5);\n}\n</style>\n"],"mappings":";;;AAkFA,SAASA,SAAQ,QAAS,cAAa;AAEvC,eAAe;EACbC,IAAI,EAAE,iBAAiB;EACvBC,KAAK,EAAE;IACL;IACAC,MAAM,EAAE;MACNC,IAAI,EAAE,CAACC,MAAM,EAAEC,MAAM,CAAC;MACtBC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,IAAGA,CAAA,EAAK;IACN,OAAO;MACLC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,KAAK;MACdC,cAAc,EAAE,EAAE;MAClBC,QAAQ,EAAE,EAAE;MACZC,cAAc,EAAE,CACd,SAAS,EACT,WAAW,EACX,eAAe,EACf,UAAS;IAEb;EACF,CAAC;EACDC,QAAQ,EAAE;IACRC,cAAaA,CAAA,EAAK;MAChB,MAAMC,CAAA,GAAI,IAAI,CAACd,MAAK;MACpB,IAAIc,CAAA,KAAM,IAAG,IAAKA,CAAA,KAAMC,SAAQ,IAAKZ,MAAM,CAACW,CAAC,CAAC,CAACE,IAAI,CAAC,MAAM,EAAE,EAAE,OAAOd,MAAM,CAACY,CAAC;;MAE7E;MACA,IAAI;QACF,MAAMG,GAAE,GAAIC,YAAY,CAACC,OAAO,CAAC,WAAW,KAAKC,cAAc,CAACD,OAAO,CAAC,WAAW;QACnF,IAAI,CAACF,GAAG,EAAE,OAAO,IAAG;QACpB,MAAMI,CAAA,GAAIC,IAAI,CAACC,KAAK,CAACN,GAAG;QACxB,MAAMO,EAAC,GAAIH,CAAC,CAACrB,MAAK,IAAKqB,CAAC,CAACG,EAAC,IAAK,IAAG;QAClC,OAAOA,EAAC,KAAM,IAAG,GAAI,IAAG,GAAItB,MAAM,CAACsB,EAAE;MACvC,EAAE,OAAOC,CAAC,EAAE;QACV,OAAO,IAAG;MACZ;IACF,CAAC;IACDC,UAASA,CAAA,EAAK;MACZ,OAAO,iBAAiB,IAAI,CAACb,cAAa,IAAK,OAAO,EAAC;IACzD;EACF,CAAC;EACDc,KAAK,EAAE;IACLd,cAAaA,CAAA,EAAK;MAChB;MACA,IAAI,IAAI,CAACP,aAAa,EAAE,IAAI,CAACsB,eAAe,CAAC;IAC/C;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,UAASA,CAAA,EAAK;MACZ,IAAI,CAACxB,aAAY,GAAI,IAAG;MACxB,IAAI,CAACsB,eAAe,CAAC;MACrB,IAAI,CAACG,SAAS,CAAC,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;IAC5C,CAAC;IACDJ,eAAcA,CAAA,EAAK;MACjB,IAAI;QACF,MAAMX,GAAE,GAAIC,YAAY,CAACC,OAAO,CAAC,IAAI,CAACO,UAAU;QAChD,IAAI,CAACT,GAAG,EAAE;UACR,IAAI,CAACP,QAAO,GAAI,EAAC;UACjB,IAAI,CAACD,cAAa,GAAI,EAAC;UACvB;QACF;QACA,MAAMwB,GAAE,GAAIX,IAAI,CAACC,KAAK,CAACN,GAAG;QAC1B,IAAI,CAACP,QAAO,GAAIwB,KAAK,CAACC,OAAO,CAACF,GAAG,CAACvB,QAAQ,IAAIuB,GAAG,CAACvB,QAAO,GAAI,EAAC;QAC9D,IAAI,CAACD,cAAa,GAAIwB,GAAG,CAACxB,cAAa,IAAK,EAAC;MAC/C,EAAE,OAAOgB,CAAC,EAAE;QACV,IAAI,CAACf,QAAO,GAAI,EAAC;QACjB,IAAI,CAACD,cAAa,GAAI,EAAC;MACzB;IACF,CAAC;IACD2B,aAAYA,CAAA,EAAK;MACf,IAAI;QACFlB,YAAY,CAACmB,OAAO,CAAC,IAAI,CAACX,UAAU,EAAEJ,IAAI,CAACgB,SAAS,CAAC;UACnD7B,cAAc,EAAE,IAAI,CAACA,cAAa,IAAK,EAAE;UACzCC,QAAQ,EAAE,IAAI,CAACA,QAAO,IAAK;QAC7B,CAAC,CAAC;MACJ,EAAE,OAAOe,CAAC,EAAE,CAAC;IACf,CAAC;IACDc,SAAQA,CAAA,EAAK;MACX,IAAI,CAAC7B,QAAO,GAAI,EAAC;MACjB,IAAI,CAACD,cAAa,GAAI,EAAC;MACvB,IAAI,CAAC2B,aAAa,CAAC;MACnBvC,SAAS,CAAC2C,OAAO,CAAC,OAAO;MACzB,IAAI,CAACT,SAAS,CAAC,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;IAC5C,CAAC;IACDS,QAAOA,CAAGC,CAAC,EAAE;MACX,IAAI,IAAI,CAAClC,OAAO,EAAE;MAClB,IAAI,CAACD,SAAQ,GAAImC,CAAA;MACjB,IAAI,CAACX,SAAS,CAAC,MAAM,IAAI,CAACY,IAAI,CAAC,CAAC;IAClC,CAAC;IACDC,OAAMA,CAAGC,IAAI,EAAEC,IAAI,EAAE;MACnB,MAAMC,GAAE,GAAI;QACVvB,EAAE,EAAE,GAAGwB,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE;QAC1DR,IAAI;QACJC,IAAI,EAAE3C,MAAM,CAAC2C,IAAG,IAAK,EAAE,CAAC;QACxBQ,EAAE,EAAEN,IAAI,CAACC,GAAG,CAAC;MACf;MACA,IAAI,CAACvC,QAAQ,CAAC6C,IAAI,CAACR,GAAG;MACtB,IAAI,CAACX,aAAa,CAAC;MACnB,IAAI,CAACL,SAAS,CAAC,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;IAC5C,CAAC;IACDwB,UAASA,CAAGF,EAAE,EAAE;MACd,IAAI;QACF,MAAMG,CAAA,GAAI,IAAIT,IAAI,CAACM,EAAE;QACrB,MAAMI,EAAC,GAAIvD,MAAM,CAACsD,CAAC,CAACE,QAAQ,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG;QAC/C,MAAMC,EAAC,GAAI1D,MAAM,CAACsD,CAAC,CAACK,UAAU,CAAC,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,EAAE,GAAG;QACjD,OAAO,GAAGF,EAAE,IAAIG,EAAE,EAAC;MACrB,EAAE,OAAOpC,CAAC,EAAE;QACV,OAAO,EAAC;MACV;IACF,CAAC;IACDO,cAAaA,CAAA,EAAK;MAChB;MACA,IAAI;QACF,MAAM+B,EAAC,GAAI,IAAI,CAACC,GAAG,CAACC,aAAa,CAAC,8BAA8B;QAChE,IAAIF,EAAE,EAAEA,EAAE,CAACG,SAAQ,GAAIH,EAAE,CAACI,YAAW;MACvC,EAAE,OAAO1C,CAAC,EAAE,CAAC;IACf,CAAC;IACD,MAAMkB,IAAGA,CAAA,EAAK;MACZ,MAAMG,IAAG,GAAI,IAAI,CAACvC,SAAS,CAACS,IAAI,CAAC;MACjC,IAAI,CAAC8B,IAAG,IAAK,IAAI,CAACtC,OAAO,EAAE;MAE3B,IAAI,CAAC,IAAI,CAACK,cAAc,EAAE;QACxBhB,SAAS,CAACuE,OAAO,CAAC,yBAAyB;QAC3C;MACF;MAEA,IAAI,CAACxB,OAAO,CAAC,MAAM,EAAEE,IAAI;MACzB,IAAI,CAACvC,SAAQ,GAAI,EAAC;MAClB,IAAI,CAACC,OAAM,GAAI,IAAG;MAElB,IAAI;QACF,MAAM6D,OAAM,GAAI;UACdrE,MAAM,EAAE,IAAI,CAACa,cAAc;UAC3ByD,OAAO,EAAExB,IAAI;UACbrC,cAAc,EAAE,IAAI,CAACA,cAAa,IAAK;QACzC;QAEA,MAAM8D,GAAE,GAAI,MAAM,IAAI,CAACC,MAAM,CAACC,IAAI,CAAC,UAAU,EAAEJ,OAAO;QACtD,MAAMK,IAAG,GAAIH,GAAE,IAAKA,GAAG,CAAClE,IAAG,GAAIkE,GAAG,CAAClE,IAAG,GAAI,IAAG;QAC7C,IAAI,CAACqE,IAAG,IAAKxE,MAAM,CAACwE,IAAI,CAACC,IAAI,MAAM,GAAG,EAAE;UACtC,MAAM,IAAIC,KAAK,CAAEF,IAAG,IAAKA,IAAI,CAAC3B,GAAG,GAAI2B,IAAI,CAAC3B,GAAE,GAAI,SAAS;QAC3D;QAEA,MAAM1C,IAAG,GAAIqE,IAAI,CAACrE,IAAG,IAAK,CAAC;QAC3B,IAAIA,IAAI,CAACI,cAAc,EAAE,IAAI,CAACA,cAAa,GAAIJ,IAAI,CAACI,cAAa;QACjE,IAAI,CAACmC,OAAO,CAAC,WAAW,EAAEvC,IAAI,CAACwE,KAAI,IAAK,YAAY;MACtD,EAAE,OAAOpD,CAAC,EAAE;QACV,IAAI,CAACmB,OAAO,CAAC,WAAW,EAAE,QAAQnB,CAAC,EAAE6C,OAAM,IAAK,SAAS,EAAE;MAC7D,UAAU;QACR,IAAI,CAAC9D,OAAM,GAAI,KAAI;QACnB,IAAI,CAAC4B,aAAa,CAAC;QACnB,IAAI,CAACL,SAAS,CAAC,MAAM,IAAI,CAACC,cAAc,CAAC,CAAC;MAC5C;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}